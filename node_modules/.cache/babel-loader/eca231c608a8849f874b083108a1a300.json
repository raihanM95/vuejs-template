{"remainingRequest":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\cash-counter\\PatientPayment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\cash-counter\\PatientPayment.js","mtime":1636009473021},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9EaWFnbm9zdGljQ2VudGVyTWFuYWdlbWVudF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgUGF0aWVudFBheW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvY2FzaC1jb3VudGVyL1BhdGllbnRQYXltZW50U2VydmljZSI7CmltcG9ydCBQYXRpZW50UmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QYXRpZW50UmVwb3J0U2VydmljZSI7CmltcG9ydCBDb21tb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvQ29tbW9uU2VydmljZSI7CmltcG9ydCBEb2N0b3JBcHBvaW50bWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL0RvY3RvckFwcG9pbnRtZW50U2VydmljZSI7CmltcG9ydCBQYXltZW50VHlwZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1BheW1lbnRUeXBlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yIH0gZnJvbSAicHJpbWV2dWUvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1BheW1lbnQ6IHRydWUsCiAgICAgIGFkZExpc3Q6IGZhbHNlLAogICAgICBidXR0b246IGZhbHNlLAogICAgICBpc0Nhc2g6IGZhbHNlLAogICAgICBpc1BhaWQ6ICIiLAogICAgICBpc0R1ZUV4aXN0OiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIHBheW1lbnRUeXBlTGlzdDogW10sCiAgICAgIHRvdGFsUHR5QW1vdW50OiAwLAogICAgICBwYXRpZW50UGF5bWVudDogewogICAgICAgIGNkcGF5bWVudF9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBwdHlwYWlkX2Ftb3VudDogMCwKICAgICAgICBwYXltZW50VHlwZUNhc2g6ICIxIiwKICAgICAgICBpbnZvaWNlX2lkOiAiIiwKICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgbHN0UGF0aWVudFBheW1lbnREZXRhaWxzOiBbXQogICAgICB9LAogICAgICBmaWx0ZXJzOiB7CiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgfSwKICAgICAgICBuYW1lOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgfQogICAgICB9LAogICAgICBpbml0RmlsdGVyczogZnVuY3Rpb24gaW5pdEZpbHRlcnMoKSB7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gewogICAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgICAgfSwKICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCwKICAgICAgICAgICAgY29uc3RyYWludHM6IFt7CiAgICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICAgICAgfV0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5wYXRpZW50UGF5bWVudFNlcnZpY2UgPSBuZXcgUGF0aWVudFBheW1lbnRTZXJ2aWNlKCk7CiAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZSA9IG5ldyBEb2N0b3JBcHBvaW50bWVudFNlcnZpY2UoKTsKICAgIHRoaXMucGF5bWVudFR5cGVTZXR1cFNlcnZpY2UgPSBuZXcgUGF5bWVudFR5cGVTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLnBheW1lbnRUeXBlU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnBheW1lbnRUeXBlTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgcHJpbnRBcHBvaW50bWVudFBheW1lbnQ6IGZ1bmN0aW9uIHByaW50QXBwb2ludG1lbnRQYXltZW50KElkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRBcHBvaW50bWVudFBheW1lbnQoSWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHBheW1lbnRSZXNldDogZnVuY3Rpb24gcGF5bWVudFJlc2V0KCkgewogICAgICB0aGlzLmlzUGF5bWVudCA9IHRydWU7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuZGRsUGF5bWVudFR5cGUgPSAiIjsKICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmlzUGF5bWVudCA9IHRydWU7CiAgICAgIHRoaXMuYWRkTGlzdCA9IGZhbHNlOwogICAgICB0aGlzLmJ1dHRvbiA9IGZhbHNlOwogICAgICB0aGlzLmlzQ2FzaCA9IGZhbHNlOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc1BhaWQgPSAiIjsKICAgICAgdGhpcy50b3RhbFB0eUFtb3VudCA9IDA7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQgPSB7CiAgICAgICAgY2RwYXltZW50X2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHB0eXBhaWRfYW1vdW50OiAwLAogICAgICAgIHBheW1lbnRUeXBlQ2FzaDogIjEiLAogICAgICAgIGNhc2hfcGFpZF9hbW91bnQ6IDAsCiAgICAgICAgaW52b2ljZV9pZDogIiIsCiAgICAgICAgYVBhdGllbnQ6IHt9LAogICAgICAgIGxzdFBhdGllbnRQYXltZW50RGV0YWlsczogW10KICAgICAgfTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICBmaWx0ZXJQYXltZW50VHlwZTogZnVuY3Rpb24gZmlsdGVyUGF5bWVudFR5cGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnBheW1lbnRUeXBlTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnBheW1lbnRfdHlwZV9pZCAhPSAxICYmIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBnZXRGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZChkYXRhKSB7CiAgICAgIGlmIChkYXRhLmR1ZV9hbW91bnQgPT0gMCkgewogICAgICAgIHRoaXMuaXNEdWVFeGlzdCA9ICJOb3QgZHVlISI7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudCA9IHsKICAgICAgICAgIHBheW1lbnRUeXBlQ2FzaDogIjEiLAogICAgICAgICAgaW52b2ljZV9pZDogIiIsCiAgICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgICBsc3RQYXRpZW50UGF5bWVudERldGFpbHM6IFtdCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRHVlRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50Lmludm9pY2VfaWQgPSBkYXRhLmludm9pY2VfaWQ7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5hUGF0aWVudC5wYXRpZW50X2lkID0gZGF0YS5hUGF0aWVudC5wYXRpZW50X2lkOwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuYVBhdGllbnQuZmlyc3RfbmFtZSA9IGRhdGEuYVBhdGllbnQuZmlyc3RfbmFtZTsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LmFQYXRpZW50LmNvbnRhY3Rfbm8gPSBkYXRhLmFQYXRpZW50LmNvbnRhY3Rfbm87CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5fZGVwYXJ0bWVudF9uYW1lID0gZGF0YS5fZGVwYXJ0bWVudF9uYW1lOwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuX2RvY3Rvcl9uYW1lID0gZGF0YS5fZG9jdG9yX25hbWU7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5jb25zdWx0YW5jeV9mZWUgPSBkYXRhLmNvbnN1bHRhbmN5X2ZlZTsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LnNlcmlhbF9ubyA9IGRhdGEuc2VyaWFsX25vOwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuX2J1aWxkaW5nX25hbWUgPSBkYXRhLl9idWlsZGluZ19uYW1lOwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuX3Jvb21fbmFtZSA9IGRhdGEuX3Jvb21fbmFtZTsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LnRvdGFsX2Ftb3VudCA9IGRhdGEudG90YWxfYW1vdW50OwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCA9IGRhdGEudG90YWxfYW1vdW50OwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQucGFpZF9hbW91bnQgPSBkYXRhLnRvdGFsX2Ftb3VudDsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LnB0eXBhaWRfYW1vdW50ID0gZGF0YS50b3RhbF9hbW91bnQ7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5jZGFwcG9pbnRfZGF0ZSA9IG1vbWVudChTdHJpbmcoZGF0YS5hcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgfQogICAgfSwKICAgIGZpbmRBcHBvaW5tZW50OiBmdW5jdGlvbiBmaW5kQXBwb2lubWVudCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZS5nZXRCeUlkKHRoaXMucGF0aWVudFBheW1lbnQuYXBwb2lubWVudF9ubykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMuZ2V0Rm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHBheW1lbnRUeXBlSXNFeGlzdDogZnVuY3Rpb24gcGF5bWVudFR5cGVJc0V4aXN0KCkgewogICAgICB2YXIgYVBheW1lbnRUeXBlID0gdGhpcy5wYXRpZW50UGF5bWVudC5sc3RQYXRpZW50UGF5bWVudERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wYXltZW50X3R5cGVfaWQgPT09IHRoaXMucGF0aWVudFBheW1lbnQuZGRsUGF5bWVudFR5cGUucGF5bWVudF90eXBlX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhUGF5bWVudFR5cGUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlRoaXMgUGF5bWVudCBUeXBlIGFscmVhZHkgYWRkZWQiOwogICAgICAgIHRoaXMuaXNQYXltZW50ID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdGhpcy5pc1BheW1lbnQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFkZFBheW1lbnRUeXBlOiBmdW5jdGlvbiBhZGRQYXltZW50VHlwZSgpIHsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICB2YXIgYVBheW1lbnRUeXBlID0gdGhpcy5wYXRpZW50UGF5bWVudC5sc3RQYXRpZW50UGF5bWVudERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wYXltZW50X3R5cGVfaWQgPT09IHRoaXMucGF0aWVudFBheW1lbnQuZGRsUGF5bWVudFR5cGUucGF5bWVudF90eXBlX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhUGF5bWVudFR5cGUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlRoaXMgUGF5bWVudCBUeXBlIGFscmVhZHkgYWRkZWQiOyAvL3RoaXMuaXNQYXltZW50ID0gdHJ1ZTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghdGhpcy5wYXRpZW50UGF5bWVudC5hUGF0aWVudC5maXJzdF9uYW1lKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50UGF5bWVudC5jZHBheW1lbnRfZGF0ZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucGF0aWVudFBheW1lbnQuZGRsUGF5bWVudFR5cGUpIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICJQYXltZW50IFR5cGUgaXMgcmVxdWlyZWQuIjsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGF0aWVudFBheW1lbnQucHR5cGFpZF9hbW91bnQgPD0gMCAmJiAhdGhpcy5wYXRpZW50UGF5bWVudC5wdHlwYWlkX2Ftb3VudCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50IDw9IDAgfHwgdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50IDwgdGhpcy5wYXRpZW50UGF5bWVudC5wdHlwYWlkX2Ftb3VudCkgewogICAgICAgICAgdGhpcy5pc1BhaWQgPSAiRXhjZWVkIGFtb3VudCEiOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICAgIHRoaXMuaXNQYWlkID0gIiI7CiAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBwYXltZW50X3R5cGVfaWQ6IHRoaXMucGF0aWVudFBheW1lbnQuZGRsUGF5bWVudFR5cGUucGF5bWVudF90eXBlX2lkLAogICAgICAgICAgICBfcGF5bWVudF90eXBlX25hbWU6IHRoaXMucGF0aWVudFBheW1lbnQuZGRsUGF5bWVudFR5cGUucGF5bWVudF90eXBlX25hbWUsCiAgICAgICAgICAgIHBhaWRfYW1vdW50OiBwYXJzZUludCh0aGlzLnBhdGllbnRQYXltZW50LnB0eXBhaWRfYW1vdW50KQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQubHN0UGF0aWVudFBheW1lbnREZXRhaWxzLnB1c2gob2JqKTsgLy8gdGhpcy50b3RhbFB0eUFtb3VudCA9CiAgICAgICAgICAvLyAgIHRoaXMudG90YWxQdHlBbW91bnQgKyBwYXJzZUludCh0aGlzLnBhdGllbnRQYXltZW50LnB0eXBhaWRfYW1vdW50KTsKICAgICAgICAgIC8vIHRoaXMucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCA9CiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50IC0gdGhpcy50b3RhbFB0eUFtb3VudDsKCiAgICAgICAgICB0aGlzLmdyaWRTdW0oKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWRkTGlzdCA9IHRydWU7CiAgICAgIHRoaXMuYnV0dG9uID0gdHJ1ZTsKICAgIH0sCiAgICBkZWxldGVGcm9tTGlzdDogZnVuY3Rpb24gZGVsZXRlRnJvbUxpc3QoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRQYXltZW50LmxzdFBhdGllbnRQYXltZW50RGV0YWlscyA9IHRoaXMucGF0aWVudFBheW1lbnQubHN0UGF0aWVudFBheW1lbnREZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucGF5bWVudF90eXBlX2lkICE9IGRhdGEucGF5bWVudF90eXBlX2lkOwogICAgICB9LCB0aGlzKTsgLy8gdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50ID0KICAgICAgLy8gICB0aGlzLnBhdGllbnRQYXltZW50LmNhc2hfcGFpZF9hbW91bnQgKyBwYXJzZUludChkYXRhLnBhaWRfYW1vdW50KTsKCiAgICAgIGlmICghdGhpcy5wYXRpZW50UGF5bWVudC5sc3RQYXRpZW50UGF5bWVudERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5hZGRMaXN0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5idXR0b24gPSBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5ncmlkU3VtKCk7CiAgICB9LAogICAgZ3JpZFN1bTogZnVuY3Rpb24gZ3JpZFN1bSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRQYXltZW50LnRvdGFsX2Ftb3VudF9pbmYgPSAwOwogICAgICB0aGlzLnBhdGllbnRQYXltZW50LmxzdFBhdGllbnRQYXltZW50RGV0YWlscy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM0LnBhdGllbnRQYXltZW50LnRvdGFsX2Ftb3VudF9pbmYgKz0gZWxlbWVudC5wYWlkX2Ftb3VudDsKICAgICAgfSk7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCA9IHRoaXMucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50IC0gdGhpcy5wYXRpZW50UGF5bWVudC50b3RhbF9hbW91bnRfaW5mOwogICAgfSwKICAgIGNhbGN1bGF0ZUNoYW5nZUFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlQ2hhbmdlQW1vdW50KCkgewogICAgICBpZiAodGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX2Ftb3VudC5sZW5ndGgpIHsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LmNoYW5nZV9hbW91bnQgPSB0aGlzLnBhdGllbnRQYXltZW50LmNhc2hfYW1vdW50IC0gdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuY2hhbmdlX2Ftb3VudCA9IDA7CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM1LnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM1LnBhdGllbnRQYXltZW50LmFQYXRpZW50LmZpcnN0X25hbWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM1LnBhdGllbnRQYXltZW50LmNkcGF5bWVudF9kYXRlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM1LnBhdGllbnRQYXltZW50Lmludm9pY2VfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF90aGlzNS5wYXRpZW50UGF5bWVudC5wYXltZW50X2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzNS5wYXRpZW50UGF5bWVudC5jZHBheW1lbnRfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCA+IDAgJiYgIV90aGlzNS5pc0Nhc2gpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LnBhdGllbnRQYXltZW50LmxzdFBhdGllbnRQYXltZW50RGV0YWlscy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXltZW50X3R5cGVfaWQ6IF90aGlzNS5wYXRpZW50UGF5bWVudC5wYXltZW50VHlwZUNhc2gsCiAgICAgICAgICAgICAgICAgICAgcGFpZF9hbW91bnQ6IF90aGlzNS5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LmlzQ2FzaCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5wYXRpZW50UGF5bWVudFNlcnZpY2UuYWRkKF90aGlzNS5wYXRpZW50UGF5bWVudCwgX3RoaXM1KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTYXZlZCBTdWNlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczUucHJpbnRBcHBvaW50bWVudFBheW1lbnQocmVzdWx0LmRhdGEpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LnJlc2V0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LnJlc2V0KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXM1LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfY29udGV4dC50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzNS5yZXNldCgpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCAyMl1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/SVN PROJECTS/DiagnosticCenterManagement_Client/trunk/src/scripts/cash-counter/PatientPayment.js"],"names":["PatientPaymentService","PatientReportService","CommonService","DoctorAppointmentService","PaymentTypeSetupService","moment","FilterMatchMode","FilterOperator","data","isPayment","addList","button","isCash","isPaid","isDueExist","isExist","paymentTypeList","totalPtyAmount","patientPayment","cdpayment_date","String","Date","format","ptypaid_amount","paymentTypeCash","invoice_id","aPatient","lstPatientPaymentDetails","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","created","patientPaymentService","doctorAppointmentService","paymentTypeSetupService","patientReportService","commonService","getAll","then","methods","printAppointmentPayment","Id","GetAppointmentPayment","Downloadfile","paymentReset","ddlPaymentType","reset","cash_paid_amount","filterPaymentType","filter","el","payment_type_id","active","getFormatted","due_amount","patient_id","first_name","contact_no","_department_name","_doctor_name","consultancy_fee","serial_no","_building_name","_room_name","total_amount","paid_amount","cdappoint_date","appoint_date","findAppoinment","getById","appoinment_no","paymentTypeIsExist","aPaymentType","length","addPaymentType","obj","_payment_type_name","payment_type_name","parseInt","push","gridSum","deleteFromList","total_amount_inf","forEach","element","calculateChangeAmount","cash_amount","change_amount","add","payment_date","result","status","$toast","severity","summary","detail","life","res"],"mappings":"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","sourcesContent":["import PatientPaymentService from \"../../service/cash-counter/PatientPaymentService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\nimport PaymentTypeSetupService from \"../../service/setup/PaymentTypeSetupService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isPayment: true,\r\n      addList: false,\r\n      button: false,\r\n      isCash: false,\r\n      isPaid: \"\",\r\n      isDueExist: \"\",\r\n      isExist: \"\",\r\n      paymentTypeList: [],\r\n      totalPtyAmount: 0,\r\n      patientPayment: {\r\n        cdpayment_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        ptypaid_amount: 0,\r\n        paymentTypeCash: \"1\",\r\n        invoice_id: \"\",\r\n        aPatient: {},\r\n        lstPatientPaymentDetails: [],\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.patientPaymentService = new PatientPaymentService();\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.paymentTypeSetupService = new PaymentTypeSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.commonService = new CommonService();\r\n\r\n    this.paymentTypeSetupService\r\n      .getAll()\r\n      .then((data) => (this.paymentTypeList = data.data));\r\n  },\r\n  methods: {\r\n    printAppointmentPayment(Id){\r\n      this.patientReportService.GetAppointmentPayment(Id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    paymentReset() {\r\n      this.isPayment = true;\r\n      this.patientPayment.ddlPaymentType = \"\";\r\n      this.isExist = \"\";\r\n    },\r\n    reset() {\r\n      this.isPayment = true;\r\n      this.addList = false;\r\n      this.button = false;\r\n      this.isCash = false;\r\n      this.isExist = \"\";\r\n      this.isPaid = \"\";\r\n      this.totalPtyAmount = 0;\r\n      this.patientPayment = {\r\n        cdpayment_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        ptypaid_amount: 0,\r\n        paymentTypeCash: \"1\",\r\n        cash_paid_amount: 0,\r\n        invoice_id: \"\",\r\n        aPatient: {},\r\n        lstPatientPaymentDetails: [],\r\n      };\r\n      this.submitted = false;\r\n    },\r\n    filterPaymentType() {\r\n      return this.paymentTypeList.filter(function (el) {\r\n        return el.payment_type_id != 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      if (data.due_amount == 0) {\r\n        this.isDueExist = \"Not due!\";\r\n        this.patientPayment = {\r\n          paymentTypeCash: \"1\",\r\n          invoice_id: \"\",\r\n          aPatient: {},\r\n          lstPatientPaymentDetails: [],\r\n        };\r\n      } else {\r\n        this.isDueExist = \"\";\r\n        this.patientPayment.invoice_id = data.invoice_id;\r\n        this.patientPayment.aPatient.patient_id = data.aPatient.patient_id;\r\n        this.patientPayment.aPatient.first_name = data.aPatient.first_name;\r\n        this.patientPayment.aPatient.contact_no = data.aPatient.contact_no;\r\n        this.patientPayment._department_name = data._department_name;\r\n        this.patientPayment._doctor_name = data._doctor_name;\r\n        this.patientPayment.consultancy_fee = data.consultancy_fee;\r\n        this.patientPayment.serial_no = data.serial_no;\r\n        this.patientPayment._building_name = data._building_name;\r\n        this.patientPayment._room_name = data._room_name;\r\n        this.patientPayment.total_amount = data.total_amount;\r\n        this.patientPayment.cash_paid_amount = data.total_amount;\r\n        this.patientPayment.paid_amount = data.total_amount;\r\n        this.patientPayment.ptypaid_amount = data.total_amount;\r\n\r\n        this.patientPayment.cdappoint_date = moment(\r\n          String(data.appoint_date)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    findAppoinment() {\r\n      this.doctorAppointmentService\r\n        .getById(this.patientPayment.appoinment_no)\r\n        .then((data) => this.getFormatted(data.data));\r\n    },\r\n\r\n    paymentTypeIsExist() {\r\n      var aPaymentType = this.patientPayment.lstPatientPaymentDetails.filter(\r\n        function (el) {\r\n          return (\r\n            el.payment_type_id ===\r\n            this.patientPayment.ddlPaymentType.payment_type_id\r\n          );\r\n        },\r\n        this\r\n      );\r\n\r\n      if (aPaymentType.length) {\r\n        this.isExist = \"This Payment Type already added\";\r\n        this.isPayment = true;\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        this.isPayment = false;\r\n      }\r\n    },\r\n    addPaymentType() {\r\n      this.submitted = true;\r\n      var aPaymentType = this.patientPayment.lstPatientPaymentDetails.filter(\r\n        function (el) {\r\n          return (\r\n            el.payment_type_id ===\r\n            this.patientPayment.ddlPaymentType.payment_type_id\r\n          );\r\n        },\r\n        this\r\n      );\r\n\r\n      if (aPaymentType.length) {\r\n        this.isExist = \"This Payment Type already added\";\r\n        //this.isPayment = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientPayment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.patientPayment.cdpayment_date) {\r\n          return;\r\n        } else if (!this.patientPayment.ddlPaymentType) {\r\n          this.isExist = \"Payment Type is required.\";\r\n          return;\r\n        } else if (\r\n          this.patientPayment.ptypaid_amount <= 0 &&\r\n          !this.patientPayment.ptypaid_amount\r\n        ) {\r\n          return;\r\n        } else if (this.patientPayment.cash_paid_amount <= 0 || this.patientPayment.cash_paid_amount < this.patientPayment.ptypaid_amount) {\r\n          this.isPaid = \"Exceed amount!\";\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          this.isPaid = \"\";\r\n\r\n          var obj = {\r\n            payment_type_id: this.patientPayment.ddlPaymentType.payment_type_id,\r\n            _payment_type_name:\r\n              this.patientPayment.ddlPaymentType.payment_type_name,\r\n\r\n            paid_amount: parseInt(this.patientPayment.ptypaid_amount),\r\n          };\r\n\r\n          this.patientPayment.lstPatientPaymentDetails.push(obj);\r\n\r\n          // this.totalPtyAmount =\r\n          //   this.totalPtyAmount + parseInt(this.patientPayment.ptypaid_amount);\r\n\r\n          // this.patientPayment.cash_paid_amount =\r\n          //   this.patientPayment.total_amount - this.totalPtyAmount;\r\n          this.gridSum();\r\n        }\r\n      }\r\n\r\n      this.addList = true;\r\n      this.button = true;\r\n    },\r\n\r\n    deleteFromList(data) {\r\n      this.patientPayment.lstPatientPaymentDetails =\r\n        this.patientPayment.lstPatientPaymentDetails.filter(function (el) {\r\n          return el.payment_type_id != data.payment_type_id;\r\n        }, this);\r\n\r\n      // this.patientPayment.cash_paid_amount =\r\n      //   this.patientPayment.cash_paid_amount + parseInt(data.paid_amount);\r\n\r\n      if (!this.patientPayment.lstPatientPaymentDetails.length) {\r\n        this.addList = false;\r\n        this.button = false;\r\n      }\r\n      this.gridSum();\r\n    },\r\n    gridSum() {\r\n      this.patientPayment.total_amount_inf = 0;\r\n      this.patientPayment.lstPatientPaymentDetails.forEach((element) => {\r\n        this.patientPayment.total_amount_inf += element.paid_amount;\r\n      });\r\n      this.patientPayment.cash_paid_amount =\r\n        this.patientPayment.total_amount - this.patientPayment.total_amount_inf;\r\n    },\r\n    calculateChangeAmount() {\r\n      if (this.patientPayment.cash_amount.length) {\r\n        this.patientPayment.change_amount =\r\n          this.patientPayment.cash_amount -\r\n          this.patientPayment.cash_paid_amount;\r\n      } else {\r\n        this.patientPayment.change_amount = 0;\r\n      }\r\n    },\r\n    async add() {\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.patientPayment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.patientPayment.cdpayment_date) {\r\n          return;\r\n        } else if (!this.patientPayment.invoice_id) {\r\n          return;\r\n        } else {\r\n          this.patientPayment.payment_date = moment(\r\n            String(this.patientPayment.cdpayment_date)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (this.patientPayment.cash_paid_amount > 0 && !this.isCash) {\r\n            this.patientPayment.lstPatientPaymentDetails.push({\r\n              payment_type_id: this.patientPayment.paymentTypeCash,\r\n\r\n              paid_amount: this.patientPayment.cash_paid_amount,\r\n            });\r\n\r\n            this.isCash = true;\r\n          }\r\n\r\n          let result = await this.patientPaymentService.add(\r\n            this.patientPayment, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Sucess\",\r\n              detail: \"Saved Sucessfully\",\r\n              life: 10000,\r\n            });\r\n            this.printAppointmentPayment(result.data);\r\n            this.reset();\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Faild\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n            this.reset();\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Faild\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n        this.reset();\r\n      }\r\n    },\r\n  },\r\n};"]}]}