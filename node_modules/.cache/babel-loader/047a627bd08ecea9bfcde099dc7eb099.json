{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\nurse-panel\\AdmittedPatientRequest.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\nurse-panel\\AdmittedPatientRequest.js","mtime":1668663405791},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOi9TVk4gUFJPSkVDVFMvRVJQX0hvc3BpdGFsX0NsaWVudC90cnVuay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjovU1ZOIFBST0pFQ1RTL0VSUF9Ib3NwaXRhbF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgQWRtaXNzaW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svQWRtaXNzaW9uU2VydmljZSI7CmltcG9ydCBBZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcHJlc2NyaXB0aW9uL0FkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBWYWxpZGF0aW9uIGZyb20gIi4uLy4uL3NjcmlwdHMvdmFsaWRhdGlvbiI7CmltcG9ydCB7IEZpbHRlclNlcnZpY2UsIEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOyAvLyBJbnZlc3RpZ2F0aW9uIFJlcXVlc3QKCmltcG9ydCBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9QYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIjsgLy9pbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKCmltcG9ydCBQYXRpZW50UmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QYXRpZW50UmVwb3J0U2VydmljZSI7IC8vaW1wb3J0IERlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvRGVzaWduYXRpb25TZXR1cFNlcnZpY2UiOwoKaW1wb3J0IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSI7CmltcG9ydCBEb2N0b3JTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Eb2N0b3JTZXR1cFNlcnZpY2UiOyAvL2ltcG9ydCBFbXBsb3llZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0VtcGxveWVlU2V0dXBTZXJ2aWNlIjsKCmltcG9ydCBCdWlsZGluZ1NldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0J1aWxkaW5nU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJvb21TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Sb29tU2V0dXBTZXJ2aWNlIjsgLy9pbXBvcnQgUmVmZXJyZWRCeVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1JlZmVycmVkQnlTZXR1cFNlcnZpY2UiOwoKaW1wb3J0IEludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9JbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFByb2R1Y3RTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Qcm9kdWN0U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IElQRFJlcXVlc3RTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvaXBkL0lQRFJlcXVlc3RTZXJ2aWNlIjsgLy8gU2VydmljZSAmIFBhY2thZ2UKCmltcG9ydCBTZXJ2aWNlU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvU2VydmljZVNldHVwU2VydmljZSI7CmltcG9ydCBTZXJ2aWNlUGFja2FnZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1NlcnZpY2VQYWNrYWdlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IElQRFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9pcGQvSVBEU2VydmljZSI7IC8vIFBoYXJtYWN5CgppbXBvcnQgTWVkaWNpbmVSZXF1ZXN0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3BoYXJtYWN5L01lZGljaW5lUmVxdWVzdFNlcnZpY2UiOwppbXBvcnQgSVBEUmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9JUERSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IE1lZGljaW5lU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvTWVkaWNpbmVTZXR1cFNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRlcmVkSXRlbXM6IG51bGwsCiAgICAgIGRhdGFMaXN0OiB0cnVlLAogICAgICBpc051cnNlOiBmYWxzZSwKICAgICAgaXNSZXF1ZXN0OiBmYWxzZSwKICAgICAgcGhhcm1hY3k6IGZhbHNlLAogICAgICBhY3RpdmU6IDAsCiAgICAgIGV4cGFuZGVkUm93czogW10sCiAgICAgIGFkbWl0dGVkUGF0aWVudExpc3Q6IFtdLAogICAgICBhZG1pdHRlZFBhdGllbnQ6IHsKICAgICAgICAvLyBjZGZyb21kYXRlOiBtb21lbnQoCiAgICAgICAgLy8gICAgIFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgLSA4NjApKSkKICAgICAgICAvLyApLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIGNkZnJvbWRhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIGNkdG9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSAvLyBjZHRvZGF0ZTogbW9tZW50KAogICAgICAgIC8vICAgICBTdHJpbmcobmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgNykpKQogICAgICAgIC8vICkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCgogICAgICB9LAogICAgICAvLwogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBmaWx0ZXJzOiB7CiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgfSwKICAgICAgICBuYW1lOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgfQogICAgICB9LAogICAgICBpbml0RmlsdGVyczogZnVuY3Rpb24gaW5pdEZpbHRlcnMoKSB7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gewogICAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgICAgfSwKICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCwKICAgICAgICAgICAgY29uc3RyYWludHM6IFt7CiAgICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICAgICAgfV0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICAvLyBJbnZlc3RpZ2F0aW9uIFJlcXVlc3QKICAgICAgYWRtaXNzaW9uX2lkOiBudWxsLAogICAgICBwYXRpZW50X2lkOiBudWxsLAogICAgICBkb2N0b3JfaWQ6IG51bGwsCiAgICAgIGRvY3Rvcl9ubzogbnVsbCwKICAgICAgcmVmZmVyZWRfYnlfaWQ6IG51bGwsCiAgICAgIGludmVzdGlnYXRpb25SZXF1ZXN0RGlhbG9nOiBmYWxzZSwKICAgICAgbHN0UHJlc2NyaXB0aW9uSW52ZXN0aWdhdGlvbjogW10sCiAgICAgIC8vaXNJbnZlc3RpZ2F0aW9uOiB0cnVlLAogICAgICAvL2lzUHJlc2NyaXB0aW9uOiBmYWxzZSwKICAgICAgLy9pc0NvbnRhY3RFeGlzdDogIiIsCiAgICAgIC8vaXNWYWxpZDogIiIsCiAgICAgIC8vaXNFbWFpbFZhbGlkOiAiIiwKICAgICAgLy9pc1BhdGllbnRFeGlzdDogIiIsCiAgICAgIGlzRXhpc3Q6ICIiLAogICAgICAvL2NvbGxlY3Rpb25MaXN0OiBbXSwKICAgICAgLy9ibG9vZEdyb3VwTGlzdDogW10sCiAgICAgIC8vZ2VuZGVyTGlzdDogW10sCiAgICAgIC8vZGVzaWduYXRpb250TGlzdDogW10sCiAgICAgIC8vZGVwYXJ0bWVudExpc3Q6IFtdLAogICAgICAvL2RvY3Rvckxpc3Q6IFtdLAogICAgICBidWlsZGluZ0xpc3Q6IFtdLAogICAgICByb29tTGlzdDogW10sCiAgICAgIC8vcmVmZXJyZWRCeUxpc3Q6IFtdLAogICAgICAvL2VtcGxveWVlTGlzdDogW10sCiAgICAgIC8vZGlzY291bnRCeUxpc3Q6IFtdLAogICAgICBpbnZlc3RpZ2F0aW9uTGlzdDogW10sCiAgICAgIHJlcG9ydERlbGl2ZXJ5VHlwZUxpc3Q6IFtdLAogICAgICBwcm9kdWN0TGlzdDogW10sCiAgICAgIHBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdDogewogICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7CiAgICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgICB9LAogICAgICAgIGNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHJlcG9ydF9kZWxpdmVyeV90eXBlOiAiUmVndWxhciIsCiAgICAgICAgbHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzOiBbXSwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhcjogW10sCiAgICAgICAgZGlzY291bnRfYnlfaWQ6ICJDb21wYW55IiwKICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAwLAogICAgICAgIGRpc2NvdW50X2Ftb3VudDogMCwKICAgICAgICBjb3N0X3ByaWNlOiAwLAogICAgICAgIHBhcnRpY3VsYXJfY29zdF9wcmljZTogMCwKICAgICAgICB0b3RhbF9hbW91bnQ6IDAKICAgICAgfSwKICAgICAgZGlzY291bnRCeUxpc3Q6IFt7CiAgICAgICAgdGV4dDogIkJvdGgiLAogICAgICAgIHZhbHVlOiAiQm90aCIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJIb3NwaXRhbCIsCiAgICAgICAgdmFsdWU6ICJDb21wYW55IgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIlJlZmVyZW5jZSIsCiAgICAgICAgdmFsdWU6ICJSZWZlcmVuY2UiCiAgICAgIH1dLAogICAgICAvLyBJbnZlc3RpZ2F0aW9uIFJlcXVlc3QKICAgICAgaVBESW52ZXN0aWdhdGlvblJlcXVlc3RMaXN0OiBbXSwKICAgICAgaVBESW52ZXN0aWdhdGlvblJlcXVlc3Q6IHsKICAgICAgICBpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfaWQ6IG51bGwsCiAgICAgICAgYWRtaXNzaW9uX2lkOiBudWxsCiAgICAgIH0sCiAgICAgIC8vIFBoYXJtYWN5CiAgICAgIGludm9pY2VfaWQ6IG51bGwsCiAgICAgIGFkbWlzc2lvbl9ubzogbnVsbCwKICAgICAgcmVnaXN0cmF0aW9uX25vOiBudWxsLAogICAgICBwYXRpZW50X25hbWU6IG51bGwsCiAgICAgIGlQRE1lZGljaW5lUmVxdWVzdExpc3Q6IFtdLAogICAgICBpUERQcmVzY3JpcHRpb25MaXN0OiBbXSwKICAgICAgaVBEUHJlc2NyaXB0aW9uTWVkaWNpbmVMaXN0OiBbXSwKICAgICAgaVBETWVkaWNpbmVSZXF1ZXN0OiB7CiAgICAgICAgbHN0TWVkaWNpbmVSZXF1ZXN0RGV0YWlsczogW10KICAgICAgfSwKICAgICAgaVBETWVkaWNpbmVSZXF1ZXN0RGlhbG9nOiBmYWxzZSwKICAgICAgYWRkTWVkaWNpbmVEaWFsb2c6IGZhbHNlLAogICAgICBhZGRNZWRpY2luZToge30sCiAgICAgIG1lZGljaW5lTGlzdDogW10sCiAgICAgIC8vIFNlcnZpY2UKICAgICAgc2VydmljZURpYWxvZzogZmFsc2UsCiAgICAgIGlQRFNlcnZpY2VPYmo6IHsKICAgICAgICBsc3RTZXJ2aWNlOiBbXQogICAgICB9LAogICAgICAvLyBQYWNrYWdlCiAgICAgIHNlcnZpY2VQYWNrYWdlRGlhbG9nOiBmYWxzZSwKICAgICAgaVBEU2VydmljZVBhY2thZ2VPYmo6IHsKICAgICAgICBsc3RTZXJ2aWNlUGFja2FnZTogW10KICAgICAgfSwKICAgICAgLy8gVGFrZW4gU2VydmljZSAmIFBhY2thZ2UKICAgICAgdGFrZW5TZXJ2aWNlUGFja2FnZURpYWxvZzogZmFsc2UsCiAgICAgIHRha2VuU2VydmljZVBhY2thZ2VPYmo6IHsKICAgICAgICBsc3RUYWtlblNlcnZpY2U6IFtdLAogICAgICAgIGxhc3RUYWtlblNlcnZpY2VQYWNrYWdlOiBbXQogICAgICB9LAogICAgICAvLyBSb3VuZCBEb2N0b3IKICAgICAgZGVwYXJ0bWVudExpc3Q6IFtdLAogICAgICBkb2N0b3JMaXN0OiBbXSwKICAgICAgYXNzaWduUm91bmREb2N0b3I6IHt9LAogICAgICByb3VuZERvY3Rvckxpc3Q6IFtdLAogICAgICBsaXN0Um91bmREb2N0b3JEaWFsb2c6IGZhbHNlLAogICAgICByb3VuZERvY3RvckRpYWxvZzogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmFkbWlzc2lvblNlcnZpY2UgPSBuZXcgQWRtaXNzaW9uU2VydmljZSgpOwogICAgdGhpcy5hZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlID0gbmV3IEFkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLnZhbGlkYXRpb24gPSBuZXcgVmFsaWRhdGlvbigpOwogICAgdGhpcy51c2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIikpOwogICAgdGhpcy5zaG93KCk7CgogICAgaWYgKHRoaXMudXNlckluZm8ubnVyc2VfaWQpIHsKICAgICAgdGhpcy5pc051cnNlID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAoIXRoaXMudXNlckluZm8ubnVyc2VfaWQpIHsKICAgICAgdGhpcy5pc051cnNlID0gZmFsc2U7CiAgICB9IC8vIEludmVzdGlnYXRpb24gUmVxdWVzdAoKCiAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgPSBuZXcgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSgpOyAvL3RoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIC8vdGhpcy5lbXBsb3llZVNldHVwU2VydmljZSA9IG5ldyBFbXBsb3llZVNldHVwU2VydmljZSgpOwoKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlID0gbmV3IERvY3RvclNldHVwU2VydmljZSgpOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UgPSBuZXcgQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlKCk7IC8vdGhpcy5kZXNpZ25hdGlvblNldHVwU2VydmljZSA9IG5ldyBEZXNpZ25hdGlvblNldHVwU2VydmljZSgpOwoKICAgIHRoaXMuYnVpbGRpbmdTZXR1cFNlcnZpY2UgPSBuZXcgQnVpbGRpbmdTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucm9vbVNldHVwU2VydmljZSA9IG5ldyBSb29tU2V0dXBTZXJ2aWNlKCk7IC8vdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlID0gbmV3IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UoKTsKCiAgICB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UgPSBuZXcgSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSgpOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXR1cFNlcnZpY2UoKTsgLy90aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UgPSBuZXcgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSgpOwoKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsgLy90aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UoKTsKCiAgICB0aGlzLmlQRFJlcXVlc3RTZXJ2aWNlID0gbmV3IElQRFJlcXVlc3RTZXJ2aWNlKCk7IC8vIFNlcnZpY2UgJiBQYWNrYWdlCgogICAgdGhpcy5zZXJ2aWNlU2V0dXBTZXJ2aWNlID0gbmV3IFNlcnZpY2VTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuc2VydmljZVBhY2thZ2VTZXR1cFNlcnZpY2UgPSBuZXcgU2VydmljZVBhY2thZ2VTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuaVBEU2VydmljZSA9IG5ldyBJUERTZXJ2aWNlKCk7IC8vIFBoYXJtYWN5CgogICAgdGhpcy5tZWRpY2luZVJlcXVlc3RTZXJ2aWNlID0gbmV3IE1lZGljaW5lUmVxdWVzdFNlcnZpY2UoKTsKICAgIHRoaXMuaVBEUmVwb3J0U2VydmljZSA9IG5ldyBJUERSZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLm1lZGljaW5lU2V0dXBTZXJ2aWNlID0gbmV3IE1lZGljaW5lU2V0dXBTZXJ2aWNlKCk7IC8vIHRoaXMuY29tbW9uU2VydmljZQogICAgLy8gICAgIC5HZXRBbGxHZW5kZXIoKQogICAgLy8gICAgIC50aGVuKChkYXRhKSA9PiAodGhpcy5nZW5kZXJMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLmNvbW1vblNlcnZpY2UKICAgIC8vICAgICAuR2V0QWxsQmxvb2RHcm91cCgpCiAgICAvLyAgICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmJsb29kR3JvdXBMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLmRlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlCiAgICAvLyAgICAgLmdldEFsbCgpCiAgICAvLyAgICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmRlc2lnbmF0aW9udExpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMuY29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlCiAgICAvLyAgICAgLmdldEFjdGl2ZUNvbWJvKCkKICAgIC8vICAgICAudGhlbigoZGF0YSkgPT4gKHRoaXMuZGVwYXJ0bWVudExpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMuYnVpbGRpbmdTZXR1cFNlcnZpY2UKICAgIC8vICAgICAuZ2V0QWxsKCkKICAgIC8vICAgICAudGhlbigoZGF0YSkgPT4gKHRoaXMuYnVpbGRpbmdMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLnJvb21TZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbigoZGF0YSkgPT4gKHRoaXMucm9vbUxpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWN0aXZlQ29tYm8oKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gKHRoaXMucmVmZXJyZWRCeUxpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWN0aXZlQ29tYm8oKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSkpOwogICAgLy8gdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlCiAgICAvLyAgIC5nZXRBbGwoKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSkpOwogICAgLy8gdGhpcy5kb2N0b3JTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFsbCgpCiAgICAvLyAgIC50aGVuKChkYXRhKSA9PiB0aGlzLm1lcmdlRG9jdG9ySW5mbyhkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMuZW1wbG95ZWVTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFsbCgpCiAgICAvLyAgIC50aGVuKChkYXRhKSA9PiB0aGlzLm1lcmdlRW1wbG95ZWVJbmZvKGRhdGEuZGF0YSkpOwoKICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5pbnZlc3RpZ2F0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOyAvLyB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UKICAgIC8vICAgICAuZ2V0QWxsKCkKICAgIC8vICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5mb3JtYXRJbnZlc3RpZ2F0aW9uTGlzdChkYXRhLmRhdGEpKTsKCiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsUmVwb3J0RGVsaXZlcnlUeXBlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVwb3J0RGVsaXZlcnlUeXBlTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByb2R1Y3RMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7IC8vIFNlcnZpY2UgJiBQYWNrYWdlCgogICAgdGhpcy5nZXRTZXJ2aWNlKCk7CiAgICB0aGlzLmdldFNlcnZpY2VQYWNrYWdlKCk7IC8vCgogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UuZ2V0QWN0aXZlQ29tYm8oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZXBhcnRtZW50TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5kb2N0b3JTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VEb2N0b3JJbmZvKGRhdGEuZGF0YSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNlcnZpY2U6IGZ1bmN0aW9uIGdldFNlcnZpY2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zZXJ2aWNlU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnNlcnZpY2VGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0U2VydmljZVBhY2thZ2U6IGZ1bmN0aW9uIGdldFNlcnZpY2VQYWNrYWdlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuc2VydmljZVBhY2thZ2VTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMuc2VydmljZVBhY2thZ2VGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMuYWRtaXR0ZWRQYXRpZW50LmNkZnJvbWRhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYWRtaXR0ZWRQYXRpZW50LmNkdG9kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50LmZyb21kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmFkbWl0dGVkUGF0aWVudC5jZGZyb21kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnQudG9kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmFkbWl0dGVkUGF0aWVudC5jZHRvZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMudXNlckluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpKTsKICAgICAgICB0aGlzLmFkbWlzc2lvblNlcnZpY2UuYWRtaXR0ZWRQYXRpZW50TGlzdEZvckhpc3RvcnlCeU51cnNlSWQodGhpcy5hZG1pdHRlZFBhdGllbnQuZnJvbWRhdGUsIHRoaXMuYWRtaXR0ZWRQYXRpZW50LnRvZGF0ZSwgdGhpcy51c2VySW5mby5udXJzZV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5hZG1pdHRlZFBhdGllbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgfSwKICAgIGhpZGVEaWFsb2c6IGZ1bmN0aW9uIGhpZGVEaWFsb2coKSB7CiAgICAgIC8vdmFyIHBhdGllbnRJZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInBhdGllbnRJZEZvclRyZWF0bWVudCIpKS50b1N0cmluZygpOwogICAgICB0aGlzLnJvdW5kRG9jdG9yRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMubGlzdFJvdW5kRG9jdG9yRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VydmljZVBhY2thZ2VEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy50YWtlblNlcnZpY2VQYWNrYWdlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VydmljZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmludmVzdGlnYXRpb25SZXF1ZXN0RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuaVBETWVkaWNpbmVSZXF1ZXN0RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuYWRkTWVkaWNpbmVEaWFsb2cgPSBmYWxzZSwgdGhpcy5hZGRNZWRpY2luZSA9IHt9LCB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIGhpZGVDb2xsZWN0aW9uUmVxdWVzdDogZnVuY3Rpb24gaGlkZUNvbGxlY3Rpb25SZXF1ZXN0KCkgewogICAgICB0aGlzLmlzUmVxdWVzdCA9IGZhbHNlOwogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsgLy9sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGF0aWVudElkRm9yVHJlYXRtZW50Jyk7CiAgICB9LAogICAgY29sbGVjdGlvblJlcXVlc3Q6IGZ1bmN0aW9uIGNvbGxlY3Rpb25SZXF1ZXN0KGRhdGEpIHsKICAgICAgdGhpcy5nZXRJUERJbnZlc3RpZ2F0aW9uUmVxdWVzdEJ5QWRtaXNzaW9uSWQoZGF0YS5hZG1pc3Npb25faWQpOwogICAgICB0aGlzLmdldE1lZGljaW5lUmVxdWVzdExpc3RCeUFkbWlzc2lvbk5vKGRhdGEuYWRtaXNzaW9uX25vKTsKICAgICAgdGhpcy5pbnZvaWNlX2lkID0gZGF0YS5pbnZvaWNlX2lkOwogICAgICB0aGlzLmFkbWlzc2lvbl9pZCA9IGRhdGEuYWRtaXNzaW9uX2lkOwogICAgICB0aGlzLmFkbWlzc2lvbl9ubyA9IGRhdGEuYWRtaXNzaW9uX25vOwogICAgICB0aGlzLnBhdGllbnRfaWQgPSBkYXRhLnBhdGllbnRfaWQ7CiAgICAgIHRoaXMucmVnaXN0cmF0aW9uX25vID0gZGF0YS5yZWdpc3RyYXRpb25fbm87CiAgICAgIHRoaXMucGF0aWVudF9uYW1lID0gZGF0YS5wYXRpZW50X25hbWU7CiAgICAgIHRoaXMuZG9jdG9yX2lkID0gZGF0YS5kb2N0b3JfaWQ7CiAgICAgIHRoaXMuZG9jdG9yX25vID0gZGF0YS5kb2Nfbm87CiAgICAgIHRoaXMucmVmZmVyZWRfYnlfaWQgPSBkYXRhLnJlZmZlcmVkX2J5X2lkOwogICAgICB0aGlzLmlzUmVxdWVzdCA9IHRydWU7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSBmYWxzZTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICB9LAogICAgZm9ybWF0RGF0ZVRpbWU6IGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIGg6bW06c3MgYSIpOwogICAgfSwKICAgIC8vIEludmVzdGlnYXRpb24gUmVxdWVzdAogICAgZ2V0SVBESW52ZXN0aWdhdGlvblJlcXVlc3RCeUFkbWlzc2lvbklkOiBmdW5jdGlvbiBnZXRJUERJbnZlc3RpZ2F0aW9uUmVxdWVzdEJ5QWRtaXNzaW9uSWQoYWRtaXNzaW9uX2lkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5pUERSZXF1ZXN0U2VydmljZS5nZXRJUERJbnZlc3RpZ2F0aW9uUmVxdWVzdEJ5QWRtaXNzaW9uSWQoYWRtaXNzaW9uX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5pUERJbnZlc3RpZ2F0aW9uUmVxdWVzdExpc3QgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHByaW50SW52ZXN0aWdhdGlvblRva2VuOiBmdW5jdGlvbiBwcmludEludmVzdGlnYXRpb25Ub2tlbihpZCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0SW52ZXN0aWdhdGlvblRva2VuKGlkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNi5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBuZXdJbnZlc3RpZ2F0aW9uUmVxdWVzdDogZnVuY3Rpb24gbmV3SW52ZXN0aWdhdGlvblJlcXVlc3QoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdGhpcy5hZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlLmdldFByZXNjcmlwdGlvbkludmVzdGlnYXRpb25CeUFkbWlzc2lvbklkKHRoaXMuYWRtaXNzaW9uX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNy5wcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHByZXNjcmlwdGlvbkludmVzdGlnYXRpb246IGZ1bmN0aW9uIHByZXNjcmlwdGlvbkludmVzdGlnYXRpb24oZGF0YSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHRoaXMubHN0UHJlc2NyaXB0aW9uSW52ZXN0aWdhdGlvbiA9IFtdOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczgubHN0UHJlc2NyaXB0aW9uSW52ZXN0aWdhdGlvbi5wdXNoKHsKICAgICAgICAgIGFkbWlzc2lvbl9pZDogZWxlbWVudC5hZG1pc3Npb25faWQsCiAgICAgICAgICBpbnZlc3RpZ2F0aW9uX2lkOiBlbGVtZW50LmludmVzdGlnYXRpb25faWQsCiAgICAgICAgICBpbnZlc3RpbmdhdGlvbl9uYW1lOiBlbGVtZW50LmludmVzdGluZ2F0aW9uX25hbWUsCiAgICAgICAgICBpc0NoZWNrOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5pbnZlc3RpZ2F0aW9uUmVxdWVzdERpYWxvZyA9IHRydWU7CiAgICB9LAogICAgaW52ZXN0aWdhdGlvblJlcXVlc3Q6IGZ1bmN0aW9uIGludmVzdGlnYXRpb25SZXF1ZXN0KCkgewogICAgICB0aGlzLmxzdFByZXNjcmlwdGlvbkludmVzdGlnYXRpb24gPSB0aGlzLmxzdFByZXNjcmlwdGlvbkludmVzdGlnYXRpb24uZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pc0NoZWNrID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLmdldEZvcm1hdHRlZFByZXNjcmlwdGlvbldpc2VJbnZlc3RpZ2F0aW9ucyh0aGlzLmxzdFByZXNjcmlwdGlvbkludmVzdGlnYXRpb24pOwogICAgfSwKICAgIGlQREludmVzdGlnYXRpb25SZXF1ZXN0U2F2ZTogZnVuY3Rpb24gaVBESW52ZXN0aWdhdGlvblJlcXVlc3RTYXZlKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM5LmlQREludmVzdGlnYXRpb25SZXF1ZXN0LmludmVzdGlnYXRpb25fcmVxdWVzdF9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmIChfdGhpczkuaVBESW52ZXN0aWdhdGlvblJlcXVlc3QuYWRtaXNzaW9uX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS5pUERSZXF1ZXN0U2VydmljZS5pUERJbnZlc3RpZ2F0aW9uUmVxdWVzdFNhdmUoX3RoaXM5LmlQREludmVzdGlnYXRpb25SZXF1ZXN0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczkuZ2V0SVBESW52ZXN0aWdhdGlvblJlcXVlc3RCeUFkbWlzc2lvbklkKF90aGlzOS5hZG1pc3Npb25faWQpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM5LnJlc2V0KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczkuaGlkZURpYWxvZygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXM5LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczkuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfY29udGV4dC50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAxNV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gUGhhcm1hY3kKICAgIGdldE1lZGljaW5lUmVxdWVzdExpc3RCeUFkbWlzc2lvbk5vOiBmdW5jdGlvbiBnZXRNZWRpY2luZVJlcXVlc3RMaXN0QnlBZG1pc3Npb25ObyhhZG1pc3Npb25fbm8pIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdGhpcy5tZWRpY2luZVJlcXVlc3RTZXJ2aWNlLmdldE1lZGljaW5lUmVxdWVzdExpc3RCeUFkbWlzc2lvbk5vKGFkbWlzc2lvbl9ubykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczEwLmlQRE1lZGljaW5lUmVxdWVzdExpc3QgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHByaW50TWVkaWNpbmVSZXF1ZXN0OiBmdW5jdGlvbiBwcmludE1lZGljaW5lUmVxdWVzdChpZCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICB0aGlzLmlQRFJlcG9ydFNlcnZpY2UuR2V0TWVkaWNpbmVSZXF1ZXN0VG9rZW4oaWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMS5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBuZXdNZWRpY2luZVJlcXVlc3Q6IGZ1bmN0aW9uIG5ld01lZGljaW5lUmVxdWVzdCgpIHsKICAgICAgdGhpcy5pUERNZWRpY2luZVJlcXVlc3QubHN0TWVkaWNpbmVSZXF1ZXN0RGV0YWlscyA9IFtdOwogICAgICB0aGlzLnBoYXJtYWN5ID0gdHJ1ZTsKICAgICAgdGhpcy5pc1JlcXVlc3QgPSBmYWxzZTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IGZhbHNlOwogICAgfSwKICAgIHByZXNjcmliZU1lZGljaW5lOiBmdW5jdGlvbiBwcmVzY3JpYmVNZWRpY2luZSgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdGhpcy5pUERNZWRpY2luZVJlcXVlc3QuYWRtaXNzaW9uX3ByZXNjcmlwdGlvbl9pZCA9IG51bGw7CiAgICAgIHRoaXMuaVBEUHJlc2NyaXB0aW9uTWVkaWNpbmVMaXN0ID0gW107CiAgICAgIHRoaXMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZS5nZXRQcmVzY3JpcHRpb25Ob0J5QWRtaXNzaW9uSWQodGhpcy5hZG1pc3Npb25faWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMi5wcmVzY3JpcHRpb25ObyhkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBwcmVzY3JpcHRpb25ObzogZnVuY3Rpb24gcHJlc2NyaXB0aW9uTm8oZGF0YSkgewogICAgICB0aGlzLmlQRFByZXNjcmlwdGlvbkxpc3QgPSBkYXRhOwogICAgICB0aGlzLmlQRE1lZGljaW5lUmVxdWVzdERpYWxvZyA9IHRydWU7CiAgICB9LAogICAgaGlkZU1lZGljaW5lUmVxdWVzdDogZnVuY3Rpb24gaGlkZU1lZGljaW5lUmVxdWVzdCgpIHsKICAgICAgdGhpcy5waGFybWFjeSA9IGZhbHNlOwogICAgICB0aGlzLmlzUmVxdWVzdCA9IHRydWU7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSBmYWxzZTsKICAgIH0sCiAgICBnZXRQcmVzY3JpcHRpb25EYXRhOiBmdW5jdGlvbiBnZXRQcmVzY3JpcHRpb25EYXRhKCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pUERNZWRpY2luZVJlcXVlc3QuYWRtaXNzaW9uX3ByZXNjcmlwdGlvbl9pZCkgewogICAgICAgIHRoaXMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZS5nZXRQcmVzY3JpcHRpb25EYXRhQnlQcmVzY3JpcHRpb25JZCh0aGlzLmlQRE1lZGljaW5lUmVxdWVzdC5hZG1pc3Npb25fcHJlc2NyaXB0aW9uX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxMy5wcmVzY3JpcHRpb25EYXRhKGRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwcmVzY3JpcHRpb25EYXRhOiBmdW5jdGlvbiBwcmVzY3JpcHRpb25EYXRhKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdGhpcy5pUERQcmVzY3JpcHRpb25NZWRpY2luZUxpc3QgPSBbXTsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMxNC5pUERQcmVzY3JpcHRpb25NZWRpY2luZUxpc3QucHVzaCh7CiAgICAgICAgICBtZWRpY2luZV9pZDogZWxlbWVudC5tZWRpY2luZV9pZCwKICAgICAgICAgIG1lZGljaW5lX25hbWU6IGVsZW1lbnQubWVkaWNpbmVfbmFtZSwKICAgICAgICAgIGJhcmNvZGU6IGVsZW1lbnQuYmFyY29kZSwKICAgICAgICAgIHRyZWF0bWVudF9ydWxlX25hbWU6IGVsZW1lbnQudHJlYXRtZW50X3J1bGVfbmFtZSwKICAgICAgICAgIHRyZWF0bWVudF9kdXJhdGlvbl9uYW1lOiBlbGVtZW50LnRyZWF0bWVudF9kdXJhdGlvbl9uYW1lLAogICAgICAgICAgdHJlYXRtZW50X2Rvc2VfbmFtZTogZWxlbWVudC50cmVhdG1lbnRfZG9zZV9uYW1lLAogICAgICAgICAgbWVkaWNpbmVfZ2VuZXJpY19uYW1lOiBlbGVtZW50Lm1lZGljaW5lX2dlbmVyaWNfbmFtZSwKICAgICAgICAgIHN0cmdlbnRoOiBlbGVtZW50LnN0cmdlbnRoLAogICAgICAgICAgbWVkaWNpbmVfdHlwZV9uYW1lOiBlbGVtZW50Lm1lZGljaW5lX3R5cGVfbmFtZSwKICAgICAgICAgIHVvbV9uYW1lOiBlbGVtZW50LnVvbV9uYW1lLAogICAgICAgICAgbWFudWZhY3R1cmVyX25hbWU6IGVsZW1lbnQubWFudWZhY3R1cmVyX25hbWUsCiAgICAgICAgICByZXF1ZXN0X3F0eTogMSwKICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEFkZCBNZWRpY2luZQogICAgYWRkTmV3TWVkaWNpbmU6IGZ1bmN0aW9uIGFkZE5ld01lZGljaW5lKCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICB0aGlzLm1lZGljaW5lU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxNS5nZXRNZWRpY2luZUxpc3QoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TWVkaWNpbmVMaXN0OiBmdW5jdGlvbiBnZXRNZWRpY2luZUxpc3QoZGF0YSkgewogICAgICB0aGlzLm1lZGljaW5lTGlzdCA9IGRhdGE7CiAgICAgIHRoaXMuYWRkTWVkaWNpbmVEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIHNlYXJjaE1lZGljaW5lOiBmdW5jdGlvbiBzZWFyY2hNZWRpY2luZShldmVudCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIWV2ZW50LnF1ZXJ5LnRyaW0oKS5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzMTYuZmlsdGVyZWRJdGVtcyA9IF90b0NvbnN1bWFibGVBcnJheShfdGhpczE2Lm1lZGljaW5lTGlzdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHN0YXJ0IHdpdGgKICAgICAgICAgIC8vIHRoaXMuZmlsdGVyZWRJdGVtcyA9IHRoaXMubWVkaWNpbmVMaXN0LmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgICAgLy8gICAgIHJldHVybiBpdGVtLnRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGV2ZW50LnF1ZXJ5LnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgLy8gfSk7CiAgICAgICAgICAvLyBjb250YWlucwogICAgICAgICAgX3RoaXMxNi5maWx0ZXJlZEl0ZW1zID0gRmlsdGVyU2VydmljZS5maWx0ZXIoX3RoaXMxNi5tZWRpY2luZUxpc3QsIFsnbWVkaWNpbmVfbmFtZSddLCBldmVudC5xdWVyeS50b0xvd2VyQ2FzZSgpLCBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMpLnNsaWNlKDAsIDEwKTsKICAgICAgICB9CiAgICAgIH0sIDI1MCk7CiAgICB9LAogICAgYWRkUmVxdWVzdE1lZGljaW5lOiBmdW5jdGlvbiBhZGRSZXF1ZXN0TWVkaWNpbmUoKSB7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsKCiAgICAgIGlmICghdGhpcy5hZGRNZWRpY2luZS5kZGxtZWRpY2luZSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5hZGRNZWRpY2luZS5yZXF1ZXN0X3F0eSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlQRFByZXNjcmlwdGlvbk1lZGljaW5lTGlzdC5wdXNoKHsKICAgICAgICAgIG1lZGljaW5lX2lkOiB0aGlzLmFkZE1lZGljaW5lLmRkbG1lZGljaW5lLm1lZGljaW5lX2lkLAogICAgICAgICAgbWVkaWNpbmVfbmFtZTogdGhpcy5hZGRNZWRpY2luZS5kZGxtZWRpY2luZS5tZWRpY2luZV9uYW1lLAogICAgICAgICAgYmFyY29kZTogdGhpcy5hZGRNZWRpY2luZS5kZGxtZWRpY2luZS5iYXJjb2RlLAogICAgICAgICAgbWVkaWNpbmVfZ2VuZXJpY19uYW1lOiB0aGlzLmFkZE1lZGljaW5lLmRkbG1lZGljaW5lLl9tZWRpY2luZV9nZW5lcmljX25hbWUsCiAgICAgICAgICBzdHJnZW50aDogdGhpcy5hZGRNZWRpY2luZS5kZGxtZWRpY2luZS5zdHJnZW50aCwKICAgICAgICAgIG1lZGljaW5lX3R5cGVfbmFtZTogdGhpcy5hZGRNZWRpY2luZS5kZGxtZWRpY2luZS5fbWVkaWNpbmVfdHlwZV9uYW1lLAogICAgICAgICAgdW9tX25hbWU6IHRoaXMuYWRkTWVkaWNpbmUuZGRsbWVkaWNpbmUuX3VvbV9uYW1lLAogICAgICAgICAgbWVkaWNpbmVfbWFudWZhY3R1cmVyX25hbWU6IHRoaXMuYWRkTWVkaWNpbmUuZGRsbWVkaWNpbmUuX21hbnVmYWN0dXJlcl9uYW1lLAogICAgICAgICAgaXNDaGVjazogdHJ1ZSwKICAgICAgICAgIHJlcXVlc3RfcXR5OiB0aGlzLmFkZE1lZGljaW5lLnJlcXVlc3RfcXR5CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRSZXF1ZXN0TWVkaWNpbmUoKTsKICAgIH0sCiAgICBzZXRSZXF1ZXN0TWVkaWNpbmU6IGZ1bmN0aW9uIHNldFJlcXVlc3RNZWRpY2luZSgpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlckRhdGEgPSB0aGlzLmlQRFByZXNjcmlwdGlvbk1lZGljaW5lTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmlzQ2hlY2sgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBhTWVkaWNpbmUgPSBfdGhpczE3LmlQRE1lZGljaW5lUmVxdWVzdC5sc3RNZWRpY2luZVJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5tZWRpY2luZV9pZCA9PT0gZWxlbWVudC5tZWRpY2luZV9pZDsKICAgICAgICB9LCBfdGhpczE3KTsKCiAgICAgICAgaWYgKCFhTWVkaWNpbmUubGVuZ3RoKSB7CiAgICAgICAgICBfdGhpczE3LmlQRE1lZGljaW5lUmVxdWVzdC5sc3RNZWRpY2luZVJlcXVlc3REZXRhaWxzLnB1c2goewogICAgICAgICAgICBtZWRpY2luZV9pZDogZWxlbWVudC5tZWRpY2luZV9pZCwKICAgICAgICAgICAgbWVkaWNpbmVfbmFtZTogZWxlbWVudC5tZWRpY2luZV9uYW1lLAogICAgICAgICAgICBiYXJjb2RlOiBlbGVtZW50LmJhcmNvZGUsCiAgICAgICAgICAgIHRyZWF0bWVudF9ydWxlX25hbWU6IGVsZW1lbnQudHJlYXRtZW50X3J1bGVfbmFtZSwKICAgICAgICAgICAgdHJlYXRtZW50X2R1cmF0aW9uX25hbWU6IGVsZW1lbnQudHJlYXRtZW50X2R1cmF0aW9uX25hbWUsCiAgICAgICAgICAgIHRyZWF0bWVudF9kb3NlX25hbWU6IGVsZW1lbnQudHJlYXRtZW50X2Rvc2VfbmFtZSwKICAgICAgICAgICAgbWVkaWNpbmVfZ2VuZXJpY19uYW1lOiBlbGVtZW50Lm1lZGljaW5lX2dlbmVyaWNfbmFtZSwKICAgICAgICAgICAgbWVkaWNpbmVfc3RyZ2VudGg6IGVsZW1lbnQuc3RyZ2VudGgsCiAgICAgICAgICAgIG1lZGljaW5lX3R5cGVfbmFtZTogZWxlbWVudC5tZWRpY2luZV90eXBlX25hbWUsCiAgICAgICAgICAgIG1lZGljaW5lX3VvbV9uYW1lOiBlbGVtZW50LnVvbV9uYW1lLAogICAgICAgICAgICBtZWRpY2luZV9tYW51ZmFjdHVyZXJfbmFtZTogZWxlbWVudC5tYW51ZmFjdHVyZXJfbmFtZSwKICAgICAgICAgICAgaXNDaGVjazogZWxlbWVudC5pc0NoZWNrLAogICAgICAgICAgICByZXF1ZXN0X3F0eTogZWxlbWVudC5yZXF1ZXN0X3F0eSA9PSAiIiB8fCBlbGVtZW50LnJlcXVlc3RfcXR5ID09IDAgPyAxIDogZWxlbWVudC5yZXF1ZXN0X3F0eQogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMxNy5oaWRlRGlhbG9nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMTcuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgIHNldmVyaXR5OiAid2FybiIsCiAgICAgICAgICAgIHN1bW1hcnk6ICJXYXJuIE1lc3NhZ2UiLAogICAgICAgICAgICBkZXRhaWw6IGFNZWRpY2luZVswXS5tZWRpY2luZV9uYW1lICsgIiBhbHJlYWR5IGFkZGVkIiwKICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlUmVxdWVzdE1lZGljaW5lOiBmdW5jdGlvbiBkZWxldGVSZXF1ZXN0TWVkaWNpbmUoZGF0YSkgewogICAgICB0aGlzLmlQRE1lZGljaW5lUmVxdWVzdC5sc3RNZWRpY2luZVJlcXVlc3REZXRhaWxzID0gdGhpcy5pUERNZWRpY2luZVJlcXVlc3QubHN0TWVkaWNpbmVSZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLm1lZGljaW5lX2lkICE9IGRhdGEubWVkaWNpbmVfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIC8vIE1lZGljaW5lIFJlcXVlc3QKICAgIG1lZGljaW5lUmVxdWVzdDogZnVuY3Rpb24gbWVkaWNpbmVSZXF1ZXN0KCkgewogICAgICB2YXIgX3RoaXMxOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgYU1lZGljaW5lLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF90aGlzMTguaVBETWVkaWNpbmVSZXF1ZXN0Lmludm9pY2VfaWQgPSBfdGhpczE4Lmludm9pY2VfaWQ7CiAgICAgICAgICAgICAgICBfdGhpczE4LmlQRE1lZGljaW5lUmVxdWVzdC5hZG1pc3Npb25fbm8gPSBfdGhpczE4LmFkbWlzc2lvbl9ubzsKICAgICAgICAgICAgICAgIF90aGlzMTguaVBETWVkaWNpbmVSZXF1ZXN0LnBhdGllbnRfcmVnaXN0cmF0aW9uX25vID0gX3RoaXMxOC5yZWdpc3RyYXRpb25fbm87CiAgICAgICAgICAgICAgICBfdGhpczE4LmlQRE1lZGljaW5lUmVxdWVzdC5wYXRpZW50X25hbWUgPSBfdGhpczE4LnBhdGllbnRfbmFtZTsKICAgICAgICAgICAgICAgIGFNZWRpY2luZSA9IF90aGlzMTguaVBETWVkaWNpbmVSZXF1ZXN0LmxzdE1lZGljaW5lUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWwucmVxdWVzdF9xdHkgPT0gIiI7CiAgICAgICAgICAgICAgICB9LCBfdGhpczE4KTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxOC5pUERNZWRpY2luZVJlcXVlc3QuaW52b2ljZV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxOC5pUERNZWRpY2luZVJlcXVlc3QuYWRtaXNzaW9uX25vKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczE4LmlQRE1lZGljaW5lUmVxdWVzdC5wYXRpZW50X3JlZ2lzdHJhdGlvbl9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxOC5pUERNZWRpY2luZVJlcXVlc3QucGF0aWVudF9uYW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIGlmICghYU1lZGljaW5lLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczE4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogIlBsZWFzZSBlbnRlciBtZWRpY2luZSBxdHkiLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTguaVBETWVkaWNpbmVSZXF1ZXN0LmxzdE1lZGljaW5lUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMTguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiUGxlYXNlIGFkZCBtZWRpY2luZSBmb3IgcmVxdWVzdCIsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTgubWVkaWNpbmVSZXF1ZXN0U2VydmljZS5hZGQoX3RoaXMxOC5pUERNZWRpY2luZVJlcXVlc3QsIF90aGlzMTgpOwoKICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczE4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlJlcXVlc3QgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTguaGlkZU1lZGljaW5lUmVxdWVzdCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxOC5nZXRNZWRpY2luZVJlcXVlc3RMaXN0QnlBZG1pc3Npb25ObyhfdGhpczE4LmFkbWlzc2lvbl9ubyk7CgogICAgICAgICAgICAgICAgICBfdGhpczE4LnByaW50TWVkaWNpbmVSZXF1ZXN0KHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0MTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzODsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczE4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogX2NvbnRleHQyLnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMzhdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIGZvcm1hdEludmVzdGlnYXRpb25MaXN0KGRhdGEpIHsKICAgIC8vICAgICBsZXQgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgLy8gICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAvLyAgICAgfSwgdGhpcyk7CiAgICAvLyAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgICAgIHZhciBvYmogPSBlbGVtZW50OwogICAgLy8gICAgICAgICBvYmouaW52ZXN0aW5nYXRpb25fbmFtZSA9IGVsZW1lbnQubWFudWFsX2NvZGUgKyAiLSIgKyBlbGVtZW50LmludmVzdGluZ2F0aW9uX25hbWU7CiAgICAvLyAgICAgICAgIHRoaXMuaW52ZXN0aWdhdGlvbkxpc3QucHVzaChvYmopOwogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1lcmdlUmVmZXJyZWRCeUluZm8oZGF0YSkgewogICAgLy8gICAgIGxldCBmaWx0ZXJEYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAvLyAgICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgIC8vICAgICB9LCB0aGlzKTsKICAgIC8vICAgICBmaWx0ZXJEYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgIC8vICAgICAgICAgdGhpcy5yZWZlcnJlZEJ5TGlzdC5wdXNoKHsKICAgIC8vICAgICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubywKICAgIC8vICAgICAgICAgICAgIHRleHQ6IGVsZW1lbnQubWFudWFsX2NvZGUgKyAiLSIgKyBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubyArICItIiArIGVsZW1lbnQucmVmZmVyZWRfYnlfbmFtZSArICIoUmVmZXJyZWQgQnkpIiwKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfSk7CiAgICAvLyB9LAogICAgLy8gbWVyZ2VEb2N0b3JJbmZvKGRhdGEpIHsKICAgIC8vICAgICAvL3RoaXMuZG9jdG9yTGlzdCA9IGRhdGE7CiAgICAvLyAgICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgICAgIHRoaXMucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAvLyAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC5kb2Nfbm8sCiAgICAvLyAgICAgICAgICAgICB0ZXh0OiBlbGVtZW50LmRvY19ubyArICItIiArIGVsZW1lbnQuZG9jdG9yX25hbWUgKyAiKERvY3RvcikiLAogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICB9KTsKICAgIC8vICAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgIC8vICAgICAgICAgdGhpcy5kb2N0b3JMaXN0LnB1c2goewogICAgLy8gICAgICAgICAgICAgZGVwYXJ0bWVudF9pZDogZWxlbWVudC5kZXBhcnRtZW50X2lkLAogICAgLy8gICAgICAgICAgICAgZG9jdG9yX2lkOiBlbGVtZW50LmRvY3Rvcl9pZCwKICAgIC8vICAgICAgICAgICAgIGRvY3Rvcl9uYW1lOiBlbGVtZW50LmRvY19ubyArICItIiArIGVsZW1lbnQuZG9jdG9yX25hbWUsCiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1lcmdlRW1wbG95ZWVJbmZvKGRhdGEpIHsKICAgIC8vICAgICBsZXQgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgLy8gICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAvLyAgICAgfSwgdGhpcyk7CiAgICAvLyAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgICAgIHRoaXMucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAvLyAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC5lbXBfbm8sCiAgICAvLyAgICAgICAgICAgICB0ZXh0OiBlbGVtZW50LmVtcF9ubyArICItIiArIGVsZW1lbnQuZmlyc3RfbmFtZSArICIoRW1wbG95ZWUpIiwKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfSk7CiAgICAvLyB9LAogICAgLy8gbWVyZ2VEb2N0b3JJbmZvKGRhdGEpIHsKICAgIC8vICAgdGhpcy5kb2N0b3JMaXN0ID0gZGF0YTsKICAgIC8vICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgdGhpcy5kaXNjb3VudEJ5TGlzdC5wdXNoKHsKICAgIC8vICAgICAgIHZhbHVlOiBlbGVtZW50LmRvY19ubywKICAgIC8vICAgICAgIHRleHQ6IGVsZW1lbnQuZG9jX25vICsgIi0iICsgZWxlbWVudC5kb2N0b3JfbmFtZSArICIoRG9jdG9yKSIsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1lcmdlRW1wbG95ZWVJbmZvKGRhdGEpIHsKICAgIC8vICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgdGhpcy5kaXNjb3VudEJ5TGlzdC5wdXNoKHsKICAgIC8vICAgICAgIHZhbHVlOiBlbGVtZW50LmVtcF9ubywKICAgIC8vICAgICAgIHRleHQ6IGVsZW1lbnQuZW1wX25vICsgIi0iICsgZWxlbWVudC5maXJzdF9uYW1lICsgIihFbXBsb3llZSkiLAogICAgLy8gICAgIH0pOwogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICAvLyBpbnZSZXNldCgpIHsKICAgIC8vICAgICB0aGlzLmlzSW52ZXN0aWdhdGlvbiA9IHRydWU7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbiA9ICIiOwogICAgLy8gICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgLy8gfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgLy90aGlzLmlzSW52ZXN0aWdhdGlvbiA9IHRydWU7CiAgICAgIC8vdGhpcy5pc1ByZXNjcmlwdGlvbiA9IGZhbHNlOwogICAgICAvL3RoaXMuYnV0dG9uID0gZmFsc2U7CiAgICAgIC8vdGhpcy5pc1ZhbGlkID0gIiI7CiAgICAgIC8vdGhpcy5pc0VtYWlsVmFsaWQgPSAiIjsKICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7IC8vdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwoKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QgPSB7CiAgICAgICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgYVBhdGllbnQ6IHsKICAgICAgICAgIGFnZV95ZWFyOiAiMCIsCiAgICAgICAgICBhZ2VfbW9udGg6ICIwIiwKICAgICAgICAgIGFnZV9kYXk6ICIwIgogICAgICAgIH0sCiAgICAgICAgY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6ICJSZWd1bGFyIiwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHM6IFtdLAogICAgICAgIGxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyOiBbXSwKICAgICAgICBkaXNjb3VudF9ieV9pZDogIkNvbXBhbnkiLAogICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IDAsCiAgICAgICAgZGlzY291bnRfYW1vdW50OiAwLAogICAgICAgIGNvc3RfcHJpY2U6IDAsCiAgICAgICAgcGFydGljdWxhcl9jb3N0X3ByaWNlOiAwLAogICAgICAgIHRvdGFsX2Ftb3VudDogMAogICAgICB9OwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgICB0aGlzLmlQREludmVzdGlnYXRpb25SZXF1ZXN0ID0gewogICAgICAgIGludmVzdGlnYXRpb25fcmVxdWVzdF9pZDogbnVsbCwKICAgICAgICBhZG1pc3Npb25faWQ6IG51bGwKICAgICAgfTsKICAgIH0sCiAgICAvLyBkb2N0b3JSZXNldCgpIHsKICAgIC8vICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZXBhcnRtZW50X2lkID0gIiI7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVmZmVyZWRfZG9jdG9yX2lkID0gIiI7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGVzaWduYXRpb25faWQgPSAiIjsKICAgIC8vICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5vdXRzaWRlX2RvY3Rvcl9uYW1lID0gIiI7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Qub3V0c2lkZV9kb2N0b3JfaG9zcGl0YWxfbmFtZSA9ICIiOwogICAgLy8gfSwKICAgIC8vIGZpbHRlckRvY3RvcnNEZXBhcnRtZW50V2lzZSgpIHsKICAgIC8vICAgICByZXR1cm4gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgICAgIGVsLmRlcGFydG1lbnRfaWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRlcGFydG1lbnRfaWQKICAgIC8vICAgICAgICAgKTsKICAgIC8vICAgICB9LCB0aGlzKTsKICAgIC8vIH0sCiAgICAvLyBnZXRDb25zdWx0YW5jeUZlZUJ5RG9jdG9ySWQoKSB7CiAgICAvLyAgICAgdmFyIGFEb2N0b3IgPSB0aGlzLmRvY3Rvckxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgLy8gICAgICAgICByZXR1cm4gZWwuZG9jdG9yX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kb2N0b3JfaWQ7CiAgICAvLyAgICAgfSwgdGhpcyk7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29uc3VsdGFuY3lfZmVlID0KICAgIC8vICAgICAgICAgYURvY3RvclswXS5jb25zdWx0YW5jeV9mZWU7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYnVpbGRpbmdfaWQgPSBhRG9jdG9yWzBdLl9idWlsZGluZ19pZDsKICAgIC8vICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yb29tX2lkID0gYURvY3RvclswXS5yb29tX2lkOwogICAgLy8gfSwKICAgIC8vIGZpbHRlclJvb21zQnVpbGRpbmdXaXNlKCkgewogICAgLy8gICAgIHJldHVybiB0aGlzLnJvb21MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuIGVsLmJ1aWxkaW5nX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5idWlsZGluZ19pZDsKICAgIC8vICAgICB9LCB0aGlzKTsKICAgIC8vIH0sCiAgICAvLyBmaWx0ZXJJbnZlc3RpZ2F0aW9uKCkgewogICAgLy8gICAgIHJldHVybiB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgLy8gICAgIH0sIHRoaXMpOwogICAgLy8gfSwKICAgIC8vIGZpbHRlclByb2R1Y3QoKSB7CiAgICAvLyAgICAgcmV0dXJuIHRoaXMucHJvZHVjdExpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgLy8gICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9jYXRlZ29yeV9pZCA9PSAxICYmIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgLy8gICAgIH0sIHRoaXMpOwogICAgLy8gfSwKICAgIC8vIGdldEZvcm1hdHRlZChkYXRhKSB7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQgPSBkYXRhOwogICAgLy8gICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQucGF0aWVudF9pZCkgewogICAgLy8gICAgICAgICB0aGlzLmlzUGF0aWVudEV4aXN0ID0gIlBhdGllbnQgbm90IEV4aXN0ISI7CiAgICAvLyAgICAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0ID0gewogICAgLy8gICAgICAgICAvLyAgIHBhdGllbnRfaWQ6ICIiLAogICAgLy8gICAgICAgICAvLyAgIGFQYXRpZW50OiB7fSwKICAgIC8vICAgICAgICAgLy8gfTsKICAgIC8vICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMuaXNQYXRpZW50RXhpc3QgPSAiIjsKICAgIC8vICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGF0aWVudF9pZCA9CiAgICAvLyAgICAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5wYXRpZW50X2lkOwogICAgLy8gICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jZGRvYiA9IG1vbWVudCgKICAgIC8vICAgICAgICAgICAgIFN0cmluZyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5kb2IpCiAgICAvLyAgICAgICAgICkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAvLyAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIudG9TdHJpbmcoKTsKICAgIC8vICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLnRvU3RyaW5nKCk7CiAgICAvLyAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9kYXkgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5LnRvU3RyaW5nKCk7CiAgICAvLyAgICAgfQogICAgLy8gfSwKICAgIGdldEZvcm1hdHRlZFByZXNjcmlwdGlvbldpc2VJbnZlc3RpZ2F0aW9uczogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkUHJlc2NyaXB0aW9uV2lzZUludmVzdGlnYXRpb25zKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTkgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuZmlyc3RfbmFtZSA9ICJJUEQiOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jb250YWN0X25vID0gIjAxNyI7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhdGllbnRfaWQgPSB0aGlzLnBhdGllbnRfaWQ7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlZmZlcmVkX2RvY3Rvcl9pZCA9IHRoaXMuZG9jdG9yX2lkOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9ieV9pZCA9IHRoaXMucmVmZmVyZWRfYnlfaWQ7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIudG9TdHJpbmcoKTsKICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLnRvU3RyaW5nKCk7CiAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9kYXkgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5LnRvU3RyaW5nKCk7CiAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRlcGFydG1lbnRfaWQgPSBkYXRhWzBdLmRlcGFydG1lbnRfaWQ7CiAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlZmZlcmVkX2RvY3Rvcl9pZCA9IGRhdGFbMF0uZG9jdG9yX2lkOwogICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9ieV9pZCA9IGRhdGFbMF0uZG9jX25vOwogICAgICAvL3RoaXMuaXNQcmVzY3JpcHRpb24gPSB0cnVlOwoKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gX3RoaXMxOS5pbnZlc3RpZ2F0aW9uTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0gZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICAgIH0sIF90aGlzMTkpWzBdOwoKICAgICAgICBfdGhpczE5LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uID0gYUludmVzdGlnYXRpb247CgogICAgICAgIF90aGlzMTkuYWRkSW52ZXN0aWdhdGlvbigpOwogICAgICB9KTsKICAgICAgdGhpcy5hZGQoKTsKICAgIH0sCiAgICAvLyBmaW5kUGF0aWVudCgpIHsKICAgIC8vICAgICBsZXQgc3RyID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29udGFjdE9yUmVnTm87CiAgICAvLyAgICAgaWYgKHN0ci5zdGFydHNXaXRoKCJQUkVTIikpIHsKICAgIC8vICAgICAgICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UKICAgIC8vICAgICAgICAgICAgIC5wcmVzY3JpcHRpb25XaXNlSW52ZXN0aWdhdGlvbnModGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29udGFjdE9yUmVnTm8sIHRoaXMpCiAgICAvLyAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5nZXRGb3JtYXR0ZWRQcmVzY3JpcHRpb25XaXNlSW52ZXN0aWdhdGlvbnMoZGF0YS5kYXRhKSk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgdGhpcy5pc1ByZXNjcmlwdGlvbiA9IGZhbHNlOwogICAgLy8gICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlCiAgICAvLyAgICAgICAgICAgICAuZ2V0QnlDb250YWN0T3JSZWdObyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb250YWN0T3JSZWdObywgdGhpcykKICAgIC8vICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmdldEZvcm1hdHRlZChkYXRhLmRhdGEpKTsKICAgIC8vICAgICB9CiAgICAvLyB9LAogICAgLy8gaXNFeGlzdENvbnRhY3QoKSB7CiAgICAvLyAgICAgaWYgKAogICAgLy8gICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jb250YWN0X25vLm1hdGNoKAogICAgLy8gICAgICAgICAgICAgL14oMDEpKFswLTldezl9KSQvCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApIHsKICAgIC8vICAgICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZQogICAgLy8gICAgICAgICAgICAgLmdldEJ5Q29udGFjdE9yUmVnTm8oCiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY29udGFjdF9ubywgdGhpcwogICAgLy8gICAgICAgICAgICAgKQogICAgLy8gICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHRoaXMuZ2V0Q29udGFjdChkYXRhLmRhdGEpKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0KICAgIC8vICAgICAgICAgICAgICJDb250YWN0IG51bWJlciBtdXN0IHN0YXJ0IHdpdGggMDEgYW5kIHRoZSByZXF1aXJlZCBsZW5ndGggaXMgMTEiOwogICAgLy8gICAgIH0KICAgIC8vIH0sCiAgICAvLyBnZXRDb250YWN0KGRhdGEpIHsKICAgIC8vICAgICBpZiAoZGF0YS5jb250YWN0X25vKSB7CiAgICAvLyAgICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiRHVwbGljYXRlIHBob25lIG51bWJlciEiOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgIC8vICAgICB9CiAgICAvLyB9LAogICAgaW52ZXN0aWdhdGlvbklzRXhpc3Q6IGZ1bmN0aW9uIGludmVzdGlnYXRpb25Jc0V4aXN0KCkgewogICAgICB2YXIgYUludmVzdGlnYXRpb24gPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFJbnZlc3RpZ2F0aW9uLmxlbmd0aCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJUaGlzIEludmVzdGlnYXRpb24gYWxyZWFkeSBhZGRlZCI7CiAgICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB2YXIgYUludiA9IHRoaXMuaW52ZXN0aWdhdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIC8vICAgcmV0dXJuICgKICAgICAgICAvLyAgICAgZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0KICAgICAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkCiAgICAgICAgLy8gICApOwogICAgICAgIC8vIH0sIHRoaXMpOwogICAgICAgIC8vIHRoaXMuY29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZQogICAgICAgIC8vICAgLmdldEJ5SWQoYUludlswXS5jb2xsZWN0aW9uX2NlbnRlcl9pZCkKICAgICAgICAvLyAgIC50aGVuKChkYXRhKSA9PiAodGhpcy5jb2xsZWN0aW9uTGlzdCA9IGRhdGEuZGF0YSkpOwogICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhZGRJbnZlc3RpZ2F0aW9uOiBmdW5jdGlvbiBhZGRJbnZlc3RpZ2F0aW9uKCkgewogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgIHZhciBhSW52ZXN0aWdhdGlvbiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgfSwgdGhpcyk7CgogICAgICBpZiAoYUludmVzdGlnYXRpb24ubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlRoaXMgSW52ZXN0aWdhdGlvbiBhbHJlYWR5IGFkZGVkIjsgLy90aGlzLmlzSW52ZXN0aWdhdGlvbiA9IHRydWU7CgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgICB2YXIgY29zdCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlcG9ydF9kZWxpdmVyeV90eXBlID09ICJSZWd1bGFyIiA/IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uY2hhcmdlIDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi51cmdlbnRfY2FyZ2U7CiAgICAgICAgICB2YXIgZGVsaXZlcnlUaW1lID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUgPT0gIlJlZ3VsYXIiID8gdGhpcy5leHBlY3RlZEhvdXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5yZXBvcnRfZGVsaXZlcnlfZHVyYXRpb24pIDogdGhpcy5leHBlY3RlZEhvdXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5lbW1lcmdlbmN5X3JlcG9ydF9kZWxpdmVyeV9kdXJhdGlvbik7CiAgICAgICAgICB2YXIgZGlzY291bnRBbW91bnQgPSAxICogY29zdCAqIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uZGlzY291bnRfcGVyY2VudCAvIDEwMDsKICAgICAgICAgIHZhciB0b3RhbEFtb3VudCA9IDEgKiBjb3N0IC0gZGlzY291bnRBbW91bnQ7CiAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBpbnZlc3RpZ2F0aW9uX2lkOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQsCiAgICAgICAgICAgIF9pbnZlc3RpbmdhdGlvbl9uYW1lOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGluZ2F0aW9uX25hbWUsCiAgICAgICAgICAgIF9pbnZlc3RpZ2F0aW9uX2NhdGVnb3J5X2hlYWRfbmFtZTogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5faW52ZXN0aWdhdGlvbl9jYXRlZ29yeV9oZWFkX25hbWUsCiAgICAgICAgICAgIC8vIGJ1aWxkaW5nX2lkOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9idWlsZGluZ19pZCwKICAgICAgICAgICAgLy8gX2J1aWxkaW5nX25hbWU6IHRoaXMuY29sbGVjdGlvbkxpc3QuX2J1aWxkaW5nX25hbWUsCiAgICAgICAgICAgIC8vIHJvb21faWQ6IHRoaXMuY29sbGVjdGlvbkxpc3Qucm9vbV9pZCwKICAgICAgICAgICAgLy8gX3Jvb21fbmFtZTogdGhpcy5jb2xsZWN0aW9uTGlzdC5fcm9vbV9uYW1lLAogICAgICAgICAgICBidWlsZGluZ19pZDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5fYnVpbGRpbmdfaWQsCiAgICAgICAgICAgIHJvb21faWQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uX3Jvb21faWQsCiAgICAgICAgICAgIGV4cGVjdGVkX2RlbGl2ZXJ5OiBkZWxpdmVyeVRpbWUsCiAgICAgICAgICAgIHJlcG9ydF9kZWxpdmVyeV90eXBlOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSwKICAgICAgICAgICAgcXVhbnRpdHk6IDEsCiAgICAgICAgICAgIGNvc3RfcHJpY2U6IGNvc3QsCiAgICAgICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uZGlzY291bnRfcGVyY2VudCwKICAgICAgICAgICAgZGlzY291bnRfYW1vdW50OiBkaXNjb3VudEFtb3VudCwKICAgICAgICAgICAgdG90YWxfYW1vdW50OiB0b3RhbEFtb3VudAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5wdXNoKG9iaik7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSArIHRvdGFsQW1vdW50OyAvLwoKICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0KICAgICAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtCiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWRkUGFydGljdWxhcih0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQpOwogICAgfSwKICAgIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudFBlcmNlbnQ6IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudFBlcmNlbnQoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LmludmVzdGlnYXRpb25faWQgPT0gZGF0YS5pbnZlc3RpZ2F0aW9uX2lkKSB7CiAgICAgICAgICBlbGVtZW50LmRpc2NvdW50X3BlcmNlbnQgPSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudCAvIGVsZW1lbnQuY29zdF9wcmljZSAqIDEwMDsgLy92YXIgZGlzY291bnRfYW1vdW50ID0gKGVsZW1lbnQuY29zdF9wcmljZSAqIGVsZW1lbnQuZGlzY291bnRfcGVyY2VudCkgLyAxMDA7CgogICAgICAgICAgZWxlbWVudC50b3RhbF9hbW91bnQgPSBlbGVtZW50LmNvc3RfcHJpY2UgLSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNhbGN1bGF0ZUNvc3RQcmljZSgpOwogICAgfSwKICAgIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudEFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlUGVySW52ZXN0aWdhdGlvbkRpc2NvdW50QW1vdW50KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkID09IGRhdGEuaW52ZXN0aWdhdGlvbl9pZCkgewogICAgICAgICAgZWxlbWVudC5kaXNjb3VudF9hbW91bnQgPSBlbGVtZW50LmNvc3RfcHJpY2UgKiBlbGVtZW50LmRpc2NvdW50X3BlcmNlbnQgLyAxMDA7CiAgICAgICAgICBlbGVtZW50LnRvdGFsX2Ftb3VudCA9IGVsZW1lbnQuY29zdF9wcmljZSAtIGVsZW1lbnQuZGlzY291bnRfYW1vdW50OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuY2FsY3VsYXRlQ29zdFByaWNlKCk7CiAgICB9LAogICAgY2FsY3VsYXRlQ29zdFByaWNlOiBmdW5jdGlvbiBjYWxjdWxhdGVDb3N0UHJpY2UoKSB7CiAgICAgIHZhciBjb3N0UHJpY2UgPSAwOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGNvc3RQcmljZSA9IGNvc3RQcmljZSArIGVsZW1lbnQudG90YWxfYW1vdW50OwogICAgICB9KTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IGNvc3RQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGNhbGN1bGF0ZVRvdGFsQW1vdW50OiBmdW5jdGlvbiBjYWxjdWxhdGVUb3RhbEFtb3VudCgpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgKyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UpOwogICAgfSwKICAgIGFkZFBhcnRpY3VsYXI6IGZ1bmN0aW9uIGFkZFBhcnRpY3VsYXIoaWQpIHsKICAgICAgdmFyIF90aGlzMjAgPSB0aGlzOwoKICAgICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlLmdldEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyMC5nZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRBUGFydGljdWxhcjogZnVuY3Rpb24gYWRkQVBhcnRpY3VsYXIoZGF0YSwgcXR5LCBwbmFtZSkgewogICAgICBpZiAodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIkFkZCBJbnZlc3RpZ2F0aW9uIjsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdmFyIG9iaiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkID09PSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgICAgfSwgdGhpcylbMF07CgogICAgICAgIGlmIChvYmopIHsKICAgICAgICAgIHF0eSA9IHBhcnNlSW50KG9iai5xdHkpICsgcXR5OwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkICE9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIucHVzaCh7CiAgICAgICAgICBwcm9kdWN0X2lkOiBkYXRhLnByb2R1Y3RfaWQsCiAgICAgICAgICBfcHJvZHVjdF9uYW1lOiBwbmFtZSwKICAgICAgICAgIHVvbV9pZDogZGF0YS51b21faWQsCiAgICAgICAgICBfdW9tX25hbWU6IGRhdGEuX3VvbV9uYW1lLAogICAgICAgICAgY29zdF9wcmljZTogZGF0YS5jb3N0X3ByaWNlLAogICAgICAgICAgcXR5OiBxdHkKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNoZWNrUXR5KCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMjEgPSB0aGlzOwoKICAgICAgZGF0YS5kYXRhLl9sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIucHVzaCh7CiAgICAgICAgLy8gICBpbnZlc3RpZ2F0aW9uX2lkOiBlbGVtZW50LmludmVzdGlnYXRpb25faWQsCiAgICAgICAgLy8gICBwcm9kdWN0X2lkOiBlbGVtZW50LnByb2R1Y3RfaWQsCiAgICAgICAgLy8gICBfcHJvZHVjdF9uYW1lOiBlbGVtZW50Ll9wcm9kdWN0X25hbWUsCiAgICAgICAgLy8gICB1b21faWQ6IGVsZW1lbnQudW9tX2lkLAogICAgICAgIC8vICAgX3VvbV9uYW1lOiBlbGVtZW50Ll91b21fbmFtZSwKICAgICAgICAvLyAgIGNvc3RfcHJpY2U6IGVsZW1lbnQuY29zdF9wcmljZSwKICAgICAgICAvLyAgIHF0eTogZWxlbWVudC5xdHksCiAgICAgICAgLy8gfSk7CiAgICAgICAgX3RoaXMyMS5hZGRBUGFydGljdWxhcihlbGVtZW50LCAxLCBlbGVtZW50Ll9wcm9kdWN0X25hbWUpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja1F0eTogZnVuY3Rpb24gY2hlY2tRdHkoKSB7CiAgICAgIHZhciBfdGhpczIyID0gdGhpczsKCiAgICAgIHZhciB0b3RhbFByaWNlID0gMDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LnF0eSA+IF90aGlzMjIucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICAgIGVsZW1lbnQucXR5ID0gX3RoaXMyMi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aDsKICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQucXR5IDw9IDApIHsKICAgICAgICAgIGVsZW1lbnQucXR5ID0gMTsKICAgICAgICB9CgogICAgICAgIGVsZW1lbnQudG90YWxQcmljZSA9IGVsZW1lbnQucXR5ICogZWxlbWVudC5jb3N0X3ByaWNlOwogICAgICAgIHRvdGFsUHJpY2UgKz0gZWxlbWVudC50b3RhbFByaWNlOwogICAgICB9KTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gdG90YWxQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGdldERpc2NvdW50UGVyY2VudDogZnVuY3Rpb24gZ2V0RGlzY291bnRQZXJjZW50KCkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9wZXJjZW50ID0gTWF0aC5jZWlsKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudCAvIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKiAxMDApOyAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC50b3RhbF9hbW91bnQgPSBNYXRoLmNlaWwoCiAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtCiAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50KTsKCiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBnZXREaXNjb3VudEFtb3VudDogZnVuY3Rpb24gZ2V0RGlzY291bnRBbW91bnQoKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9wZXJjZW50IC8gMTAwOyAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC50b3RhbF9hbW91bnQgPSBNYXRoLmNlaWwoCiAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtCiAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50KTsKCiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBleHBlY3RlZEhvdXI6IGZ1bmN0aW9uIGV4cGVjdGVkSG91cihoKSB7CiAgICAgIC8vIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIC8vIHRvZGF5LnNldEhvdXJzKHRvZGF5LmdldEhvdXJzKCkgKyBoKTsKICAgICAgdmFyIHRyYXZlbFRpbWUgPSBtb21lbnQoKS5hZGQoaCwgJ2hvdXJzJykuZm9ybWF0KCdZWVlZLU1NLUREIGhoOm1tIEEnKTsKICAgICAgcmV0dXJuIHRyYXZlbFRpbWU7CiAgICB9LAogICAgZGVsZXRlRnJvbUxpc3Q6IGZ1bmN0aW9uIGRlbGV0ZUZyb21MaXN0KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCAhPSBkYXRhLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtIGRhdGEudG90YWxfYW1vdW50OwogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICAgIHRoaXMuY2hlY2tRdHkoKTsKCiAgICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0gW107CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gMDsKICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVGcm9tUGFydGljdWxhckxpc3Q6IGZ1bmN0aW9uIGRlbGV0ZUZyb21QYXJ0aWN1bGFyTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkICE9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSAtIGRhdGEudG90YWxQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGFkZDogZnVuY3Rpb24gYWRkKCkgewogICAgICB2YXIgX3RoaXMyMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgY3VycmVudERhdGUsIGRvYiwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMjMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmIChfdGhpczIzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMjMuaXNFeGlzdCA9ICJQbGVhc2UgYWRkIGEgSW52ZXN0aWdhdGlvbiI7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpczIzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXMyMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZG9iID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIF90aGlzMjMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyLCBjdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gX3RoaXMyMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczIzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5KTsKICAgICAgICAgICAgICAgIF90aGlzMjMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmRvYiA9IG1vbWVudChTdHJpbmcoZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7IC8vCgogICAgICAgICAgICAgICAgX3RoaXMyMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIgPSBfdGhpczIzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhci50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX3RoaXMyMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoID0gX3RoaXMyMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBfdGhpczIzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5ID0gX3RoaXMyMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UuYWRkKF90aGlzMjMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LCBfdGhpczIzKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJSZXF1ZXN0IFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczIzLnByaW50SW52ZXN0aWdhdGlvblRva2VuKHJlc3VsdC5kYXRhKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMjMuaVBESW52ZXN0aWdhdGlvblJlcXVlc3QuaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2lkID0gcmVzdWx0LmRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgX3RoaXMyMy5pUERJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hZG1pc3Npb25faWQgPSBfdGhpczIzLmFkbWlzc2lvbl9pZDsKCiAgICAgICAgICAgICAgICAgIF90aGlzMjMuaVBESW52ZXN0aWdhdGlvblJlcXVlc3RTYXZlKCk7IC8vdGhpcy5jb25maXJtUGF5KHJlc3VsdC5kYXRhKTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczIzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczIzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogX2NvbnRleHQzLnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMCwgMjNdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIFNlcnZpY2UKICAgIHRha2VTZXJ2aWNlOiBmdW5jdGlvbiB0YWtlU2VydmljZShkYXRhKSB7CiAgICAgIHRoaXMuaVBEU2VydmljZU9iai5hZG1pc3Npb25faWQgPSBkYXRhLmFkbWlzc2lvbl9pZDsKICAgICAgdGhpcy5zZXJ2aWNlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICAvLyBQYWNrYWdlCiAgICB0YWtlUGFja2FnZTogZnVuY3Rpb24gdGFrZVBhY2thZ2UoZGF0YSkgewogICAgICB0aGlzLmlQRFNlcnZpY2VQYWNrYWdlT2JqLmFkbWlzc2lvbl9pZCA9IGRhdGEuYWRtaXNzaW9uX2lkOwogICAgICB0aGlzLnNlcnZpY2VQYWNrYWdlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICAvLyBUYWtlbiBTZXJ2aWNlICYgUGFja2FnZQogICAgdGFrZW5MaXN0OiBmdW5jdGlvbiB0YWtlbkxpc3QoZGF0YSkgewogICAgICB2YXIgX3RoaXMyNCA9IHRoaXM7CgogICAgICB0aGlzLmlQRFNlcnZpY2UuZ2V0VGFrZW5TZXJ2aWNlQW5kU2VydmljZVBhY2thZ2UoZGF0YS5hZG1pc3Npb25faWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyNC5mb3JtYXR0ZWRUYWtlbkxpc3QoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gVmlldyBSb3VuZCBEb2N0b3IKICAgIHZpZXdSb3VuZERvY3RvcjogZnVuY3Rpb24gdmlld1JvdW5kRG9jdG9yKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMjUgPSB0aGlzOwoKICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3RvciA9IHsvL3JvdW5kX3RpbWU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSBoOm1tIEEiKSwKICAgICAgfTsKICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5hZG1pc3Npb25faWQgPSBkYXRhLmFkbWlzc2lvbl9pZDsKICAgICAgdGhpcy5pUERTZXJ2aWNlLmdldEFzc2lnbklQRFJvdW5kRG9jdG9yKGRhdGEuYWRtaXNzaW9uX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMjUuZm9ybWF0dGVkUm91bmREb2N0b3JMaXN0KGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldE1haW5Db25zdWx0YW50OiBmdW5jdGlvbiBzZXRNYWluQ29uc3VsdGFudCgpIHsKICAgICAgaWYgKCF0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmlzTWFpbkNvbnN1bHRhbnQpIHsKICAgICAgICB2YXIgYUFkbWl0dGVkUGF0aWVudCA9IHRoaXMuYWRtaXR0ZWRQYXRpZW50TGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwuYWRtaXNzaW9uX2lkID09PSB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmFkbWlzc2lvbl9pZDsKICAgICAgICB9LCB0aGlzKTsKICAgICAgICB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmRlcGFydG1lbnRfaWQgPSBhQWRtaXR0ZWRQYXRpZW50WzBdLmNvbnN1bHRhbmN5X2RlcGFydG1lbnRfaWQ7CiAgICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5yb3VuZF9kb2N0b3JfaWQgPSBhQWRtaXR0ZWRQYXRpZW50WzBdLmRvY3Rvcl9pZDsKICAgICAgICB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmNoYXJnZSA9IGFBZG1pdHRlZFBhdGllbnRbMF0uaXBkX2NvbnN1bHRhbmN5X2ZlZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmRlcGFydG1lbnRfaWQgPSAiIjsKICAgICAgICB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLnJvdW5kX2RvY3Rvcl9pZCA9ICIiOwogICAgICAgIHRoaXMuYXNzaWduUm91bmREb2N0b3IuY2hhcmdlID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBtZXJnZURvY3RvckluZm86IGZ1bmN0aW9uIG1lcmdlRG9jdG9ySW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczI2ID0gdGhpczsKCiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBvYmogPSBlbGVtZW50OwogICAgICAgIG9iai5kb2N0b3JfZGVncmVlID0gIiI7CiAgICAgICAgb2JqLmxzdENvbnN1bHRhbnREZWdyZWUuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIG9iai5kb2N0b3JfZGVncmVlICs9IGVsLmNvbnN1bHRhbnRfZGVncmVlX25hbWUgKyAiLiAiOwogICAgICAgIH0pOwogICAgICAgIG9iai5kb2N0b3JfbmFtZSA9IGVsZW1lbnQuZG9jX25vICsgIiAtICgiICsgb2JqLmRvY3Rvcl9kZWdyZWUgKyAiKSAtICIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lOwoKICAgICAgICBfdGhpczI2LmRvY3Rvckxpc3QucHVzaChvYmopOwogICAgICB9KTsKICAgIH0sCiAgICBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2U6IGZ1bmN0aW9uIGZpbHRlckRvY3RvcnNEZXBhcnRtZW50V2lzZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRlcGFydG1lbnRfaWQgPT09IHRoaXMuYXNzaWduUm91bmREb2N0b3IuZGVwYXJ0bWVudF9pZDsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZ2V0Q2hhcmdlOiBmdW5jdGlvbiBnZXRDaGFyZ2UoKSB7CiAgICAgIHZhciBhRG9jdG9yID0gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuZG9jdG9yX2lkID09PSB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLnJvdW5kX2RvY3Rvcl9pZDsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMuYXNzaWduUm91bmREb2N0b3IuY2hhcmdlID0gYURvY3RvclswXS5pcGRfY29uc3VsdGFuY3lfZmVlOwogICAgfSwKICAgIC8vIFJvdW5kIERvY3RvcgogICAgcm91bmREb2N0b3I6IGZ1bmN0aW9uIHJvdW5kRG9jdG9yKCkgewogICAgICB0aGlzLmxpc3RSb3VuZERvY3RvckRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnJvdW5kRG9jdG9yRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBmb3JtYXR0ZWRSb3VuZERvY3Rvckxpc3Q6IGZ1bmN0aW9uIGZvcm1hdHRlZFJvdW5kRG9jdG9yTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucm91bmREb2N0b3JMaXN0ID0gW107CiAgICAgIHRoaXMucm91bmREb2N0b3JMaXN0ID0gZGF0YTsKICAgICAgdGhpcy5saXN0Um91bmREb2N0b3JEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGZvcm1hdHRlZFRha2VuTGlzdDogZnVuY3Rpb24gZm9ybWF0dGVkVGFrZW5MaXN0KGRhdGEpIHsKICAgICAgdGhpcy50YWtlblNlcnZpY2VQYWNrYWdlT2JqLmxzdFRha2VuU2VydmljZSA9IGRhdGEubHN0VGFrZW5TZXJ2aWNlOwogICAgICB0aGlzLnRha2VuU2VydmljZVBhY2thZ2VPYmoubGFzdFRha2VuU2VydmljZVBhY2thZ2UgPSBkYXRhLmxhc3RUYWtlblNlcnZpY2VQYWNrYWdlOwogICAgICB0aGlzLnRha2VuU2VydmljZVBhY2thZ2VEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIHNlcnZpY2VGb3JtYXR0ZWQ6IGZ1bmN0aW9uIHNlcnZpY2VGb3JtYXR0ZWQoZGF0YSkgewogICAgICB2YXIgX3RoaXMyNyA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5zZXJ2aWNlX2hlYWRfaWQgPT0gJzEnIHx8IGVsLnNlcnZpY2VfaGVhZF9pZCA9PSAnMyc7CiAgICAgIH0sIHRoaXMpOwogICAgICB2YXIgZmlsdGVyRGF0YTIgPSBmaWx0ZXJEYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWUgJiYgZWwuc2VydmljZV90eXBlX2lkICE9ICcyJzsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMuaVBEU2VydmljZU9iai5sc3RTZXJ2aWNlID0gW107CiAgICAgIGZpbHRlckRhdGEyLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczI3LmlQRFNlcnZpY2VPYmoubHN0U2VydmljZS5wdXNoKHsKICAgICAgICAgIHNlcnZpY2VfaWQ6IGVsZW1lbnQuc2VydmljZV9pZCwKICAgICAgICAgIHNlcnZpY2VfbmFtZTogZWxlbWVudC5zZXJ2aWNlX25hbWUsCiAgICAgICAgICBzZXJ2aWNlX2hlYWRfaWQ6IGVsZW1lbnQuc2VydmljZV9oZWFkX2lkLAogICAgICAgICAgX3NlcnZpY2VfaGVhZF9uYW1lOiBlbGVtZW50Ll9zZXJ2aWNlX2hlYWRfbmFtZSwKICAgICAgICAgIHNlcnZpY2VfdHlwZV9pZDogZWxlbWVudC5zZXJ2aWNlX3R5cGVfaWQsCiAgICAgICAgICBfc2VydmljZV90eXBlX25hbWU6IGVsZW1lbnQuX3NlcnZpY2VfdHlwZV9uYW1lLAogICAgICAgICAgc2VydmljZV9jaGFyZ2U6IGVsZW1lbnQuc2VydmljZV9jaGFyZ2UsCiAgICAgICAgICBlcl9zZXJ2aWNlX2NoYXJnZTogZWxlbWVudC5lcl9zZXJ2aWNlX2NoYXJnZSwKICAgICAgICAgIGRpc2NvdW50OiBlbGVtZW50LmRpc2NvdW50LAogICAgICAgICAgaXNDaGVjazogZmFsc2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2VydmljZVBhY2thZ2VGb3JtYXR0ZWQ6IGZ1bmN0aW9uIHNlcnZpY2VQYWNrYWdlRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMjggPSB0aGlzOwoKICAgICAgdGhpcy5pUERTZXJ2aWNlUGFja2FnZU9iai5sc3RTZXJ2aWNlUGFja2FnZSA9IFtdOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczI4LmlQRFNlcnZpY2VQYWNrYWdlT2JqLmxzdFNlcnZpY2VQYWNrYWdlLnB1c2goewogICAgICAgICAgc2VydmljZV9wYWNrYWdlX2lkOiBlbGVtZW50LnNlcnZpY2VfcGFja2FnZV9pZCwKICAgICAgICAgIHNlcnZpY2VfcGFja2FnZV9uYW1lOiBlbGVtZW50LnNlcnZpY2VfcGFja2FnZV9uYW1lLAogICAgICAgICAgY2hhcmdlOiBlbGVtZW50LmNoYXJnZSwKICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEFzc2lnbiBSb3VuZCBEb2N0b3IKICAgIGFkZERvY3RvckFzc2lnbjogZnVuY3Rpb24gYWRkRG9jdG9yQXNzaWduKCkgewogICAgICB2YXIgX3RoaXMyOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyOS5hc3NpZ25Sb3VuZERvY3Rvci5kZXBhcnRtZW50X2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyOS5hc3NpZ25Sb3VuZERvY3Rvci5yb3VuZF9kb2N0b3JfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczI5LmFzc2lnblJvdW5kRG9jdG9yLmNoYXJnZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyOS5hc3NpZ25Sb3VuZERvY3Rvci5yb3VuZF90aW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyOS5pUERTZXJ2aWNlLmFzc2lnbklQRFJvdW5kRG9jdG9yKF90aGlzMjkuYXNzaWduUm91bmREb2N0b3IsIF90aGlzMjkpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczI5LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczI5LmhpZGVEaWFsb2coKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjkuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyOS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGRTZXJ2aWNlOiBmdW5jdGlvbiBhZGRTZXJ2aWNlKCkgewogICAgICB2YXIgX3RoaXMzMCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczMwLmlQRFNlcnZpY2VPYmoubHN0U2VydmljZSA9IF90aGlzMzAuaVBEU2VydmljZU9iai5sc3RTZXJ2aWNlLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlzQ2hlY2sgPT0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0sIF90aGlzMzApOwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMzAuaVBEU2VydmljZU9iai5sc3RTZXJ2aWNlLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzAuaVBEU2VydmljZS5zYXZlSVBEU2VydmljZShfdGhpczMwLmlQRFNlcnZpY2VPYmosIF90aGlzMzApOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDUuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMzAuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMzAuaGlkZURpYWxvZygpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzMC5nZXRTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczMwLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMzAuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXMzMC5nZXRTZXJ2aWNlKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzMC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTZWxlY3QgU2VydmljZSIsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZFNlcnZpY2VQYWNrYWdlOiBmdW5jdGlvbiBhZGRTZXJ2aWNlUGFja2FnZSgpIHsKICAgICAgdmFyIF90aGlzMzEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMzMS5pUERTZXJ2aWNlUGFja2FnZU9iai5sc3RTZXJ2aWNlUGFja2FnZSA9IF90aGlzMzEuaVBEU2VydmljZVBhY2thZ2VPYmoubHN0U2VydmljZVBhY2thZ2UuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWwuaXNDaGVjayA9PSB0cnVlOwogICAgICAgICAgICAgICAgfSwgX3RoaXMzMSk7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMzMS5pUERTZXJ2aWNlUGFja2FnZU9iai5sc3RTZXJ2aWNlUGFja2FnZS5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMxLmlQRFNlcnZpY2Uuc2F2ZUlQRFNlcnZpY2VQYWNrYWdlKF90aGlzMzEuaVBEU2VydmljZVBhY2thZ2VPYmosIF90aGlzMzEpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMzEuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMzEuaGlkZURpYWxvZygpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzMS5nZXRTZXJ2aWNlUGFja2FnZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzMS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczMxLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzMzEuZ2V0U2VydmljZVBhY2thZ2UoKTsKCiAgICAgICAgICAgICAgICBfdGhpczMxLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNlbGVjdCBQYWNrYWdlIiwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/nurse-panel/AdmittedPatientRequest.js"],"names":["AdmissionService","AdmissionPrescriptionService","CommonService","moment","Validation","FilterService","FilterMatchMode","FilterOperator","PatientInvestigationRequestService","PatientReportService","ConsultancyDepartmentSetupService","DoctorSetupService","BuildingSetupService","RoomSetupService","InvestigationSetupService","ProductSetupService","IPDRequestService","ServiceSetupService","ServicePackageSetupService","IPDService","MedicineRequestService","IPDReportService","MedicineSetupService","data","filteredItems","dataList","isNurse","isRequest","pharmacy","active","expandedRows","admittedPatientList","admittedPatient","cdfromdate","String","Date","format","cdtodate","submitted","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","admission_id","patient_id","doctor_id","doctor_no","reffered_by_id","investigationRequestDialog","lstPrescriptionInvestigation","isExist","buildingList","roomList","investigationList","reportDeliveryTypeList","productList","patientInvestigationRequest","aPatient","age_year","age_month","age_day","cdinvestigation_request_date","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_by_id","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","discountByList","text","iPDInvestigationRequestList","iPDInvestigationRequest","investigation_request_id","invoice_id","admission_no","registration_no","patient_name","iPDMedicineRequestList","iPDPrescriptionList","iPDPrescriptionMedicineList","iPDMedicineRequest","lstMedicineRequestDetails","iPDMedicineRequestDialog","addMedicineDialog","addMedicine","medicineList","serviceDialog","iPDServiceObj","lstService","servicePackageDialog","iPDServicePackageObj","lstServicePackage","takenServicePackageDialog","takenServicePackageObj","lstTakenService","lastTakenServicePackage","departmentList","doctorList","assignRoundDoctor","roundDoctorList","listRoundDoctorDialog","roundDoctorDialog","created","admissionService","admissionPrescriptionService","commonService","validation","userInfo","JSON","parse","localStorage","getItem","show","nurse_id","patientInvestigationRequestService","doctorSetupService","consultancyDepartmentSetupService","buildingSetupService","roomSetupService","investigationSetupService","productSetupService","patientReportService","iPDRequestService","serviceSetupService","servicePackageSetupService","iPDService","medicineRequestService","iPDReportService","medicineSetupService","getAll","then","GetAllReportDeliveryType","getService","getServicePackage","getActiveCombo","mergeDoctorInfo","methods","serviceFormatted","servicePackageFormatted","fromdate","todate","admittedPatientListForHistoryByNurseId","hideDialog","hideCollectionRequest","collectionRequest","getIPDInvestigationRequestByAdmissionId","getMedicineRequestListByAdmissionNo","doc_no","formatDate","formatDateTime","printInvestigationToken","id","GetInvestigationToken","Downloadfile","newInvestigationRequest","getPrescriptionInvestigationByAdmissionId","prescriptionInvestigation","forEach","element","push","investigation_id","investingation_name","isCheck","investigationRequest","filter","el","getFormattedPrescriptionWiseInvestigations","iPDInvestigationRequestSave","result","status","reset","$toast","add","severity","summary","detail","res","life","printMedicineRequest","GetMedicineRequestToken","newMedicineRequest","prescribeMedicine","admission_prescription_id","getPrescriptionNoByAdmissionId","prescriptionNo","hideMedicineRequest","getPrescriptionData","getPrescriptionDataByPrescriptionId","prescriptionData","medicine_id","medicine_name","barcode","treatment_rule_name","treatment_duration_name","treatment_dose_name","medicine_generic_name","strgenth","medicine_type_name","uom_name","manufacturer_name","request_qty","addNewMedicine","getMedicineList","searchMedicine","event","setTimeout","query","trim","length","toLowerCase","slice","addRequestMedicine","ddlmedicine","_medicine_generic_name","_medicine_type_name","_uom_name","medicine_manufacturer_name","_manufacturer_name","setRequestMedicine","filterData","aMedicine","medicine_strgenth","medicine_uom_name","deleteRequestMedicine","medicineRequest","patient_registration_no","first_name","contact_no","reffered_doctor_id","aInvestigation","ddlinvestigation","addInvestigation","investigationIsExist","isInvestigation","cost","charge","urgent_carge","deliveryTime","expectedHour","report_delivery_duration","emmergency_report_delivery_duration","discountAmount","totalAmount","obj","_investingation_name","_investigation_category_head_name","building_id","_building_id","room_id","_room_id","expected_delivery","quantity","calculateTotalAmount","addParticular","calculatePerInvestigationDiscountPercent","calculateCostPrice","calculatePerInvestigationDiscountAmount","costPrice","Math","ceil","getById","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","checkQty","_lstInvestigationParticular","totalPrice","getDiscountPercent","getDiscountAmount","h","travelTime","deleteFromList","deleteFromParticularList","investigation_request_date","currentDate","dob","getFullYear","getMonth","getDate","toString","takeService","takePackage","takenList","getTakenServiceAndServicePackage","formattedTakenList","viewRoundDoctor","getAssignIPDRoundDoctor","formattedRoundDoctorList","setMainConsultant","isMainConsultant","aAdmittedPatient","department_id","consultancy_department_id","round_doctor_id","ipd_consultancy_fee","doctor_degree","lstConsultantDegree","consultant_degree_name","doctor_name","filterDoctorsDepartmentWise","getCharge","aDoctor","roundDoctor","service_head_id","filterData2","service_type_id","service_id","service_name","_service_head_name","_service_type_name","service_charge","er_service_charge","discount","service_package_id","service_package_name","addDoctorAssign","round_time","assignIPDRoundDoctor","addService","saveIPDService","addServicePackage","saveIPDServicePackage"],"mappings":"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","sourcesContent":["import AdmissionService from \"../../service/front-desk/AdmissionService\";\r\nimport AdmissionPrescriptionService from \"../../service/prescription/AdmissionPrescriptionService\";\r\n\r\nimport CommonService from \"../../service/CommonService\";\r\n\r\nimport moment from \"moment\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport { FilterService, FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\n// Investigation Request\r\nimport PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\n//import PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\n//import DesignationSetupService from \"../../service/setup/DesignationSetupService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\n//import EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\n//import ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\nimport IPDRequestService from \"../../service/ipd/IPDRequestService\";\r\n// Service & Package\r\nimport ServiceSetupService from \"../../service/setup/ServiceSetupService\";\r\nimport ServicePackageSetupService from \"../../service/setup/ServicePackageSetupService\";\r\nimport IPDService from \"../../service/ipd/IPDService\";\r\n// Pharmacy\r\nimport MedicineRequestService from \"../../service/pharmacy/MedicineRequestService\";\r\nimport IPDReportService from \"../../service/report/IPDReportService\";\r\nimport MedicineSetupService from \"../../service/setup/MedicineSetupService\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            filteredItems: null,\r\n            dataList: true,\r\n            isNurse: false,\r\n            isRequest: false,\r\n            pharmacy: false,\r\n            active: 0,\r\n            expandedRows: [],\r\n            admittedPatientList: [],\r\n            admittedPatient: {\r\n                // cdfromdate: moment(\r\n                //     String(new Date(new Date().setDate(new Date().getDate() - 860)))\r\n                // ).format(\"MM/DD/YYYY\"),\r\n                cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n                cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n                // cdtodate: moment(\r\n                //     String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n                // ).format(\"MM/DD/YYYY\"),\r\n            },\r\n            //\r\n\r\n            submitted: false,\r\n            filters: {\r\n                global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n                name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            },\r\n            initFilters() {\r\n                this.filters = {\r\n                    global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n                    name: {\r\n                        operator: FilterOperator.AND,\r\n                        constraints: [\r\n                            { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n                        ],\r\n                    },\r\n                };\r\n            },\r\n\r\n            // Investigation Request\r\n            admission_id: null,\r\n            patient_id: null,\r\n            doctor_id: null,\r\n            doctor_no: null,\r\n            reffered_by_id: null,\r\n            investigationRequestDialog: false,\r\n            lstPrescriptionInvestigation: [],\r\n\r\n            //isInvestigation: true,\r\n            //isPrescription: false,\r\n            //isContactExist: \"\",\r\n            //isValid: \"\",\r\n            //isEmailValid: \"\",\r\n            //isPatientExist: \"\",\r\n            isExist: \"\",\r\n            //collectionList: [],\r\n            //bloodGroupList: [],\r\n            //genderList: [],\r\n            //designationtList: [],\r\n            //departmentList: [],\r\n            //doctorList: [],\r\n            buildingList: [],\r\n            roomList: [],\r\n            //referredByList: [],\r\n            //employeeList: [],\r\n            //discountByList: [],\r\n            investigationList: [],\r\n            reportDeliveryTypeList: [],\r\n            productList: [],\r\n            patientInvestigationRequest: {\r\n                patient_id: \"\",\r\n                aPatient: {\r\n                    age_year: \"0\",\r\n                    age_month: \"0\",\r\n                    age_day: \"0\",\r\n                },\r\n                cdinvestigation_request_date: moment(String(new Date())).format(\r\n                    \"MM/DD/YYYY\"\r\n                ),\r\n                report_delivery_type: \"Regular\",\r\n                lstInvestigationRequestDetails: [],\r\n                lstInvestigationParticular: [],\r\n                discount_by_id: \"Company\",\r\n                discount_percent: 0,\r\n                discount_amount: 0,\r\n                cost_price: 0,\r\n                particular_cost_price: 0,\r\n                total_amount: 0,\r\n            },\r\n            discountByList: [\r\n                { text: \"Both\", value: \"Both\" },\r\n                { text: \"Hospital\", value: \"Company\" },\r\n                { text: \"Reference\", value: \"Reference\" },\r\n            ],\r\n\r\n            // Investigation Request\r\n            iPDInvestigationRequestList: [],\r\n            iPDInvestigationRequest: {\r\n                investigation_request_id: null,\r\n                admission_id: null,\r\n            },\r\n            // Pharmacy\r\n            invoice_id: null,\r\n            admission_no: null,\r\n            registration_no: null,\r\n            patient_name: null,\r\n            iPDMedicineRequestList: [],\r\n            iPDPrescriptionList: [],\r\n            iPDPrescriptionMedicineList: [],\r\n            iPDMedicineRequest: {\r\n                lstMedicineRequestDetails: [],\r\n            },\r\n            iPDMedicineRequestDialog: false,\r\n            addMedicineDialog: false,\r\n            addMedicine: {},\r\n            medicineList: [],\r\n\r\n            // Service\r\n            serviceDialog: false,\r\n            iPDServiceObj: {\r\n                lstService: [],\r\n            },\r\n            // Package\r\n            servicePackageDialog: false,\r\n            iPDServicePackageObj: {\r\n                lstServicePackage: [],\r\n            },\r\n            // Taken Service & Package\r\n            takenServicePackageDialog: false,\r\n            takenServicePackageObj: {\r\n                lstTakenService: [],\r\n                lastTakenServicePackage: [],\r\n            },\r\n            // Round Doctor\r\n            departmentList: [],\r\n            doctorList: [],\r\n            assignRoundDoctor: {},\r\n            roundDoctorList: [],\r\n            listRoundDoctorDialog: false,\r\n            roundDoctorDialog: false,\r\n        };\r\n    },\r\n    created() {\r\n        this.admissionService = new AdmissionService();\r\n        this.admissionPrescriptionService = new AdmissionPrescriptionService();\r\n\r\n        this.commonService = new CommonService();\r\n        this.validation = new Validation();\r\n\r\n        this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n        this.show();\r\n\r\n        if (this.userInfo.nurse_id) {\r\n            this.isNurse = true;\r\n        } else if (!this.userInfo.nurse_id) {\r\n            this.isNurse = false;\r\n        }\r\n\r\n        // Investigation Request\r\n        this.patientInvestigationRequestService =\r\n            new PatientInvestigationRequestService();\r\n        //this.patientRegistrationService = new PatientRegistrationService();\r\n        //this.employeeSetupService = new EmployeeSetupService();\r\n        this.doctorSetupService = new DoctorSetupService();\r\n        this.consultancyDepartmentSetupService =\r\n            new ConsultancyDepartmentSetupService();\r\n        //this.designationSetupService = new DesignationSetupService();\r\n        this.buildingSetupService = new BuildingSetupService();\r\n        this.roomSetupService = new RoomSetupService();\r\n        //this.referredBySetupService = new ReferredBySetupService();\r\n        this.investigationSetupService = new InvestigationSetupService();\r\n        this.productSetupService = new ProductSetupService();\r\n        //this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n        this.patientReportService = new PatientReportService();\r\n        //this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n        this.iPDRequestService = new IPDRequestService();\r\n        // Service & Package\r\n        this.serviceSetupService = new ServiceSetupService();\r\n        this.servicePackageSetupService = new ServicePackageSetupService();\r\n        this.iPDService = new IPDService();\r\n        // Pharmacy\r\n        this.medicineRequestService = new MedicineRequestService();\r\n        this.iPDReportService = new IPDReportService();\r\n        this.medicineSetupService = new MedicineSetupService();\r\n\r\n\r\n        // this.commonService\r\n        //     .GetAllGender()\r\n        //     .then((data) => (this.genderList = data.data));\r\n\r\n        // this.commonService\r\n        //     .GetAllBloodGroup()\r\n        //     .then((data) => (this.bloodGroupList = data.data));\r\n\r\n        // this.designationSetupService\r\n        //     .getAll()\r\n        //     .then((data) => (this.designationtList = data.data));\r\n\r\n        // this.consultancyDepartmentSetupService\r\n        //     .getActiveCombo()\r\n        //     .then((data) => (this.departmentList = data.data));\r\n\r\n        // this.buildingSetupService\r\n        //     .getAll()\r\n        //     .then((data) => (this.buildingList = data.data));\r\n\r\n        // this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n        // this.referredBySetupService\r\n        //   .getActiveCombo()\r\n        //   .then((data) => (this.referredByList = data.data));\r\n\r\n        // this.referredBySetupService\r\n        //   .getActiveCombo()\r\n        //   .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n        // this.referredBySetupService\r\n        //   .getAll()\r\n        //   .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n        // this.doctorSetupService\r\n        //   .getAll()\r\n        //   .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n        // this.employeeSetupService\r\n        //   .getAll()\r\n        //   .then((data) => this.mergeEmployeeInfo(data.data));\r\n\r\n        this.investigationSetupService\r\n            .getAll()\r\n            .then((data) => (this.investigationList = data.data));\r\n\r\n        // this.investigationSetupService\r\n        //     .getAll()\r\n        //     .then((data) => this.formatInvestigationList(data.data));\r\n\r\n        this.commonService\r\n            .GetAllReportDeliveryType()\r\n            .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n        this.productSetupService\r\n            .getAll()\r\n            .then((data) => (this.productList = data.data));\r\n\r\n        // Service & Package\r\n        this.getService();\r\n        this.getServicePackage();\r\n\r\n        //\r\n        this.consultancyDepartmentSetupService\r\n            .getActiveCombo()\r\n            .then((data) => (this.departmentList = data.data));\r\n\r\n        this.doctorSetupService\r\n            .getAll()\r\n            .then((data) => this.mergeDoctorInfo(data.data));\r\n    },\r\n    methods: {\r\n        getService() {\r\n            this.serviceSetupService\r\n                .getAll()\r\n                .then((data) => this.serviceFormatted(data.data));\r\n        },\r\n        getServicePackage() {\r\n            this.servicePackageSetupService\r\n                .getAll()\r\n                .then((data) => this.servicePackageFormatted(data.data));\r\n        },\r\n\r\n        show() {\r\n            this.submitted = true;\r\n            if (!this.admittedPatient.cdfromdate) {\r\n                return;\r\n            } else if (!this.admittedPatient.cdtodate) {\r\n                return;\r\n            } else {\r\n                this.admittedPatient.fromdate = moment(\r\n                    String(this.admittedPatient.cdfromdate)\r\n                ).format(\"YYYY-MM-DD\");\r\n                this.admittedPatient.todate = moment(\r\n                    String(this.admittedPatient.cdtodate)\r\n                ).format(\"YYYY-MM-DD\");\r\n                this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n                this.admissionService\r\n                    .admittedPatientListForHistoryByNurseId(this.admittedPatient.fromdate, this.admittedPatient.todate, this.userInfo.nurse_id)\r\n                    .then((data) => (this.admittedPatientList = data.data));\r\n            }\r\n            this.dataList = true;\r\n            this.submitted = true;\r\n        },\r\n        hideDialog() {\r\n            //var patientId = JSON.parse(localStorage.getItem(\"patientIdForTreatment\")).toString();\r\n            this.roundDoctorDialog = false;\r\n            this.listRoundDoctorDialog = false;\r\n            this.servicePackageDialog = false;\r\n            this.takenServicePackageDialog = false;\r\n            this.serviceDialog = false;\r\n            this.investigationRequestDialog = false;\r\n            this.iPDMedicineRequestDialog = false;\r\n            this.addMedicineDialog = false,\r\n                this.addMedicine = {},\r\n                this.submitted = false;\r\n        },\r\n        hideCollectionRequest() {\r\n            this.isRequest = false;\r\n            this.dataList = true;\r\n            //localStorage.removeItem('patientIdForTreatment');\r\n        },\r\n        collectionRequest(data) {\r\n            this.getIPDInvestigationRequestByAdmissionId(data.admission_id);\r\n            this.getMedicineRequestListByAdmissionNo(data.admission_no);\r\n            this.invoice_id = data.invoice_id;\r\n            this.admission_id = data.admission_id;\r\n            this.admission_no = data.admission_no;\r\n            this.patient_id = data.patient_id;\r\n            this.registration_no = data.registration_no;\r\n            this.patient_name = data.patient_name;\r\n            this.doctor_id = data.doctor_id;\r\n            this.doctor_no = data.doc_no;\r\n            this.reffered_by_id = data.reffered_by_id;\r\n            this.isRequest = true;\r\n            this.dataList = false;\r\n        },\r\n\r\n        formatDate(value) {\r\n            return moment(String(value)).format(\"MM/DD/YYYY\");\r\n        },\r\n        formatDateTime(value) {\r\n            return moment(String(value)).format(\"MM/DD/YYYY h:mm:ss a\");\r\n        },\r\n        // Investigation Request\r\n        getIPDInvestigationRequestByAdmissionId(admission_id) {\r\n            this.iPDRequestService.getIPDInvestigationRequestByAdmissionId(admission_id)\r\n                .then((data) => (this.iPDInvestigationRequestList = data.data));\r\n        },\r\n        printInvestigationToken(id) {\r\n            this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n        },\r\n        newInvestigationRequest() {\r\n            this.admissionPrescriptionService\r\n                .getPrescriptionInvestigationByAdmissionId(this.admission_id)\r\n                .then((data) => this.prescriptionInvestigation(data.data));\r\n        },\r\n        prescriptionInvestigation(data) {\r\n            this.lstPrescriptionInvestigation = [];\r\n            data.forEach((element) => {\r\n                this.lstPrescriptionInvestigation.push({\r\n                    admission_id: element.admission_id,\r\n                    investigation_id: element.investigation_id,\r\n                    investingation_name: element.investingation_name,\r\n                    isCheck: false\r\n                });\r\n            });\r\n\r\n            this.investigationRequestDialog = true;\r\n        },\r\n        investigationRequest() {\r\n            this.lstPrescriptionInvestigation = this.lstPrescriptionInvestigation.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            this.getFormattedPrescriptionWiseInvestigations(this.lstPrescriptionInvestigation);\r\n        },\r\n        async iPDInvestigationRequestSave() {\r\n            try {\r\n                if (!this.iPDInvestigationRequest.investigation_request_id) {\r\n                    return;\r\n                } else if (!this.iPDInvestigationRequest.admission_id) {\r\n                    return;\r\n                } else {\r\n                    let result = await this.iPDRequestService.iPDInvestigationRequestSave(this.iPDInvestigationRequest);\r\n                    if (result.status === 201) {\r\n                        this.getIPDInvestigationRequestByAdmissionId(this.admission_id);\r\n                        this.reset();\r\n                        this.hideDialog();\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n\r\n        // Pharmacy\r\n        getMedicineRequestListByAdmissionNo(admission_no) {\r\n            this.medicineRequestService.getMedicineRequestListByAdmissionNo(admission_no)\r\n                .then((data) => (this.iPDMedicineRequestList = data.data));\r\n        },\r\n        printMedicineRequest(id) {\r\n            this.iPDReportService.GetMedicineRequestToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n        },\r\n        newMedicineRequest() {\r\n            this.iPDMedicineRequest.lstMedicineRequestDetails = [];\r\n            this.pharmacy = true;\r\n            this.isRequest = false;\r\n            this.dataList = false;\r\n        },\r\n        prescribeMedicine() {\r\n            this.iPDMedicineRequest.admission_prescription_id = null;\r\n            this.iPDPrescriptionMedicineList = [];\r\n\r\n            this.admissionPrescriptionService\r\n                .getPrescriptionNoByAdmissionId(this.admission_id)\r\n                .then((data) => this.prescriptionNo(data.data));\r\n        },\r\n        prescriptionNo(data) {\r\n            this.iPDPrescriptionList = data;\r\n            this.iPDMedicineRequestDialog = true;\r\n        },\r\n        hideMedicineRequest() {\r\n            this.pharmacy = false;\r\n            this.isRequest = true;\r\n            this.dataList = false;\r\n        },\r\n        getPrescriptionData() {\r\n            if (this.iPDMedicineRequest.admission_prescription_id) {\r\n                this.admissionPrescriptionService\r\n                    .getPrescriptionDataByPrescriptionId(this.iPDMedicineRequest.admission_prescription_id)\r\n                    .then((data) => this.prescriptionData(data.data));\r\n            }\r\n        },\r\n        prescriptionData(data) {\r\n            this.iPDPrescriptionMedicineList = [];\r\n            data.forEach((element) => {\r\n                this.iPDPrescriptionMedicineList.push({\r\n                    medicine_id: element.medicine_id,\r\n                    medicine_name: element.medicine_name,\r\n                    barcode: element.barcode,\r\n                    treatment_rule_name: element.treatment_rule_name,\r\n                    treatment_duration_name: element.treatment_duration_name,\r\n                    treatment_dose_name: element.treatment_dose_name,\r\n                    medicine_generic_name: element.medicine_generic_name,\r\n                    strgenth: element.strgenth,\r\n                    medicine_type_name: element.medicine_type_name,\r\n                    uom_name: element.uom_name,\r\n                    manufacturer_name: element.manufacturer_name,\r\n                    request_qty: 1,\r\n                    isCheck: false\r\n                });\r\n            });\r\n        },\r\n        // Add Medicine\r\n        addNewMedicine() {\r\n            this.medicineSetupService\r\n                .getAll()\r\n                .then((data) => this.getMedicineList(data.data));\r\n        },\r\n        getMedicineList(data) {\r\n            this.medicineList = data;\r\n            this.addMedicineDialog = true;\r\n        },\r\n        searchMedicine(event) {\r\n            setTimeout(() => {\r\n                if (!event.query.trim().length) {\r\n                    this.filteredItems = [...this.medicineList];\r\n                }\r\n                else {\r\n                    // start with\r\n                    // this.filteredItems = this.medicineList.filter((item) => {\r\n                    //     return item.text.toLowerCase().startsWith(event.query.toLowerCase());\r\n                    // });\r\n\r\n                    // contains\r\n                    this.filteredItems = FilterService.filter(this.medicineList, ['medicine_name'], event.query.toLowerCase(), FilterMatchMode.CONTAINS).slice(0, 10);\r\n                }\r\n            }, 250);\r\n        },\r\n        addRequestMedicine() {\r\n            this.submitted = true;\r\n            if(!this.addMedicine.ddlmedicine){\r\n                return;\r\n            } else if (!this.addMedicine.request_qty){\r\n                return;\r\n            } else{\r\n                this.iPDPrescriptionMedicineList.push({\r\n                    medicine_id: this.addMedicine.ddlmedicine.medicine_id,\r\n                    medicine_name: this.addMedicine.ddlmedicine.medicine_name,\r\n                    barcode: this.addMedicine.ddlmedicine.barcode,\r\n                    medicine_generic_name: this.addMedicine.ddlmedicine._medicine_generic_name,\r\n                    strgenth: this.addMedicine.ddlmedicine.strgenth,\r\n                    medicine_type_name: this.addMedicine.ddlmedicine._medicine_type_name,\r\n                    uom_name: this.addMedicine.ddlmedicine._uom_name,\r\n                    medicine_manufacturer_name: this.addMedicine.ddlmedicine._manufacturer_name,\r\n                    isCheck: true,\r\n                    request_qty: this.addMedicine.request_qty\r\n                });\r\n                this.submitted = false;\r\n            }\r\n            this.setRequestMedicine();\r\n        },\r\n        setRequestMedicine() {\r\n            var filterData = this.iPDPrescriptionMedicineList.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            filterData.forEach((element) => {\r\n                var aMedicine =\r\n                    this.iPDMedicineRequest.lstMedicineRequestDetails.filter(\r\n                        function (el) {\r\n                            return el.medicine_id === element.medicine_id;\r\n                        },\r\n                        this\r\n                    );\r\n                if (!aMedicine.length) {\r\n                    this.iPDMedicineRequest.lstMedicineRequestDetails.push({\r\n                        medicine_id: element.medicine_id,\r\n                        medicine_name: element.medicine_name,\r\n                        barcode: element.barcode,\r\n                        treatment_rule_name: element.treatment_rule_name,\r\n                        treatment_duration_name: element.treatment_duration_name,\r\n                        treatment_dose_name: element.treatment_dose_name,\r\n                        medicine_generic_name: element.medicine_generic_name,\r\n                        medicine_strgenth: element.strgenth,\r\n                        medicine_type_name: element.medicine_type_name,\r\n                        medicine_uom_name: element.uom_name,\r\n                        medicine_manufacturer_name: element.manufacturer_name,\r\n                        isCheck: element.isCheck,\r\n                        request_qty: (element.request_qty == \"\" || element.request_qty == 0) ? 1 : element.request_qty\r\n                    });\r\n                    this.hideDialog();\r\n                }\r\n                else {\r\n                    this.$toast.add({\r\n                        severity: \"warn\",\r\n                        summary: \"Warn Message\",\r\n                        detail: aMedicine[0].medicine_name + \" already added\",\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        deleteRequestMedicine(data) {\r\n            this.iPDMedicineRequest.lstMedicineRequestDetails = this.iPDMedicineRequest.lstMedicineRequestDetails.filter(function (el) {\r\n                return el.medicine_id != data.medicine_id;\r\n            }, this);\r\n        },\r\n        // Medicine Request\r\n        async medicineRequest() {\r\n            try {\r\n                this.iPDMedicineRequest.invoice_id = this.invoice_id;\r\n                this.iPDMedicineRequest.admission_no = this.admission_no;\r\n                this.iPDMedicineRequest.patient_registration_no = this.registration_no;\r\n                this.iPDMedicineRequest.patient_name = this.patient_name;\r\n                var aMedicine = this.iPDMedicineRequest.lstMedicineRequestDetails.filter(function (el) {\r\n                    return el.request_qty == \"\";\r\n                }, this);\r\n\r\n                if (!this.iPDMedicineRequest.invoice_id) {\r\n                    return;\r\n                } else if (!this.iPDMedicineRequest.admission_no) {\r\n                    return;\r\n                } else if (!this.iPDMedicineRequest.patient_registration_no) {\r\n                    return;\r\n                } else if (!this.iPDMedicineRequest.patient_name) {\r\n                    return;\r\n                } else if (aMedicine.length) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: \"Please enter medicine qty\",\r\n                        life: 10000,\r\n                    });\r\n                    return;\r\n                } else if (\r\n                    !this.iPDMedicineRequest.lstMedicineRequestDetails.length\r\n                ) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: \"Please add medicine for request\",\r\n                        life: 10000,\r\n                    });\r\n                    return;\r\n                } else {\r\n                    let result = await this.medicineRequestService.add(\r\n                        this.iPDMedicineRequest, this\r\n                    );\r\n                    if (result.status === 200) {\r\n                        this.$toast.add({\r\n                            severity: \"success\",\r\n                            summary: \"Success\",\r\n                            detail: \"Request Successfully\",\r\n                            life: 10000,\r\n                        });\r\n                        this.hideMedicineRequest();\r\n                        this.getMedicineRequestListByAdmissionNo(this.admission_no);\r\n                        this.printMedicineRequest(result.data);\r\n\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n        // formatInvestigationList(data) {\r\n        //     let filterData = data.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        //     filterData.forEach((element) => {\r\n        //         var obj = element;\r\n        //         obj.investingation_name = element.manual_code + \"-\" + element.investingation_name;\r\n        //         this.investigationList.push(obj);\r\n        //     });\r\n        // },\r\n        // mergeReferredByInfo(data) {\r\n        //     let filterData = data.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        //     filterData.forEach((element) => {\r\n        //         this.referredByList.push({\r\n        //             value: element.registration_no,\r\n        //             text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n        //         });\r\n        //     });\r\n        // },\r\n        // mergeDoctorInfo(data) {\r\n        //     //this.doctorList = data;\r\n        //     data.forEach((element) => {\r\n        //         this.referredByList.push({\r\n        //             value: element.doc_no,\r\n        //             text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        //         });\r\n        //     });\r\n\r\n        //     data.forEach((element) => {\r\n        //         this.doctorList.push({\r\n        //             department_id: element.department_id,\r\n        //             doctor_id: element.doctor_id,\r\n        //             doctor_name: element.doc_no + \"-\" + element.doctor_name,\r\n        //         });\r\n        //     });\r\n        // },\r\n        // mergeEmployeeInfo(data) {\r\n        //     let filterData = data.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        //     filterData.forEach((element) => {\r\n        //         this.referredByList.push({\r\n        //             value: element.emp_no,\r\n        //             text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        //         });\r\n        //     });\r\n        // },\r\n        // mergeDoctorInfo(data) {\r\n        //   this.doctorList = data;\r\n        //   data.forEach((element) => {\r\n        //     this.discountByList.push({\r\n        //       value: element.doc_no,\r\n        //       text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        //     });\r\n        //   });\r\n        // },\r\n        // mergeEmployeeInfo(data) {\r\n        //   data.forEach((element) => {\r\n        //     this.discountByList.push({\r\n        //       value: element.emp_no,\r\n        //       text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        //     });\r\n        //   });\r\n        // },\r\n        // invReset() {\r\n        //     this.isInvestigation = true;\r\n        //     this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n        //     this.isExist = \"\";\r\n        // },\r\n        reset() {\r\n            //this.isInvestigation = true;\r\n            //this.isPrescription = false;\r\n            //this.button = false;\r\n            //this.isValid = \"\";\r\n            //this.isEmailValid = \"\";\r\n            this.isExist = \"\";\r\n            //this.isContactExist = \"\";\r\n            this.patientInvestigationRequest = {\r\n                patient_id: \"\",\r\n                aPatient: {\r\n                    age_year: \"0\",\r\n                    age_month: \"0\",\r\n                    age_day: \"0\",\r\n                },\r\n                cdinvestigation_request_date: moment(String(new Date())).format(\r\n                    \"MM/DD/YYYY\"\r\n                ),\r\n                report_delivery_type: \"Regular\",\r\n                lstInvestigationRequestDetails: [],\r\n                lstInvestigationParticular: [],\r\n                discount_by_id: \"Company\",\r\n                discount_percent: 0,\r\n                discount_amount: 0,\r\n                cost_price: 0,\r\n                particular_cost_price: 0,\r\n                total_amount: 0,\r\n            };\r\n            this.submitted = false;\r\n            this.iPDInvestigationRequest = {\r\n                investigation_request_id: null,\r\n                admission_id: null,\r\n            }\r\n        },\r\n        // doctorReset() {\r\n        //     this.patientInvestigationRequest.department_id = \"\";\r\n        //     this.patientInvestigationRequest.reffered_doctor_id = \"\";\r\n        //     this.patientInvestigationRequest.designation_id = \"\";\r\n        //     this.patientInvestigationRequest.outside_doctor_name = \"\";\r\n        //     this.patientInvestigationRequest.outside_doctor_hospital_name = \"\";\r\n        // },\r\n        // filterDoctorsDepartmentWise() {\r\n        //     return this.doctorList.filter(function (el) {\r\n        //         return (\r\n        //             el.department_id === this.patientInvestigationRequest.department_id\r\n        //         );\r\n        //     }, this);\r\n        // },\r\n        // getConsultancyFeeByDoctorId() {\r\n        //     var aDoctor = this.doctorList.filter(function (el) {\r\n        //         return el.doctor_id === this.patientInvestigationRequest.doctor_id;\r\n        //     }, this);\r\n\r\n        //     this.patientInvestigationRequest.consultancy_fee =\r\n        //         aDoctor[0].consultancy_fee;\r\n        //     this.patientInvestigationRequest.building_id = aDoctor[0]._building_id;\r\n        //     this.patientInvestigationRequest.room_id = aDoctor[0].room_id;\r\n        // },\r\n        // filterRoomsBuildingWise() {\r\n        //     return this.roomList.filter(function (el) {\r\n        //         return el.building_id === this.patientInvestigationRequest.building_id;\r\n        //     }, this);\r\n        // },\r\n        // filterInvestigation() {\r\n        //     return this.investigationList.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        // },\r\n        // filterProduct() {\r\n        //     return this.productList.filter(function (el) {\r\n        //         return el.product_category_id == 1 && el.active == true;\r\n        //     }, this);\r\n        // },\r\n        // getFormatted(data) {\r\n        //     this.patientInvestigationRequest.aPatient = data;\r\n        //     if (!this.patientInvestigationRequest.aPatient.patient_id) {\r\n        //         this.isPatientExist = \"Patient not Exist!\";\r\n        //         // this.patientInvestigationRequest = {\r\n        //         //   patient_id: \"\",\r\n        //         //   aPatient: {},\r\n        //         // };\r\n        //         this.reset();\r\n        //     } else {\r\n        //         this.isPatientExist = \"\";\r\n\r\n        //         this.patientInvestigationRequest.patient_id =\r\n        //             this.patientInvestigationRequest.aPatient.patient_id;\r\n        //         this.patientInvestigationRequest.aPatient.cddob = moment(\r\n        //             String(this.patientInvestigationRequest.aPatient.dob)\r\n        //         ).format(\"YYYY-MM-DD\");\r\n        //         this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n        //         this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n        //         this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n        //     }\r\n        // },\r\n        getFormattedPrescriptionWiseInvestigations(data) {\r\n            this.patientInvestigationRequest.aPatient.first_name = \"IPD\";\r\n            this.patientInvestigationRequest.aPatient.contact_no = \"017\";\r\n            this.patientInvestigationRequest.patient_id = this.patient_id;\r\n            this.patientInvestigationRequest.reffered_doctor_id = this.doctor_id;\r\n            this.patientInvestigationRequest.reffered_by_id = this.reffered_by_id;\r\n            // this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n            // this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n            // this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n            // this.patientInvestigationRequest.department_id = data[0].department_id;\r\n            // this.patientInvestigationRequest.reffered_doctor_id = data[0].doctor_id;\r\n            // this.patientInvestigationRequest.reffered_by_id = data[0].doc_no;\r\n            //this.isPrescription = true;\r\n            data.forEach((element) => {\r\n                var aInvestigation =\r\n                    this.investigationList.filter(\r\n                        function (el) {\r\n                            return (\r\n                                el.investigation_id ===\r\n                                element.investigation_id\r\n                            );\r\n                        },\r\n                        this\r\n                    )[0];\r\n\r\n                this.patientInvestigationRequest.ddlinvestigation = aInvestigation;\r\n                this.addInvestigation();\r\n            });\r\n            this.add();\r\n        },\r\n        // findPatient() {\r\n        //     let str = this.patientInvestigationRequest.contactOrRegNo;\r\n\r\n        //     if (str.startsWith(\"PRES\")) {\r\n        //         this.appointmentPrescriptionService\r\n        //             .prescriptionWiseInvestigations(this.patientInvestigationRequest.contactOrRegNo, this)\r\n        //             .then((data) => this.getFormattedPrescriptionWiseInvestigations(data.data));\r\n        //     } else {\r\n        //         this.isPrescription = false;\r\n        //         this.patientRegistrationService\r\n        //             .getByContactOrRegNo(this.patientInvestigationRequest.contactOrRegNo, this)\r\n        //             .then((data) => this.getFormatted(data.data));\r\n        //     }\r\n        // },\r\n        // isExistContact() {\r\n        //     if (\r\n        //         this.patientInvestigationRequest.aPatient.contact_no.match(\r\n        //             /^(01)([0-9]{9})$/\r\n        //         )\r\n        //     ) {\r\n        //         this.patientRegistrationService\r\n        //             .getByContactOrRegNo(\r\n        //                 this.patientInvestigationRequest.aPatient.contact_no, this\r\n        //             )\r\n        //             .then((data) => this.getContact(data.data));\r\n        //     } else {\r\n        //         this.isContactExist =\r\n        //             \"Contact number must start with 01 and the required length is 11\";\r\n        //     }\r\n        // },\r\n        // getContact(data) {\r\n        //     if (data.contact_no) {\r\n        //         this.isContactExist = \"Duplicate phone number!\";\r\n        //     } else {\r\n        //         this.isContactExist = \"\";\r\n        //     }\r\n        // },\r\n        investigationIsExist() {\r\n            var aInvestigation =\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n                    function (el) {\r\n                        return (\r\n                            el.investigation_id ===\r\n                            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n                        );\r\n                    },\r\n                    this\r\n                );\r\n\r\n            if (aInvestigation.length) {\r\n                this.isExist = \"This Investigation already added\";\r\n                this.isInvestigation = true;\r\n                return;\r\n            } else {\r\n                // var aInv = this.investigationList.filter(function (el) {\r\n                //   return (\r\n                //     el.investigation_id ===\r\n                //     this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n                //   );\r\n                // }, this);\r\n                // this.collectionCenterSetupService\r\n                //   .getById(aInv[0].collection_center_id)\r\n                //   .then((data) => (this.collectionList = data.data));\r\n\r\n                this.isExist = \"\";\r\n                this.isInvestigation = false;\r\n            }\r\n        },\r\n        addInvestigation() {\r\n            this.submitted = true;\r\n            var aInvestigation =\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n                    function (el) {\r\n                        return (\r\n                            el.investigation_id ===\r\n                            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n                        );\r\n                    },\r\n                    this\r\n                );\r\n\r\n            if (aInvestigation.length) {\r\n                this.isExist = \"This Investigation already added\";\r\n                //this.isInvestigation = true;\r\n                return;\r\n            } else {\r\n                if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n                    return;\r\n                } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n                    return;\r\n                } else if (\r\n                    !this.patientInvestigationRequest.cdinvestigation_request_date\r\n                ) {\r\n                    return;\r\n                } else {\r\n                    this.isExist = \"\";\r\n                    var cost =\r\n                        this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n                            ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n                            : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n                    var deliveryTime = this.patientInvestigationRequest.report_delivery_type == \"Regular\" ? this.expectedHour(this.patientInvestigationRequest.ddlinvestigation.report_delivery_duration) : this.expectedHour(this.patientInvestigationRequest.ddlinvestigation.emmergency_report_delivery_duration);\r\n\r\n                    var discountAmount =\r\n                        (1 *\r\n                            cost *\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .discount_percent) /\r\n                        100;\r\n\r\n                    var totalAmount = 1 * cost - discountAmount;\r\n\r\n                    var obj = {\r\n                        investigation_id:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .investigation_id,\r\n                        _investingation_name:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .investingation_name,\r\n                        _investigation_category_head_name:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                ._investigation_category_head_name,\r\n\r\n                        // building_id: this.collectionList._building_id,\r\n                        // _building_name: this.collectionList._building_name,\r\n                        // room_id: this.collectionList.room_id,\r\n                        // _room_name: this.collectionList._room_name,\r\n                        building_id: this.patientInvestigationRequest.ddlinvestigation._building_id,\r\n                        room_id: this.patientInvestigationRequest.ddlinvestigation._room_id,\r\n                        expected_delivery: deliveryTime,\r\n\r\n                        report_delivery_type:\r\n                            this.patientInvestigationRequest.report_delivery_type,\r\n\r\n                        quantity: 1,\r\n                        cost_price: cost,\r\n\r\n                        discount_percent:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .discount_percent,\r\n\r\n                        discount_amount: discountAmount,\r\n\r\n                        total_amount: totalAmount,\r\n                    };\r\n\r\n                    this.patientInvestigationRequest.lstInvestigationRequestDetails.push(\r\n                        obj\r\n                    );\r\n\r\n                    this.patientInvestigationRequest.cost_price =\r\n                        this.patientInvestigationRequest.cost_price + totalAmount;\r\n                    //\r\n                    this.calculateTotalAmount();\r\n                    // this.patientInvestigationRequest.total_amount =\r\n                    //   this.patientInvestigationRequest.cost_price -\r\n                    //   this.patientInvestigationRequest.discount_amount;\r\n                }\r\n            }\r\n\r\n            this.addParticular(\r\n                this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n        },\r\n        calculatePerInvestigationDiscountPercent(data) {\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n                (element) => {\r\n                    if (element.investigation_id == data.investigation_id) {\r\n                        element.discount_percent = (element.discount_amount / element.cost_price) * 100;\r\n                        //var discount_amount = (element.cost_price * element.discount_percent) / 100;\r\n                        element.total_amount = element.cost_price - element.discount_amount;\r\n                    }\r\n                }\r\n            );\r\n            this.calculateCostPrice();\r\n        },\r\n        calculatePerInvestigationDiscountAmount(data) {\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n                (element) => {\r\n                    if (element.investigation_id == data.investigation_id) {\r\n                        element.discount_amount = (element.cost_price * element.discount_percent) / 100;\r\n                        element.total_amount = element.cost_price - element.discount_amount;\r\n                    }\r\n                }\r\n            );\r\n            this.calculateCostPrice();\r\n        },\r\n        calculateCostPrice() {\r\n            var costPrice = 0;\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n                (element) => {\r\n                    costPrice = costPrice + element.total_amount;\r\n                }\r\n            );\r\n            this.patientInvestigationRequest.cost_price = costPrice;\r\n\r\n            this.calculateTotalAmount();\r\n        },\r\n        calculateTotalAmount() {\r\n            this.patientInvestigationRequest.total_amount = Math.ceil(\r\n                this.patientInvestigationRequest.cost_price -\r\n                this.patientInvestigationRequest.discount_amount +\r\n                this.patientInvestigationRequest.particular_cost_price);\r\n        },\r\n        addParticular(id) {\r\n            this.investigationSetupService\r\n                .getById(id)\r\n                .then((data) => this.getParticularFormatted(data));\r\n        },\r\n        addAParticular(data, qty, pname) {\r\n            if (\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n                    .length <= 0\r\n            ) {\r\n                this.isExist = \"Add Investigation\";\r\n                return;\r\n            } else {\r\n                this.isExist = \"\";\r\n                var obj =\r\n                    this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n                        function (el) {\r\n                            return el.product_id === data.product_id;\r\n                        },\r\n                        this\r\n                    )[0];\r\n                if (obj) {\r\n                    qty = parseInt(obj.qty) + qty;\r\n\r\n                    this.patientInvestigationRequest.lstInvestigationParticular =\r\n                        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n                            function (el) {\r\n                                return el.product_id != data.product_id;\r\n                            },\r\n                            this\r\n                        );\r\n                }\r\n\r\n                this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n                    product_id: data.product_id,\r\n                    _product_name: pname,\r\n                    uom_id: data.uom_id,\r\n                    _uom_name: data._uom_name,\r\n                    cost_price: data.cost_price,\r\n                    qty: qty,\r\n                });\r\n\r\n                this.checkQty();\r\n            }\r\n        },\r\n        getParticularFormatted(data) {\r\n            data.data._lstInvestigationParticular.forEach((element) => {\r\n                // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n                //   investigation_id: element.investigation_id,\r\n                //   product_id: element.product_id,\r\n                //   _product_name: element._product_name,\r\n                //   uom_id: element.uom_id,\r\n                //   _uom_name: element._uom_name,\r\n                //   cost_price: element.cost_price,\r\n                //   qty: element.qty,\r\n                // });\r\n\r\n                this.addAParticular(element, 1, element._product_name);\r\n            });\r\n        },\r\n        checkQty() {\r\n            var totalPrice = 0;\r\n            this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n                (element) => {\r\n                    if (\r\n                        element.qty >\r\n                        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n                            .length\r\n                    ) {\r\n                        element.qty =\r\n                            this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n                    } else if (element.qty <= 0) {\r\n                        element.qty = 1;\r\n                    }\r\n\r\n                    element.totalPrice = element.qty * element.cost_price;\r\n                    totalPrice += element.totalPrice;\r\n                }\r\n            );\r\n            this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n            this.calculateTotalAmount();\r\n        },\r\n        getDiscountPercent() {\r\n            this.patientInvestigationRequest.discount_percent = Math.ceil(\r\n                (this.patientInvestigationRequest.discount_amount /\r\n                    this.patientInvestigationRequest.cost_price) *\r\n                100);\r\n\r\n            // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n            //   this.patientInvestigationRequest.cost_price -\r\n            //   this.patientInvestigationRequest.discount_amount);\r\n            this.calculateTotalAmount();\r\n        },\r\n        getDiscountAmount() {\r\n            this.patientInvestigationRequest.discount_amount =\r\n                (this.patientInvestigationRequest.cost_price *\r\n                    this.patientInvestigationRequest.discount_percent) /\r\n                100;\r\n\r\n            // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n            //   this.patientInvestigationRequest.cost_price -\r\n            //   this.patientInvestigationRequest.discount_amount);\r\n            this.calculateTotalAmount();\r\n        },\r\n        expectedHour(h) {\r\n            // var today = new Date();\r\n            // today.setHours(today.getHours() + h);\r\n            var travelTime = moment().add(h, 'hours').format('YYYY-MM-DD hh:mm A');\r\n            return travelTime;\r\n        },\r\n        deleteFromList(data) {\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n                    function (el) {\r\n                        return el.investigation_id != data.investigation_id;\r\n                    },\r\n                    this\r\n                );\r\n            this.patientInvestigationRequest.cost_price =\r\n                this.patientInvestigationRequest.cost_price - data.total_amount;\r\n            this.calculateTotalAmount();\r\n            this.checkQty();\r\n\r\n            if (\r\n                !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n            ) {\r\n                this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n                this.patientInvestigationRequest.particular_cost_price = 0;\r\n                this.calculateTotalAmount();\r\n            }\r\n        },\r\n        deleteFromParticularList(data) {\r\n            this.patientInvestigationRequest.lstInvestigationParticular =\r\n                this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n                    function (el) {\r\n                        return el.product_id != data.product_id;\r\n                    },\r\n                    this\r\n                );\r\n            this.patientInvestigationRequest.particular_cost_price =\r\n                this.patientInvestigationRequest.particular_cost_price -\r\n                data.totalPrice;\r\n            this.calculateTotalAmount();\r\n        },\r\n        async add() {\r\n            try {\r\n                if (\r\n                    !this.patientInvestigationRequest.cdinvestigation_request_date\r\n                ) {\r\n                    return;\r\n                } else if (\r\n                    !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n                        .length\r\n                ) {\r\n                    this.isExist = \"Please add a Investigation\";\r\n                    return;\r\n                } else {\r\n                    this.patientInvestigationRequest.investigation_request_date = moment(\r\n                        String(\r\n                            this.patientInvestigationRequest.cdinvestigation_request_date\r\n                        )\r\n                    ).format(\"YYYY-MM-DD\");\r\n\r\n                    var currentDate = new Date();\r\n                    var dob = new Date(currentDate.getFullYear() - this.patientInvestigationRequest.aPatient.age_year, currentDate.getMonth() - this.patientInvestigationRequest.aPatient.age_month, currentDate.getDate() - this.patientInvestigationRequest.aPatient.age_day);\r\n                    this.patientInvestigationRequest.aPatient.dob = moment(\r\n                        String(dob)\r\n                    ).format(\"YYYY-MM-DD\");\r\n                    //\r\n                    this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n                    this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n                    this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n\r\n                    let result = await this.patientInvestigationRequestService.add(\r\n                        this.patientInvestigationRequest, this\r\n                    );\r\n                    if (result.status === 200) {\r\n                        this.$toast.add({\r\n                            severity: \"success\",\r\n                            summary: \"Success\",\r\n                            detail: \"Request Successfully\",\r\n                            life: 10000,\r\n                        });\r\n                        this.printInvestigationToken(result.data);\r\n                        this.iPDInvestigationRequest.investigation_request_id = result.data.toString();\r\n                        this.iPDInvestigationRequest.admission_id = this.admission_id;\r\n                        this.iPDInvestigationRequestSave();\r\n                        //this.confirmPay(result.data);\r\n                    } else if (result.status === 401) {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Error\",\r\n                            detail: result.data,\r\n                            life: 10000,\r\n                        });\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n\r\n\r\n        // Service\r\n        takeService(data) {\r\n            this.iPDServiceObj.admission_id = data.admission_id;\r\n            this.serviceDialog = true;\r\n        },\r\n        // Package\r\n        takePackage(data) {\r\n            this.iPDServicePackageObj.admission_id = data.admission_id;\r\n            this.servicePackageDialog = true;\r\n        },\r\n        // Taken Service & Package\r\n        takenList(data) {\r\n            this.iPDService\r\n                .getTakenServiceAndServicePackage(data.admission_id)\r\n                .then((data) => this.formattedTakenList(data.data));\r\n        },\r\n        // View Round Doctor\r\n        viewRoundDoctor(data) {\r\n            this.assignRoundDoctor = {\r\n                //round_time: moment(String(new Date())).format(\"MM/DD/YYYY h:mm A\"),\r\n            };\r\n            this.assignRoundDoctor.admission_id = data.admission_id;\r\n            this.iPDService\r\n                .getAssignIPDRoundDoctor(data.admission_id)\r\n                .then((data) => this.formattedRoundDoctorList(data.data));\r\n        },\r\n        setMainConsultant() {\r\n            if (!this.assignRoundDoctor.isMainConsultant) {\r\n                var aAdmittedPatient = this.admittedPatientList.filter(function (el) {\r\n                    return el.admission_id === this.assignRoundDoctor.admission_id;\r\n                }, this);\r\n                this.assignRoundDoctor.department_id = aAdmittedPatient[0].consultancy_department_id;\r\n                this.assignRoundDoctor.round_doctor_id = aAdmittedPatient[0].doctor_id;\r\n                this.assignRoundDoctor.charge = aAdmittedPatient[0].ipd_consultancy_fee;\r\n            } else {\r\n                this.assignRoundDoctor.department_id = \"\";\r\n                this.assignRoundDoctor.round_doctor_id = \"\";\r\n                this.assignRoundDoctor.charge = \"\";\r\n            }\r\n        },\r\n        mergeDoctorInfo(data) {\r\n            data.forEach((element) => {\r\n                var obj = element;\r\n                obj.doctor_degree = \"\";\r\n                obj.lstConsultantDegree.forEach((el) => {\r\n                    obj.doctor_degree += el.consultant_degree_name + \". \";\r\n                });\r\n\r\n                obj.doctor_name = element.doc_no + \" - (\" + obj.doctor_degree + \") - \" + element.doctor_name;\r\n                this.doctorList.push(obj);\r\n            });\r\n        },\r\n        filterDoctorsDepartmentWise() {\r\n            return this.doctorList.filter(function (el) {\r\n                return el.department_id === this.assignRoundDoctor.department_id;\r\n            }, this);\r\n        },\r\n        getCharge() {\r\n            var aDoctor = this.doctorList.filter(function (el) {\r\n                return el.doctor_id === this.assignRoundDoctor.round_doctor_id;\r\n            }, this);\r\n            this.assignRoundDoctor.charge = aDoctor[0].ipd_consultancy_fee;\r\n        },\r\n        // Round Doctor\r\n        roundDoctor() {\r\n            this.listRoundDoctorDialog = false;\r\n            this.roundDoctorDialog = true;\r\n        },\r\n        formattedRoundDoctorList(data) {\r\n            this.roundDoctorList = [];\r\n            this.roundDoctorList = data;\r\n            this.listRoundDoctorDialog = true;\r\n        },\r\n        formattedTakenList(data) {\r\n            this.takenServicePackageObj.lstTakenService = data.lstTakenService;\r\n            this.takenServicePackageObj.lastTakenServicePackage = data.lastTakenServicePackage;\r\n            this.takenServicePackageDialog = true;\r\n        },\r\n        serviceFormatted(data) {\r\n            let filterData = data.filter(function (el) {\r\n                return el.service_head_id == '1' || el.service_head_id == '3';\r\n            }, this);\r\n            let filterData2 = filterData.filter(function (el) {\r\n                return el.active == true && el.service_type_id != '2';\r\n            }, this);\r\n            this.iPDServiceObj.lstService = [];\r\n            filterData2.forEach((element) => {\r\n                this.iPDServiceObj.lstService.push({\r\n                    service_id: element.service_id,\r\n                    service_name: element.service_name,\r\n                    service_head_id: element.service_head_id,\r\n                    _service_head_name: element._service_head_name,\r\n                    service_type_id: element.service_type_id,\r\n                    _service_type_name: element._service_type_name,\r\n                    service_charge: element.service_charge,\r\n                    er_service_charge: element.er_service_charge,\r\n                    discount: element.discount,\r\n                    isCheck: false\r\n                });\r\n            });\r\n        },\r\n        servicePackageFormatted(data) {\r\n            this.iPDServicePackageObj.lstServicePackage = [];\r\n            data.forEach((element) => {\r\n                this.iPDServicePackageObj.lstServicePackage.push({\r\n                    service_package_id: element.service_package_id,\r\n                    service_package_name: element.service_package_name,\r\n                    charge: element.charge,\r\n                    isCheck: false\r\n                });\r\n            });\r\n        },\r\n        // Assign Round Doctor\r\n        async addDoctorAssign() {\r\n            if (!this.assignRoundDoctor.department_id) {\r\n                return;\r\n            } else if (!this.assignRoundDoctor.round_doctor_id) {\r\n                return;\r\n            } else if (!this.assignRoundDoctor.charge) {\r\n                return;\r\n            } else if (!this.assignRoundDoctor.round_time) {\r\n                return;\r\n            } else {\r\n                //this.assignRoundDoctor.round_time = moment(String(this.assignRoundDoctor.cdround_time)).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                let result = await this.iPDService.assignIPDRoundDoctor(this.assignRoundDoctor, this);\r\n                if (result.status === 200) {\r\n                    this.$toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Success\",\r\n                        detail: \"Saved Successfully\",\r\n                        life: 10000,\r\n                    });\r\n                    this.hideDialog();\r\n                } else if (result.status === 409) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Error\",\r\n                        detail: result.data,\r\n                        life: 10000,\r\n                    });\r\n                } else {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: result.res,\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        async addService() {\r\n            this.iPDServiceObj.lstService = this.iPDServiceObj.lstService.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            if (this.iPDServiceObj.lstService.length > 0) {\r\n                let result = await this.iPDService.saveIPDService(this.iPDServiceObj, this);\r\n                if (result.status === 200) {\r\n                    this.$toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Success\",\r\n                        detail: \"Saved Successfully\",\r\n                        life: 10000,\r\n                    });\r\n                    this.hideDialog();\r\n                    this.getService();\r\n                } else if (result.status === 401) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Error\",\r\n                        detail: result.data,\r\n                        life: 10000,\r\n                    });\r\n                } else {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: result.res,\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            } else {\r\n                this.getService();\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: \"Select Service\",\r\n                    life: 10000,\r\n                  });\r\n            }\r\n        },\r\n        async addServicePackage() {\r\n            this.iPDServicePackageObj.lstServicePackage = this.iPDServicePackageObj.lstServicePackage.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            if (this.iPDServicePackageObj.lstServicePackage.length > 0) {\r\n                let result = await this.iPDService.saveIPDServicePackage(this.iPDServicePackageObj, this);\r\n                if (result.status === 200) {\r\n                    this.$toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Success\",\r\n                        detail: \"Saved Successfully\",\r\n                        life: 10000,\r\n                    });\r\n                    this.hideDialog();\r\n                    this.getServicePackage();\r\n                } else if (result.status === 401) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Error\",\r\n                        detail: result.data,\r\n                        life: 10000,\r\n                    });\r\n                } else {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: result.res,\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            } else {\r\n                this.getServicePackage();\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: \"Select Package\",\r\n                    life: 10000,\r\n                  });\r\n            }\r\n        },\r\n    },\r\n};"]}]}