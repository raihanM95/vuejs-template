{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationRequest.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationRequest.js","mtime":1687673896747},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOi9TVk4gUFJPSkVDVFMvRVJQX0hvc3BpdGFsX0NsaWVudC90cnVuay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjovU1ZOIFBST0pFQ1RTL0VSUF9Ib3NwaXRhbF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9QYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9QYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSI7CmltcG9ydCBQYXRpZW50UmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QYXRpZW50UmVwb3J0U2VydmljZSI7CmltcG9ydCBDb21tb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvQ29tbW9uU2VydmljZSI7CmltcG9ydCBEZXNpZ25hdGlvblNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0Rlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSI7CmltcG9ydCBEb2N0b3JTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Eb2N0b3JTZXR1cFNlcnZpY2UiOwppbXBvcnQgRW1wbG95ZWVTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9FbXBsb3llZVNldHVwU2VydmljZSI7CmltcG9ydCBCdWlsZGluZ1NldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0J1aWxkaW5nU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJvb21TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Sb29tU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9SZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IEludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9JbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFByb2R1Y3RTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Qcm9kdWN0U2V0dXBTZXJ2aWNlIjsgLy9pbXBvcnQgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UiOwoKaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAiLi4vLi4vc2NyaXB0cy92YWxpZGF0aW9uIjsKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlclNlcnZpY2UsIEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwppbXBvcnQgR2xvYmFsU2V0dGluZ3NTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2VjdXJpdHkvR2xvYmFsU2V0dGluZ3NTZXJ2aWNlIjsgLy8gSGVhbHRoIFBhY2thZ2UKCmltcG9ydCBIZWFsdGhQYWNrYWdlU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvSGVhbHRoUGFja2FnZVNldHVwU2VydmljZSI7CmltcG9ydCBIZWFsdGhQYWNrYWdlRGV0YWlsc1NldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0hlYWx0aFBhY2thZ2VEZXRhaWxzU2V0dXBTZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWx0ZXJlZEl0ZW1zOiBudWxsLAogICAgICBwYXRpZW50c1N1Z2dlc3Rpb25zOiBbXSwKICAgICAgaXNJbnZlc3RpZ2F0aW9uOiB0cnVlLAogICAgICBpc1ByZXNjcmlwdGlvbjogZmFsc2UsCiAgICAgIGlzQ29udGFjdEV4aXN0OiAiIiwKICAgICAgaXNWYWxpZDogIiIsCiAgICAgIGlzRW1haWxWYWxpZDogIiIsCiAgICAgIGlzUGF0aWVudEV4aXN0OiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGNvbGxlY3Rpb25MaXN0OiBbXSwKICAgICAgYmxvb2RHcm91cExpc3Q6IFtdLAogICAgICBnZW5kZXJMaXN0OiBbXSwKICAgICAgZGVzaWduYXRpb250TGlzdDogW10sCiAgICAgIGRlcGFydG1lbnRMaXN0OiBbXSwKICAgICAgZG9jdG9yTGlzdDogW10sCiAgICAgIGJ1aWxkaW5nTGlzdDogW10sCiAgICAgIHJvb21MaXN0OiBbXSwKICAgICAgcmVmZXJyZWRCeUxpc3Q6IFtdLAogICAgICBlbXBsb3llZUxpc3Q6IFtdLAogICAgICAvL2Rpc2NvdW50QnlMaXN0OiBbXSwKICAgICAgaW52ZXN0aWdhdGlvbkxpc3Q6IFtdLAogICAgICByZXBvcnREZWxpdmVyeVR5cGVMaXN0OiBbXSwKICAgICAgcHJvZHVjdExpc3Q6IFtdLAogICAgICBwYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Q6IHsKICAgICAgICBhcHBvaW5tZW50X2lkOiBudWxsLAogICAgICAgIGFkbWlzc2lvbl9pZDogbnVsbCwKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDogewogICAgICAgICAgYWdlX3llYXI6ICIwIiwKICAgICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgICAgYWdlX2RheTogIjAiCiAgICAgICAgfSwKICAgICAgICBjZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICByZXBvcnRfZGVsaXZlcnlfdHlwZTogIlJlZ3VsYXIiLAogICAgICAgIGxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlsczogW10sCiAgICAgICAgbHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXI6IFtdLAogICAgICAgIGRpc2NvdW50X2J5X2lkOiAiQ29tcGFueSIsCiAgICAgICAgZGlzY291bnRfcGVyY2VudDogMCwKICAgICAgICBkaXNjb3VudF9hbW91bnQ6IDAsCiAgICAgICAgY29zdF9wcmljZTogMCwKICAgICAgICBwYXJ0aWN1bGFyX2Nvc3RfcHJpY2U6IDAsCiAgICAgICAgdG90YWxfYW1vdW50OiAwCiAgICAgIH0sCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICB9LAogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluaXRGaWx0ZXJzOiBmdW5jdGlvbiBpbml0RmlsdGVycygpIHsKICAgICAgICB0aGlzLmZpbHRlcnMgPSB7CiAgICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogewogICAgICAgICAgICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELAogICAgICAgICAgICBjb25zdHJhaW50czogW3sKICAgICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHN1Ym1pdHRlZDogZmFsc2UsCiAgICAgIGRpc2NvdW50QnlMaXN0OiBbewogICAgICAgIHRleHQ6ICJCb3RoIiwKICAgICAgICB2YWx1ZTogIkJvdGgiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiSG9zcGl0YWwiLAogICAgICAgIHZhbHVlOiAiQ29tcGFueSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJSZWZlcmVuY2UiLAogICAgICAgIHZhbHVlOiAiUmVmZXJlbmNlIgogICAgICB9XSwKICAgICAgZ2xvYmFsU2V0dGluZzoge30sCiAgICAgIC8vIEhlYWx0aCBQYWNrYWdlCiAgICAgIHBhY2thZ2VMaXN0OiBbXSwKICAgICAgaGVhbHRoUGFja2FnZURldGFpbHNTZXR1cDogewogICAgICAgIGxzdEhlYWx0aFBhY2thZ2VEZXRhaWxzOiBbXQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlID0gbmV3IFBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLmVtcGxveWVlU2V0dXBTZXJ2aWNlID0gbmV3IEVtcGxveWVlU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZSA9IG5ldyBEb2N0b3JTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuY29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlID0gbmV3IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSgpOwogICAgdGhpcy5kZXNpZ25hdGlvblNldHVwU2VydmljZSA9IG5ldyBEZXNpZ25hdGlvblNldHVwU2VydmljZSgpOwogICAgdGhpcy5idWlsZGluZ1NldHVwU2VydmljZSA9IG5ldyBCdWlsZGluZ1NldHVwU2VydmljZSgpOwogICAgdGhpcy5yb29tU2V0dXBTZXJ2aWNlID0gbmV3IFJvb21TZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZSA9IG5ldyBSZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UgPSBuZXcgSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSgpOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXR1cFNlcnZpY2UoKTsgLy90aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UgPSBuZXcgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSgpOwoKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMudmFsaWRhdGlvbiA9IG5ldyBWYWxpZGF0aW9uKCk7CiAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuZ2xvYmFsU2V0dGluZ3NTZXJ2aWNlID0gbmV3IEdsb2JhbFNldHRpbmdzU2VydmljZSgpOyAvLyBIZWFsdGggUGFja2FnZQoKICAgIHRoaXMuaGVhbHRoUGFja2FnZVNldHVwU2VydmljZSA9IG5ldyBIZWFsdGhQYWNrYWdlU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmhlYWx0aFBhY2thZ2VEZXRhaWxzU2V0dXBTZXJ2aWNlID0gbmV3IEhlYWx0aFBhY2thZ2VEZXRhaWxzU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsR2VuZGVyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2VuZGVyTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEJsb29kR3JvdXAoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ibG9vZEdyb3VwTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5kZXNpZ25hdGlvblNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZXNpZ25hdGlvbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZS5nZXRBY3RpdmVDb21ibygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmRlcGFydG1lbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmJ1aWxkaW5nU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmJ1aWxkaW5nTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5yb29tU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJvb21MaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7IC8vIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWN0aXZlQ29tYm8oKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gKHRoaXMucmVmZXJyZWRCeUxpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWN0aXZlQ29tYm8oKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSkpOwoKICAgIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1lcmdlRG9jdG9ySW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmVtcGxveWVlU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1lcmdlRW1wbG95ZWVJbmZvKGRhdGEuZGF0YSk7CiAgICB9KTsgLy8gdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlCiAgICAvLyAgIC5nZXRBbGwoKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gKHRoaXMuaW52ZXN0aWdhdGlvbkxpc3QgPSBkYXRhLmRhdGEpKTsKCiAgICB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZm9ybWF0SW52ZXN0aWdhdGlvbkxpc3QoZGF0YS5kYXRhKTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbFJlcG9ydERlbGl2ZXJ5VHlwZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlcG9ydERlbGl2ZXJ5VHlwZUxpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMucHJvZHVjdFNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9kdWN0TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5nbG9iYWxTZXR0aW5nc1NlcnZpY2UuZ2V0QnlTZXR0aW5nTmFtZSgiSW52ZXN0aWdhdGlvbiBQYXltZW50IEV4cHJlc3MiKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5nbG9iYWxTZXR0aW5nID0gZGF0YS5kYXRhOwogICAgfSk7IC8vIEhlYWx0aCBQYWNrYWdlCgogICAgdGhpcy5oZWFsdGhQYWNrYWdlU2V0dXBTZXJ2aWNlLmdldEFjdGl2ZUNvbWJvKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2V0UGFja2FnZUZvcm1hdHRlZChkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldFBhdGllbnRMaXN0Rm9yU3VnZ2VzdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYXRpZW50c1N1Z2dlc3Rpb25zID0gZGF0YS5kYXRhOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBIZWFsdGggUGFja2FnZSBTdGFydAogICAgZ2V0UGFja2FnZUZvcm1hdHRlZDogZnVuY3Rpb24gZ2V0UGFja2FnZUZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMyLnBhY2thZ2VMaXN0LnB1c2goewogICAgICAgICAgdmFsdWU6IGVsZW1lbnQudmFsdWUsCiAgICAgICAgICB0ZXh0OiBlbGVtZW50LnJlZmlkICsgIi0iICsgZWxlbWVudC50ZXh0CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHBhY2thZ2VXaXNlSW52ZXN0aWdhdGlvbkxpc3Q6IGZ1bmN0aW9uIHBhY2thZ2VXaXNlSW52ZXN0aWdhdGlvbkxpc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmhlYWx0aF9wYWNrYWdlX2lkKSB7CiAgICAgICAgdGhpcy5oZWFsdGhQYWNrYWdlRGV0YWlsc1NldHVwU2VydmljZS5nZXRIZWFsdGhQYWNrYWdlQnlQYWNrYWdlSWQodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuaGVhbHRoX3BhY2thZ2VfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMuZm9ybWF0UGFja2FnZURldGFpbHNMaXN0KGRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9CiAgICB9LAogICAgZm9ybWF0UGFja2FnZURldGFpbHNMaXN0OiBmdW5jdGlvbiBmb3JtYXRQYWNrYWdlRGV0YWlsc0xpc3QoZGF0YSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuaGVhbHRoUGFja2FnZURldGFpbHNTZXR1cCA9IGRhdGE7CgogICAgICBpZiAodGhpcy5oZWFsdGhQYWNrYWdlRGV0YWlsc1NldHVwLmxzdEhlYWx0aFBhY2thZ2VEZXRhaWxzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMgPSBbXTsKICAgICAgICB0aGlzLmhlYWx0aFBhY2thZ2VEZXRhaWxzU2V0dXAubHN0SGVhbHRoUGFja2FnZURldGFpbHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gX3RoaXM0LmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgICAgIH0sIF90aGlzNClbMF07CgogICAgICAgICAgX3RoaXM0LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uID0gYUludmVzdGlnYXRpb247CgogICAgICAgICAgX3RoaXM0LmFkZEludmVzdGlnYXRpb24oKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSA9ICJSZWd1bGFyIjsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9wZXJjZW50ID0gMDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5oZWFsdGhQYWNrYWdlRGV0YWlsc1NldHVwLnBhY2thZ2VfY2hhcmdlOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IHRoaXMuaGVhbHRoUGFja2FnZURldGFpbHNTZXR1cC5wYWNrYWdlX2NoYXJnZTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jaGFyZ2UgPSB0aGlzLmhlYWx0aFBhY2thZ2VEZXRhaWxzU2V0dXAucGFja2FnZV9jaGFyZ2U7CgogICAgICAgIGlmICh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9kb2N0b3JfaWQpIHsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmhlYWx0aF9wYWNrYWdlX2NvbnN1bHRhbnRfaWQgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9kb2N0b3JfaWQ7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jb25zdWx0YW50X2NoYXJnZSA9IHRoaXMuaGVhbHRoUGFja2FnZURldGFpbHNTZXR1cC5kb2N0b3JfY2hhcmdlOwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ICs9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmhlYWx0aF9wYWNrYWdlX2NvbnN1bHRhbnRfY2hhcmdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jb25zdWx0YW50X2lkID0gIiI7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jb25zdWx0YW50X2NoYXJnZSA9IDA7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC50b3RhbF9hbW91bnQgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gMDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgPSAwOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9CiAgICB9LAogICAgcGFja2FnZUNvbnN1bHRhbnRDaGFyZ2U6IGZ1bmN0aW9uIHBhY2thZ2VDb25zdWx0YW50Q2hhcmdlKCkgewogICAgICBpZiAodGhpcy5oZWFsdGhQYWNrYWdlRGV0YWlsc1NldHVwLmRvY3Rvcl9jaGFyZ2UgJiYgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVmZmVyZWRfZG9jdG9yX2lkKSB7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuaGVhbHRoX3BhY2thZ2VfY29uc3VsdGFudF9pZCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlZmZlcmVkX2RvY3Rvcl9pZDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jb25zdWx0YW50X2NoYXJnZSA9IHRoaXMuaGVhbHRoUGFja2FnZURldGFpbHNTZXR1cC5kb2N0b3JfY2hhcmdlOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCArPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jb25zdWx0YW50X2NoYXJnZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5oZWFsdGhfcGFja2FnZV9jb25zdWx0YW50X2lkID0gIiI7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuaGVhbHRoX3BhY2thZ2VfY29uc3VsdGFudF9jaGFyZ2UgPSAwOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IE1hdGguY2VpbCh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlIC0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50ICsgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlKTsgLy90aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC50b3RhbF9hbW91bnQgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgKyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlOwogICAgICB9CiAgICB9LAogICAgLy8gSGVhbHRoIFBhY2thZ2UgRW5kCiAgICBwcmludEludmVzdGlnYXRpb25Ub2tlbjogZnVuY3Rpb24gcHJpbnRJbnZlc3RpZ2F0aW9uVG9rZW4oaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlLkdldEludmVzdGlnYXRpb25Ub2tlbihpZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczUuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZm9ybWF0SW52ZXN0aWdhdGlvbkxpc3Q6IGZ1bmN0aW9uIGZvcm1hdEludmVzdGlnYXRpb25MaXN0KGRhdGEpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBvYmogPSBlbGVtZW50OwogICAgICAgIG9iai5pbnZlc3RpbmdhdGlvbl9uYW1lID0gZWxlbWVudC5tYW51YWxfY29kZSArICItIiArIGVsZW1lbnQuaW52ZXN0aW5nYXRpb25fbmFtZTsKCiAgICAgICAgX3RoaXM2LmludmVzdGlnYXRpb25MaXN0LnB1c2gob2JqKTsKICAgICAgfSk7CiAgICB9LAogICAgbWVyZ2VSZWZlcnJlZEJ5SW5mbzogZnVuY3Rpb24gbWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgICBmaWx0ZXJEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczcucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5yZWdpc3RyYXRpb25fbm8sCiAgICAgICAgICB0ZXh0OiBlbGVtZW50Lm1hbnVhbF9jb2RlICsgIi0iICsgZWxlbWVudC5yZWdpc3RyYXRpb25fbm8gKyAiLSIgKyBlbGVtZW50LnJlZmZlcmVkX2J5X25hbWUgKyAiKFJlZmVycmVkIEJ5KSIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbWVyZ2VEb2N0b3JJbmZvOiBmdW5jdGlvbiBtZXJnZURvY3RvckluZm8oZGF0YSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIC8vdGhpcy5kb2N0b3JMaXN0ID0gZGF0YTsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM4LnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgICAgICAgdmFsdWU6IGVsZW1lbnQuZG9jX25vLAogICAgICAgICAgdGV4dDogZWxlbWVudC5kb2Nfbm8gKyAiLSIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lICsgIihEb2N0b3IpIgogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM4LmRvY3Rvckxpc3QucHVzaCh7CiAgICAgICAgICBkZXBhcnRtZW50X2lkOiBlbGVtZW50LmRlcGFydG1lbnRfaWQsCiAgICAgICAgICBkb2N0b3JfaWQ6IGVsZW1lbnQuZG9jdG9yX2lkLAogICAgICAgICAgZG9jdG9yX25hbWU6IGVsZW1lbnQuZG9jX25vICsgIi0iICsgZWxlbWVudC5kb2N0b3JfbmFtZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBtZXJnZUVtcGxveWVlSW5mbzogZnVuY3Rpb24gbWVyZ2VFbXBsb3llZUluZm8oZGF0YSkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXJEYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM5LnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgICAgICAgdmFsdWU6IGVsZW1lbnQuZW1wX25vLAogICAgICAgICAgdGV4dDogZWxlbWVudC5lbXBfbm8gKyAiLSIgKyBlbGVtZW50LmZpcnN0X25hbWUgKyAiKEVtcGxveWVlKSIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gbWVyZ2VEb2N0b3JJbmZvKGRhdGEpIHsKICAgIC8vICAgdGhpcy5kb2N0b3JMaXN0ID0gZGF0YTsKICAgIC8vICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgdGhpcy5kaXNjb3VudEJ5TGlzdC5wdXNoKHsKICAgIC8vICAgICAgIHZhbHVlOiBlbGVtZW50LmRvY19ubywKICAgIC8vICAgICAgIHRleHQ6IGVsZW1lbnQuZG9jX25vICsgIi0iICsgZWxlbWVudC5kb2N0b3JfbmFtZSArICIoRG9jdG9yKSIsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1lcmdlRW1wbG95ZWVJbmZvKGRhdGEpIHsKICAgIC8vICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgdGhpcy5kaXNjb3VudEJ5TGlzdC5wdXNoKHsKICAgIC8vICAgICAgIHZhbHVlOiBlbGVtZW50LmVtcF9ubywKICAgIC8vICAgICAgIHRleHQ6IGVsZW1lbnQuZW1wX25vICsgIi0iICsgZWxlbWVudC5maXJzdF9uYW1lICsgIihFbXBsb3llZSkiLAogICAgLy8gICAgIH0pOwogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICBpbnZSZXNldDogZnVuY3Rpb24gaW52UmVzZXQoKSB7CiAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbiA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5oZWFsdGhQYWNrYWdlRGV0YWlsc1NldHVwID0gewogICAgICAgIGxzdEhlYWx0aFBhY2thZ2VEZXRhaWxzOiBbXQogICAgICB9OwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICB0aGlzLmlzUHJlc2NyaXB0aW9uID0gZmFsc2U7CiAgICAgIHRoaXMuYnV0dG9uID0gZmFsc2U7CiAgICAgIHRoaXMuaXNWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRW1haWxWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IHsKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhcHBvaW5tZW50X2lkOiBudWxsLAogICAgICAgIGFkbWlzc2lvbl9pZDogbnVsbCwKICAgICAgICBhUGF0aWVudDogewogICAgICAgICAgYWdlX3llYXI6ICIwIiwKICAgICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgICAgYWdlX2RheTogIjAiCiAgICAgICAgfSwKICAgICAgICBjZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICByZXBvcnRfZGVsaXZlcnlfdHlwZTogIlJlZ3VsYXIiLAogICAgICAgIGxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlsczogW10sCiAgICAgICAgbHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXI6IFtdLAogICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IDAsCiAgICAgICAgZGlzY291bnRfYW1vdW50OiAwLAogICAgICAgIGNvc3RfcHJpY2U6IDAsCiAgICAgICAgcGFydGljdWxhcl9jb3N0X3ByaWNlOiAwLAogICAgICAgIHRvdGFsX2Ftb3VudDogMAogICAgICB9OwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgICB0aGlzLmhlYWx0aFBhY2thZ2VEZXRhaWxzU2V0dXAgPSB7CiAgICAgICAgbHN0SGVhbHRoUGFja2FnZURldGFpbHM6IFtdCiAgICAgIH07CiAgICB9LAogICAgZG9jdG9yUmVzZXQ6IGZ1bmN0aW9uIGRvY3RvclJlc2V0KCkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZXBhcnRtZW50X2lkID0gIiI7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlZmZlcmVkX2RvY3Rvcl9pZCA9ICIiOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZXNpZ25hdGlvbl9pZCA9ICIiOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5vdXRzaWRlX2RvY3Rvcl9uYW1lID0gIiI7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0Lm91dHNpZGVfZG9jdG9yX2hvc3BpdGFsX25hbWUgPSAiIjsKICAgIH0sCiAgICBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2U6IGZ1bmN0aW9uIGZpbHRlckRvY3RvcnNEZXBhcnRtZW50V2lzZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRlcGFydG1lbnRfaWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRlcGFydG1lbnRfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGdldENvbnN1bHRhbmN5RmVlQnlEb2N0b3JJZDogZnVuY3Rpb24gZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkKCkgewogICAgICB2YXIgYURvY3RvciA9IHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRvY3Rvcl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZG9jdG9yX2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29uc3VsdGFuY3lfZmVlID0gYURvY3RvclswXS5jb25zdWx0YW5jeV9mZWU7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmJ1aWxkaW5nX2lkID0gYURvY3RvclswXS5fYnVpbGRpbmdfaWQ7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJvb21faWQgPSBhRG9jdG9yWzBdLnJvb21faWQ7CiAgICB9LAogICAgZmlsdGVyUm9vbXNCdWlsZGluZ1dpc2U6IGZ1bmN0aW9uIGZpbHRlclJvb21zQnVpbGRpbmdXaXNlKCkgewogICAgICByZXR1cm4gdGhpcy5yb29tTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmJ1aWxkaW5nX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5idWlsZGluZ19pZDsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZmlsdGVySW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gZmlsdGVySW52ZXN0aWdhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52ZXN0aWdhdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZmlsdGVyUHJvZHVjdDogZnVuY3Rpb24gZmlsdGVyUHJvZHVjdCgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdExpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2NhdGVnb3J5X2lkID09IDEgJiYgZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGdldEZvcm1hdHRlZDogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQgPSBkYXRhOwoKICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5wYXRpZW50X2lkKSB7CiAgICAgICAgdGhpcy5pc1BhdGllbnRFeGlzdCA9ICJTZWxlY3QgUGF0aWVudCI7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0ID0gewogICAgICAgIC8vICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgLy8gICBhUGF0aWVudDoge30sCiAgICAgICAgLy8gfTsKCiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNQYXRpZW50RXhpc3QgPSAiIjsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXRpZW50X2lkID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQucGF0aWVudF9pZDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jZGRvYiA9IG1vbWVudChTdHJpbmcodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhci50b1N0cmluZygpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aC50b1N0cmluZygpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9kYXkgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5LnRvU3RyaW5nKCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRGb3JtYXR0ZWRQcmVzY3JpcHRpb25XaXNlSW52ZXN0aWdhdGlvbnM6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFByZXNjcmlwdGlvbldpc2VJbnZlc3RpZ2F0aW9ucyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmlzUGF0aWVudEV4aXN0ID0gIiI7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQgPSBkYXRhWzBdOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFwcG9pbm1lbnRfaWQgPSBkYXRhWzBdLmFwcG9pbm1lbnRfaWQ7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYWRtaXNzaW9uX2lkID0gZGF0YVswXS5hZG1pc3Npb25faWQ7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGF0aWVudF9pZCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LnBhdGllbnRfaWQ7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhci50b1N0cmluZygpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aC50b1N0cmluZygpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9kYXkgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5LnRvU3RyaW5nKCk7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGVwYXJ0bWVudF9pZCA9IGRhdGFbMF0uZGVwYXJ0bWVudF9pZDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9kb2N0b3JfaWQgPSBkYXRhWzBdLmRvY3Rvcl9pZDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9ieV9pZCA9IGRhdGFbMF0uZG9jX25vOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X3BlcmNlbnQgPSBkYXRhWzBdLmRpc2NvdW50X3BlcmNlbnRfZm9yX2ludmVzdGlnYXRpb247CiAgICAgICAgdGhpcy5pc1ByZXNjcmlwdGlvbiA9IHRydWU7CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICB2YXIgYUludmVzdGlnYXRpb24gPSBfdGhpczEwLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgICAgIH0sIF90aGlzMTApWzBdOwoKICAgICAgICAgIF90aGlzMTAucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24gPSBhSW52ZXN0aWdhdGlvbjsKCiAgICAgICAgICBfdGhpczEwLmFkZEludmVzdGlnYXRpb24oKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmdldERpc2NvdW50QW1vdW50KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc1BhdGllbnRFeGlzdCA9ICJEYXRhIG5vdCBFeGlzdCEiOyAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IHsKICAgICAgICAvLyAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIC8vICAgYVBhdGllbnQ6IHt9LAogICAgICAgIC8vIH07CgogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgfQogICAgfSwKICAgIGZpbmRQYXRpZW50OiBmdW5jdGlvbiBmaW5kUGF0aWVudCgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdmFyIHN0ciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnNlYXJjaERhdGE7CgogICAgICBpZiAodHlwZW9mIHN0ciA9PT0gInN0cmluZyIpIHsKICAgICAgICBpZiAoc3RyLnN0YXJ0c1dpdGgoIkFQVCIpIHx8IHN0ci5zdGFydHNXaXRoKCJBRE0iKSkgewogICAgICAgICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UucHJlc2NyaXB0aW9uV2lzZUludmVzdGlnYXRpb25zKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnNlYXJjaERhdGEsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuZ2V0Rm9ybWF0dGVkUHJlc2NyaXB0aW9uV2lzZUludmVzdGlnYXRpb25zKGRhdGEuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlBhdGllbnQgbm90IEV4aXN0ISI7CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBzZWFyY2hEYXRhID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Quc2VhcmNoRGF0YTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvbnRhY3RPclJlZ05vID0gc2VhcmNoRGF0YS5yZWdpc3RyYXRpb25fbm87CiAgICAgICAgICB0aGlzLmlzUHJlc2NyaXB0aW9uID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29udGFjdE9yUmVnTm8sIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuZ2V0Rm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICJQYXRpZW50IG5vdCBFeGlzdCEiOwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGlzRXhpc3RDb250YWN0OiBmdW5jdGlvbiBpc0V4aXN0Q29udGFjdCgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmNvbnRhY3Rfbm8ubWF0Y2goL14oMDEpKFswLTldezl9KSQvKSkgewogICAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0QnlDb250YWN0T3JSZWdObyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jb250YWN0X25vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxMi5nZXRDb250YWN0KGRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICJDb250YWN0IG51bWJlciBtdXN0IHN0YXJ0IHdpdGggMDEgYW5kIHRoZSByZXF1aXJlZCBsZW5ndGggaXMgMTEiOwogICAgICB9CiAgICB9LAogICAgZ2V0Q29udGFjdDogZnVuY3Rpb24gZ2V0Q29udGFjdChkYXRhKSB7CiAgICAgIGlmIChkYXRhLmNvbnRhY3Rfbm8pIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkR1cGxpY2F0ZSBwaG9uZSBudW1iZXIhIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBpbnZlc3RpZ2F0aW9uSXNFeGlzdDogZnVuY3Rpb24gaW52ZXN0aWdhdGlvbklzRXhpc3QoKSB7CiAgICAgIHZhciBhSW52ZXN0aWdhdGlvbiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgfSwgdGhpcyk7CgogICAgICBpZiAoYUludmVzdGlnYXRpb24ubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlRoaXMgSW52ZXN0aWdhdGlvbiBhbHJlYWR5IGFkZGVkIjsKICAgICAgICB0aGlzLmlzSW52ZXN0aWdhdGlvbiA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHZhciBhSW52ID0gdGhpcy5pbnZlc3RpZ2F0aW9uTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgLy8gICByZXR1cm4gKAogICAgICAgIC8vICAgICBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PQogICAgICAgIC8vICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQKICAgICAgICAvLyAgICk7CiAgICAgICAgLy8gfSwgdGhpcyk7CiAgICAgICAgLy8gdGhpcy5jb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlCiAgICAgICAgLy8gICAuZ2V0QnlJZChhSW52WzBdLmNvbGxlY3Rpb25fY2VudGVyX2lkKQogICAgICAgIC8vICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmNvbGxlY3Rpb25MaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFkZEludmVzdGlnYXRpb246IGZ1bmN0aW9uIGFkZEludmVzdGlnYXRpb24oKSB7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsKICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhSW52ZXN0aWdhdGlvbi5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBJbnZlc3RpZ2F0aW9uIGFscmVhZHkgYWRkZWQiOyAvL3RoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbikgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlcG9ydF9kZWxpdmVyeV90eXBlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICAgIHZhciBjb3N0ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUgPT0gIlJlZ3VsYXIiID8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5jaGFyZ2UgOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLnVyZ2VudF9jYXJnZTsKICAgICAgICAgIHZhciBkZWxpdmVyeVRpbWUgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSA9PSAiUmVndWxhciIgPyB0aGlzLmV4cGVjdGVkSG91cih0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLnJlcG9ydF9kZWxpdmVyeV9kdXJhdGlvbikgOiB0aGlzLmV4cGVjdGVkSG91cih0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmVtbWVyZ2VuY3lfcmVwb3J0X2RlbGl2ZXJ5X2R1cmF0aW9uKTsKCiAgICAgICAgICBpZiAodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuaGVhbHRoX3BhY2thZ2VfaWQpIHsKICAgICAgICAgICAgdmFyIGRpc2NvdW50QW1vdW50ID0gMDsKICAgICAgICAgICAgdmFyIHRvdGFsQW1vdW50ID0gY29zdDsKICAgICAgICAgICAgdmFyIGRpc2NvdW50X3BlcmNlbnQgPSAwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGlzY291bnRBbW91bnQgPSAxICogY29zdCAqIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uZGlzY291bnRfcGVyY2VudCAvIDEwMDsKICAgICAgICAgICAgdG90YWxBbW91bnQgPSAxICogY29zdCAtIGRpc2NvdW50QW1vdW50OwogICAgICAgICAgICBkaXNjb3VudF9wZXJjZW50ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5kaXNjb3VudF9wZXJjZW50OwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGludmVzdGlnYXRpb25faWQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZCwKICAgICAgICAgICAgX2ludmVzdGluZ2F0aW9uX25hbWU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aW5nYXRpb25fbmFtZSwKICAgICAgICAgICAgX2ludmVzdGlnYXRpb25fY2F0ZWdvcnlfaGVhZF9uYW1lOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLl9pbnZlc3RpZ2F0aW9uX2NhdGVnb3J5X2hlYWRfbmFtZSwKICAgICAgICAgICAgLy8gYnVpbGRpbmdfaWQ6IHRoaXMuY29sbGVjdGlvbkxpc3QuX2J1aWxkaW5nX2lkLAogICAgICAgICAgICAvLyBfYnVpbGRpbmdfbmFtZTogdGhpcy5jb2xsZWN0aW9uTGlzdC5fYnVpbGRpbmdfbmFtZSwKICAgICAgICAgICAgLy8gcm9vbV9pZDogdGhpcy5jb2xsZWN0aW9uTGlzdC5yb29tX2lkLAogICAgICAgICAgICAvLyBfcm9vbV9uYW1lOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9yb29tX25hbWUsCiAgICAgICAgICAgIGJ1aWxkaW5nX2lkOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLl9idWlsZGluZ19pZCwKICAgICAgICAgICAgcm9vbV9pZDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5fcm9vbV9pZCwKICAgICAgICAgICAgZXhwZWN0ZWRfZGVsaXZlcnk6IGRlbGl2ZXJ5VGltZSwKICAgICAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlcG9ydF9kZWxpdmVyeV90eXBlLAogICAgICAgICAgICBxdWFudGl0eTogMSwKICAgICAgICAgICAgY29zdF9wcmljZTogY29zdCwKICAgICAgICAgICAgZGlzY291bnRfcGVyY2VudDogZGlzY291bnRfcGVyY2VudCwKICAgICAgICAgICAgZGlzY291bnRfYW1vdW50OiBkaXNjb3VudEFtb3VudCwKICAgICAgICAgICAgdG90YWxfYW1vdW50OiB0b3RhbEFtb3VudAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy51bnNoaWZ0KG9iaik7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSArIHRvdGFsQW1vdW50OyAvLwoKICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0KICAgICAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtCiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuaGVhbHRoX3BhY2thZ2VfaWQpIHsKICAgICAgICB0aGlzLmFkZFBhcnRpY3VsYXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkKTsKICAgICAgfQogICAgfSwKICAgIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudFBlcmNlbnQ6IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudFBlcmNlbnQoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LmludmVzdGlnYXRpb25faWQgPT0gZGF0YS5pbnZlc3RpZ2F0aW9uX2lkKSB7CiAgICAgICAgICBlbGVtZW50LmRpc2NvdW50X3BlcmNlbnQgPSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudCAvIGVsZW1lbnQuY29zdF9wcmljZSAqIDEwMDsgLy92YXIgZGlzY291bnRfYW1vdW50ID0gKGVsZW1lbnQuY29zdF9wcmljZSAqIGVsZW1lbnQuZGlzY291bnRfcGVyY2VudCkgLyAxMDA7CgogICAgICAgICAgZWxlbWVudC50b3RhbF9hbW91bnQgPSBlbGVtZW50LmNvc3RfcHJpY2UgLSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNhbGN1bGF0ZUNvc3RQcmljZSgpOwogICAgfSwKICAgIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudEFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlUGVySW52ZXN0aWdhdGlvbkRpc2NvdW50QW1vdW50KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkID09IGRhdGEuaW52ZXN0aWdhdGlvbl9pZCkgewogICAgICAgICAgZWxlbWVudC5kaXNjb3VudF9hbW91bnQgPSBlbGVtZW50LmNvc3RfcHJpY2UgKiBlbGVtZW50LmRpc2NvdW50X3BlcmNlbnQgLyAxMDA7CiAgICAgICAgICBlbGVtZW50LnRvdGFsX2Ftb3VudCA9IGVsZW1lbnQuY29zdF9wcmljZSAtIGVsZW1lbnQuZGlzY291bnRfYW1vdW50OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuY2FsY3VsYXRlQ29zdFByaWNlKCk7CiAgICB9LAogICAgY2FsY3VsYXRlQ29zdFByaWNlOiBmdW5jdGlvbiBjYWxjdWxhdGVDb3N0UHJpY2UoKSB7CiAgICAgIHZhciBjb3N0UHJpY2UgPSAwOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGNvc3RQcmljZSA9IGNvc3RQcmljZSArIGVsZW1lbnQudG90YWxfYW1vdW50OwogICAgICB9KTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IGNvc3RQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGNhbGN1bGF0ZVRvdGFsQW1vdW50OiBmdW5jdGlvbiBjYWxjdWxhdGVUb3RhbEFtb3VudCgpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgKyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UpOwogICAgICB0aGlzLnBhY2thZ2VDb25zdWx0YW50Q2hhcmdlKCk7CiAgICB9LAogICAgYWRkUGFydGljdWxhcjogZnVuY3Rpb24gYWRkUGFydGljdWxhcihpZCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UuZ2V0QnlJZChpZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczEzLmdldFBhcnRpY3VsYXJGb3JtYXR0ZWQoZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEFQYXJ0aWN1bGFyOiBmdW5jdGlvbiBhZGRBUGFydGljdWxhcihkYXRhLCBxdHksIHBuYW1lKSB7CiAgICAgIGlmICh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoIDw9IDApIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiQWRkIEludmVzdGlnYXRpb24iOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB2YXIgb2JqID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfaWQgPT09IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICB9LCB0aGlzKVswXTsKCiAgICAgICAgaWYgKG9iaikgewogICAgICAgICAgcXR5ID0gcGFyc2VJbnQob2JqLnF0eSkgKyBxdHk7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfaWQgIT0gZGF0YS5wcm9kdWN0X2lkOwogICAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5wdXNoKHsKICAgICAgICAgIHByb2R1Y3RfaWQ6IGRhdGEucHJvZHVjdF9pZCwKICAgICAgICAgIF9wcm9kdWN0X25hbWU6IHBuYW1lLAogICAgICAgICAgdW9tX2lkOiBkYXRhLnVvbV9pZCwKICAgICAgICAgIF91b21fbmFtZTogZGF0YS5fdW9tX25hbWUsCiAgICAgICAgICBjb3N0X3ByaWNlOiBkYXRhLmNvc3RfcHJpY2UsCiAgICAgICAgICBxdHk6IHF0eQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hlY2tRdHkoKTsKICAgICAgfQogICAgfSwKICAgIGdldFBhcnRpY3VsYXJGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldFBhcnRpY3VsYXJGb3JtYXR0ZWQoZGF0YSkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgICBkYXRhLmRhdGEuX2xzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5wdXNoKHsKICAgICAgICAvLyAgIGludmVzdGlnYXRpb25faWQ6IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZCwKICAgICAgICAvLyAgIHByb2R1Y3RfaWQ6IGVsZW1lbnQucHJvZHVjdF9pZCwKICAgICAgICAvLyAgIF9wcm9kdWN0X25hbWU6IGVsZW1lbnQuX3Byb2R1Y3RfbmFtZSwKICAgICAgICAvLyAgIHVvbV9pZDogZWxlbWVudC51b21faWQsCiAgICAgICAgLy8gICBfdW9tX25hbWU6IGVsZW1lbnQuX3VvbV9uYW1lLAogICAgICAgIC8vICAgY29zdF9wcmljZTogZWxlbWVudC5jb3N0X3ByaWNlLAogICAgICAgIC8vICAgcXR5OiBlbGVtZW50LnF0eSwKICAgICAgICAvLyB9KTsKICAgICAgICBfdGhpczE0LmFkZEFQYXJ0aWN1bGFyKGVsZW1lbnQsIDEsIGVsZW1lbnQuX3Byb2R1Y3RfbmFtZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrUXR5OiBmdW5jdGlvbiBjaGVja1F0eSgpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgdmFyIHRvdGFsUHJpY2UgPSAwOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQucXR5ID4gX3RoaXMxNS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgZWxlbWVudC5xdHkgPSBfdGhpczE1LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoOwogICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5xdHkgPD0gMCkgewogICAgICAgICAgZWxlbWVudC5xdHkgPSAxOwogICAgICAgIH0KCiAgICAgICAgZWxlbWVudC50b3RhbFByaWNlID0gZWxlbWVudC5xdHkgKiBlbGVtZW50LmNvc3RfcHJpY2U7CiAgICAgICAgdG90YWxQcmljZSArPSBlbGVtZW50LnRvdGFsUHJpY2U7CiAgICAgIH0pOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgPSB0b3RhbFByaWNlOwogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgZ2V0RGlzY291bnRQZXJjZW50OiBmdW5jdGlvbiBnZXREaXNjb3VudFBlcmNlbnQoKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X3BlcmNlbnQgPSBNYXRoLmNlaWwodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50IC8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAqIDEwMCk7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IE1hdGguY2VpbCgKICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlIC0KICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQpOwoKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGdldERpc2NvdW50QW1vdW50OiBmdW5jdGlvbiBnZXREaXNjb3VudEFtb3VudCgpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAqIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X3BlcmNlbnQgLyAxMDA7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IE1hdGguY2VpbCgKICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlIC0KICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQpOwoKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGV4cGVjdGVkSG91cjogZnVuY3Rpb24gZXhwZWN0ZWRIb3VyKGgpIHsKICAgICAgLy8gdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgLy8gdG9kYXkuc2V0SG91cnModG9kYXkuZ2V0SG91cnMoKSArIGgpOwogICAgICB2YXIgdHJhdmVsVGltZSA9IG1vbWVudCgpLmFkZChoLCAnaG91cnMnKS5mb3JtYXQoJ1lZWVktTU0tREQgaGg6bW0gQScpOwogICAgICByZXR1cm4gdHJhdmVsVGltZTsKICAgIH0sCiAgICBkZWxldGVGcm9tTGlzdDogZnVuY3Rpb24gZGVsZXRlRnJvbUxpc3QoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkICE9IGRhdGEuaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlIC0gZGF0YS50b3RhbF9hbW91bnQ7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgICAgdGhpcy5jaGVja1F0eSgpOwoKICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSBbXTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgPSAwOwogICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUZyb21QYXJ0aWN1bGFyTGlzdDogZnVuY3Rpb24gZGVsZXRlRnJvbVBhcnRpY3VsYXJMaXN0KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfaWQgIT0gZGF0YS5wcm9kdWN0X2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlIC0gZGF0YS50b3RhbFByaWNlOwogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGN1cnJlbnREYXRlLCBkb2IsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuZmlyc3RfbmFtZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfbW9udGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY29udGFjdF9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTYucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIGlmICghX3RoaXMxNi5pc0NvbnRhY3RFeGlzdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTYucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczE2LmlzRXhpc3QgPSAiUGxlYXNlIGFkZCBhIEludmVzdGlnYXRpb24iOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZG9iID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIF90aGlzMTYucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyLCBjdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5KTsKICAgICAgICAgICAgICAgIF90aGlzMTYucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmRvYiA9IG1vbWVudChTdHJpbmcoZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7IC8vCgogICAgICAgICAgICAgICAgX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIgPSBfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhci50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoID0gX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBfdGhpczE2LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5ID0gX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZS5hZGQoX3RoaXMxNi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QsIF90aGlzMTYpOwoKICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTYuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczE2Lmdsb2JhbFNldHRpbmcuc2V0dGluZ192YWx1ZSA9PSAiWWVzIikgewogICAgICAgICAgICAgICAgICAgIF90aGlzMTYuY29uZmlybVBheShyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNi5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczE2LnByaW50SW52ZXN0aWdhdGlvblRva2VuKHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxNi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1MDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQ3OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogX2NvbnRleHQudDAsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgNDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNvbmZpcm1QYXk6IGZ1bmN0aW9uIGNvbmZpcm1QYXkoZGF0YSkgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtLnJlcXVpcmUoewogICAgICAgIG1lc3NhZ2U6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcGF5IG5vdz8nLAogICAgICAgIGhlYWRlcjogJ0NvbmZpcm1hdGlvbicsCiAgICAgICAgaWNvbjogJ3BpIHBpLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlJywKICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdCgpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpbnZfcmVxdWVzdF9pZCcsIGRhdGEpOwoKICAgICAgICAgIF90aGlzMTcuJHJvdXRlci5wdXNoKCIvaW52ZXN0aWdhdGlvbi1wYXltZW50LWNvbGxlY3Rpb24iKTsKICAgICAgICB9LAogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KCkgewogICAgICAgICAgX3RoaXMxNy5wcmludEludmVzdGlnYXRpb25Ub2tlbihkYXRhKTsKCiAgICAgICAgICBfdGhpczE3LnJlc2V0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hQYXRpZW50OiBmdW5jdGlvbiBzZWFyY2hQYXRpZW50KGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghZXZlbnQucXVlcnkudHJpbSgpLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMxOC5maWx0ZXJlZEl0ZW1zID0gX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMTgucGF0aWVudHNTdWdnZXN0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHN0YXJ0IHdpdGgKICAgICAgICAgIC8vIHRoaXMuZmlsdGVyZWRJdGVtcyA9IHRoaXMubWVkaWNpbmVMaXN0LmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgICAgLy8gICAgIHJldHVybiBpdGVtLnRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGV2ZW50LnF1ZXJ5LnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgLy8gfSk7CiAgICAgICAgICAvLyBjb250YWlucwogICAgICAgICAgX3RoaXMxOC5maWx0ZXJlZEl0ZW1zID0gRmlsdGVyU2VydmljZS5maWx0ZXIoX3RoaXMxOC5wYXRpZW50c1N1Z2dlc3Rpb25zLCBbJ3BhdGllbnQnXSwgZXZlbnQucXVlcnkudG9Mb3dlckNhc2UoKSwgRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TKS5zbGljZSgwLCA1MDApOwogICAgICAgIH0KICAgICAgfSwgMjUwKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/front-desk/PatientInvestigationRequest.js"],"names":["PatientInvestigationRequestService","PatientRegistrationService","PatientReportService","CommonService","DesignationSetupService","ConsultancyDepartmentSetupService","DoctorSetupService","EmployeeSetupService","BuildingSetupService","RoomSetupService","ReferredBySetupService","InvestigationSetupService","ProductSetupService","Validation","AppointmentPrescriptionService","moment","FilterService","FilterMatchMode","FilterOperator","GlobalSettingsService","HealthPackageSetupService","HealthPackageDetailsSetupService","data","filteredItems","patientsSuggestions","isInvestigation","isPrescription","isContactExist","isValid","isEmailValid","isPatientExist","isExist","collectionList","bloodGroupList","genderList","designationtList","departmentList","doctorList","buildingList","roomList","referredByList","employeeList","investigationList","reportDeliveryTypeList","productList","patientInvestigationRequest","appoinment_id","admission_id","patient_id","aPatient","age_year","age_month","age_day","cdinvestigation_request_date","String","Date","format","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_by_id","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","discountByList","text","globalSetting","packageList","healthPackageDetailsSetup","lstHealthPackageDetails","created","patientInvestigationRequestService","patientRegistrationService","commonService","employeeSetupService","doctorSetupService","consultancyDepartmentSetupService","designationSetupService","buildingSetupService","roomSetupService","referredBySetupService","investigationSetupService","productSetupService","patientReportService","validation","appointmentPrescriptionService","globalSettingsService","healthPackageSetupService","healthPackageDetailsSetupService","GetAllGender","then","GetAllBloodGroup","getAll","getActiveCombo","mergeReferredByInfo","mergeDoctorInfo","mergeEmployeeInfo","formatInvestigationList","GetAllReportDeliveryType","getBySettingName","getPackageFormatted","getPatientListForSuggestions","methods","forEach","element","push","refid","packageWiseInvestigationList","health_package_id","getHealthPackageByPackageId","formatPackageDetailsList","reset","length","aInvestigation","filter","el","investigation_id","ddlinvestigation","addInvestigation","package_charge","health_package_charge","reffered_doctor_id","health_package_consultant_id","health_package_consultant_charge","doctor_charge","packageConsultantCharge","Math","ceil","printInvestigationToken","id","GetInvestigationToken","Downloadfile","filterData","active","obj","investingation_name","manual_code","registration_no","reffered_by_name","doc_no","doctor_name","department_id","doctor_id","emp_no","first_name","invReset","button","doctorReset","designation_id","outside_doctor_name","outside_doctor_hospital_name","filterDoctorsDepartmentWise","getConsultancyFeeByDoctorId","aDoctor","consultancy_fee","building_id","_building_id","room_id","filterRoomsBuildingWise","filterInvestigation","filterProduct","product_category_id","getFormatted","cddob","dob","toString","getFormattedPrescriptionWiseInvestigations","reffered_by_id","discount_percent_for_investigation","getDiscountAmount","findPatient","str","searchData","startsWith","prescriptionWiseInvestigations","contactOrRegNo","getByContactOrRegNo","err","isExistContact","contact_no","match","getContact","investigationIsExist","cost","charge","urgent_carge","deliveryTime","expectedHour","report_delivery_duration","emmergency_report_delivery_duration","discountAmount","totalAmount","_investingation_name","_investigation_category_head_name","_room_id","expected_delivery","quantity","unshift","calculateTotalAmount","addParticular","calculatePerInvestigationDiscountPercent","calculateCostPrice","calculatePerInvestigationDiscountAmount","costPrice","getById","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","_uom_name","checkQty","_lstInvestigationParticular","totalPrice","getDiscountPercent","h","travelTime","add","deleteFromList","deleteFromParticularList","investigation_request_date","currentDate","getFullYear","getMonth","getDate","result","status","$toast","severity","summary","detail","life","setting_value","confirmPay","res","$confirm","require","message","header","icon","accept","localStorage","setItem","$router","reject","searchPatient","event","setTimeout","query","trim","toLowerCase","slice"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,kCAAP,MAA+C,6DAA/C;AACA,OAAOC,0BAAP,MAAuC,qDAAvC;AACA,OAAOC,oBAAP,MAAiC,2CAAjC;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,uBAAP,MAAoC,6CAApC;AACA,OAAOC,iCAAP,MAA8C,uDAA9C;AACA,OAAOC,kBAAP,MAA+B,wCAA/B;AACA,OAAOC,oBAAP,MAAiC,0CAAjC;AACA,OAAOC,oBAAP,MAAiC,0CAAjC;AACA,OAAOC,gBAAP,MAA6B,sCAA7B;AACA,OAAOC,sBAAP,MAAmC,4CAAnC;AACA,OAAOC,yBAAP,MAAsC,+CAAtC;AACA,OAAOC,mBAAP,MAAgC,yCAAhC,C,CACA;;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,8BAAP,MAA2C,2DAA3C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,aAAT,EAAwBC,eAAxB,EAAyCC,cAAzC,QAA+D,cAA/D;AACA,OAAOC,qBAAP,MAAkC,8CAAlC,C,CACA;;AACA,OAAOC,yBAAP,MAAsC,+CAAtC;AACA,OAAOC,gCAAP,MAA6C,sDAA7C;AAEA,eAAe;AACbC,EAAAA,IADa,kBACN;AACL,WAAO;AACLC,MAAAA,aAAa,EAAE,IADV;AAELC,MAAAA,mBAAmB,EAAE,EAFhB;AAGLC,MAAAA,eAAe,EAAE,IAHZ;AAILC,MAAAA,cAAc,EAAE,KAJX;AAKLC,MAAAA,cAAc,EAAE,EALX;AAMLC,MAAAA,OAAO,EAAE,EANJ;AAOLC,MAAAA,YAAY,EAAE,EAPT;AAQLC,MAAAA,cAAc,EAAE,EARX;AASLC,MAAAA,OAAO,EAAE,EATJ;AAULC,MAAAA,cAAc,EAAE,EAVX;AAWLC,MAAAA,cAAc,EAAE,EAXX;AAYLC,MAAAA,UAAU,EAAE,EAZP;AAaLC,MAAAA,gBAAgB,EAAE,EAbb;AAcLC,MAAAA,cAAc,EAAE,EAdX;AAeLC,MAAAA,UAAU,EAAE,EAfP;AAgBLC,MAAAA,YAAY,EAAE,EAhBT;AAiBLC,MAAAA,QAAQ,EAAE,EAjBL;AAkBLC,MAAAA,cAAc,EAAE,EAlBX;AAmBLC,MAAAA,YAAY,EAAE,EAnBT;AAoBL;AACAC,MAAAA,iBAAiB,EAAE,EArBd;AAsBLC,MAAAA,sBAAsB,EAAE,EAtBnB;AAuBLC,MAAAA,WAAW,EAAE,EAvBR;AAwBLC,MAAAA,2BAA2B,EAAE;AAC3BC,QAAAA,aAAa,EAAE,IADY;AAE3BC,QAAAA,YAAY,EAAE,IAFa;AAG3BC,QAAAA,UAAU,EAAE,EAHe;AAI3BC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE,GADF;AAERC,UAAAA,SAAS,EAAE,GAFH;AAGRC,UAAAA,OAAO,EAAE;AAHD,SAJiB;AAS3BC,QAAAA,4BAA4B,EAAEtC,MAAM,CAACuC,MAAM,CAAC,IAAIC,IAAJ,EAAD,CAAP,CAAN,CAA2BC,MAA3B,CAC5B,YAD4B,CATH;AAY3BC,QAAAA,oBAAoB,EAAE,SAZK;AAa3BC,QAAAA,8BAA8B,EAAE,EAbL;AAc3BC,QAAAA,0BAA0B,EAAE,EAdD;AAe3BC,QAAAA,cAAc,EAAE,SAfW;AAgB3BC,QAAAA,gBAAgB,EAAE,CAhBS;AAiB3BC,QAAAA,eAAe,EAAE,CAjBU;AAkB3BC,QAAAA,UAAU,EAAE,CAlBe;AAmB3BC,QAAAA,qBAAqB,EAAE,CAnBI;AAoB3BC,QAAAA,YAAY,EAAE;AApBa,OAxBxB;AA8CLC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,SAAS,EAAEpD,eAAe,CAACqD;AAA1C,SADD;AAEPC,QAAAA,IAAI,EAAE;AAAEH,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,SAAS,EAAEpD,eAAe,CAACuD;AAA1C;AAFC,OA9CJ;AAkDLC,MAAAA,WAlDK,yBAkDS;AACZ,aAAKP,OAAL,GAAe;AACbC,UAAAA,MAAM,EAAE;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,SAAS,EAAEpD,eAAe,CAACqD;AAA1C,WADK;AAEbC,UAAAA,IAAI,EAAE;AACJG,YAAAA,QAAQ,EAAExD,cAAc,CAACyD,GADrB;AAEJC,YAAAA,WAAW,EAAE,CACX;AAAER,cAAAA,KAAK,EAAE,IAAT;AAAeC,cAAAA,SAAS,EAAEpD,eAAe,CAACuD;AAA1C,aADW;AAFT;AAFO,SAAf;AASD,OA5DI;AA6DLK,MAAAA,SAAS,EAAE,KA7DN;AA8DLC,MAAAA,cAAc,EAAE,CACd;AAAEC,QAAAA,IAAI,EAAE,MAAR;AAAgBX,QAAAA,KAAK,EAAE;AAAvB,OADc,EAEd;AAAEW,QAAAA,IAAI,EAAE,UAAR;AAAoBX,QAAAA,KAAK,EAAE;AAA3B,OAFc,EAGd;AAAEW,QAAAA,IAAI,EAAE,WAAR;AAAqBX,QAAAA,KAAK,EAAE;AAA5B,OAHc,CA9DX;AAmELY,MAAAA,aAAa,EAAE,EAnEV;AAoEL;AACAC,MAAAA,WAAW,EAAE,EArER;AAsELC,MAAAA,yBAAyB,EAAE;AACzBC,QAAAA,uBAAuB,EAAE;AADA;AAtEtB,KAAP;AA0ED,GA5EY;AA6EbC,EAAAA,OA7Ea,qBA6EH;AAAA;;AACR,SAAKC,kCAAL,GACE,IAAIrF,kCAAJ,EADF;AAEA,SAAKsF,0BAAL,GAAkC,IAAIrF,0BAAJ,EAAlC;AACA,SAAKsF,aAAL,GAAqB,IAAIpF,aAAJ,EAArB;AACA,SAAKqF,oBAAL,GAA4B,IAAIjF,oBAAJ,EAA5B;AACA,SAAKkF,kBAAL,GAA0B,IAAInF,kBAAJ,EAA1B;AACA,SAAKoF,iCAAL,GACE,IAAIrF,iCAAJ,EADF;AAEA,SAAKsF,uBAAL,GAA+B,IAAIvF,uBAAJ,EAA/B;AACA,SAAKwF,oBAAL,GAA4B,IAAIpF,oBAAJ,EAA5B;AACA,SAAKqF,gBAAL,GAAwB,IAAIpF,gBAAJ,EAAxB;AACA,SAAKqF,sBAAL,GAA8B,IAAIpF,sBAAJ,EAA9B;AACA,SAAKqF,yBAAL,GAAiC,IAAIpF,yBAAJ,EAAjC;AACA,SAAKqF,mBAAL,GAA2B,IAAIpF,mBAAJ,EAA3B,CAdQ,CAeR;;AACA,SAAKqF,oBAAL,GAA4B,IAAI/F,oBAAJ,EAA5B;AACA,SAAKgG,UAAL,GAAkB,IAAIrF,UAAJ,EAAlB;AACA,SAAKsF,8BAAL,GAAsC,IAAIrF,8BAAJ,EAAtC;AACA,SAAKsF,qBAAL,GAA6B,IAAIjF,qBAAJ,EAA7B,CAnBQ,CAoBR;;AACA,SAAKkF,yBAAL,GAAiC,IAAIjF,yBAAJ,EAAjC;AACA,SAAKkF,gCAAL,GAAwC,IAAIjF,gCAAJ,EAAxC;AAEA,SAAKkE,aAAL,CACGgB,YADH,GAEGC,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACY,UAAL,GAAkBZ,IAAI,CAACA,IAAlC;AAAA,KAFR;AAIA,SAAKiE,aAAL,CACGkB,gBADH,GAEGD,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACW,cAAL,GAAsBX,IAAI,CAACA,IAAtC;AAAA,KAFR;AAIA,SAAKqE,uBAAL,CACGe,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACa,gBAAL,GAAwBb,IAAI,CAACA,IAAxC;AAAA,KAFR;AAIA,SAAKoE,iCAAL,CACGiB,cADH,GAEGH,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACc,cAAL,GAAsBd,IAAI,CAACA,IAAtC;AAAA,KAFR;AAIA,SAAKsE,oBAAL,CACGc,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACgB,YAAL,GAAoBhB,IAAI,CAACA,IAApC;AAAA,KAFR;AAIA,SAAKuE,gBAAL,CAAsBa,MAAtB,GAA+BF,IAA/B,CAAoC,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACiB,QAAL,GAAgBjB,IAAI,CAACA,IAAhC;AAAA,KAApC,EA5CQ,CA8CR;AACA;AACA;AAEA;AACA;AACA;;AAEA,SAAKwE,sBAAL,CACGY,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAU,KAAI,CAACsF,mBAAL,CAAyBtF,IAAI,CAACA,IAA9B,CAAV;AAAA,KAFR;AAIA,SAAKmE,kBAAL,CACGiB,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAU,KAAI,CAACuF,eAAL,CAAqBvF,IAAI,CAACA,IAA1B,CAAV;AAAA,KAFR;AAIA,SAAKkE,oBAAL,CACGkB,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAU,KAAI,CAACwF,iBAAL,CAAuBxF,IAAI,CAACA,IAA5B,CAAV;AAAA,KAFR,EA9DQ,CAkER;AACA;AACA;;AAEA,SAAKyE,yBAAL,CACGW,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAU,KAAI,CAACyF,uBAAL,CAA6BzF,IAAI,CAACA,IAAlC,CAAV;AAAA,KAFR;AAIA,SAAKiE,aAAL,CACGyB,wBADH,GAEGR,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACqB,sBAAL,GAA8BrB,IAAI,CAACA,IAA9C;AAAA,KAFR;AAIA,SAAK0E,mBAAL,CACGU,MADH,GAEGF,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACsB,WAAL,GAAmBtB,IAAI,CAACA,IAAnC;AAAA,KAFR;AAIA,SAAK8E,qBAAL,CACGa,gBADH,CACoB,+BADpB,EAEGT,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAAC0D,aAAL,GAAqB1D,IAAI,CAACA,IAArC;AAAA,KAFR,EAlFQ,CAsFR;;AACA,SAAK+E,yBAAL,CACGM,cADH,GAEGH,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAU,KAAI,CAAC4F,mBAAL,CAAyB5F,IAAI,CAACA,IAA9B,CAAV;AAAA,KAFR;AAIA,SAAKgE,0BAAL,CACG6B,4BADH,GAEGX,IAFH,CAEQ,UAAClF,IAAD;AAAA,aAAW,KAAI,CAACE,mBAAL,GAA2BF,IAAI,CAACA,IAA3C;AAAA,KAFR;AAGD,GA3KY;AA4Kb8F,EAAAA,OAAO,EAAE;AACP;AACAF,IAAAA,mBAFO,+BAEa5F,IAFb,EAEmB;AAAA;;AACxBA,MAAAA,IAAI,CAAC+F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxB,QAAA,MAAI,CAACrC,WAAL,CAAiBsC,IAAjB,CAAsB;AACpBnD,UAAAA,KAAK,EAAEkD,OAAO,CAAClD,KADK;AAEpBW,UAAAA,IAAI,EAAEuC,OAAO,CAACE,KAAR,GAAgB,GAAhB,GAAsBF,OAAO,CAACvC;AAFhB,SAAtB;AAID,OALD;AAMD,KATM;AAUP0C,IAAAA,4BAVO,0CAUwB;AAAA;;AAC7B,UAAI,KAAK5E,2BAAL,CAAiC6E,iBAArC,EAAwD;AACtD,aAAKpB,gCAAL,CACGqB,2BADH,CAC+B,KAAK9E,2BAAL,CAAiC6E,iBADhE,EAEGlB,IAFH,CAEQ,UAAClF,IAAD;AAAA,iBAAU,MAAI,CAACsG,wBAAL,CAA8BtG,IAAI,CAACA,IAAnC,CAAV;AAAA,SAFR;AAGD,OAJD,MAIO;AACL,aAAKuG,KAAL;AACD;AACF,KAlBM;AAmBPD,IAAAA,wBAnBO,oCAmBkBtG,IAnBlB,EAmBwB;AAAA;;AAC7B,WAAK4D,yBAAL,GAAiC5D,IAAjC;;AAEA,UAAI,KAAK4D,yBAAL,CAA+BC,uBAA/B,CAAuD2C,MAAvD,GAAgE,CAApE,EAAuE;AACrE,aAAKjF,2BAAL,CAAiCa,8BAAjC,GAAkE,EAAlE;AACA,aAAKwB,yBAAL,CAA+BC,uBAA/B,CAAuDkC,OAAvD,CAA+D,UAACC,OAAD,EAAa;AAC1E,cAAIS,cAAc,GAChB,MAAI,CAACrF,iBAAL,CAAuBsF,MAAvB,CACE,UAAUC,EAAV,EAAc;AACZ,mBACEA,EAAE,CAACC,gBAAH,KACAZ,OAAO,CAACY,gBAFV;AAID,WANH,EAOE,MAPF,EAQE,CARF,CADF;;AAWA,UAAA,MAAI,CAACrF,2BAAL,CAAiCsF,gBAAjC,GAAoDJ,cAApD;;AACA,UAAA,MAAI,CAACK,gBAAL;AACD,SAdD;AAeA,aAAKvF,2BAAL,CAAiCY,oBAAjC,GAAwD,SAAxD;AACA,aAAKZ,2BAAL,CAAiCgB,gBAAjC,GAAoD,CAApD;AACA,aAAKhB,2BAAL,CAAiCkB,UAAjC,GAA8C,KAAKmB,yBAAL,CAA+BmD,cAA7E;AACA,aAAKxF,2BAAL,CAAiCoB,YAAjC,GAAgD,KAAKiB,yBAAL,CAA+BmD,cAA/E;AACA,aAAKxF,2BAAL,CAAiCyF,qBAAjC,GAAyD,KAAKpD,yBAAL,CAA+BmD,cAAxF;;AAEA,YAAI,KAAKxF,2BAAL,CAAiC0F,kBAArC,EAAyD;AACvD,eAAK1F,2BAAL,CAAiC2F,4BAAjC,GAAgE,KAAK3F,2BAAL,CAAiC0F,kBAAjG;AACA,eAAK1F,2BAAL,CAAiC4F,gCAAjC,GAAoE,KAAKvD,yBAAL,CAA+BwD,aAAnG;AACA,eAAK7F,2BAAL,CAAiCoB,YAAjC,IAAiD,KAAKpB,2BAAL,CAAiC4F,gCAAlF;AACD,SAJD,MAIO;AACL,eAAK5F,2BAAL,CAAiC2F,4BAAjC,GAAgE,EAAhE;AACA,eAAK3F,2BAAL,CAAiC4F,gCAAjC,GAAoE,CAApE;AACA,eAAK5F,2BAAL,CAAiCoB,YAAjC,GAAgD,KAAKpB,2BAAL,CAAiCkB,UAAjF;AACD;;AAED,aAAKlB,2BAAL,CAAiCmB,qBAAjC,GAAyD,CAAzD;AAEA,aAAKnB,2BAAL,CAAiCiB,eAAjC,GAAmD,CAAnD;AACA,aAAKjB,2BAAL,CAAiCc,0BAAjC,GAA8D,EAA9D;AACD,OArCD,MAqCO;AACL,aAAKkE,KAAL;AACD;AACF,KA9DM;AA+DPc,IAAAA,uBA/DO,qCA+DmB;AACxB,UAAI,KAAKzD,yBAAL,CAA+BwD,aAA/B,IAAgD,KAAK7F,2BAAL,CAAiC0F,kBAArF,EAAyG;AACvG,aAAK1F,2BAAL,CAAiC2F,4BAAjC,GAAgE,KAAK3F,2BAAL,CAAiC0F,kBAAjG;AACA,aAAK1F,2BAAL,CAAiC4F,gCAAjC,GAAoE,KAAKvD,yBAAL,CAA+BwD,aAAnG;AACA,aAAK7F,2BAAL,CAAiCoB,YAAjC,IAAiD,KAAKpB,2BAAL,CAAiC4F,gCAAlF;AACD,OAJD,MAIO;AACL,aAAK5F,2BAAL,CAAiC2F,4BAAjC,GAAgE,EAAhE;AACA,aAAK3F,2BAAL,CAAiC4F,gCAAjC,GAAoE,CAApE;AACA,aAAK5F,2BAAL,CAAiCoB,YAAjC,GAAgD2E,IAAI,CAACC,IAAL,CAC9C,KAAKhG,2BAAL,CAAiCkB,UAAjC,GAA8C,KAAKlB,2BAAL,CAAiCiB,eAA/E,GACA,KAAKjB,2BAAL,CAAiCmB,qBAFa,CAAhD,CAHK,CAML;AACD;AACF,KA5EM;AA6EP;AACA8E,IAAAA,uBA9EO,mCA8EiBC,EA9EjB,EA8EqB;AAAA;;AAC1B,WAAK9C,oBAAL,CAA0B+C,qBAA1B,CAAgDD,EAAhD,EAAoD,IAApD,EAA0DvC,IAA1D,CAA+D,UAAClF,IAAD;AAAA,eAAW,MAAI,CAACiE,aAAL,CAAmB0D,YAAnB,CAAgC3H,IAAI,CAACA,IAArC,CAAX;AAAA,OAA/D;AACD,KAhFM;AAiFPyF,IAAAA,uBAjFO,mCAiFiBzF,IAjFjB,EAiFuB;AAAA;;AAC5B,UAAI4H,UAAU,GAAG5H,IAAI,CAAC0G,MAAL,CAAY,UAAUC,EAAV,EAAc;AACzC,eAAOA,EAAE,CAACkB,MAAH,IAAa,IAApB;AACD,OAFgB,EAEd,IAFc,CAAjB;AAGAD,MAAAA,UAAU,CAAC7B,OAAX,CAAmB,UAACC,OAAD,EAAa;AAC9B,YAAI8B,GAAG,GAAG9B,OAAV;AACA8B,QAAAA,GAAG,CAACC,mBAAJ,GAA0B/B,OAAO,CAACgC,WAAR,GAAsB,GAAtB,GAA4BhC,OAAO,CAAC+B,mBAA9D;;AACA,QAAA,MAAI,CAAC3G,iBAAL,CAAuB6E,IAAvB,CAA4B6B,GAA5B;AACD,OAJD;AAKD,KA1FM;AA2FPxC,IAAAA,mBA3FO,+BA2FatF,IA3Fb,EA2FmB;AAAA;;AACxB,UAAI4H,UAAU,GAAG5H,IAAI,CAAC0G,MAAL,CAAY,UAAUC,EAAV,EAAc;AACzC,eAAOA,EAAE,CAACkB,MAAH,IAAa,IAApB;AACD,OAFgB,EAEd,IAFc,CAAjB;AAGAD,MAAAA,UAAU,CAAC7B,OAAX,CAAmB,UAACC,OAAD,EAAa;AAC9B,QAAA,MAAI,CAAC9E,cAAL,CAAoB+E,IAApB,CAAyB;AACvBnD,UAAAA,KAAK,EAAEkD,OAAO,CAACiC,eADQ;AAEvBxE,UAAAA,IAAI,EAAEuC,OAAO,CAACgC,WAAR,GAAsB,GAAtB,GAA4BhC,OAAO,CAACiC,eAApC,GAAsD,GAAtD,GAA4DjC,OAAO,CAACkC,gBAApE,GAAuF;AAFtE,SAAzB;AAID,OALD;AAMD,KArGM;AAsGP3C,IAAAA,eAtGO,2BAsGSvF,IAtGT,EAsGe;AAAA;;AACpB;AACAA,MAAAA,IAAI,CAAC+F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxB,QAAA,MAAI,CAAC9E,cAAL,CAAoB+E,IAApB,CAAyB;AACvBnD,UAAAA,KAAK,EAAEkD,OAAO,CAACmC,MADQ;AAEvB1E,UAAAA,IAAI,EAAEuC,OAAO,CAACmC,MAAR,GAAiB,GAAjB,GAAuBnC,OAAO,CAACoC,WAA/B,GAA6C;AAF5B,SAAzB;AAID,OALD;AAOApI,MAAAA,IAAI,CAAC+F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxB,QAAA,MAAI,CAACjF,UAAL,CAAgBkF,IAAhB,CAAqB;AACnBoC,UAAAA,aAAa,EAAErC,OAAO,CAACqC,aADJ;AAEnBC,UAAAA,SAAS,EAAEtC,OAAO,CAACsC,SAFA;AAGnBF,UAAAA,WAAW,EAAEpC,OAAO,CAACmC,MAAR,GAAiB,GAAjB,GAAuBnC,OAAO,CAACoC;AAHzB,SAArB;AAKD,OAND;AAOD,KAtHM;AAuHP5C,IAAAA,iBAvHO,6BAuHWxF,IAvHX,EAuHiB;AAAA;;AACtB,UAAI4H,UAAU,GAAG5H,IAAI,CAAC0G,MAAL,CAAY,UAAUC,EAAV,EAAc;AACzC,eAAOA,EAAE,CAACkB,MAAH,IAAa,IAApB;AACD,OAFgB,EAEd,IAFc,CAAjB;AAGAD,MAAAA,UAAU,CAAC7B,OAAX,CAAmB,UAACC,OAAD,EAAa;AAC9B,QAAA,MAAI,CAAC9E,cAAL,CAAoB+E,IAApB,CAAyB;AACvBnD,UAAAA,KAAK,EAAEkD,OAAO,CAACuC,MADQ;AAEvB9E,UAAAA,IAAI,EAAEuC,OAAO,CAACuC,MAAR,GAAiB,GAAjB,GAAuBvC,OAAO,CAACwC,UAA/B,GAA4C;AAF3B,SAAzB;AAID,OALD;AAMD,KAjIM;AAkIP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,QAnJO,sBAmJI;AACT,WAAKtI,eAAL,GAAuB,IAAvB;AACA,WAAKoB,2BAAL,CAAiCsF,gBAAjC,GAAoD,EAApD;AACA,WAAKpG,OAAL,GAAe,EAAf;AACA,WAAKmD,yBAAL,GAAiC;AAC/BC,QAAAA,uBAAuB,EAAE;AADM,OAAjC;AAGD,KA1JM;AA2JP0C,IAAAA,KA3JO,mBA2JC;AACN,WAAKpG,eAAL,GAAuB,IAAvB;AACA,WAAKC,cAAL,GAAsB,KAAtB;AACA,WAAKsI,MAAL,GAAc,KAAd;AACA,WAAKpI,OAAL,GAAe,EAAf;AACA,WAAKC,YAAL,GAAoB,EAApB;AACA,WAAKE,OAAL,GAAe,EAAf;AACA,WAAKJ,cAAL,GAAsB,EAAtB;AACA,WAAKkB,2BAAL,GAAmC;AACjCG,QAAAA,UAAU,EAAE,EADqB;AAEjCF,QAAAA,aAAa,EAAE,IAFkB;AAGjCC,QAAAA,YAAY,EAAE,IAHmB;AAIjCE,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE,GADF;AAERC,UAAAA,SAAS,EAAE,GAFH;AAGRC,UAAAA,OAAO,EAAE;AAHD,SAJuB;AASjCC,QAAAA,4BAA4B,EAAEtC,MAAM,CAACuC,MAAM,CAAC,IAAIC,IAAJ,EAAD,CAAP,CAAN,CAA2BC,MAA3B,CAC5B,YAD4B,CATG;AAYjCC,QAAAA,oBAAoB,EAAE,SAZW;AAajCC,QAAAA,8BAA8B,EAAE,EAbC;AAcjCC,QAAAA,0BAA0B,EAAE,EAdK;AAejCE,QAAAA,gBAAgB,EAAE,CAfe;AAgBjCC,QAAAA,eAAe,EAAE,CAhBgB;AAiBjCC,QAAAA,UAAU,EAAE,CAjBqB;AAkBjCC,QAAAA,qBAAqB,EAAE,CAlBU;AAmBjCC,QAAAA,YAAY,EAAE;AAnBmB,OAAnC;AAqBA,WAAKY,SAAL,GAAiB,KAAjB;AACA,WAAKK,yBAAL,GAAiC;AAC/BC,QAAAA,uBAAuB,EAAE;AADM,OAAjC;AAGD,KA5LM;AA6LP8E,IAAAA,WA7LO,yBA6LO;AACZ,WAAKpH,2BAAL,CAAiC8G,aAAjC,GAAiD,EAAjD;AACA,WAAK9G,2BAAL,CAAiC0F,kBAAjC,GAAsD,EAAtD;AACA,WAAK1F,2BAAL,CAAiCqH,cAAjC,GAAkD,EAAlD;AACA,WAAKrH,2BAAL,CAAiCsH,mBAAjC,GAAuD,EAAvD;AACA,WAAKtH,2BAAL,CAAiCuH,4BAAjC,GAAgE,EAAhE;AACD,KAnMM;AAoMPC,IAAAA,2BApMO,yCAoMuB;AAC5B,aAAO,KAAKhI,UAAL,CAAgB2F,MAAhB,CAAuB,UAAUC,EAAV,EAAc;AAC1C,eACEA,EAAE,CAAC0B,aAAH,KAAqB,KAAK9G,2BAAL,CAAiC8G,aADxD;AAGD,OAJM,EAIJ,IAJI,CAAP;AAOD,KA5MM;AA6MPW,IAAAA,2BA7MO,yCA6MuB;AAC5B,UAAIC,OAAO,GAAG,KAAKlI,UAAL,CAAgB2F,MAAhB,CAAuB,UAAUC,EAAV,EAAc;AACjD,eAAOA,EAAE,CAAC2B,SAAH,KAAiB,KAAK/G,2BAAL,CAAiC+G,SAAzD;AACD,OAFa,EAEX,IAFW,CAAd;AAIA,WAAK/G,2BAAL,CAAiC2H,eAAjC,GACED,OAAO,CAAC,CAAD,CAAP,CAAWC,eADb;AAEA,WAAK3H,2BAAL,CAAiC4H,WAAjC,GAA+CF,OAAO,CAAC,CAAD,CAAP,CAAWG,YAA1D;AACA,WAAK7H,2BAAL,CAAiC8H,OAAjC,GAA2CJ,OAAO,CAAC,CAAD,CAAP,CAAWI,OAAtD;AACD,KAtNM;AAuNPC,IAAAA,uBAvNO,qCAuNmB;AACxB,aAAO,KAAKrI,QAAL,CAAcyF,MAAd,CAAqB,UAAUC,EAAV,EAAc;AACxC,eAAOA,EAAE,CAACwC,WAAH,KAAmB,KAAK5H,2BAAL,CAAiC4H,WAA3D;AACD,OAFM,EAEJ,IAFI,CAAP;AAGD,KA3NM;AA4NPI,IAAAA,mBA5NO,iCA4Ne;AACpB,aAAO,KAAKnI,iBAAL,CAAuBsF,MAAvB,CAA8B,UAAUC,EAAV,EAAc;AACjD,eAAOA,EAAE,CAACkB,MAAH,IAAa,IAApB;AACD,OAFM,EAEJ,IAFI,CAAP;AAGD,KAhOM;AAiOP2B,IAAAA,aAjOO,2BAiOS;AACd,aAAO,KAAKlI,WAAL,CAAiBoF,MAAjB,CAAwB,UAAUC,EAAV,EAAc;AAC3C,eAAOA,EAAE,CAAC8C,mBAAH,IAA0B,CAA1B,IAA+B9C,EAAE,CAACkB,MAAH,IAAa,IAAnD;AACD,OAFM,EAEJ,IAFI,CAAP;AAGD,KArOM;AAsOP6B,IAAAA,YAtOO,wBAsOM1J,IAtON,EAsOY;AACjB,WAAKuB,2BAAL,CAAiCI,QAAjC,GAA4C3B,IAA5C;;AACA,UAAI,CAAC,KAAKuB,2BAAL,CAAiCI,QAAjC,CAA0CD,UAA/C,EAA2D;AACzD,aAAKlB,cAAL,GAAsB,gBAAtB,CADyD,CAEzD;AACA;AACA;AACA;;AACA,aAAK+F,KAAL;AACD,OAPD,MAOO;AACL,aAAK/F,cAAL,GAAsB,EAAtB;AAEA,aAAKe,2BAAL,CAAiCG,UAAjC,GACE,KAAKH,2BAAL,CAAiCI,QAAjC,CAA0CD,UAD5C;AAEA,aAAKH,2BAAL,CAAiCI,QAAjC,CAA0CgI,KAA1C,GAAkDlK,MAAM,CACtDuC,MAAM,CAAC,KAAKT,2BAAL,CAAiCI,QAAjC,CAA0CiI,GAA3C,CADgD,CAAN,CAEhD1H,MAFgD,CAEzC,YAFyC,CAAlD;AAGA,aAAKX,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA1C,GAAqD,KAAKL,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA1C,CAAmDiI,QAAnD,EAArD;AACA,aAAKtI,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA1C,GAAsD,KAAKN,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA1C,CAAoDgI,QAApD,EAAtD;AACA,aAAKtI,2BAAL,CAAiCI,QAAjC,CAA0CG,OAA1C,GAAoD,KAAKP,2BAAL,CAAiCI,QAAjC,CAA0CG,OAA1C,CAAkD+H,QAAlD,EAApD;AACD;AACF,KA3PM;AA4PPC,IAAAA,0CA5PO,sDA4PoC9J,IA5PpC,EA4P0C;AAAA;;AAC/C,UAAIA,IAAI,CAACwG,MAAL,GAAc,CAAlB,EAAqB;AACnB,aAAKhG,cAAL,GAAsB,EAAtB;AAEA,aAAKe,2BAAL,CAAiCI,QAAjC,GAA4C3B,IAAI,CAAC,CAAD,CAAhD;AACA,aAAKuB,2BAAL,CAAiCC,aAAjC,GAAiDxB,IAAI,CAAC,CAAD,CAAJ,CAAQwB,aAAzD;AACA,aAAKD,2BAAL,CAAiCE,YAAjC,GAAgDzB,IAAI,CAAC,CAAD,CAAJ,CAAQyB,YAAxD;AACA,aAAKF,2BAAL,CAAiCG,UAAjC,GAA8C,KAAKH,2BAAL,CAAiCI,QAAjC,CAA0CD,UAAxF;AACA,aAAKH,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA1C,GAAqD,KAAKL,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA1C,CAAmDiI,QAAnD,EAArD;AACA,aAAKtI,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA1C,GAAsD,KAAKN,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA1C,CAAoDgI,QAApD,EAAtD;AACA,aAAKtI,2BAAL,CAAiCI,QAAjC,CAA0CG,OAA1C,GAAoD,KAAKP,2BAAL,CAAiCI,QAAjC,CAA0CG,OAA1C,CAAkD+H,QAAlD,EAApD;AACA,aAAKtI,2BAAL,CAAiC8G,aAAjC,GAAiDrI,IAAI,CAAC,CAAD,CAAJ,CAAQqI,aAAzD;AACA,aAAK9G,2BAAL,CAAiC0F,kBAAjC,GAAsDjH,IAAI,CAAC,CAAD,CAAJ,CAAQsI,SAA9D;AACA,aAAK/G,2BAAL,CAAiCwI,cAAjC,GAAkD/J,IAAI,CAAC,CAAD,CAAJ,CAAQmI,MAA1D;AACA,aAAK5G,2BAAL,CAAiCgB,gBAAjC,GAAoDvC,IAAI,CAAC,CAAD,CAAJ,CAAQgK,kCAA5D;AAEA,aAAK5J,cAAL,GAAsB,IAAtB;AAEAJ,QAAAA,IAAI,CAAC+F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxB,cAAIS,cAAc,GAChB,OAAI,CAACrF,iBAAL,CAAuBsF,MAAvB,CACE,UAAUC,EAAV,EAAc;AACZ,mBACEA,EAAE,CAACC,gBAAH,KACAZ,OAAO,CAACY,gBAFV;AAID,WANH,EAOE,OAPF,EAQE,CARF,CADF;;AAWA,UAAA,OAAI,CAACrF,2BAAL,CAAiCsF,gBAAjC,GAAoDJ,cAApD;;AACA,UAAA,OAAI,CAACK,gBAAL;AACD,SAdD;AAgBA,aAAKmD,iBAAL;AACD,OAlCD,MAkCO;AACL,aAAKzJ,cAAL,GAAsB,iBAAtB,CADK,CAEL;AACA;AACA;AACA;;AACA,aAAK+F,KAAL;AACD;AACF,KAvSM;AAwSP2D,IAAAA,WAxSO,yBAwSO;AAAA;;AACZ,UAAIC,GAAG,GAAG,KAAK5I,2BAAL,CAAiC6I,UAA3C;;AACA,UAAI,OAAOD,GAAP,KAAe,QAAnB,EAA6B;AAC3B,YAAIA,GAAG,CAACE,UAAJ,CAAe,KAAf,KAAyBF,GAAG,CAACE,UAAJ,CAAe,KAAf,CAA7B,EAAoD;AAClD,eAAKxF,8BAAL,CACGyF,8BADH,CACkC,KAAK/I,2BAAL,CAAiC6I,UADnE,EAC+E,IAD/E,EAEGlF,IAFH,CAEQ,UAAClF,IAAD;AAAA,mBAAU,OAAI,CAAC8J,0CAAL,CAAgD9J,IAAI,CAACA,IAArD,CAAV;AAAA,WAFR;AAGD,SAJD,MAIM;AACJ,eAAKS,OAAL,GAAe,oBAAf;AACA,eAAK8F,KAAL;AACD;AACF,OATD,MAUK;AACH,YAAI6D,UAAU,GAAG,KAAK7I,2BAAL,CAAiC6I,UAAlD;;AACA,YAAI;AACF,eAAK7I,2BAAL,CAAiCgJ,cAAjC,GAAkDH,UAAU,CAACnC,eAA7D;AACA,eAAK7H,cAAL,GAAsB,KAAtB;AACA,eAAK4D,0BAAL,CACGwG,mBADH,CACuB,KAAKjJ,2BAAL,CAAiCgJ,cADxD,EACwE,IADxE,EAEGrF,IAFH,CAEQ,UAAClF,IAAD;AAAA,mBAAU,OAAI,CAAC0J,YAAL,CAAkB1J,IAAI,CAACA,IAAvB,CAAV;AAAA,WAFR;AAGD,SAND,CAME,OAAOyK,GAAP,EAAY;AACZ,eAAKhK,OAAL,GAAe,oBAAf;AACA,eAAK8F,KAAL;AACD;AAEF;AACF,KAlUM;AAmUPmE,IAAAA,cAnUO,4BAmUU;AAAA;;AACf,UACE,KAAKnJ,2BAAL,CAAiCI,QAAjC,CAA0CgJ,UAA1C,CAAqDC,KAArD,CACE,kBADF,CADF,EAIE;AACA,aAAK5G,0BAAL,CACGwG,mBADH,CAEI,KAAKjJ,2BAAL,CAAiCI,QAAjC,CAA0CgJ,UAF9C,EAE0D,IAF1D,EAIGzF,IAJH,CAIQ,UAAClF,IAAD;AAAA,iBAAU,OAAI,CAAC6K,UAAL,CAAgB7K,IAAI,CAACA,IAArB,CAAV;AAAA,SAJR;AAKD,OAVD,MAUO;AACL,aAAKK,cAAL,GACE,iEADF;AAED;AACF,KAlVM;AAmVPwK,IAAAA,UAnVO,sBAmVI7K,IAnVJ,EAmVU;AACf,UAAIA,IAAI,CAAC2K,UAAT,EAAqB;AACnB,aAAKtK,cAAL,GAAsB,yBAAtB;AACD,OAFD,MAEO;AACL,aAAKA,cAAL,GAAsB,EAAtB;AACD;AACF,KAzVM;AA0VPyK,IAAAA,oBA1VO,kCA0VgB;AACrB,UAAIrE,cAAc,GAChB,KAAKlF,2BAAL,CAAiCa,8BAAjC,CAAgEsE,MAAhE,CACE,UAAUC,EAAV,EAAc;AACZ,eACEA,EAAE,CAACC,gBAAH,KACA,KAAKrF,2BAAL,CAAiCsF,gBAAjC,CAAkDD,gBAFpD;AAID,OANH,EAOE,IAPF,CADF;;AAWA,UAAIH,cAAc,CAACD,MAAnB,EAA2B;AACzB,aAAK/F,OAAL,GAAe,kCAAf;AACA,aAAKN,eAAL,GAAuB,IAAvB;AACA;AACD,OAJD,MAIO;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,aAAKM,OAAL,GAAe,EAAf;AACA,aAAKN,eAAL,GAAuB,KAAvB;AACD;AACF,KAxXM;AAyXP2G,IAAAA,gBAzXO,8BAyXY;AACjB,WAAKvD,SAAL,GAAiB,IAAjB;AACA,UAAIkD,cAAc,GAChB,KAAKlF,2BAAL,CAAiCa,8BAAjC,CAAgEsE,MAAhE,CACE,UAAUC,EAAV,EAAc;AACZ,eACEA,EAAE,CAACC,gBAAH,KACA,KAAKrF,2BAAL,CAAiCsF,gBAAjC,CAAkDD,gBAFpD;AAID,OANH,EAOE,IAPF,CADF;;AAWA,UAAIH,cAAc,CAACD,MAAnB,EAA2B;AACzB,aAAK/F,OAAL,GAAe,kCAAf,CADyB,CAEzB;;AACA;AACD,OAJD,MAIO;AACL,YAAI,CAAC,KAAKc,2BAAL,CAAiCsF,gBAAtC,EAAwD;AACtD;AACD,SAFD,MAEO,IAAI,CAAC,KAAKtF,2BAAL,CAAiCY,oBAAtC,EAA4D;AACjE;AACD,SAFM,MAEA,IACL,CAAC,KAAKZ,2BAAL,CAAiCQ,4BAD7B,EAEL;AACA;AACD,SAJM,MAIA;AACL,eAAKtB,OAAL,GAAe,EAAf;AACA,cAAIsK,IAAI,GACN,KAAKxJ,2BAAL,CAAiCY,oBAAjC,IAAyD,SAAzD,GACI,KAAKZ,2BAAL,CAAiCsF,gBAAjC,CAAkDmE,MADtD,GAEI,KAAKzJ,2BAAL,CAAiCsF,gBAAjC,CAAkDoE,YAHxD;AAKA,cAAIC,YAAY,GAAG,KAAK3J,2BAAL,CAAiCY,oBAAjC,IAAyD,SAAzD,GAAqE,KAAKgJ,YAAL,CAAkB,KAAK5J,2BAAL,CAAiCsF,gBAAjC,CAAkDuE,wBAApE,CAArE,GAAqK,KAAKD,YAAL,CAAkB,KAAK5J,2BAAL,CAAiCsF,gBAAjC,CAAkDwE,mCAApE,CAAxL;;AACA,cAAI,KAAK9J,2BAAL,CAAiC6E,iBAArC,EAAwD;AACtD,gBAAIkF,cAAc,GAAG,CAArB;AACA,gBAAIC,WAAW,GAAGR,IAAlB;AACA,gBAAIxI,gBAAgB,GAAG,CAAvB;AACD,WAJD,MAKK;AACH+I,YAAAA,cAAc,GACX,IACCP,IADD,GAEC,KAAKxJ,2BAAL,CAAiCsF,gBAAjC,CACGtE,gBAHL,GAIA,GALF;AAOAgJ,YAAAA,WAAW,GAAG,IAAIR,IAAJ,GAAWO,cAAzB;AACA/I,YAAAA,gBAAgB,GAAG,KAAKhB,2BAAL,CAAiCsF,gBAAjC,CAChBtE,gBADH;AAED;;AAED,cAAIuF,GAAG,GAAG;AACRlB,YAAAA,gBAAgB,EACd,KAAKrF,2BAAL,CAAiCsF,gBAAjC,CACGD,gBAHG;AAIR4E,YAAAA,oBAAoB,EAClB,KAAKjK,2BAAL,CAAiCsF,gBAAjC,CACGkB,mBANG;AAOR0D,YAAAA,iCAAiC,EAC/B,KAAKlK,2BAAL,CAAiCsF,gBAAjC,CACG4E,iCATG;AAWR;AACA;AACA;AACA;AACAtC,YAAAA,WAAW,EAAE,KAAK5H,2BAAL,CAAiCsF,gBAAjC,CAAkDuC,YAfvD;AAgBRC,YAAAA,OAAO,EAAE,KAAK9H,2BAAL,CAAiCsF,gBAAjC,CAAkD6E,QAhBnD;AAiBRC,YAAAA,iBAAiB,EAAET,YAjBX;AAmBR/I,YAAAA,oBAAoB,EAClB,KAAKZ,2BAAL,CAAiCY,oBApB3B;AAsBRyJ,YAAAA,QAAQ,EAAE,CAtBF;AAuBRnJ,YAAAA,UAAU,EAAEsI,IAvBJ;AAyBRxI,YAAAA,gBAAgB,EACdA,gBA1BM;AA4BRC,YAAAA,eAAe,EAAE8I,cA5BT;AA8BR3I,YAAAA,YAAY,EAAE4I;AA9BN,WAAV;AAiCA,eAAKhK,2BAAL,CAAiCa,8BAAjC,CAAgEyJ,OAAhE,CACE/D,GADF;AAIA,eAAKvG,2BAAL,CAAiCkB,UAAjC,GACE,KAAKlB,2BAAL,CAAiCkB,UAAjC,GAA8C8I,WADhD,CA/DK,CAiEL;;AACA,eAAKO,oBAAL,GAlEK,CAmEL;AACA;AACA;AACD;AACF;;AAED,UAAI,CAAC,KAAKvK,2BAAL,CAAiC6E,iBAAtC,EAAyD;AACvD,aAAK2F,aAAL,CACE,KAAKxK,2BAAL,CAAiCsF,gBAAjC,CAAkDD,gBADpD;AAGD;AACF,KAjeM;AAkePoF,IAAAA,wCAleO,oDAkekChM,IAlelC,EAkewC;AAC7C,WAAKuB,2BAAL,CAAiCa,8BAAjC,CAAgE2D,OAAhE,CACE,UAACC,OAAD,EAAa;AACX,YAAIA,OAAO,CAACY,gBAAR,IAA4B5G,IAAI,CAAC4G,gBAArC,EAAuD;AACrDZ,UAAAA,OAAO,CAACzD,gBAAR,GAA4ByD,OAAO,CAACxD,eAAR,GAA0BwD,OAAO,CAACvD,UAAnC,GAAiD,GAA5E,CADqD,CAErD;;AACAuD,UAAAA,OAAO,CAACrD,YAAR,GAAuBqD,OAAO,CAACvD,UAAR,GAAqBuD,OAAO,CAACxD,eAApD;AACD;AACF,OAPH;AASA,WAAKyJ,kBAAL;AACD,KA7eM;AA8ePC,IAAAA,uCA9eO,mDA8eiClM,IA9ejC,EA8euC;AAC5C,WAAKuB,2BAAL,CAAiCa,8BAAjC,CAAgE2D,OAAhE,CACE,UAACC,OAAD,EAAa;AACX,YAAIA,OAAO,CAACY,gBAAR,IAA4B5G,IAAI,CAAC4G,gBAArC,EAAuD;AACrDZ,UAAAA,OAAO,CAACxD,eAAR,GAA2BwD,OAAO,CAACvD,UAAR,GAAqBuD,OAAO,CAACzD,gBAA9B,GAAkD,GAA5E;AACAyD,UAAAA,OAAO,CAACrD,YAAR,GAAuBqD,OAAO,CAACvD,UAAR,GAAqBuD,OAAO,CAACxD,eAApD;AACD;AACF,OANH;AAQA,WAAKyJ,kBAAL;AACD,KAxfM;AAyfPA,IAAAA,kBAzfO,gCAyfc;AACnB,UAAIE,SAAS,GAAG,CAAhB;AACA,WAAK5K,2BAAL,CAAiCa,8BAAjC,CAAgE2D,OAAhE,CACE,UAACC,OAAD,EAAa;AACXmG,QAAAA,SAAS,GAAGA,SAAS,GAAGnG,OAAO,CAACrD,YAAhC;AACD,OAHH;AAKA,WAAKpB,2BAAL,CAAiCkB,UAAjC,GAA8C0J,SAA9C;AAEA,WAAKL,oBAAL;AACD,KAngBM;AAogBPA,IAAAA,oBApgBO,kCAogBgB;AACrB,WAAKvK,2BAAL,CAAiCoB,YAAjC,GAAgD2E,IAAI,CAACC,IAAL,CAC9C,KAAKhG,2BAAL,CAAiCkB,UAAjC,GAA8C,KAAKlB,2BAAL,CAAiCiB,eAA/E,GACA,KAAKjB,2BAAL,CAAiCmB,qBAFa,CAAhD;AAIA,WAAK2E,uBAAL;AACD,KA1gBM;AA2gBP0E,IAAAA,aA3gBO,yBA2gBOtE,EA3gBP,EA2gBW;AAAA;;AAChB,WAAKhD,yBAAL,CACG2H,OADH,CACW3E,EADX,EAEGvC,IAFH,CAEQ,UAAClF,IAAD;AAAA,eAAU,OAAI,CAACqM,sBAAL,CAA4BrM,IAA5B,CAAV;AAAA,OAFR;AAGD,KA/gBM;AAghBPsM,IAAAA,cAhhBO,0BAghBQtM,IAhhBR,EAghBcuM,GAhhBd,EAghBmBC,KAhhBnB,EAghB0B;AAC/B,UACE,KAAKjL,2BAAL,CAAiCa,8BAAjC,CACGoE,MADH,IACa,CAFf,EAGE;AACA,aAAK/F,OAAL,GAAe,mBAAf;AACA;AACD,OAND,MAMO;AACL,aAAKA,OAAL,GAAe,EAAf;AACA,YAAIqH,GAAG,GACL,KAAKvG,2BAAL,CAAiCc,0BAAjC,CAA4DqE,MAA5D,CACE,UAAUC,EAAV,EAAc;AACZ,iBAAOA,EAAE,CAAC8F,UAAH,KAAkBzM,IAAI,CAACyM,UAA9B;AACD,SAHH,EAIE,IAJF,EAKE,CALF,CADF;;AAOA,YAAI3E,GAAJ,EAAS;AACPyE,UAAAA,GAAG,GAAGG,QAAQ,CAAC5E,GAAG,CAACyE,GAAL,CAAR,GAAoBA,GAA1B;AAEA,eAAKhL,2BAAL,CAAiCc,0BAAjC,GACE,KAAKd,2BAAL,CAAiCc,0BAAjC,CAA4DqE,MAA5D,CACE,UAAUC,EAAV,EAAc;AACZ,mBAAOA,EAAE,CAAC8F,UAAH,IAAiBzM,IAAI,CAACyM,UAA7B;AACD,WAHH,EAIE,IAJF,CADF;AAOD;;AAED,aAAKlL,2BAAL,CAAiCc,0BAAjC,CAA4D4D,IAA5D,CAAiE;AAC/DwG,UAAAA,UAAU,EAAEzM,IAAI,CAACyM,UAD8C;AAE/DE,UAAAA,aAAa,EAAEH,KAFgD;AAG/DI,UAAAA,MAAM,EAAE5M,IAAI,CAAC4M,MAHkD;AAI/DC,UAAAA,SAAS,EAAE7M,IAAI,CAAC6M,SAJ+C;AAK/DpK,UAAAA,UAAU,EAAEzC,IAAI,CAACyC,UAL8C;AAM/D8J,UAAAA,GAAG,EAAEA;AAN0D,SAAjE;AASA,aAAKO,QAAL;AACD;AACF,KAvjBM;AAwjBPT,IAAAA,sBAxjBO,kCAwjBgBrM,IAxjBhB,EAwjBsB;AAAA;;AAC3BA,MAAAA,IAAI,CAACA,IAAL,CAAU+M,2BAAV,CAAsChH,OAAtC,CAA8C,UAACC,OAAD,EAAa;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAA,OAAI,CAACsG,cAAL,CAAoBtG,OAApB,EAA6B,CAA7B,EAAgCA,OAAO,CAAC2G,aAAxC;AACD,OAZD;AAaD,KAtkBM;AAukBPG,IAAAA,QAvkBO,sBAukBI;AAAA;;AACT,UAAIE,UAAU,GAAG,CAAjB;AACA,WAAKzL,2BAAL,CAAiCc,0BAAjC,CAA4D0D,OAA5D,CACE,UAACC,OAAD,EAAa;AACX,YACEA,OAAO,CAACuG,GAAR,GACA,OAAI,CAAChL,2BAAL,CAAiCa,8BAAjC,CACGoE,MAHL,EAIE;AACAR,UAAAA,OAAO,CAACuG,GAAR,GACE,OAAI,CAAChL,2BAAL,CAAiCa,8BAAjC,CAAgEoE,MADlE;AAED,SAPD,MAOO,IAAIR,OAAO,CAACuG,GAAR,IAAe,CAAnB,EAAsB;AAC3BvG,UAAAA,OAAO,CAACuG,GAAR,GAAc,CAAd;AACD;;AAEDvG,QAAAA,OAAO,CAACgH,UAAR,GAAqBhH,OAAO,CAACuG,GAAR,GAAcvG,OAAO,CAACvD,UAA3C;AACAuK,QAAAA,UAAU,IAAIhH,OAAO,CAACgH,UAAtB;AACD,OAfH;AAiBA,WAAKzL,2BAAL,CAAiCmB,qBAAjC,GAAyDsK,UAAzD;AACA,WAAKlB,oBAAL;AACD,KA5lBM;AA6lBPmB,IAAAA,kBA7lBO,gCA6lBc;AACnB,WAAK1L,2BAAL,CAAiCgB,gBAAjC,GAAoD+E,IAAI,CAACC,IAAL,CACjD,KAAKhG,2BAAL,CAAiCiB,eAAjC,GACC,KAAKjB,2BAAL,CAAiCkB,UADnC,GAEA,GAHkD,CAApD,CADmB,CAMnB;AACA;AACA;;AACA,WAAKqJ,oBAAL;AACD,KAvmBM;AAwmBP7B,IAAAA,iBAxmBO,+BAwmBa;AAClB,WAAK1I,2BAAL,CAAiCiB,eAAjC,GACG,KAAKjB,2BAAL,CAAiCkB,UAAjC,GACC,KAAKlB,2BAAL,CAAiCgB,gBADnC,GAEA,GAHF,CADkB,CAMlB;AACA;AACA;;AACA,WAAKuJ,oBAAL;AACD,KAlnBM;AAmnBPX,IAAAA,YAnnBO,wBAmnBM+B,CAnnBN,EAmnBS;AACd;AACA;AACA,UAAIC,UAAU,GAAG1N,MAAM,GAAG2N,GAAT,CAAaF,CAAb,EAAgB,OAAhB,EAAyBhL,MAAzB,CAAgC,oBAAhC,CAAjB;AACA,aAAOiL,UAAP;AACD,KAxnBM;AAynBPE,IAAAA,cAznBO,0BAynBQrN,IAznBR,EAynBc;AACnB,WAAKuB,2BAAL,CAAiCa,8BAAjC,GACE,KAAKb,2BAAL,CAAiCa,8BAAjC,CAAgEsE,MAAhE,CACE,UAAUC,EAAV,EAAc;AACZ,eAAOA,EAAE,CAACC,gBAAH,IAAuB5G,IAAI,CAAC4G,gBAAnC;AACD,OAHH,EAIE,IAJF,CADF;AAOA,WAAKrF,2BAAL,CAAiCkB,UAAjC,GACE,KAAKlB,2BAAL,CAAiCkB,UAAjC,GAA8CzC,IAAI,CAAC2C,YADrD;AAEA,WAAKmJ,oBAAL;AACA,WAAKgB,QAAL;;AAEA,UACE,CAAC,KAAKvL,2BAAL,CAAiCa,8BAAjC,CAAgEoE,MADnE,EAEE;AACA,aAAKjF,2BAAL,CAAiCc,0BAAjC,GAA8D,EAA9D;AACA,aAAKd,2BAAL,CAAiCmB,qBAAjC,GAAyD,CAAzD;AACA,aAAKoJ,oBAAL;AACD;AACF,KA7oBM;AA8oBPwB,IAAAA,wBA9oBO,oCA8oBkBtN,IA9oBlB,EA8oBwB;AAC7B,WAAKuB,2BAAL,CAAiCc,0BAAjC,GACE,KAAKd,2BAAL,CAAiCc,0BAAjC,CAA4DqE,MAA5D,CACE,UAAUC,EAAV,EAAc;AACZ,eAAOA,EAAE,CAAC8F,UAAH,IAAiBzM,IAAI,CAACyM,UAA7B;AACD,OAHH,EAIE,IAJF,CADF;AAOA,WAAKlL,2BAAL,CAAiCmB,qBAAjC,GACE,KAAKnB,2BAAL,CAAiCmB,qBAAjC,GACA1C,IAAI,CAACgN,UAFP;AAGA,WAAKlB,oBAAL;AACD,KA1pBM;AA2pBDsB,IAAAA,GA3pBC,iBA2pBK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,oBAEH,OAAI,CAAC7L,2BAAL,CAAiCI,QAAjC,CAA0C6G,UAFvC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAII,OAAI,CAACjH,2BAAL,CAAiCI,QAAjC,CAA0CC,QAJ9C;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAMI,OAAI,CAACL,2BAAL,CAAiCI,QAAjC,CAA0CE,SAN9C;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAQI,OAAI,CAACN,2BAAL,CAAiCI,QAAjC,CAA0CG,OAR9C;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAUI,OAAI,CAACP,2BAAL,CAAiCI,QAAjC,CAA0CgJ,UAV9C;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAaL,OAAI,CAACpJ,2BAAL,CAAiCQ,4BAb5B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,qBAgBG,OAAI,CAAC1B,cAhBR;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAmBL,OAAI,CAACkB,2BAAL,CAAiCa,8BAAjC,CACEoE,MApBG;AAAA;AAAA;AAAA;;AAsBN,gBAAA,OAAI,CAAC/F,OAAL,GAAe,4BAAf;AAtBM;;AAAA;AAyBN,gBAAA,OAAI,CAACc,2BAAL,CAAiCgM,0BAAjC,GAA8D9N,MAAM,CAClEuC,MAAM,CACJ,OAAI,CAACT,2BAAL,CAAiCQ,4BAD7B,CAD4D,CAAN,CAI5DG,MAJ4D,CAIrD,YAJqD,CAA9D;AAMIsL,gBAAAA,WA/BE,GA+BY,IAAIvL,IAAJ,EA/BZ;AAgCF2H,gBAAAA,GAhCE,GAgCI,IAAI3H,IAAJ,CAASuL,WAAW,CAACC,WAAZ,KAA4B,OAAI,CAAClM,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA/E,EAAyF4L,WAAW,CAACE,QAAZ,KAAyB,OAAI,CAACnM,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA5J,EAAuK2L,WAAW,CAACG,OAAZ,KAAwB,OAAI,CAACpM,2BAAL,CAAiCI,QAAjC,CAA0CG,OAAzO,CAhCJ;AAiCN,gBAAA,OAAI,CAACP,2BAAL,CAAiCI,QAAjC,CAA0CiI,GAA1C,GAAgDnK,MAAM,CACpDuC,MAAM,CAAC4H,GAAD,CAD8C,CAAN,CAE9C1H,MAF8C,CAEvC,YAFuC,CAAhD,CAjCM,CAoCN;;AACA,gBAAA,OAAI,CAACX,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA1C,GAAqD,OAAI,CAACL,2BAAL,CAAiCI,QAAjC,CAA0CC,QAA1C,CAAmDiI,QAAnD,EAArD;AACA,gBAAA,OAAI,CAACtI,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA1C,GAAsD,OAAI,CAACN,2BAAL,CAAiCI,QAAjC,CAA0CE,SAA1C,CAAoDgI,QAApD,EAAtD;AACA,gBAAA,OAAI,CAACtI,2BAAL,CAAiCI,QAAjC,CAA0CG,OAA1C,GAAoD,OAAI,CAACP,2BAAL,CAAiCI,QAAjC,CAA0CG,OAA1C,CAAkD+H,QAAlD,EAApD;AAvCM;AAAA,uBAyCa,OAAI,CAAC9F,kCAAL,CAAwCqJ,GAAxC,CACjB,OAAI,CAAC7L,2BADY,EACiB,OADjB,CAzCb;;AAAA;AAyCFqM,gBAAAA,MAzCE;;AA4CN,oBAAIA,MAAM,CAACC,MAAP,KAAkB,GAAtB,EAA2B;AACzB,kBAAA,OAAI,CAACC,MAAL,CAAYV,GAAZ,CAAgB;AACdW,oBAAAA,QAAQ,EAAE,SADI;AAEdC,oBAAAA,OAAO,EAAE,SAFK;AAGdC,oBAAAA,MAAM,EAAE,oBAHM;AAIdC,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;;AAOA,sBAAI,OAAI,CAACxK,aAAL,CAAmByK,aAAnB,IAAoC,KAAxC,EAA+C;AAC7C,oBAAA,OAAI,CAACC,UAAL,CAAgBR,MAAM,CAAC5N,IAAvB;AACD,mBAFD,MAEO;AACL,oBAAA,OAAI,CAACuG,KAAL;;AACA,oBAAA,OAAI,CAACiB,uBAAL,CAA6BoG,MAAM,CAAC5N,IAApC;AACD;AACF,iBAdD,MAcO,IAAI4N,MAAM,CAACC,MAAP,KAAkB,GAAtB,EAA2B;AAChC,kBAAA,OAAI,CAACC,MAAL,CAAYV,GAAZ,CAAgB;AACdW,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,OAFK;AAGdC,oBAAAA,MAAM,EAAEL,MAAM,CAAC5N,IAHD;AAIdkO,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD,iBAPM,MAOA;AACL,kBAAA,OAAI,CAACJ,MAAL,CAAYV,GAAZ,CAAgB;AACdW,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,QAFK;AAGdC,oBAAAA,MAAM,EAAEL,MAAM,CAACS,GAHD;AAIdH,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD;;AAxEK;AAAA;AAAA;;AAAA;AAAA;AAAA;;AA2ER,gBAAA,OAAI,CAACJ,MAAL,CAAYV,GAAZ,CAAgB;AACdW,kBAAAA,QAAQ,EAAE,OADI;AAEdC,kBAAAA,OAAO,EAAE,QAFK;AAGdC,kBAAAA,MAAM,aAHQ;AAIdC,kBAAAA,IAAI,EAAE;AAJQ,iBAAhB;;AA3EQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkFX,KA7uBM;AA8uBPE,IAAAA,UA9uBO,sBA8uBIpO,IA9uBJ,EA8uBU;AAAA;;AACf,WAAKsO,QAAL,CAAcC,OAAd,CAAsB;AACpBC,QAAAA,OAAO,EAAE,mCADW;AAEpBC,QAAAA,MAAM,EAAE,cAFY;AAGpBC,QAAAA,IAAI,EAAE,4BAHc;AAIpBC,QAAAA,MAAM,EAAE,kBAAM;AACZC,UAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuC7O,IAAvC;;AACA,UAAA,OAAI,CAAC8O,OAAL,CAAa7I,IAAb,CAAkB,mCAAlB;AACD,SAPmB;AAQpB8I,QAAAA,MAAM,EAAE,kBAAM;AACZ,UAAA,OAAI,CAACvH,uBAAL,CAA6BxH,IAA7B;;AACA,UAAA,OAAI,CAACuG,KAAL;AACD;AAXmB,OAAtB;AAcD,KA7vBM;AA8vBPyI,IAAAA,aA9vBO,yBA8vBOC,KA9vBP,EA8vBc;AAAA;;AACnBC,MAAAA,UAAU,CAAC,YAAM;AACf,YAAI,CAACD,KAAK,CAACE,KAAN,CAAYC,IAAZ,GAAmB5I,MAAxB,EAAgC;AAC9B,UAAA,OAAI,CAACvG,aAAL,sBAAyB,OAAI,CAACC,mBAA9B;AACD,SAFD,MAGK;AACH;AACA;AACA;AACA;AAEA;AACA,UAAA,OAAI,CAACD,aAAL,GAAqBP,aAAa,CAACgH,MAAd,CAAqB,OAAI,CAACxG,mBAA1B,EAA+C,CAAC,SAAD,CAA/C,EAA4D+O,KAAK,CAACE,KAAN,CAAYE,WAAZ,EAA5D,EAAuF1P,eAAe,CAACqD,QAAvG,EAAiHsM,KAAjH,CAAuH,CAAvH,EAA0H,GAA1H,CAArB;AACD;AACF,OAbS,EAaP,GAbO,CAAV;AAcD;AA7wBM;AA5KI,CAAf","sourcesContent":["import PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport DesignationSetupService from \"../../service/setup/DesignationSetupService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\nimport EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\n//import CollectionCenterSetupService from \"../../service/setup/CollectionCenterSetupService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport moment from \"moment\";\r\nimport { FilterService, FilterMatchMode, FilterOperator } from \"primevue/api\";\r\nimport GlobalSettingsService from \"../../service/security/GlobalSettingsService\";\r\n// Health Package\r\nimport HealthPackageSetupService from \"../../service/setup/HealthPackageSetupService\";\r\nimport HealthPackageDetailsSetupService from \"../../service/setup/HealthPackageDetailsSetupService\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      filteredItems: null,\r\n      patientsSuggestions: [],\r\n      isInvestigation: true,\r\n      isPrescription: false,\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      isPatientExist: \"\",\r\n      isExist: \"\",\r\n      collectionList: [],\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      designationtList: [],\r\n      departmentList: [],\r\n      doctorList: [],\r\n      buildingList: [],\r\n      roomList: [],\r\n      referredByList: [],\r\n      employeeList: [],\r\n      //discountByList: [],\r\n      investigationList: [],\r\n      reportDeliveryTypeList: [],\r\n      productList: [],\r\n      patientInvestigationRequest: {\r\n        appoinment_id: null,\r\n        admission_id: null,\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_by_id: \"Company\",\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      discountByList: [\r\n        { text: \"Both\", value: \"Both\" },\r\n        { text: \"Hospital\", value: \"Company\" },\r\n        { text: \"Reference\", value: \"Reference\" },\r\n      ],\r\n      globalSetting: {},\r\n      // Health Package\r\n      packageList: [],\r\n      healthPackageDetailsSetup: {\r\n        lstHealthPackageDetails: []\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.patientInvestigationRequestService =\r\n      new PatientInvestigationRequestService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.commonService = new CommonService();\r\n    this.employeeSetupService = new EmployeeSetupService();\r\n    this.doctorSetupService = new DoctorSetupService();\r\n    this.consultancyDepartmentSetupService =\r\n      new ConsultancyDepartmentSetupService();\r\n    this.designationSetupService = new DesignationSetupService();\r\n    this.buildingSetupService = new BuildingSetupService();\r\n    this.roomSetupService = new RoomSetupService();\r\n    this.referredBySetupService = new ReferredBySetupService();\r\n    this.investigationSetupService = new InvestigationSetupService();\r\n    this.productSetupService = new ProductSetupService();\r\n    //this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.validation = new Validation();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    this.globalSettingsService = new GlobalSettingsService();\r\n    // Health Package\r\n    this.healthPackageSetupService = new HealthPackageSetupService();\r\n    this.healthPackageDetailsSetupService = new HealthPackageDetailsSetupService();\r\n\r\n    this.commonService\r\n      .GetAllGender()\r\n      .then((data) => (this.genderList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.designationSetupService\r\n      .getAll()\r\n      .then((data) => (this.designationtList = data.data));\r\n\r\n    this.consultancyDepartmentSetupService\r\n      .getActiveCombo()\r\n      .then((data) => (this.departmentList = data.data));\r\n\r\n    this.buildingSetupService\r\n      .getAll()\r\n      .then((data) => (this.buildingList = data.data));\r\n\r\n    this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n    // this.referredBySetupService\r\n    //   .getActiveCombo()\r\n    //   .then((data) => (this.referredByList = data.data));\r\n\r\n    // this.referredBySetupService\r\n    //   .getActiveCombo()\r\n    //   .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.referredBySetupService\r\n      .getAll()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.doctorSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n    this.employeeSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeEmployeeInfo(data.data));\r\n\r\n    // this.investigationSetupService\r\n    //   .getAll()\r\n    //   .then((data) => (this.investigationList = data.data));\r\n\r\n    this.investigationSetupService\r\n      .getAll()\r\n      .then((data) => this.formatInvestigationList(data.data));\r\n\r\n    this.commonService\r\n      .GetAllReportDeliveryType()\r\n      .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n    this.productSetupService\r\n      .getAll()\r\n      .then((data) => (this.productList = data.data));\r\n\r\n    this.globalSettingsService\r\n      .getBySettingName(\"Investigation Payment Express\")\r\n      .then((data) => (this.globalSetting = data.data));\r\n\r\n    // Health Package\r\n    this.healthPackageSetupService\r\n      .getActiveCombo()\r\n      .then((data) => this.getPackageFormatted(data.data));\r\n\r\n    this.patientRegistrationService\r\n      .getPatientListForSuggestions()\r\n      .then((data) => (this.patientsSuggestions = data.data));\r\n  },\r\n  methods: {\r\n    // Health Package Start\r\n    getPackageFormatted(data) {\r\n      data.forEach((element) => {\r\n        this.packageList.push({\r\n          value: element.value,\r\n          text: element.refid + \"-\" + element.text,\r\n        });\r\n      });\r\n    },\r\n    packageWiseInvestigationList() {\r\n      if (this.patientInvestigationRequest.health_package_id) {\r\n        this.healthPackageDetailsSetupService\r\n          .getHealthPackageByPackageId(this.patientInvestigationRequest.health_package_id)\r\n          .then((data) => this.formatPackageDetailsList(data.data));\r\n      } else {\r\n        this.reset();\r\n      }\r\n    },\r\n    formatPackageDetailsList(data) {\r\n      this.healthPackageDetailsSetup = data;\r\n\r\n      if (this.healthPackageDetailsSetup.lstHealthPackageDetails.length > 0) {\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails = [];\r\n        this.healthPackageDetailsSetup.lstHealthPackageDetails.forEach((element) => {\r\n          var aInvestigation =\r\n            this.investigationList.filter(\r\n              function (el) {\r\n                return (\r\n                  el.investigation_id ===\r\n                  element.investigation_id\r\n                );\r\n              },\r\n              this\r\n            )[0];\r\n\r\n          this.patientInvestigationRequest.ddlinvestigation = aInvestigation;\r\n          this.addInvestigation();\r\n        });\r\n        this.patientInvestigationRequest.report_delivery_type = \"Regular\";\r\n        this.patientInvestigationRequest.discount_percent = 0;\r\n        this.patientInvestigationRequest.cost_price = this.healthPackageDetailsSetup.package_charge;\r\n        this.patientInvestigationRequest.total_amount = this.healthPackageDetailsSetup.package_charge;\r\n        this.patientInvestigationRequest.health_package_charge = this.healthPackageDetailsSetup.package_charge;\r\n\r\n        if (this.patientInvestigationRequest.reffered_doctor_id) {\r\n          this.patientInvestigationRequest.health_package_consultant_id = this.patientInvestigationRequest.reffered_doctor_id;\r\n          this.patientInvestigationRequest.health_package_consultant_charge = this.healthPackageDetailsSetup.doctor_charge;\r\n          this.patientInvestigationRequest.total_amount += this.patientInvestigationRequest.health_package_consultant_charge;\r\n        } else {\r\n          this.patientInvestigationRequest.health_package_consultant_id = \"\";\r\n          this.patientInvestigationRequest.health_package_consultant_charge = 0;\r\n          this.patientInvestigationRequest.total_amount = this.patientInvestigationRequest.cost_price;\r\n        }\r\n\r\n        this.patientInvestigationRequest.particular_cost_price = 0;\r\n\r\n        this.patientInvestigationRequest.discount_amount = 0;\r\n        this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n      } else {\r\n        this.reset();\r\n      }\r\n    },\r\n    packageConsultantCharge() {\r\n      if (this.healthPackageDetailsSetup.doctor_charge && this.patientInvestigationRequest.reffered_doctor_id) {\r\n        this.patientInvestigationRequest.health_package_consultant_id = this.patientInvestigationRequest.reffered_doctor_id;\r\n        this.patientInvestigationRequest.health_package_consultant_charge = this.healthPackageDetailsSetup.doctor_charge;\r\n        this.patientInvestigationRequest.total_amount += this.patientInvestigationRequest.health_package_consultant_charge;\r\n      } else {\r\n        this.patientInvestigationRequest.health_package_consultant_id = \"\";\r\n        this.patientInvestigationRequest.health_package_consultant_charge = 0;\r\n        this.patientInvestigationRequest.total_amount = Math.ceil(\r\n          this.patientInvestigationRequest.cost_price - this.patientInvestigationRequest.discount_amount +\r\n          this.patientInvestigationRequest.particular_cost_price);\r\n        //this.patientInvestigationRequest.total_amount = this.patientInvestigationRequest.particular_cost_price + this.patientInvestigationRequest.cost_price;\r\n      }\r\n    },\r\n    // Health Package End\r\n    printInvestigationToken(id) {\r\n      this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    formatInvestigationList(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        var obj = element;\r\n        obj.investingation_name = element.manual_code + \"-\" + element.investingation_name;\r\n        this.investigationList.push(obj);\r\n      });\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.registration_no,\r\n          text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n        });\r\n      });\r\n    },\r\n    mergeDoctorInfo(data) {\r\n      //this.doctorList = data;\r\n      data.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.doc_no,\r\n          text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        });\r\n      });\r\n\r\n      data.forEach((element) => {\r\n        this.doctorList.push({\r\n          department_id: element.department_id,\r\n          doctor_id: element.doctor_id,\r\n          doctor_name: element.doc_no + \"-\" + element.doctor_name,\r\n        });\r\n      });\r\n    },\r\n    mergeEmployeeInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.emp_no,\r\n          text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        });\r\n      });\r\n    },\r\n    // mergeDoctorInfo(data) {\r\n    //   this.doctorList = data;\r\n    //   data.forEach((element) => {\r\n    //     this.discountByList.push({\r\n    //       value: element.doc_no,\r\n    //       text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n    //     });\r\n    //   });\r\n    // },\r\n    // mergeEmployeeInfo(data) {\r\n    //   data.forEach((element) => {\r\n    //     this.discountByList.push({\r\n    //       value: element.emp_no,\r\n    //       text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n    //     });\r\n    //   });\r\n    // },\r\n    invReset() {\r\n      this.isInvestigation = true;\r\n      this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n      this.isExist = \"\";\r\n      this.healthPackageDetailsSetup = {\r\n        lstHealthPackageDetails: []\r\n      };\r\n    },\r\n    reset() {\r\n      this.isInvestigation = true;\r\n      this.isPrescription = false;\r\n      this.button = false;\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.isExist = \"\";\r\n      this.isContactExist = \"\";\r\n      this.patientInvestigationRequest = {\r\n        patient_id: \"\",\r\n        appoinment_id: null,\r\n        admission_id: null,\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      };\r\n      this.submitted = false;\r\n      this.healthPackageDetailsSetup = {\r\n        lstHealthPackageDetails: []\r\n      };\r\n    },\r\n    doctorReset() {\r\n      this.patientInvestigationRequest.department_id = \"\";\r\n      this.patientInvestigationRequest.reffered_doctor_id = \"\";\r\n      this.patientInvestigationRequest.designation_id = \"\";\r\n      this.patientInvestigationRequest.outside_doctor_name = \"\";\r\n      this.patientInvestigationRequest.outside_doctor_hospital_name = \"\";\r\n    },\r\n    filterDoctorsDepartmentWise() {\r\n      return this.doctorList.filter(function (el) {\r\n        return (\r\n          el.department_id === this.patientInvestigationRequest.department_id\r\n        );\r\n      }, this);\r\n\r\n\r\n    },\r\n    getConsultancyFeeByDoctorId() {\r\n      var aDoctor = this.doctorList.filter(function (el) {\r\n        return el.doctor_id === this.patientInvestigationRequest.doctor_id;\r\n      }, this);\r\n\r\n      this.patientInvestigationRequest.consultancy_fee =\r\n        aDoctor[0].consultancy_fee;\r\n      this.patientInvestigationRequest.building_id = aDoctor[0]._building_id;\r\n      this.patientInvestigationRequest.room_id = aDoctor[0].room_id;\r\n    },\r\n    filterRoomsBuildingWise() {\r\n      return this.roomList.filter(function (el) {\r\n        return el.building_id === this.patientInvestigationRequest.building_id;\r\n      }, this);\r\n    },\r\n    filterInvestigation() {\r\n      return this.investigationList.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n    },\r\n    filterProduct() {\r\n      return this.productList.filter(function (el) {\r\n        return el.product_category_id == 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      this.patientInvestigationRequest.aPatient = data;\r\n      if (!this.patientInvestigationRequest.aPatient.patient_id) {\r\n        this.isPatientExist = \"Select Patient\";\r\n        // this.patientInvestigationRequest = {\r\n        //   patient_id: \"\",\r\n        //   aPatient: {},\r\n        // };\r\n        this.reset();\r\n      } else {\r\n        this.isPatientExist = \"\";\r\n\r\n        this.patientInvestigationRequest.patient_id =\r\n          this.patientInvestigationRequest.aPatient.patient_id;\r\n        this.patientInvestigationRequest.aPatient.cddob = moment(\r\n          String(this.patientInvestigationRequest.aPatient.dob)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n        this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n        this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n      }\r\n    },\r\n    getFormattedPrescriptionWiseInvestigations(data) {\r\n      if (data.length > 0) {\r\n        this.isPatientExist = \"\";\r\n\r\n        this.patientInvestigationRequest.aPatient = data[0];\r\n        this.patientInvestigationRequest.appoinment_id = data[0].appoinment_id;\r\n        this.patientInvestigationRequest.admission_id = data[0].admission_id;\r\n        this.patientInvestigationRequest.patient_id = this.patientInvestigationRequest.aPatient.patient_id;\r\n        this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n        this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n        this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n        this.patientInvestigationRequest.department_id = data[0].department_id;\r\n        this.patientInvestigationRequest.reffered_doctor_id = data[0].doctor_id;\r\n        this.patientInvestigationRequest.reffered_by_id = data[0].doc_no;\r\n        this.patientInvestigationRequest.discount_percent = data[0].discount_percent_for_investigation;\r\n\r\n        this.isPrescription = true;\r\n\r\n        data.forEach((element) => {\r\n          var aInvestigation =\r\n            this.investigationList.filter(\r\n              function (el) {\r\n                return (\r\n                  el.investigation_id ===\r\n                  element.investigation_id\r\n                );\r\n              },\r\n              this\r\n            )[0];\r\n\r\n          this.patientInvestigationRequest.ddlinvestigation = aInvestigation;\r\n          this.addInvestigation();\r\n        });\r\n\r\n        this.getDiscountAmount();\r\n      } else {\r\n        this.isPatientExist = \"Data not Exist!\";\r\n        // this.patientInvestigationRequest = {\r\n        //   patient_id: \"\",\r\n        //   aPatient: {},\r\n        // };\r\n        this.reset();\r\n      }\r\n    },\r\n    findPatient() {\r\n      let str = this.patientInvestigationRequest.searchData;\r\n      if (typeof str === \"string\") {\r\n        if (str.startsWith(\"APT\") || str.startsWith(\"ADM\")) {\r\n          this.appointmentPrescriptionService\r\n            .prescriptionWiseInvestigations(this.patientInvestigationRequest.searchData, this)\r\n            .then((data) => this.getFormattedPrescriptionWiseInvestigations(data.data));\r\n        } else{\r\n          this.isExist = \"Patient not Exist!\";\r\n          this.reset();\r\n        }\r\n      }\r\n      else {\r\n        var searchData = this.patientInvestigationRequest.searchData;\r\n        try {\r\n          this.patientInvestigationRequest.contactOrRegNo = searchData.registration_no;\r\n          this.isPrescription = false;\r\n          this.patientRegistrationService\r\n            .getByContactOrRegNo(this.patientInvestigationRequest.contactOrRegNo, this)\r\n            .then((data) => this.getFormatted(data.data));\r\n        } catch (err) {\r\n          this.isExist = \"Patient not Exist!\";\r\n          this.reset();\r\n        }\r\n\r\n      }\r\n    },\r\n    isExistContact() {\r\n      if (\r\n        this.patientInvestigationRequest.aPatient.contact_no.match(\r\n          /^(01)([0-9]{9})$/\r\n        )\r\n      ) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(\r\n            this.patientInvestigationRequest.aPatient.contact_no, this\r\n          )\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    investigationIsExist() {\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        // var aInv = this.investigationList.filter(function (el) {\r\n        //   return (\r\n        //     el.investigation_id ===\r\n        //     this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n        //   );\r\n        // }, this);\r\n        // this.collectionCenterSetupService\r\n        //   .getById(aInv[0].collection_center_id)\r\n        //   .then((data) => (this.collectionList = data.data));\r\n\r\n        this.isExist = \"\";\r\n        this.isInvestigation = false;\r\n      }\r\n    },\r\n    addInvestigation() {\r\n      this.submitted = true;\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        //this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          var cost =\r\n            this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n              ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n              : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n          var deliveryTime = this.patientInvestigationRequest.report_delivery_type == \"Regular\" ? this.expectedHour(this.patientInvestigationRequest.ddlinvestigation.report_delivery_duration) : this.expectedHour(this.patientInvestigationRequest.ddlinvestigation.emmergency_report_delivery_duration);\r\n          if (this.patientInvestigationRequest.health_package_id) {\r\n            var discountAmount = 0;\r\n            var totalAmount = cost;\r\n            var discount_percent = 0;\r\n          }\r\n          else {\r\n            discountAmount =\r\n              (1 *\r\n                cost *\r\n                this.patientInvestigationRequest.ddlinvestigation\r\n                  .discount_percent) /\r\n              100;\r\n\r\n            totalAmount = 1 * cost - discountAmount;\r\n            discount_percent = this.patientInvestigationRequest.ddlinvestigation\r\n              .discount_percent;\r\n          }\r\n\r\n          var obj = {\r\n            investigation_id:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investigation_id,\r\n            _investingation_name:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investingation_name,\r\n            _investigation_category_head_name:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                ._investigation_category_head_name,\r\n\r\n            // building_id: this.collectionList._building_id,\r\n            // _building_name: this.collectionList._building_name,\r\n            // room_id: this.collectionList.room_id,\r\n            // _room_name: this.collectionList._room_name,\r\n            building_id: this.patientInvestigationRequest.ddlinvestigation._building_id,\r\n            room_id: this.patientInvestigationRequest.ddlinvestigation._room_id,\r\n            expected_delivery: deliveryTime,\r\n\r\n            report_delivery_type:\r\n              this.patientInvestigationRequest.report_delivery_type,\r\n\r\n            quantity: 1,\r\n            cost_price: cost,\r\n\r\n            discount_percent:\r\n              discount_percent,\r\n\r\n            discount_amount: discountAmount,\r\n\r\n            total_amount: totalAmount,\r\n          };\r\n\r\n          this.patientInvestigationRequest.lstInvestigationRequestDetails.unshift(\r\n            obj\r\n          );\r\n\r\n          this.patientInvestigationRequest.cost_price =\r\n            this.patientInvestigationRequest.cost_price + totalAmount;\r\n          //\r\n          this.calculateTotalAmount();\r\n          // this.patientInvestigationRequest.total_amount =\r\n          //   this.patientInvestigationRequest.cost_price -\r\n          //   this.patientInvestigationRequest.discount_amount;\r\n        }\r\n      }\r\n\r\n      if (!this.patientInvestigationRequest.health_package_id) {\r\n        this.addParticular(\r\n          this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n        );\r\n      }\r\n    },\r\n    calculatePerInvestigationDiscountPercent(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n        (element) => {\r\n          if (element.investigation_id == data.investigation_id) {\r\n            element.discount_percent = (element.discount_amount / element.cost_price) * 100;\r\n            //var discount_amount = (element.cost_price * element.discount_percent) / 100;\r\n            element.total_amount = element.cost_price - element.discount_amount;\r\n          }\r\n        }\r\n      );\r\n      this.calculateCostPrice();\r\n    },\r\n    calculatePerInvestigationDiscountAmount(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n        (element) => {\r\n          if (element.investigation_id == data.investigation_id) {\r\n            element.discount_amount = (element.cost_price * element.discount_percent) / 100;\r\n            element.total_amount = element.cost_price - element.discount_amount;\r\n          }\r\n        }\r\n      );\r\n      this.calculateCostPrice();\r\n    },\r\n    calculateCostPrice() {\r\n      var costPrice = 0;\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n        (element) => {\r\n          costPrice = costPrice + element.total_amount;\r\n        }\r\n      );\r\n      this.patientInvestigationRequest.cost_price = costPrice;\r\n\r\n      this.calculateTotalAmount();\r\n    },\r\n    calculateTotalAmount() {\r\n      this.patientInvestigationRequest.total_amount = Math.ceil(\r\n        this.patientInvestigationRequest.cost_price - this.patientInvestigationRequest.discount_amount +\r\n        this.patientInvestigationRequest.particular_cost_price);\r\n\r\n      this.packageConsultantCharge();\r\n    },\r\n    addParticular(id) {\r\n      this.investigationSetupService\r\n        .getById(id)\r\n        .then((data) => this.getParticularFormatted(data));\r\n    },\r\n    addAParticular(data, qty, pname) {\r\n      if (\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n          .length <= 0\r\n      ) {\r\n        this.isExist = \"Add Investigation\";\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        var obj =\r\n          this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n            function (el) {\r\n              return el.product_id === data.product_id;\r\n            },\r\n            this\r\n          )[0];\r\n        if (obj) {\r\n          qty = parseInt(obj.qty) + qty;\r\n\r\n          this.patientInvestigationRequest.lstInvestigationParticular =\r\n            this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n              function (el) {\r\n                return el.product_id != data.product_id;\r\n              },\r\n              this\r\n            );\r\n        }\r\n\r\n        this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n          product_id: data.product_id,\r\n          _product_name: pname,\r\n          uom_id: data.uom_id,\r\n          _uom_name: data._uom_name,\r\n          cost_price: data.cost_price,\r\n          qty: qty,\r\n        });\r\n\r\n        this.checkQty();\r\n      }\r\n    },\r\n    getParticularFormatted(data) {\r\n      data.data._lstInvestigationParticular.forEach((element) => {\r\n        // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n        //   investigation_id: element.investigation_id,\r\n        //   product_id: element.product_id,\r\n        //   _product_name: element._product_name,\r\n        //   uom_id: element.uom_id,\r\n        //   _uom_name: element._uom_name,\r\n        //   cost_price: element.cost_price,\r\n        //   qty: element.qty,\r\n        // });\r\n\r\n        this.addAParticular(element, 1, element._product_name);\r\n      });\r\n    },\r\n    checkQty() {\r\n      var totalPrice = 0;\r\n      this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n        (element) => {\r\n          if (\r\n            element.qty >\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n              .length\r\n          ) {\r\n            element.qty =\r\n              this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n          } else if (element.qty <= 0) {\r\n            element.qty = 1;\r\n          }\r\n\r\n          element.totalPrice = element.qty * element.cost_price;\r\n          totalPrice += element.totalPrice;\r\n        }\r\n      );\r\n      this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    getDiscountPercent() {\r\n      this.patientInvestigationRequest.discount_percent = Math.ceil(\r\n        (this.patientInvestigationRequest.discount_amount /\r\n          this.patientInvestigationRequest.cost_price) *\r\n        100);\r\n\r\n      // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n      //   this.patientInvestigationRequest.cost_price -\r\n      //   this.patientInvestigationRequest.discount_amount);\r\n      this.calculateTotalAmount();\r\n    },\r\n    getDiscountAmount() {\r\n      this.patientInvestigationRequest.discount_amount =\r\n        (this.patientInvestigationRequest.cost_price *\r\n          this.patientInvestigationRequest.discount_percent) /\r\n        100;\r\n\r\n      // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n      //   this.patientInvestigationRequest.cost_price -\r\n      //   this.patientInvestigationRequest.discount_amount);\r\n      this.calculateTotalAmount();\r\n    },\r\n    expectedHour(h) {\r\n      // var today = new Date();\r\n      // today.setHours(today.getHours() + h);\r\n      var travelTime = moment().add(h, 'hours').format('YYYY-MM-DD hh:mm A');\r\n      return travelTime;\r\n    },\r\n    deleteFromList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return el.investigation_id != data.investigation_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.cost_price =\r\n        this.patientInvestigationRequest.cost_price - data.total_amount;\r\n      this.calculateTotalAmount();\r\n      this.checkQty();\r\n\r\n      if (\r\n        !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n      ) {\r\n        this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n        this.patientInvestigationRequest.particular_cost_price = 0;\r\n        this.calculateTotalAmount();\r\n      }\r\n    },\r\n    deleteFromParticularList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationParticular =\r\n        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n          function (el) {\r\n            return el.product_id != data.product_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.particular_cost_price =\r\n        this.patientInvestigationRequest.particular_cost_price -\r\n        data.totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    async add() {\r\n      try {\r\n        if (!this.patientInvestigationRequest.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.aPatient.age_year) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.aPatient.age_month) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.aPatient.age_day) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.aPatient.contact_no) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n            .length\r\n        ) {\r\n          this.isExist = \"Please add a Investigation\";\r\n          return;\r\n        } else {\r\n          this.patientInvestigationRequest.investigation_request_date = moment(\r\n            String(\r\n              this.patientInvestigationRequest.cdinvestigation_request_date\r\n            )\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.patientInvestigationRequest.aPatient.age_year, currentDate.getMonth() - this.patientInvestigationRequest.aPatient.age_month, currentDate.getDate() - this.patientInvestigationRequest.aPatient.age_day);\r\n          this.patientInvestigationRequest.aPatient.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n          //\r\n          this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n          this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n          this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n\r\n          let result = await this.patientInvestigationRequestService.add(\r\n            this.patientInvestigationRequest, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Saved Successfully\",\r\n              life: 10000,\r\n            });\r\n\r\n            if (this.globalSetting.setting_value == \"Yes\") {\r\n              this.confirmPay(result.data);\r\n            } else {\r\n              this.reset();\r\n              this.printInvestigationToken(result.data);\r\n            }\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    confirmPay(data) {\r\n      this.$confirm.require({\r\n        message: 'Are you sure you want to pay now?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n          localStorage.setItem('inv_request_id', data);\r\n          this.$router.push(\"/investigation-payment-collection\");\r\n        },\r\n        reject: () => {\r\n          this.printInvestigationToken(data);\r\n          this.reset();\r\n        },\r\n\r\n      });\r\n    },\r\n    searchPatient(event) {\r\n      setTimeout(() => {\r\n        if (!event.query.trim().length) {\r\n          this.filteredItems = [...this.patientsSuggestions];\r\n        }\r\n        else {\r\n          // start with\r\n          // this.filteredItems = this.medicineList.filter((item) => {\r\n          //     return item.text.toLowerCase().startsWith(event.query.toLowerCase());\r\n          // });\r\n\r\n          // contains\r\n          this.filteredItems = FilterService.filter(this.patientsSuggestions, ['patient'], event.query.toLowerCase(), FilterMatchMode.CONTAINS).slice(0, 500);\r\n        }\r\n      }, 250);\r\n    },\r\n  },\r\n};"]}]}