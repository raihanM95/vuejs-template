{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\blood-bank\\BloodIssue.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\blood-bank\\BloodIssue.js","mtime":1676450932429},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgT1RTY2hlZHVsZVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9vdC9PVFNjaGVkdWxlU2VydmljZSI7CmltcG9ydCBCbG9vZERvbm9yU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Jsb29kLWJhbmsvQmxvb2REb25vclNlcnZpY2UiOwppbXBvcnQgQmxvb2RJc3N1ZVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9ibG9vZC1iYW5rL0Jsb29kSXNzdWVTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yIH0gZnJvbSAicHJpbWV2dWUvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1ZhbGlkOiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGJsb29kR3JvdXBMaXN0OiBbXSwKICAgICAgZ2VuZGVyTGlzdDogW10sCiAgICAgIGJsb29kSXNzdWU6IHsKICAgICAgICBpc3N1ZV9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBhZG1pc3Npb25fZW1lcmdlbmN5X2lkOiAiIgogICAgICB9LAogICAgICBibG9vZFJlY2VpdmVkTGlzdEZvckRvbmF0aW9uOiBbXSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgc3VibWl0dGVkOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMub3RTY2hlZHVsZVNlcnZpY2UgPSBuZXcgT1RTY2hlZHVsZVNlcnZpY2UoKTsKICAgIHRoaXMuYmxvb2REb25vclNlcnZpY2UgPSBuZXcgQmxvb2REb25vclNlcnZpY2UoKTsKICAgIHRoaXMuYmxvb2RJc3N1ZVNlcnZpY2UgPSBuZXcgQmxvb2RJc3N1ZVNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsR2VuZGVyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2VuZGVyTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEJsb29kR3JvdXAoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ibG9vZEdyb3VwTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5ibG9vZERvbm9yU2VydmljZS5nZXREb25vckZvckRvbmF0aW9uSXNzdWUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kb25hdGlvbkluZm9Gb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgIH0pOwogICAgdmFyIGFkbWlzc2lvbl9ub19mb3JfYmxvb2RfaXNzdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWRtaXNzaW9uX25vX2Zvcl9ibG9vZF9pc3N1ZScpOwoKICAgIGlmIChhZG1pc3Npb25fbm9fZm9yX2Jsb29kX2lzc3VlKSB7CiAgICAgIHRoaXMuYmxvb2RJc3N1ZS5hZG1pc3Npb25fZW1lcmdlbmN5X25vID0gYWRtaXNzaW9uX25vX2Zvcl9ibG9vZF9pc3N1ZTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FkbWlzc2lvbl9ub19mb3JfYmxvb2RfaXNzdWUnKTsKICAgICAgdGhpcy5nZXRBZG1pdHRlZE9yRW1lcmdlbmN5UGF0aWVudEluZm9Gb3JPVCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5ibG9vZElzc3VlID0gewogICAgICAgIGNkaXNzdWVfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgYWRtaXNzaW9uX2VtZXJnZW5jeV9pZDogIiIKICAgICAgfTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICBkb25hdGlvbkluZm9Gb3JtYXR0ZWQ6IGZ1bmN0aW9uIGRvbmF0aW9uSW5mb0Zvcm1hdHRlZChkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMyLmJsb29kUmVjZWl2ZWRMaXN0Rm9yRG9uYXRpb24ucHVzaCh7CiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5ibG9vZF9yZWNlaXZlX2lkLAogICAgICAgICAgdGV4dDogIkdyb3VwOiAiICsgZWxlbWVudC5ibG9vZF9ncm91cCArICI7IEJhZzogIiArIGVsZW1lbnQuYmFnX251bWJlciArICI7IENvbXBvbmVudDogIiArIGVsZW1lbnQuY29tcG9uZW50ICsgIjsgRG9ub3I6ICIgKyBlbGVtZW50LmRvbm9yX25vICsgIi0iICsgZWxlbWVudC5maXJzdF9uYW1lICsgIiAiICsgZWxlbWVudC5sYXN0X25hbWUgKyAiLSIgKyBlbGVtZW50LmdlbmRlciArICItIiArIGVsZW1lbnQuY29udGFjdF9ubywKICAgICAgICAgIG1ycDogZWxlbWVudC5tcnAKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0QWRtaXR0ZWRPckVtZXJnZW5jeVBhdGllbnRJbmZvRm9yT1Q6IGZ1bmN0aW9uIGdldEFkbWl0dGVkT3JFbWVyZ2VuY3lQYXRpZW50SW5mb0Zvck9UKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmJsb29kSXNzdWUuYWRtaXNzaW9uX2VtZXJnZW5jeV9ubykgewogICAgICAgIHRoaXMub3RTY2hlZHVsZVNlcnZpY2UuZ2V0QWRtaXR0ZWRPckVtZXJnZW5jeVBhdGllbnRJbmZvRm9yT1QodGhpcy5ibG9vZElzc3VlLmFkbWlzc2lvbl9lbWVyZ2VuY3lfbm8udHJpbSgpLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLmdldEZvcm1hdHRlZChkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZ2V0Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWQoZGF0YSkgewogICAgICBpZiAoZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJQYXRpZW50IG5vdCBFeGlzdCEiOwogICAgICAgIHRoaXMuYmxvb2RJc3N1ZSA9IHsKICAgICAgICAgIGFkbWlzc2lvbl9lbWVyZ2VuY3lfaWQ6ICIiCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbm8gPSB0aGlzLmJsb29kSXNzdWUuYWRtaXNzaW9uX2VtZXJnZW5jeV9ubzsKICAgICAgICB0aGlzLmJsb29kSXNzdWUgPSBkYXRhWzBdOwogICAgICAgIHRoaXMuYmxvb2RJc3N1ZS5hZG1pc3Npb25fZW1lcmdlbmN5X25vID0gbm87CiAgICAgICAgdGhpcy5ibG9vZElzc3VlLmNkaXNzdWVfZGF0ZSA9IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwoKICAgICAgICBpZiAodGhpcy5ibG9vZElzc3VlLnR5cGUgPT0gJ0lQRCcpIHsKICAgICAgICAgIHRoaXMuYmxvb2RJc3N1ZS5hZG1pc3Npb25faWQgPSB0aGlzLmJsb29kSXNzdWUuYWRtaXNzaW9uX2VtZXJnZW5jeV9pZDsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYmxvb2RJc3N1ZS50eXBlID09ICdFbWVyZ2VuY3knKSB7CiAgICAgICAgICB0aGlzLmJsb29kSXNzdWUuZW1lcmdlbmN5X2lkID0gdGhpcy5ibG9vZElzc3VlLmFkbWlzc2lvbl9lbWVyZ2VuY3lfaWQ7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh2YWx1ZSkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgiaGg6bW0gQSIpOwogICAgfSwKICAgIGFzc2lnblJlY2VpdmVSZW1vdmU6IGZ1bmN0aW9uIGFzc2lnblJlY2VpdmVSZW1vdmUoYmxvb2RfcmVjZWl2ZV9pZCkgewogICAgICB0aGlzLmJsb29kUmVjZWl2ZWRMaXN0Rm9yRG9uYXRpb24gPSB0aGlzLmJsb29kUmVjZWl2ZWRMaXN0Rm9yRG9uYXRpb24uZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC52YWx1ZSAhPSBibG9vZF9yZWNlaXZlX2lkOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM0LnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LmJsb29kSXNzdWUuYWRtaXNzaW9uX2VtZXJnZW5jeV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM0LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogIlBsZWFzZSBlbnRlciBBZG1pc3Npb24vRW1lcmdlbmN5IGluZm8iLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQuYmxvb2RJc3N1ZS5ibG9vZF9yZWNlaXZlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfdGhpczQuYmxvb2RJc3N1ZS5pc3N1ZV9kYXRlID0gbW9tZW50KFN0cmluZyhfdGhpczQuYmxvb2RJc3N1ZS5jZGlzc3VlX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICAgICAgICAgIF90aGlzNC5ibG9vZElzc3VlLmJsb29kX3JlY2VpdmVfaWQgPSBfdGhpczQuYmxvb2RJc3N1ZS5ibG9vZF9yZWNlaXZlLnZhbHVlOwogICAgICAgICAgICAgICAgX3RoaXM0LmJsb29kSXNzdWUubXJwID0gX3RoaXM0LmJsb29kSXNzdWUuYmxvb2RfcmVjZWl2ZS5tcnA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmJsb29kSXNzdWVTZXJ2aWNlLmFkZChfdGhpczQuYmxvb2RJc3N1ZSwgX3RoaXM0KTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczQuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNC5hc3NpZ25SZWNlaXZlUmVtb3ZlKF90aGlzNC5ibG9vZElzc3VlLmJsb29kX3JlY2VpdmVfaWQpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM0LnJlc2V0KCk7IC8vdGhpcy5kZXRhaWxzUHJpbnQocmVzdWx0LmRhdGEpOwoKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczQuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwoKICAgICAgICAgICAgICAgIF90aGlzNC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDIwXV0pOwogICAgICB9KSkoKTsKICAgIH0gLy8gZGV0YWlsc1ByaW50KG90X3NjaGVkdWxlX2lkKSB7CiAgICAvLyAgIHRoaXMub3RSZXBvcnRTZXJ2aWNlLkdldE9UU2NoZWR1bGVEZXRhaWxzKG90X3NjaGVkdWxlX2lkLCB0aGlzKS50aGVuKChkYXRhKSA9PiAodGhpcy5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpKSk7CiAgICAvLyB9CgogIH0KfTs="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/blood-bank/BloodIssue.js"],"names":["OTScheduleService","BloodDonorService","BloodIssueService","CommonService","moment","FilterMatchMode","FilterOperator","data","isValid","isExist","bloodGroupList","genderList","bloodIssue","issue_date","String","Date","format","admission_emergency_id","bloodReceivedListForDonation","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","created","otScheduleService","bloodDonorService","bloodIssueService","commonService","GetAllGender","then","GetAllBloodGroup","getDonorForDonationIssue","donationInfoFormatted","admission_no_for_blood_issue","localStorage","getItem","admission_emergency_no","removeItem","getAdmittedOrEmergencyPatientInfoForOT","methods","reset","cdissue_date","forEach","element","push","blood_receive_id","text","blood_group","bag_number","component","donor_no","first_name","last_name","gender","contact_no","mrp","trim","getFormatted","length","no","type","admission_id","emergency_id","formatDate","assignReceiveRemove","filter","el","add","$toast","severity","summary","detail","life","blood_receive","result","status","res"],"mappings":"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","sourcesContent":["\r\nimport OTScheduleService from \"../../service/ot/OTScheduleService\";\r\nimport BloodDonorService from \"../../service/blood-bank/BloodDonorService\";\r\nimport BloodIssueService from \"../../service/blood-bank/BloodIssueService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            isValid: \"\",\r\n            isExist: \"\",\r\n            bloodGroupList: [],\r\n            genderList: [],\r\n\r\n            bloodIssue: {\r\n                issue_date: moment(String(new Date())).format(\r\n                    \"MM/DD/YYYY\"\r\n                ),\r\n                admission_emergency_id: \"\",\r\n            },\r\n            bloodReceivedListForDonation: [],\r\n            filters: {\r\n                global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n                name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            },\r\n            initFilters() {\r\n                this.filters = {\r\n                    global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n                    name: {\r\n                        operator: FilterOperator.AND,\r\n                        constraints: [\r\n                            { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n                        ],\r\n                    },\r\n                };\r\n            },\r\n            submitted: false,\r\n        };\r\n    },\r\n    created() {\r\n        this.otScheduleService = new OTScheduleService();\r\n        this.bloodDonorService = new BloodDonorService();\r\n        this.bloodIssueService = new BloodIssueService();\r\n        this.commonService = new CommonService();\r\n\r\n        this.commonService\r\n            .GetAllGender()\r\n            .then((data) => (this.genderList = data.data));\r\n\r\n        this.commonService\r\n            .GetAllBloodGroup()\r\n            .then((data) => (this.bloodGroupList = data.data));\r\n\r\n        this.bloodDonorService\r\n            .getDonorForDonationIssue()\r\n            .then((data) => this.donationInfoFormatted(data.data));\r\n\r\n        var admission_no_for_blood_issue = localStorage.getItem('admission_no_for_blood_issue');\r\n        if (admission_no_for_blood_issue) {\r\n            this.bloodIssue.admission_emergency_no = admission_no_for_blood_issue;\r\n            localStorage.removeItem('admission_no_for_blood_issue');\r\n            this.getAdmittedOrEmergencyPatientInfoForOT();\r\n        }\r\n    },\r\n    methods: {\r\n        reset() {\r\n            this.isExist = \"\";\r\n            this.bloodIssue = {\r\n                cdissue_date: moment(String(new Date())).format(\r\n                    \"MM/DD/YYYY\"\r\n                ),\r\n                admission_emergency_id: \"\",\r\n            };\r\n            this.submitted = false;\r\n        },\r\n        donationInfoFormatted(data) {\r\n            data.forEach((element) => {\r\n                this.bloodReceivedListForDonation.push({\r\n                    value: element.blood_receive_id,\r\n                    text: \"Group: \" + element.blood_group + \"; Bag: \" + element.bag_number + \"; Component: \" + element.component + \"; Donor: \" + element.donor_no + \"-\" + element.first_name + \" \" + element.last_name + \"-\" + element.gender + \"-\" + element.contact_no,\r\n                    mrp: element.mrp,\r\n                });\r\n            });\r\n        },\r\n        getAdmittedOrEmergencyPatientInfoForOT() {\r\n            if (this.bloodIssue.admission_emergency_no) {\r\n                this.otScheduleService\r\n                    .getAdmittedOrEmergencyPatientInfoForOT(this.bloodIssue.admission_emergency_no.trim(), this)\r\n                    .then((data) => this.getFormatted(data.data));\r\n            }\r\n        },\r\n        getFormatted(data) {\r\n            if (data.length == 0) {\r\n                this.isExist = \"Patient not Exist!\";\r\n                this.bloodIssue = {\r\n                    admission_emergency_id: \"\",\r\n                };\r\n            } else {\r\n                var no = this.bloodIssue.admission_emergency_no;\r\n\r\n                this.bloodIssue = data[0];\r\n                this.bloodIssue.admission_emergency_no = no;\r\n                this.bloodIssue.cdissue_date = moment(String(new Date())).format(\"MM/DD/YYYY\");\r\n                this.isExist = \"\";\r\n                if (this.bloodIssue.type == 'IPD') {\r\n                    this.bloodIssue.admission_id = this.bloodIssue.admission_emergency_id;\r\n                } else if (this.bloodIssue.type == 'Emergency') {\r\n                    this.bloodIssue.emergency_id = this.bloodIssue.admission_emergency_id;\r\n                }\r\n            }\r\n        },\r\n\r\n        formatDate(value) {\r\n            return moment(String(value)).format(\"hh:mm A\");\r\n        },\r\n        assignReceiveRemove(blood_receive_id) {\r\n            this.bloodReceivedListForDonation = this.bloodReceivedListForDonation.filter(function (el) {\r\n                return el.value != blood_receive_id;\r\n            }, this);\r\n        },\r\n        async add() {\r\n            this.submitted = true;\r\n            try {\r\n                if (!this.bloodIssue.admission_emergency_id) {\r\n                    this.$toast.add({ severity: \"error\", summary: \"Failed\", detail: \"Please enter Admission/Emergency info\", life: 10000, });\r\n                    return;\r\n                } else if (!this.bloodIssue.blood_receive) {\r\n                    return;\r\n                } else {\r\n                    this.bloodIssue.issue_date = moment(\r\n                        String(this.bloodIssue.cdissue_date)\r\n                    ).format(\"YYYY-MM-DD\");\r\n\r\n                    this.bloodIssue.blood_receive_id = this.bloodIssue.blood_receive.value;\r\n                    this.bloodIssue.mrp = this.bloodIssue.blood_receive.mrp;\r\n\r\n                    let result = await this.bloodIssueService.add(\r\n                        this.bloodIssue, this\r\n                    );\r\n\r\n                    if (result.status === 200) {\r\n                        this.$toast.add({\r\n                            severity: \"success\",\r\n                            summary: \"Success\",\r\n                            detail: \"Saved Successfully\",\r\n                            life: 10000,\r\n                        });\r\n                        this.assignReceiveRemove(this.bloodIssue.blood_receive_id);\r\n                        this.reset();\r\n                        //this.detailsPrint(result.data);\r\n                    } else if (result.status === 409) {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Error\",\r\n                            detail: result.data,\r\n                            life: 10000,\r\n                        });\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n        // detailsPrint(ot_schedule_id) {\r\n        //   this.otReportService.GetOTScheduleDetails(ot_schedule_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n        // }\r\n    },\r\n};"]}]}