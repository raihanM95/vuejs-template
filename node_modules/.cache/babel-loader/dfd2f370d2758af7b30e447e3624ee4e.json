{"remainingRequest":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\front-desk\\DoctorAppointment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\front-desk\\DoctorAppointment.js","mtime":1640498582584},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9EaWFnbm9zdGljQ2VudGVyTWFuYWdlbWVudF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCBEb2N0b3JBcHBvaW50bWVudFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL0RvY3RvckFwcG9pbnRtZW50U2VydmljZSI7CmltcG9ydCBQYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUGF0aWVudFJlcG9ydFNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IERvY3RvclNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0RvY3RvclNldHVwU2VydmljZSI7CmltcG9ydCBCdWlsZGluZ1NldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0J1aWxkaW5nU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJvb21TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Sb29tU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9SZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAiLi4vLi4vc2NyaXB0cy92YWxpZGF0aW9uIjsKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyU2NoZWR1bGVEaWFsb2c6IGZhbHNlLAogICAgICBpc1NjaGVkdWxlRXhpc3Q6ICIiLAogICAgICBpc0NvbnRhY3RFeGlzdDogIiIsCiAgICAgIGlzVmFsaWQ6ICIiLAogICAgICBpc0VtYWlsVmFsaWQ6ICIiLAogICAgICBpc0V4aXN0OiAiIiwKICAgICAgYmxvb2RHcm91cExpc3Q6IFtdLAogICAgICBnZW5kZXJMaXN0OiBbXSwKICAgICAgZGVwYXJ0bWVudExpc3Q6IFtdLAogICAgICBkb2N0b3JMaXN0OiBbXSwKICAgICAgc2NoZWR1bGVMaXN0OiBbXSwKICAgICAgZ2V0U2NoZWR1bGVMaXN0OiBbXSwKICAgICAgLy9nZXRTY2hlZHVsZUxpc3QyOiBbXSwKICAgICAgYnVpbGRpbmdMaXN0OiBbXSwKICAgICAgcm9vbUxpc3Q6IFtdLAogICAgICByZWZlcnJlZEJ5TGlzdDogW10sCiAgICAgIGRvY3RvckFwcG9pbnRtZW50TGlzdDogW10sCiAgICAgIGRvY3RvckFwcG9pbnRtZW50OiB7CiAgICAgICAgc2NoZWR1bGVfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgYVBhdGllbnQ6IHsKICAgICAgICAgIGFnZV95ZWFyOiAiMCIsCiAgICAgICAgICBhZ2VfbW9udGg6ICIwIiwKICAgICAgICAgIGFnZV9kYXk6ICIwIgogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgc3VibWl0dGVkOiBmYWxzZSwKICAgICAgdHlwZUxpc3Q6IFt7CiAgICAgICAgdGV4dDogIkNvbnN1bHRhbmN5IiwKICAgICAgICB2YWx1ZTogIkNvbnN1bHRhbmN5IgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIlJlcG9ydCIsCiAgICAgICAgdmFsdWU6ICJSZXBvcnQiCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gcGFzdCBkYXRlLXllYXIgZGlzYWJsZWQKICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICB2YXIgbW9udGggPSB0b2RheS5nZXRNb250aCgpOwogICAgdmFyIHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOwogICAgdmFyIHByZXZNb250aCA9IG1vbnRoID09PSAwID8gMTEgOiBtb250aCAtIDA7CiAgICB2YXIgcHJldlllYXIgPSBwcmV2TW9udGggPT09IDExID8geWVhciAtIDAgOiB5ZWFyOwogICAgdGhpcy5taW5EYXRlID0gbmV3IERhdGUoKTsKICAgIHRoaXMubWluRGF0ZS5zZXRNb250aChwcmV2TW9udGgpOwogICAgdGhpcy5taW5EYXRlLnNldEZ1bGxZZWFyKHByZXZZZWFyKTsKICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlID0gbmV3IERvY3RvckFwcG9pbnRtZW50U2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSA9IG5ldyBQYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlID0gbmV3IENvbW1vblNlcnZpY2UoKTsKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlID0gbmV3IERvY3RvclNldHVwU2VydmljZSgpOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UgPSBuZXcgQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmJ1aWxkaW5nU2V0dXBTZXJ2aWNlID0gbmV3IEJ1aWxkaW5nU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnJvb21TZXR1cFNlcnZpY2UgPSBuZXcgUm9vbVNldHVwU2VydmljZSgpOwogICAgdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlID0gbmV3IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMudmFsaWRhdGlvbiA9IG5ldyBWYWxpZGF0aW9uKCk7CiAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxHZW5kZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5nZW5kZXJMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsQmxvb2RHcm91cCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmJsb29kR3JvdXBMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZS5nZXRBY3RpdmVDb21ibygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmRlcGFydG1lbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmJ1aWxkaW5nU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmJ1aWxkaW5nTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5yb29tU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJvb21MaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UuZ2V0QWN0aXZlQ29tYm8oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1lcmdlRG9jdG9ySW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgfSwKICB3YXRjaDogewogICAgJ2RvY3RvckFwcG9pbnRtZW50LnNjaGVkdWxlX2RhdGUnOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB0aGlzLmdldEFwcG9pbnRtZW50KCk7IC8vdGhpcy52aWV3RHJTY2hlZHVsZSgpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBzdWJtaXQoKSB7CiAgICAvLyAgIGxldCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coewogICAgLy8gICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnMKICAgIC8vICAgICBjb250YWluZXI6IHRoaXMuZnVsbFBhZ2UgPyBudWxsIDogdGhpcy4kcmVmcy5mb3JtQ29udGFpbmVyLAogICAgLy8gICAgIGNvbG9yOiAnIzgwMDA4MCcsCiAgICAvLyAgICAgbG9hZGVyOiAnYmFycycsCiAgICAvLyAgICAgd2lkdGg6IDY0LAogICAgLy8gICAgIGhlaWdodDogNjQsCiAgICAvLyAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsCiAgICAvLyAgIH0pOwogICAgLy8gICAvLyBzaW11bGF0ZSBBSkFYCiAgICAvLyAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgLy8gICAgIGxvYWRlci5oaWRlKCkKICAgIC8vICAgfSwgMTAwMCkKICAgIC8vIH0sCiAgICBwcmludEFwcG9pbnRtZW50VG9rZW46IGZ1bmN0aW9uIHByaW50QXBwb2ludG1lbnRUb2tlbihhcHBvaW50bWVudElkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRBcHBvaW50bWVudFRva2VuQnlBcHBvaW50bWVudElkKGFwcG9pbnRtZW50SWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhpZGVEaWFsb2c6IGZ1bmN0aW9uIGhpZGVEaWFsb2coKSB7CiAgICAgIHRoaXMuZHJTY2hlZHVsZURpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5pc1NjaGVkdWxlRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc1ZhbGlkID0gIiI7CiAgICAgIHRoaXMuaXNFbWFpbFZhbGlkID0gIiI7CiAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQgPSB7CiAgICAgICAgc2NoZWR1bGVfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgYVBhdGllbnQ6IHsKICAgICAgICAgIGFnZV95ZWFyOiAiMCIsCiAgICAgICAgICBhZ2VfbW9udGg6ICIwIiwKICAgICAgICAgIGFnZV9kYXk6ICIwIgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsgLy90aGlzLmdldEFwcG9pbnRtZW50KCk7CgogICAgICB0aGlzLnNjaGVkdWxlTGlzdCA9IFtdOwogICAgICB0aGlzLmdldFNjaGVkdWxlTGlzdCA9IFtdOwogICAgfSwKICAgIG1lcmdlRG9jdG9ySW5mbzogZnVuY3Rpb24gbWVyZ2VEb2N0b3JJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvL3RoaXMuZG9jdG9yTGlzdCA9IGRhdGE7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBvYmogPSBlbGVtZW50OwogICAgICAgIG9iai5kb2N0b3JfZGVncmVlID0gIiI7CiAgICAgICAgb2JqLmxzdENvbnN1bHRhbnREZWdyZWUuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIG9iai5kb2N0b3JfZGVncmVlICs9IGVsLmNvbnN1bHRhbnRfZGVncmVlX25hbWUgKyAiLiAiOwogICAgICAgIH0pOwogICAgICAgIG9iai5kb2N0b3JfbmFtZSA9IGVsZW1lbnQuZG9jX25vICsgIiAtICgiICsgb2JqLmRvY3Rvcl9kZWdyZWUgKyAiKSAtICIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lOwoKICAgICAgICBfdGhpczMuZG9jdG9yTGlzdC5wdXNoKG9iaik7CiAgICAgIH0pOwogICAgICB2YXIgYXBwb2ludG1lbnRJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXBwb2ludG1lbnRJbmZvIikpOwoKICAgICAgaWYgKGFwcG9pbnRtZW50SW5mbykgewogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQgPSBhcHBvaW50bWVudEluZm87CiAgICAgICAgdGhpcy5nZXRDb25zdWx0YW5jeUZlZUJ5RG9jdG9ySWQoKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYXBwb2ludG1lbnRJbmZvJyk7CiAgICAgIH0KICAgIH0sCiAgICBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2U6IGZ1bmN0aW9uIGZpbHRlckRvY3RvcnNEZXBhcnRtZW50V2lzZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRlcGFydG1lbnRfaWQgPT09IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZGVwYXJ0bWVudF9pZDsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkOiBmdW5jdGlvbiBnZXRDb25zdWx0YW5jeUZlZUJ5RG9jdG9ySWQoKSB7CiAgICAgIHZhciBhRG9jdG9yID0gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuZG9jdG9yX2lkID09PSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZDsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZmlyc3RfY29uX2ZlZSA9IGFEb2N0b3JbMF0uY29uc3VsdGFuY3lfZmVlOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNlY29uZF9jb25fZmVlID0gYURvY3RvclswXS5zZWNvbmRfY29uX2ZlZTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZV9kdXJhdGlvbiA9IGFEb2N0b3JbMF0uc2Vjb25kX2Nvbl9mZWVfZHVyYXRpb247CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZSA9IGFEb2N0b3JbMF0udGhpcmRfY29uX2ZlZTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC50aGlyZF9jb25fZmVlX2R1cmF0aW9uID0gYURvY3RvclswXS50aGlyZF9jb25fZmVlX2R1cmF0aW9uOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnJlcG9ydF92aXNpdF9mZWUgPSBhRG9jdG9yWzBdLnJlcG9ydF92aXNpdF9mZWU7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYnVpbGRpbmdfaWQgPSBhRG9jdG9yWzBdLl9idWlsZGluZ19pZDsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5yb29tX2lkID0gYURvY3RvclswXS5yb29tX2lkOwogICAgICB0aGlzLmdldERyU2NoZWR1bGUoKTsKICAgIH0sCiAgICBnZXRDb25zdWx0YW5jeUZlZUJ5VHlwZTogZnVuY3Rpb24gZ2V0Q29uc3VsdGFuY3lGZWVCeVR5cGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYXBwb2ludG1lbnRfdHlwZSA9PSAiUmVwb3J0IikgewogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5yZXBvcnRfdmlzaXRfZmVlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYXBwb2ludG1lbnRfdHlwZSA9PSAiQ29uc3VsdGFuY3kiKSB7CiAgICAgICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UucHJlc2NyaXB0aW9uRG9jdG9yQW5kUGF0aWVudFdpc2UodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQsIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucGF0aWVudF9pZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5mb3JtYXRQcmV2aW91c0FwcG9pbnRtZW50KGRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBmb3JtYXRQcmV2aW91c0FwcG9pbnRtZW50OiBmdW5jdGlvbiBmb3JtYXRQcmV2aW91c0FwcG9pbnRtZW50KGRhdGEpIHsKICAgICAgaWYgKGRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZmlyc3RfY29uX2ZlZTsKICAgICAgfSBlbHNlIGlmIChkYXRhLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgdmFyIHByZXZpb3VzQXBwb2ludG1lbnREYXRlID0gbW9tZW50KFN0cmluZyhkYXRhWzBdLnByZXNjcmlwdGlvbl9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIGN1cnJlbnRBcHBvaW50bWVudERhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB2YXIgcHJldmlvdXMgPSBtb21lbnQocHJldmlvdXNBcHBvaW50bWVudERhdGUsICJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIGN1cnJlbnQgPSBtb21lbnQoY3VycmVudEFwcG9pbnRtZW50RGF0ZSwgIllZWVktTU0tREQiKTsgLy9EaWZmZXJlbmNlIGluIG51bWJlciBvZiBkYXlzCgogICAgICAgIHZhciBkYXkgPSBtb21lbnQuZHVyYXRpb24oY3VycmVudC5kaWZmKHByZXZpb3VzKSkuYXNEYXlzKCk7CgogICAgICAgIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNlY29uZF9jb25fZmVlX2R1cmF0aW9uIDw9IGRheSkgewogICAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNlY29uZF9jb25fZmVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZmlyc3RfY29uX2ZlZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGggPT0gMikgewogICAgICAgIHZhciBwcmV2aW91c0FwcG9pbnRtZW50RGF0ZTIgPSBtb21lbnQoU3RyaW5nKGRhdGFbMF0ucHJlc2NyaXB0aW9uX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB2YXIgY3VycmVudEFwcG9pbnRtZW50RGF0ZTIgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB2YXIgcHJldmlvdXMyID0gbW9tZW50KHByZXZpb3VzQXBwb2ludG1lbnREYXRlMiwgIllZWVktTU0tREQiKTsKICAgICAgICB2YXIgY3VycmVudDIgPSBtb21lbnQoY3VycmVudEFwcG9pbnRtZW50RGF0ZTIsICJZWVlZLU1NLUREIik7IC8vRGlmZmVyZW5jZSBpbiBudW1iZXIgb2YgZGF5cwoKICAgICAgICB2YXIgZGF5MiA9IG1vbWVudC5kdXJhdGlvbihjdXJyZW50Mi5kaWZmKHByZXZpb3VzMikpLmFzRGF5cygpOwoKICAgICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC50aGlyZF9jb25fZmVlX2R1cmF0aW9uIDw9IGRheTIpIHsKICAgICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC50aGlyZF9jb25fZmVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZmlyc3RfY29uX2ZlZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBtZXJnZVJlZmVycmVkQnlJbmZvOiBmdW5jdGlvbiBtZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczUucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAgICAgICB2YWx1ZTogZWxlbWVudC52YWx1ZSwKICAgICAgICAgIHRleHQ6IGVsZW1lbnQudmFsdWUgKyAiLSIgKyBlbGVtZW50LnRleHQKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsdGVyUm9vbXNCdWlsZGluZ1dpc2U6IGZ1bmN0aW9uIGZpbHRlclJvb21zQnVpbGRpbmdXaXNlKCkgewogICAgICByZXR1cm4gdGhpcy5yb29tTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmJ1aWxkaW5nX2lkID09PSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBnZXRGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQgPSBkYXRhOwoKICAgICAgaWYgKCF0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LnBhdGllbnRfaWQpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiUGF0aWVudCBub3QgRXhpc3QhIjsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50ID0gewogICAgICAgICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgICBhUGF0aWVudDoge30KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucGF0aWVudF9pZCA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQucGF0aWVudF9pZDsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmNkZG9iID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmRvYikpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICB9CiAgICB9LAogICAgZmluZFBhdGllbnQ6IGZ1bmN0aW9uIGZpbmRQYXRpZW50KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0QnlDb250YWN0T3JSZWdObyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnRhY3RPclJlZ05vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNi5nZXRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgaXNFeGlzdENvbnRhY3Q6IGZ1bmN0aW9uIGlzRXhpc3RDb250YWN0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmNvbnRhY3Rfbm8ubWF0Y2goL14oMDEpKFswLTldezl9KSQvKSkgewogICAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0QnlDb250YWN0T3JSZWdObyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmNvbnRhY3Rfbm8sIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczcuZ2V0Q29udGFjdChkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiQ29udGFjdCBudW1iZXIgbXVzdCBzdGFydCB3aXRoIDAxIGFuZCB0aGUgcmVxdWlyZWQgbGVuZ3RoIGlzIDExIjsKICAgICAgfQogICAgfSwKICAgIGdldENvbnRhY3Q6IGZ1bmN0aW9uIGdldENvbnRhY3QoZGF0YSkgewogICAgICBpZiAoZGF0YS5jb250YWN0X25vKSB7CiAgICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICJEdXBsaWNhdGUgcGhvbmUgbnVtYmVyISI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwogICAgICB9CiAgICB9LAogICAgZ2V0Rm9ybWF0dGVkU2NoZWR1bGU6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFNjaGVkdWxlKGRhdGEpIHsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgZWxlbWVudC5zdGFydF90aW1lMSA9IG1vbWVudChTdHJpbmcobmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuc3RhcnRfdGltZTEpKSkuZm9ybWF0KCJoOm1tIGEiKTsKICAgICAgICBlbGVtZW50LmVuZF90aW1lMSA9IG1vbWVudChTdHJpbmcobmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuZW5kX3RpbWUxKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5zdGFydF90aW1lMiA9IG1vbWVudChTdHJpbmcobmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuc3RhcnRfdGltZTIpKSkuZm9ybWF0KCJoOm1tIGEiKTsKICAgICAgICBlbGVtZW50LmVuZF90aW1lMiA9IG1vbWVudChTdHJpbmcobmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuZW5kX3RpbWUyKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgIH0pOwogICAgICB0aGlzLnNjaGVkdWxlTGlzdCA9IGRhdGE7IC8vdGhpcy5kclNjaGVkdWxlRGlhbG9nID0gdHJ1ZTsKCiAgICAgIHRoaXMuc2hvd0RyU2NoZWR1bGVEaWFsb2coKTsKICAgIH0sCiAgICBnZXREclNjaGVkdWxlOiBmdW5jdGlvbiBnZXREclNjaGVkdWxlKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlLmdldERvY3RvclNjaGVkdWxlQnlJZCh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczguZ2V0Rm9ybWF0dGVkU2NoZWR1bGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgc2hvd0RyU2NoZWR1bGVEaWFsb2c6IGZ1bmN0aW9uIHNob3dEclNjaGVkdWxlRGlhbG9nKCkgewogICAgICB0aGlzLmdldEFwcG9pbnRtZW50KCk7CiAgICAgIHRoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgdmlld0RyU2NoZWR1bGU6IGZ1bmN0aW9uIHZpZXdEclNjaGVkdWxlKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddOwogICAgICB2YXIgZCA9IG5ldyBEYXRlKG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIikpOwogICAgICB2YXIgZGF5TmFtZSA9IGRheXNbZC5nZXREYXkoKV07CiAgICAgIHRoaXMuZ2V0U2NoZWR1bGVMaXN0ID0gW107IC8vdGhpcy5nZXRTY2hlZHVsZUxpc3QyID0gW107CgogICAgICB0aGlzLnNjaGVkdWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQuX2RheV9uYW1lID09IGRheU5hbWUgJiYgZWxlbWVudC5pc19hdmFpbGFibGUpIHsKICAgICAgICAgIHZhciBzdGFydF90aW1lMSA9IG1vbWVudChlbGVtZW50LnN0YXJ0X3RpbWUxLCAiaGg6bW0gYSIpOwogICAgICAgICAgdmFyIGVuZF90aW1lMSA9IG1vbWVudChlbGVtZW50LmVuZF90aW1lMSwgImhoOm1tIGEiKTsKICAgICAgICAgIHZhciByZXN1bHQxID0gZW5kX3RpbWUxLmRpZmYoc3RhcnRfdGltZTEsICdtaW51dGVzJyk7CiAgICAgICAgICB2YXIgdGltZTFQZXJQYXRpZW50ID0gcGFyc2VJbnQocmVzdWx0MSAvIGVsZW1lbnQudGltZTFfcGF0aWVudF9ubyk7CiAgICAgICAgICB2YXIgaW5kZXggPSAwOwogICAgICAgICAgdmFyIHRpbWUxcmFuZ2UgPSBzdGFydF90aW1lMTsKCiAgICAgICAgICB3aGlsZSAoaW5kZXggPCBlbGVtZW50LnRpbWUxX3BhdGllbnRfbm8pIHsKICAgICAgICAgICAgdmFyIHRpbWUgPSBtb21lbnQodGltZTFyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICB2YXIgYVNjaGVkdWxlID0gewogICAgICAgICAgICAgIHRpbWUxUmFuZ2VTdGFydDogbW9tZW50KHRpbWUxcmFuZ2UsICJoaDptbSBhIikuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgICB0aW1lMVJhbmdlRW5kOiBtb21lbnQodGltZTFyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTFQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJyksCiAgICAgICAgICAgICAgdGltZTFJc0Jvb2tlZDogX3RoaXM5LmlzQXBwb2ludG1lbnRFeGlzdCh0aW1lKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXM5LmdldFNjaGVkdWxlTGlzdC5wdXNoKGFTY2hlZHVsZSk7CgogICAgICAgICAgICB0aW1lMXJhbmdlID0gbW9tZW50KHRpbWUxcmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUxUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICBpbmRleCsrOyAvL2NvbnNvbGUubG9nKHRpbWUxcmFuZ2UpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBzdGFydF90aW1lMiA9IG1vbWVudChlbGVtZW50LnN0YXJ0X3RpbWUyLCAiaGg6bW0gYSIpOwogICAgICAgICAgdmFyIGVuZF90aW1lMiA9IG1vbWVudChlbGVtZW50LmVuZF90aW1lMiwgImhoOm1tIGEiKTsKICAgICAgICAgIHZhciByZXN1bHQyID0gZW5kX3RpbWUyLmRpZmYoc3RhcnRfdGltZTIsICdtaW51dGVzJyk7CiAgICAgICAgICB2YXIgdGltZTJQZXJQYXRpZW50ID0gcmVzdWx0MiAvIGVsZW1lbnQudGltZTJfcGF0aWVudF9ubzsKICAgICAgICAgIHZhciBpbmRleDIgPSAwOwogICAgICAgICAgdmFyIHRpbWUycmFuZ2UgPSBzdGFydF90aW1lMjsKCiAgICAgICAgICB3aGlsZSAoaW5kZXgyIDwgZWxlbWVudC50aW1lMl9wYXRpZW50X25vKSB7CiAgICAgICAgICAgIHZhciB0aW1lMiA9IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyk7CgogICAgICAgICAgICBpZiAoX3RoaXM5LmdldFNjaGVkdWxlTGlzdC5sZW5ndGggPiBpbmRleDIpIHsKICAgICAgICAgICAgICB2YXIgYVNjaGVkdWxlMiA9IF90aGlzOS5nZXRTY2hlZHVsZUxpc3RbaW5kZXgyXTsKICAgICAgICAgICAgICBhU2NoZWR1bGUyLnRpbWUyUmFuZ2VTdGFydCA9IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyk7CiAgICAgICAgICAgICAgYVNjaGVkdWxlMi50aW1lMlJhbmdlRW5kID0gbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICAgIGFTY2hlZHVsZTIudGltZTJJc0Jvb2tlZCA9IF90aGlzOS5pc0FwcG9pbnRtZW50RXhpc3QodGltZTIpOwogICAgICAgICAgICAgIF90aGlzOS5nZXRTY2hlZHVsZUxpc3RbaW5kZXgyXSA9IGFTY2hlZHVsZTI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIGFTY2hlZHVsZTMgPSB7CiAgICAgICAgICAgICAgICB0aW1lMVJhbmdlU3RhcnQ6ICcnLAogICAgICAgICAgICAgICAgdGltZTFSYW5nZUVuZDogJycsCiAgICAgICAgICAgICAgICB0aW1lMUlzQm9va2VkOiB0cnVlLAogICAgICAgICAgICAgICAgdGltZTJSYW5nZVN0YXJ0OiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpLAogICAgICAgICAgICAgICAgdGltZTJSYW5nZUVuZDogbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpLAogICAgICAgICAgICAgICAgdGltZTJJc0Jvb2tlZDogX3RoaXM5LmlzQXBwb2ludG1lbnRFeGlzdCh0aW1lMikKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpczkuZ2V0U2NoZWR1bGVMaXN0LnB1c2goYVNjaGVkdWxlMyk7CiAgICAgICAgICAgIH0gLy8gdmFyIGFTY2hlZHVsZTIgPSB7CiAgICAgICAgICAgIC8vICAgdGltZTJSYW5nZVN0YXJ0OiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpLAogICAgICAgICAgICAvLyAgIHRpbWUyUmFuZ2VFbmQ6IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMlBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKQogICAgICAgICAgICAvLyB9OwogICAgICAgICAgICAvLyB0aGlzLmdldFNjaGVkdWxlTGlzdC5wdXNoKGFTY2hlZHVsZTIpOwoKCiAgICAgICAgICAgIHRpbWUycmFuZ2UgPSBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTJQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJyk7CiAgICAgICAgICAgIGluZGV4MisrOyAvL2NvbnNvbGUubG9nKHRpbWUycmFuZ2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7IC8vdGhpcy5kclNjaGVkdWxlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRBcHBvaW50bWVudDogZnVuY3Rpb24gZ2V0QXBwb2ludG1lbnQoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCAmJiB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNjaGVkdWxlX2RhdGUpIHsKICAgICAgICB2YXIgZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UuZ2V0RHluYW1pY0RvY3Rvcldpc2UoZGF0ZSwgZGF0ZSwgIkFjdGl2ZSIsIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxMC5nZXRBcHBvaW50bWVudEZvcm1hdHRlZChkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZ2V0QXBwb2ludG1lbnRGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50Rm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudExpc3QgPSBkYXRhOwogICAgICB0aGlzLnZpZXdEclNjaGVkdWxlKCk7CiAgICB9LAogICAgaXNBcHBvaW50bWVudEV4aXN0OiBmdW5jdGlvbiBpc0FwcG9pbnRtZW50RXhpc3QodGltZSkgewogICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7CiAgICAgIHZhciBzY2hlZHVsZV9kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNjaGVkdWxlX2RhdGUpKS5mb3JtYXQoIk1NL0REL1lZWVkiKTsKICAgICAgdmFyIGRhdGVUaW1lID0gbW9tZW50KHNjaGVkdWxlX2RhdGUgKyAnICcgKyB0aW1lLCAnTU0vREQvWVlZWSBoOm1tOnNzIEEnKTsKICAgICAgdmFyIGRhdGUgPSBkYXRlVGltZS5mb3JtYXQoJ01NL0REL1lZWVkgaDptbTpzcyBBJyk7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgYXBwb2ludF9kYXRlID0gbW9tZW50KFN0cmluZyhlbGVtZW50LmFwcG9pbnRfZGF0ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSBoOm1tOnNzIEEiKTsKCiAgICAgICAgaWYgKGFwcG9pbnRfZGF0ZSA9PSBkYXRlKSB7CiAgICAgICAgICByZXN1bHQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgc2V0QXBwb2ludG1lbnQ6IGZ1bmN0aW9uIHNldEFwcG9pbnRtZW50KGFwcG9pbnRtZW50VGltZSkgewogICAgICB2YXIgc2NoZWR1bGVfZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICAgIHZhciBkYXRlVGltZSA9IG1vbWVudChzY2hlZHVsZV9kYXRlICsgJyAnICsgYXBwb2ludG1lbnRUaW1lLCAnTU0vREQvWVlZWSBoOm1tOnNzIGEnKTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSA9IGRhdGVUaW1lLmZvcm1hdCgnTU0vREQvWVlZWSBoOm1tOnNzIGEnKTsKICAgICAgY29uc29sZS5sb2codGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSk7CiAgICAgIHRoaXMuZHJTY2hlZHVsZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmdldENvbnN1bHRhbmN5RmVlQnlUeXBlKCk7IC8vdGhpcy5jaGVja0RyU2NoZWR1bGUoKTsKICAgIH0sCiAgICBjaGVja0RyU2NoZWR1bGU6IGZ1bmN0aW9uIGNoZWNrRHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdGhpcy5pc1NjaGVkdWxlID0gZmFsc2U7CiAgICAgIHZhciBkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddOwogICAgICB2YXIgZCA9IG5ldyBEYXRlKG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpKTsKICAgICAgdmFyIGRheU5hbWUgPSBkYXlzW2QuZ2V0RGF5KCldOwogICAgICB0aGlzLnNjaGVkdWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIHN0YXJ0X3RpbWUxID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuc3RhcnRfdGltZTEpOwogICAgICAgIHZhciBlbmRfdGltZTEgPSBuZXcgRGF0ZSgiMjAwMC0wMS0wMSAiICsgZWxlbWVudC5lbmRfdGltZTEpOwogICAgICAgIHZhciBzdGFydF90aW1lMiA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUyKTsKICAgICAgICB2YXIgZW5kX3RpbWUyID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuZW5kX3RpbWUyKTsKICAgICAgICB2YXIgdGltZU5vdyA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBtb21lbnQoU3RyaW5nKF90aGlzMTEuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoImg6bW0gYSIpKTsKCiAgICAgICAgaWYgKGVsZW1lbnQuX2RheV9uYW1lID09IGRheU5hbWUgJiYgZWxlbWVudC5pc19hdmFpbGFibGUpIHsKICAgICAgICAgIGlmIChzdGFydF90aW1lMSA8PSB0aW1lTm93ICYmIHRpbWVOb3cgPD0gZW5kX3RpbWUxIHx8IHN0YXJ0X3RpbWUyIDw9IHRpbWVOb3cgJiYgdGltZU5vdyA8PSBlbmRfdGltZTIpIHsKICAgICAgICAgICAgX3RoaXMxMS5pc1NjaGVkdWxlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKCF0aGlzLmlzU2NoZWR1bGUpIHsKICAgICAgICB0aGlzLmlzU2NoZWR1bGVFeGlzdCA9ICJTY2hlZHVsZSBub3QgZXhpc3QiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTY2hlZHVsZUV4aXN0ID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY3VycmVudERhdGUsIGRvYiwgcmVzdWx0LCBfcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL3RoaXMuY2hlY2tEclNjaGVkdWxlKCk7CiAgICAgICAgICAgICAgICBfdGhpczEyLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5maXJzdF9uYW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX3llYXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9tb250aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX2RheSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuY29udGFjdF9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuZGVwYXJ0bWVudF9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50bWVudF90eXBlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5yb29tX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQucmVhc29uKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1NDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEyLmlzQ29udGFjdEV4aXN0IHx8IF90aGlzMTIuaXNTY2hlZHVsZUV4aXN0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgICAgX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50X2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQgaDptbTpzcyBhIik7CiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBkb2IgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5hZ2VfeWVhciwgY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9kYXkpOwogICAgICAgICAgICAgICAgX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5kb2IgPSBtb21lbnQoU3RyaW5nKGRvYikpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50Lmludm9pY2VfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UuYWRkKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQsIF90aGlzMTIpOwoKICAgICAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTIuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTIucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTIucHJpbnRBcHBvaW50bWVudFRva2VuKHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTIuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuaW52b2ljZV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3MjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50U2VydmljZS5wdXQoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudCwgX3RoaXMxMik7CgogICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICBfcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlN1Y2Nlc3NmdWxseSBVcGRhdGVkIiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTIucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTIucHJpbnRBcHBvaW50bWVudFRva2VuKF9yZXN1bHQuZGF0YSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEyLiRyb3V0ZXIucHVzaCgiL3BhdGllbnQtZG9jdG9yLWFwcG9pbnRtZW50LWxpc3QiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogX3Jlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3NjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXMxMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDc2XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/DiagnosticCenterManagement_Client/trunk/src/scripts/front-desk/DoctorAppointment.js"],"names":["DoctorAppointmentService","PatientRegistrationService","PatientReportService","CommonService","ConsultancyDepartmentSetupService","DoctorSetupService","BuildingSetupService","RoomSetupService","ReferredBySetupService","Validation","AppointmentPrescriptionService","moment","FilterMatchMode","FilterOperator","data","drScheduleDialog","isScheduleExist","isContactExist","isValid","isEmailValid","isExist","bloodGroupList","genderList","departmentList","doctorList","scheduleList","getScheduleList","buildingList","roomList","referredByList","doctorAppointmentList","doctorAppointment","schedule_date","String","Date","format","patient_id","aPatient","age_year","age_month","age_day","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","typeList","text","created","today","month","getMonth","year","getFullYear","prevMonth","prevYear","minDate","setMonth","setFullYear","doctorAppointmentService","patientRegistrationService","commonService","doctorSetupService","consultancyDepartmentSetupService","buildingSetupService","roomSetupService","referredBySetupService","patientReportService","validation","appointmentPrescriptionService","GetAllGender","then","GetAllBloodGroup","getActiveCombo","getAll","mergeReferredByInfo","mergeDoctorInfo","watch","immediate","handler","getAppointment","methods","printAppointmentToken","appointmentId","GetAppointmentTokenByAppointmentId","Downloadfile","hideDialog","reset","forEach","element","obj","doctor_degree","lstConsultantDegree","el","consultant_degree_name","doctor_name","doc_no","push","appointmentInfo","JSON","parse","localStorage","getItem","getConsultancyFeeByDoctorId","removeItem","filterDoctorsDepartmentWise","filter","department_id","aDoctor","doctor_id","first_con_fee","consultancy_fee","second_con_fee","second_con_fee_duration","third_con_fee","third_con_fee_duration","report_visit_fee","building_id","_building_id","room_id","getDrSchedule","getConsultancyFeeByType","appointment_type","prescriptionDoctorAndPatientWise","formatPreviousAppointment","length","previousAppointmentDate","prescription_date","currentAppointmentDate","cdappoint_date","previous","current","day","duration","diff","asDays","previousAppointmentDate2","currentAppointmentDate2","previous2","current2","day2","filterRoomsBuildingWise","getFormatted","cddob","dob","findPatient","getByContactOrRegNo","contactOrRegNo","isExistContact","contact_no","match","getContact","getFormattedSchedule","start_time1","end_time1","start_time2","end_time2","showDrScheduleDialog","getDoctorScheduleById","viewDrSchedule","days","d","dayName","getDay","_day_name","is_available","result1","time1PerPatient","parseInt","time1_patient_no","index","time1range","time","aSchedule","time1RangeStart","time1RangeEnd","add","time1IsBooked","isAppointmentExist","result2","time2PerPatient","time2_patient_no","index2","time2range","time2","aSchedule2","time2RangeStart","time2RangeEnd","time2IsBooked","aSchedule3","date","getDynamicDoctorWise","getAppointmentFormatted","result","dateTime","appoint_date","setAppointment","appointmentTime","console","log","checkDrSchedule","isSchedule","timeNow","first_name","reason","currentDate","getDate","invoice_id","status","$toast","severity","summary","detail","life","res","put","$router"],"mappings":"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","sourcesContent":["import DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      drScheduleDialog: false,\r\n      isScheduleExist: \"\",\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      isExist: \"\",\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      departmentList: [],\r\n      doctorList: [],\r\n      scheduleList: [],\r\n      getScheduleList: [],\r\n      //getScheduleList2: [],\r\n      buildingList: [],\r\n      roomList: [],\r\n      referredByList: [],\r\n      doctorAppointmentList: [],\r\n      doctorAppointment: {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      typeList: [\r\n        { text: \"Consultancy\", value: \"Consultancy\" },\r\n        { text: \"Report\", value: \"Report\" },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    let today = new Date();\r\n    let month = today.getMonth();\r\n    let year = today.getFullYear();\r\n    let prevMonth = (month === 0) ? 11 : month - 0;\r\n    let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    this.minDate = new Date();\r\n    this.minDate.setMonth(prevMonth);\r\n    this.minDate.setFullYear(prevYear);\r\n\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.commonService = new CommonService();\r\n    this.doctorSetupService = new DoctorSetupService();\r\n    this.consultancyDepartmentSetupService = new ConsultancyDepartmentSetupService();\r\n    this.buildingSetupService = new BuildingSetupService();\r\n    this.roomSetupService = new RoomSetupService();\r\n    this.referredBySetupService = new ReferredBySetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.validation = new Validation();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n\r\n    this.commonService\r\n      .GetAllGender()\r\n      .then((data) => (this.genderList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.consultancyDepartmentSetupService\r\n      .getActiveCombo()\r\n      .then((data) => (this.departmentList = data.data));\r\n\r\n    this.buildingSetupService\r\n      .getAll()\r\n      .then((data) => (this.buildingList = data.data));\r\n\r\n    this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n    this.referredBySetupService\r\n      .getActiveCombo()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.doctorSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n\r\n  },\r\n  watch: {\r\n    'doctorAppointment.schedule_date': {\r\n      immediate: true,\r\n      handler() {\r\n        this.getAppointment();\r\n        //this.viewDrSchedule();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    // submit() {\r\n    //   let loader = this.$loading.show({\r\n    //     // Optional parameters\r\n    //     container: this.fullPage ? null : this.$refs.formContainer,\r\n    //     color: '#800080',\r\n    //     loader: 'bars',\r\n    //     width: 64,\r\n    //     height: 64,\r\n    //     backgroundColor: '#ffffff',\r\n    //   });\r\n    //   // simulate AJAX\r\n    //   setTimeout(() => {\r\n    //     loader.hide()\r\n    //   }, 1000)\r\n    // },\r\n    printAppointmentToken(appointmentId) {\r\n      this.patientReportService.GetAppointmentTokenByAppointmentId(appointmentId, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    hideDialog() {\r\n      this.drScheduleDialog = false;\r\n    },\r\n    reset() {\r\n      this.isScheduleExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.isExist = \"\";\r\n      this.isContactExist = \"\";\r\n      this.doctorAppointment = {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      };\r\n      this.submitted = false;\r\n      //this.getAppointment();\r\n      this.scheduleList = [];\r\n      this.getScheduleList = [];\r\n    },\r\n    mergeDoctorInfo(data) {\r\n      //this.doctorList = data;\r\n      data.forEach((element) => {\r\n        var obj = element;\r\n        obj.doctor_degree = \"\";\r\n        obj.lstConsultantDegree.forEach((el) => {\r\n          obj.doctor_degree += el.consultant_degree_name + \". \";\r\n        });\r\n\r\n        obj.doctor_name = element.doc_no + \" - (\" + obj.doctor_degree + \") - \" + element.doctor_name;\r\n        this.doctorList.push(obj);\r\n      });\r\n\r\n      var appointmentInfo = JSON.parse(localStorage.getItem(\"appointmentInfo\"));\r\n      if (appointmentInfo) {\r\n        this.doctorAppointment = appointmentInfo;\r\n        this.getConsultancyFeeByDoctorId();\r\n        localStorage.removeItem('appointmentInfo');\r\n      }\r\n    },\r\n    filterDoctorsDepartmentWise() {\r\n      return this.doctorList.filter(function (el) {\r\n        return el.department_id === this.doctorAppointment.department_id;\r\n      }, this);\r\n    },\r\n    getConsultancyFeeByDoctorId() {\r\n      var aDoctor = this.doctorList.filter(function (el) {\r\n        return el.doctor_id === this.doctorAppointment.doctor_id;\r\n      }, this);\r\n\r\n      this.doctorAppointment.first_con_fee = aDoctor[0].consultancy_fee;\r\n      this.doctorAppointment.second_con_fee = aDoctor[0].second_con_fee;\r\n      this.doctorAppointment.second_con_fee_duration = aDoctor[0].second_con_fee_duration;\r\n      this.doctorAppointment.third_con_fee = aDoctor[0].third_con_fee;\r\n      this.doctorAppointment.third_con_fee_duration = aDoctor[0].third_con_fee_duration;\r\n      this.doctorAppointment.report_visit_fee = aDoctor[0].report_visit_fee;\r\n      this.doctorAppointment.building_id = aDoctor[0]._building_id;\r\n      this.doctorAppointment.room_id = aDoctor[0].room_id;\r\n\r\n      this.getDrSchedule();\r\n    },\r\n    getConsultancyFeeByType() {\r\n      if (this.doctorAppointment.appointment_type == \"Report\") {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.report_visit_fee;\r\n      } else if (this.doctorAppointment.appointment_type == \"Consultancy\") {\r\n        this.appointmentPrescriptionService.prescriptionDoctorAndPatientWise(this.doctorAppointment.doctor_id, this.doctorAppointment.patient_id, this).then((data) => this.formatPreviousAppointment(data.data));\r\n      }\r\n    },\r\n    formatPreviousAppointment(data) {\r\n      if (data.length == 0) {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n      } else if (data.length == 1) {\r\n        var previousAppointmentDate = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous = moment(previousAppointmentDate, \"YYYY-MM-DD\");\r\n        var current = moment(currentAppointmentDate, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day = moment.duration(current.diff(previous)).asDays();\r\n        if (this.doctorAppointment.second_con_fee_duration <= day) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.second_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      } else if (data.length == 2) {\r\n        var previousAppointmentDate2 = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate2 = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous2 = moment(previousAppointmentDate2, \"YYYY-MM-DD\");\r\n        var current2 = moment(currentAppointmentDate2, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day2 = moment.duration(current2.diff(previous2)).asDays();\r\n        if (this.doctorAppointment.third_con_fee_duration <= day2) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.third_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      }\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      data.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.value,\r\n          text: element.value + \"-\" + element.text,\r\n        });\r\n      });\r\n    },\r\n    filterRoomsBuildingWise() {\r\n      return this.roomList.filter(function (el) {\r\n        return el.building_id === this.doctorAppointment.building_id;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      this.doctorAppointment.aPatient = data;\r\n      if (!this.doctorAppointment.aPatient.patient_id) {\r\n        this.isExist = \"Patient not Exist!\";\r\n        this.doctorAppointment = {\r\n          patient_id: \"\",\r\n          aPatient: {},\r\n        };\r\n      } else {\r\n        this.isExist = \"\";\r\n\r\n        this.doctorAppointment.patient_id =\r\n          this.doctorAppointment.aPatient.patient_id;\r\n        this.doctorAppointment.aPatient.cddob = moment(\r\n          String(this.doctorAppointment.aPatient.dob)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    findPatient() {\r\n      this.patientRegistrationService\r\n        .getByContactOrRegNo(this.doctorAppointment.contactOrRegNo, this)\r\n        .then((data) => this.getFormatted(data.data));\r\n    },\r\n    isExistContact() {\r\n      if (\r\n        this.doctorAppointment.aPatient.contact_no.match(/^(01)([0-9]{9})$/)\r\n      ) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.doctorAppointment.aPatient.contact_no, this)\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    getFormattedSchedule(data) {\r\n      data.forEach((element) => {\r\n        element.start_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time1))\r\n        ).format(\"h:mm a\");\r\n        element.end_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time1))\r\n        ).format(\"h:mm a\");\r\n        element.start_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time2))\r\n        ).format(\"h:mm a\");\r\n        element.end_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time2))\r\n        ).format(\"h:mm a\");\r\n      });\r\n\r\n      this.scheduleList = data;\r\n      //this.drScheduleDialog = true;\r\n      this.showDrScheduleDialog();\r\n    },\r\n    getDrSchedule() {\r\n      this.doctorSetupService\r\n        .getDoctorScheduleById(this.doctorAppointment.doctor_id)\r\n        .then((data) => this.getFormattedSchedule(data.data));\r\n    },\r\n    showDrScheduleDialog() {\r\n      this.getAppointment();\r\n      this.drScheduleDialog = true;\r\n    },\r\n    viewDrSchedule() {\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.getScheduleList = [];\r\n      //this.getScheduleList2 = [];\r\n      this.scheduleList.forEach((element) => {\r\n        if (element._day_name == dayName && element.is_available) {\r\n          var start_time1 = moment(element.start_time1, \"hh:mm a\");\r\n          var end_time1 = moment(element.end_time1, \"hh:mm a\");\r\n          var result1 = end_time1.diff(start_time1, 'minutes');\r\n          var time1PerPatient = parseInt(result1 / element.time1_patient_no);\r\n\r\n          var index = 0;\r\n          var time1range = start_time1;\r\n          while (index < element.time1_patient_no) {\r\n            var time = moment(time1range, \"hh:mm a\").format('LTS');\r\n\r\n            var aSchedule = {\r\n              time1RangeStart: moment(time1range, \"hh:mm a\").format('LTS'),\r\n              time1RangeEnd: moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS'),\r\n              time1IsBooked: this.isAppointmentExist(time)\r\n            };\r\n\r\n            this.getScheduleList.push(aSchedule);\r\n            time1range = moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS');\r\n            index++;\r\n            //console.log(time1range);\r\n          }\r\n\r\n          var start_time2 = moment(element.start_time2, \"hh:mm a\");\r\n          var end_time2 = moment(element.end_time2, \"hh:mm a\");\r\n          var result2 = end_time2.diff(start_time2, 'minutes');\r\n          var time2PerPatient = result2 / element.time2_patient_no;\r\n\r\n          var index2 = 0;\r\n          var time2range = start_time2;\r\n          while (index2 < element.time2_patient_no) {\r\n            var time2 = moment(time2range, \"hh:mm a\").format('LTS');\r\n            if (this.getScheduleList.length > index2) {\r\n              var aSchedule2 = this.getScheduleList[index2];\r\n              aSchedule2.time2RangeStart = moment(time2range, \"hh:mm a\").format('LTS');\r\n              aSchedule2.time2RangeEnd = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n              aSchedule2.time2IsBooked = this.isAppointmentExist(time2);\r\n              this.getScheduleList[index2] = aSchedule2;\r\n            } else {\r\n              var aSchedule3 = {\r\n                time1RangeStart: '',\r\n                time1RangeEnd: '',\r\n                time1IsBooked: true,\r\n                time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n                time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS'),\r\n                time2IsBooked: this.isAppointmentExist(time2),\r\n              };\r\n              this.getScheduleList.push(aSchedule3);\r\n            }\r\n\r\n            // var aSchedule2 = {\r\n            //   time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n            //   time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS')\r\n            // };\r\n            // this.getScheduleList.push(aSchedule2);\r\n            time2range = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n            index2++;\r\n            //console.log(time2range);\r\n          }\r\n        }\r\n      });\r\n\r\n      //this.drScheduleDialog = true;\r\n    },\r\n    getAppointment() {\r\n      if (this.doctorAppointment.doctor_id && this.doctorAppointment.schedule_date) {\r\n        var date = moment(String(this.doctorAppointment.schedule_date)).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointmentService.getDynamicDoctorWise(date, date, \"Active\", this.doctorAppointment.doctor_id).then((data) => this.getAppointmentFormatted(data.data));\r\n      }\r\n    },\r\n    getAppointmentFormatted(data) {\r\n      this.doctorAppointmentList = data;\r\n      this.viewDrSchedule();\r\n    },\r\n    isAppointmentExist(time) {\r\n      var result = false\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + time, 'MM/DD/YYYY h:mm:ss A');\r\n      var date = dateTime.format('MM/DD/YYYY h:mm:ss A');\r\n      this.doctorAppointmentList.forEach(element => {\r\n        var appoint_date = moment(String(element.appoint_date)).format(\"MM/DD/YYYY h:mm:ss A\");\r\n        if (appoint_date == date) {\r\n          result = true;\r\n        }\r\n      });\r\n\r\n      return result;\r\n    },\r\n    setAppointment(appointmentTime) {\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + appointmentTime, 'MM/DD/YYYY h:mm:ss a');\r\n      this.doctorAppointment.cdappoint_date = dateTime.format('MM/DD/YYYY h:mm:ss a');\r\n      console.log(this.doctorAppointment.cdappoint_date);\r\n      this.drScheduleDialog = false;\r\n      this.getConsultancyFeeByType();\r\n      //this.checkDrSchedule();\r\n    },\r\n    checkDrSchedule() {\r\n      this.isSchedule = false;\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.cdappoint_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.scheduleList.forEach((element) => {\r\n        var start_time1 = new Date(\"2000-01-01 \" + element.start_time1);\r\n        var end_time1 = new Date(\"2000-01-01 \" + element.end_time1);\r\n        var start_time2 = new Date(\"2000-01-01 \" + element.start_time2);\r\n        var end_time2 = new Date(\"2000-01-01 \" + element.end_time2);\r\n        var timeNow = new Date(\"2000-01-01 \" + moment(String(this.doctorAppointment.cdappoint_date)).format(\"h:mm a\"));\r\n        if (element._day_name == dayName && element.is_available) {\r\n          if ((start_time1 <= timeNow && timeNow <= end_time1) || (start_time2 <= timeNow && timeNow <= end_time2)) {\r\n            this.isSchedule = true;\r\n          }\r\n        }\r\n      });\r\n\r\n      if (!this.isSchedule) {\r\n        this.isScheduleExist = \"Schedule not exist\";\r\n      } else {\r\n        this.isScheduleExist = \"\";\r\n      }\r\n    },\r\n    async add() {\r\n      //this.checkDrSchedule();\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.doctorAppointment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_year) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_month) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_day) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.contact_no) {\r\n          return;\r\n        } else if (!this.doctorAppointment.department_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.doctor_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.appointment_type) {\r\n          return;\r\n        } else if (!this.doctorAppointment.consultancy_fee) {\r\n          return;\r\n        } else if (!this.doctorAppointment.building_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.room_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.cdappoint_date) {\r\n          return;\r\n        } else if (!this.doctorAppointment.reason) {\r\n          return;\r\n        } else if (this.isContactExist || this.isScheduleExist) {\r\n          return;\r\n        } else {\r\n          this.doctorAppointment.appoint_date = moment(\r\n            String(this.doctorAppointment.cdappoint_date)\r\n          ).format(\"YYYY-MM-DD h:mm:ss a\");\r\n\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.doctorAppointment.aPatient.age_year, currentDate.getMonth() - this.doctorAppointment.aPatient.age_month, currentDate.getDate() - this.doctorAppointment.aPatient.age_day);\r\n          this.doctorAppointment.aPatient.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n          if (!this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.add(\r\n              this.doctorAppointment, this\r\n            );\r\n\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Saved Successfully\",\r\n                life: 10000,\r\n              });\r\n              this.reset();\r\n              this.printAppointmentToken(result.data);\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          } else if (this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.put(\r\n              this.doctorAppointment, this\r\n            );\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Successfully Updated\",\r\n                life: 10000,\r\n              });\r\n              this.reset();\r\n              this.printAppointmentToken(result.data);\r\n              this.$router.push(\"/patient-doctor-appointment-list\");\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          }\r\n\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};"]}]}