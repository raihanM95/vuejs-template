{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\ot\\OTScheduleForm.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\ot\\OTScheduleForm.js","mtime":1668418195959},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9Eb2N0b3JBcHBvaW50bWVudFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L1BhdGllbnRSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSI7CmltcG9ydCBEb2N0b3JTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Eb2N0b3JTZXR1cFNlcnZpY2UiOwppbXBvcnQgQnVpbGRpbmdTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9CdWlsZGluZ1NldHVwU2VydmljZSI7CmltcG9ydCBSb29tU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUm9vbVNldHVwU2VydmljZSI7CmltcG9ydCBFbXBsb3llZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0VtcGxveWVlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9SZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAiLi4vLi4vc2NyaXB0cy92YWxpZGF0aW9uIjsKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwppbXBvcnQgR2xvYmFsU2V0dGluZ3NTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2VjdXJpdHkvR2xvYmFsU2V0dGluZ3NTZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkclNjaGVkdWxlRGlhbG9nOiBmYWxzZSwKICAgICAgaXNTY2hlZHVsZUV4aXN0OiAiIiwKICAgICAgaXNDb250YWN0RXhpc3Q6ICIiLAogICAgICBpc1ZhbGlkOiAiIiwKICAgICAgaXNFbWFpbFZhbGlkOiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGJsb29kR3JvdXBMaXN0OiBbXSwKICAgICAgZ2VuZGVyTGlzdDogW10sCiAgICAgIGRlcGFydG1lbnRMaXN0OiBbXSwKICAgICAgZG9jdG9yTGlzdDogW10sCiAgICAgIHNjaGVkdWxlTGlzdDogW10sCiAgICAgIGdldFNjaGVkdWxlTGlzdDogW10sCiAgICAgIC8vZ2V0U2NoZWR1bGVMaXN0MjogW10sCiAgICAgIGJ1aWxkaW5nTGlzdDogW10sCiAgICAgIHJvb21MaXN0OiBbXSwKICAgICAgcmVmZXJyZWRCeUxpc3Q6IFtdLAogICAgICBkb2N0b3JBcHBvaW50bWVudExpc3Q6IFtdLAogICAgICBkb2N0b3JBcHBvaW50bWVudDogewogICAgICAgIHNjaGVkdWxlX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7CiAgICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICB9LAogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluaXRGaWx0ZXJzOiBmdW5jdGlvbiBpbml0RmlsdGVycygpIHsKICAgICAgICB0aGlzLmZpbHRlcnMgPSB7CiAgICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogewogICAgICAgICAgICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELAogICAgICAgICAgICBjb25zdHJhaW50czogW3sKICAgICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHN1Ym1pdHRlZDogZmFsc2UsCiAgICAgIHR5cGVMaXN0OiBbewogICAgICAgIHRleHQ6ICJDb25zdWx0YW5jeSIsCiAgICAgICAgdmFsdWU6ICJDb25zdWx0YW5jeSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJSZXBvcnQiLAogICAgICAgIHZhbHVlOiAiUmVwb3J0IgogICAgICB9XSwKICAgICAgZ2xvYmFsU2V0dGluZzoge30KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAvLyBwYXN0IGRhdGUteWVhciBkaXNhYmxlZAogICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsKICAgIHZhciBtb250aCA9IHRvZGF5LmdldE1vbnRoKCk7CiAgICB2YXIgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7CiAgICB2YXIgcHJldk1vbnRoID0gbW9udGggPT09IDAgPyAxMSA6IG1vbnRoIC0gMDsKICAgIHZhciBwcmV2WWVhciA9IHByZXZNb250aCA9PT0gMTEgPyB5ZWFyIC0gMCA6IHllYXI7CiAgICB0aGlzLm1pbkRhdGUgPSBuZXcgRGF0ZSgpOwogICAgdGhpcy5taW5EYXRlLnNldE1vbnRoKHByZXZNb250aCk7CiAgICB0aGlzLm1pbkRhdGUuc2V0RnVsbFllYXIocHJldlllYXIpOwogICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UgPSBuZXcgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlKCk7CiAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlID0gbmV3IFBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy5kb2N0b3JTZXR1cFNlcnZpY2UgPSBuZXcgRG9jdG9yU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSA9IG5ldyBDb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuYnVpbGRpbmdTZXR1cFNlcnZpY2UgPSBuZXcgQnVpbGRpbmdTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucm9vbVNldHVwU2VydmljZSA9IG5ldyBSb29tU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmVtcGxveWVlU2V0dXBTZXJ2aWNlID0gbmV3IEVtcGxveWVlU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UgPSBuZXcgUmVmZXJyZWRCeVNldHVwU2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZSA9IG5ldyBQYXRpZW50UmVwb3J0U2VydmljZSgpOwogICAgdGhpcy52YWxpZGF0aW9uID0gbmV3IFZhbGlkYXRpb24oKTsKICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlID0gbmV3IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSgpOwogICAgdGhpcy5nbG9iYWxTZXR0aW5nc1NlcnZpY2UgPSBuZXcgR2xvYmFsU2V0dGluZ3NTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsR2VuZGVyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2VuZGVyTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEJsb29kR3JvdXAoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ibG9vZEdyb3VwTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UuZ2V0QWN0aXZlQ29tYm8oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZXBhcnRtZW50TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5idWlsZGluZ1NldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5idWlsZGluZ0xpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMucm9vbVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yb29tTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1lcmdlUmVmZXJyZWRCeUluZm8oZGF0YS5kYXRhKTsKICAgIH0pOwogICAgdGhpcy5lbXBsb3llZVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZUVtcGxveWVlSW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZURvY3RvckluZm8oZGF0YS5kYXRhKTsKICAgIH0pOwogICAgdGhpcy5nbG9iYWxTZXR0aW5nc1NlcnZpY2UuZ2V0QnlTZXR0aW5nTmFtZSgiQXBwb2ludG1lbnQgUGF5bWVudCBFeHByZXNzIikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2xvYmFsU2V0dGluZyA9IGRhdGEuZGF0YTsKICAgIH0pOwogIH0sCiAgd2F0Y2g6IHsKICAgICdkb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlJzogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5nZXRBcHBvaW50bWVudCgpOyAvL3RoaXMudmlld0RyU2NoZWR1bGUoKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcHJpbnRBcHBvaW50bWVudFRva2VuOiBmdW5jdGlvbiBwcmludEFwcG9pbnRtZW50VG9rZW4oYXBwb2ludG1lbnRJZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0QXBwb2ludG1lbnRUb2tlbkJ5QXBwb2ludG1lbnRJZChhcHBvaW50bWVudElkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBoaWRlRGlhbG9nOiBmdW5jdGlvbiBoaWRlRGlhbG9nKCkgewogICAgICB0aGlzLmRyU2NoZWR1bGVEaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuaXNTY2hlZHVsZUV4aXN0ID0gIiI7CiAgICAgIHRoaXMuaXNWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRW1haWxWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50ID0gewogICAgICAgIHNjaGVkdWxlX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7CiAgICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7IC8vdGhpcy5nZXRBcHBvaW50bWVudCgpOwoKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QgPSBbXTsKICAgICAgdGhpcy5nZXRTY2hlZHVsZUxpc3QgPSBbXTsKICAgIH0sCiAgICBtZXJnZVJlZmVycmVkQnlJbmZvOiBmdW5jdGlvbiBtZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzMy5yZWZlcnJlZEJ5TGlzdC5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubywKICAgICAgICAgIHRleHQ6IGVsZW1lbnQubWFudWFsX2NvZGUgKyAiLSIgKyBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubyArICItIiArIGVsZW1lbnQucmVmZmVyZWRfYnlfbmFtZSArICIoUmVmZXJyZWQgQnkpIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBtZXJnZURvY3RvckluZm86IGZ1bmN0aW9uIG1lcmdlRG9jdG9ySW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy90aGlzLmRvY3Rvckxpc3QgPSBkYXRhOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczQucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5kb2Nfbm8sCiAgICAgICAgICB0ZXh0OiBlbGVtZW50LmRvY19ubyArICItIiArIGVsZW1lbnQuZG9jdG9yX25hbWUgKyAiKERvY3RvcikiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgb2JqID0gZWxlbWVudDsKICAgICAgICBvYmouZG9jdG9yX2RlZ3JlZSA9ICIiOwogICAgICAgIG9iai5sc3RDb25zdWx0YW50RGVncmVlLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICBvYmouZG9jdG9yX2RlZ3JlZSArPSBlbC5jb25zdWx0YW50X2RlZ3JlZV9uYW1lICsgIi4gIjsKICAgICAgICB9KTsKICAgICAgICBvYmouZG9jdG9yX25hbWUgPSBlbGVtZW50LmRvY19ubyArICIgLSAoIiArIG9iai5kb2N0b3JfZGVncmVlICsgIikgLSAiICsgZWxlbWVudC5kb2N0b3JfbmFtZTsKCiAgICAgICAgX3RoaXM0LmRvY3Rvckxpc3QucHVzaChvYmopOwogICAgICB9KTsKICAgICAgdmFyIGFwcG9pbnRtZW50SW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFwcG9pbnRtZW50SW5mbyIpKTsKCiAgICAgIGlmIChhcHBvaW50bWVudEluZm8pIHsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50ID0gYXBwb2ludG1lbnRJbmZvOwogICAgICAgIHRoaXMuZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkKCk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FwcG9pbnRtZW50SW5mbycpOwogICAgICB9CiAgICB9LAogICAgbWVyZ2VFbXBsb3llZUluZm86IGZ1bmN0aW9uIG1lcmdlRW1wbG95ZWVJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzNS5yZWZlcnJlZEJ5TGlzdC5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmVtcF9ubywKICAgICAgICAgIHRleHQ6IGVsZW1lbnQuZW1wX25vICsgIi0iICsgZWxlbWVudC5maXJzdF9uYW1lICsgIihFbXBsb3llZSkiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbHRlckRvY3RvcnNEZXBhcnRtZW50V2lzZTogZnVuY3Rpb24gZmlsdGVyRG9jdG9yc0RlcGFydG1lbnRXaXNlKCkgewogICAgICByZXR1cm4gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuZGVwYXJ0bWVudF9pZCA9PT0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5kZXBhcnRtZW50X2lkOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBnZXRDb25zdWx0YW5jeUZlZUJ5RG9jdG9ySWQ6IGZ1bmN0aW9uIGdldENvbnN1bHRhbmN5RmVlQnlEb2N0b3JJZCgpIHsKICAgICAgdmFyIGFEb2N0b3IgPSB0aGlzLmRvY3Rvckxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5kb2N0b3JfaWQgPT09IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5maXJzdF9jb25fZmVlID0gYURvY3RvclswXS5jb25zdWx0YW5jeV9mZWU7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2Vjb25kX2Nvbl9mZWUgPSBhRG9jdG9yWzBdLnNlY29uZF9jb25fZmVlOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNlY29uZF9jb25fZmVlX2R1cmF0aW9uID0gYURvY3RvclswXS5zZWNvbmRfY29uX2ZlZV9kdXJhdGlvbjsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC50aGlyZF9jb25fZmVlID0gYURvY3RvclswXS50aGlyZF9jb25fZmVlOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRoaXJkX2Nvbl9mZWVfZHVyYXRpb24gPSBhRG9jdG9yWzBdLnRoaXJkX2Nvbl9mZWVfZHVyYXRpb247CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucmVwb3J0X3Zpc2l0X2ZlZSA9IGFEb2N0b3JbMF0ucmVwb3J0X3Zpc2l0X2ZlZTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5idWlsZGluZ19pZCA9IGFEb2N0b3JbMF0uX2J1aWxkaW5nX2lkOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnJvb21faWQgPSBhRG9jdG9yWzBdLnJvb21faWQ7CiAgICAgIHRoaXMuZ2V0RHJTY2hlZHVsZSgpOwogICAgfSwKICAgIGdldENvbnN1bHRhbmN5RmVlQnlUeXBlOiBmdW5jdGlvbiBnZXRDb25zdWx0YW5jeUZlZUJ5VHlwZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50bWVudF90eXBlID09ICJSZXBvcnQiKSB7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnJlcG9ydF92aXNpdF9mZWU7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50bWVudF90eXBlID09ICJDb25zdWx0YW5jeSIpIHsKICAgICAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZS5wcmVzY3JpcHRpb25Eb2N0b3JBbmRQYXRpZW50V2lzZSh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCwgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5wYXRpZW50X2lkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM2LmZvcm1hdFByZXZpb3VzQXBwb2ludG1lbnQoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGZvcm1hdFByZXZpb3VzQXBwb2ludG1lbnQ6IGZ1bmN0aW9uIGZvcm1hdFByZXZpb3VzQXBwb2ludG1lbnQoZGF0YSkgewogICAgICBpZiAoZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5maXJzdF9jb25fZmVlOwogICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoID09IDEpIHsKICAgICAgICB2YXIgcHJldmlvdXNBcHBvaW50bWVudERhdGUgPSBtb21lbnQoU3RyaW5nKGRhdGFbMF0ucHJlc2NyaXB0aW9uX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB2YXIgY3VycmVudEFwcG9pbnRtZW50RGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBwcmV2aW91cyA9IG1vbWVudChwcmV2aW91c0FwcG9pbnRtZW50RGF0ZSwgIllZWVktTU0tREQiKTsKICAgICAgICB2YXIgY3VycmVudCA9IG1vbWVudChjdXJyZW50QXBwb2ludG1lbnREYXRlLCAiWVlZWS1NTS1ERCIpOyAvL0RpZmZlcmVuY2UgaW4gbnVtYmVyIG9mIGRheXMKCiAgICAgICAgdmFyIGRheSA9IG1vbWVudC5kdXJhdGlvbihjdXJyZW50LmRpZmYocHJldmlvdXMpKS5hc0RheXMoKTsKCiAgICAgICAgaWYgKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2Vjb25kX2Nvbl9mZWVfZHVyYXRpb24gPj0gZGF5KSB7CiAgICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2Vjb25kX2Nvbl9mZWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5maXJzdF9jb25fZmVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkYXRhLmxlbmd0aCA9PSAyKSB7CiAgICAgICAgdmFyIHByZXZpb3VzQXBwb2ludG1lbnREYXRlMiA9IG1vbWVudChTdHJpbmcoZGF0YVswXS5wcmVzY3JpcHRpb25fZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBjdXJyZW50QXBwb2ludG1lbnREYXRlMiA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBwcmV2aW91czIgPSBtb21lbnQocHJldmlvdXNBcHBvaW50bWVudERhdGUyLCAiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBjdXJyZW50MiA9IG1vbWVudChjdXJyZW50QXBwb2ludG1lbnREYXRlMiwgIllZWVktTU0tREQiKTsgLy9EaWZmZXJlbmNlIGluIG51bWJlciBvZiBkYXlzCgogICAgICAgIHZhciBkYXkyID0gbW9tZW50LmR1cmF0aW9uKGN1cnJlbnQyLmRpZmYocHJldmlvdXMyKSkuYXNEYXlzKCk7CgogICAgICAgIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRoaXJkX2Nvbl9mZWVfZHVyYXRpb24gPj0gZGF5MikgewogICAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRoaXJkX2Nvbl9mZWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5maXJzdF9jb25fZmVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZpbHRlclJvb21zQnVpbGRpbmdXaXNlOiBmdW5jdGlvbiBmaWx0ZXJSb29tc0J1aWxkaW5nV2lzZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucm9vbUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5idWlsZGluZ19pZCA9PT0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5idWlsZGluZ19pZDsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZ2V0Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWQoZGF0YSkgewogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50ID0gZGF0YTsKCiAgICAgIGlmICghdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5wYXRpZW50X2lkKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlBhdGllbnQgbm90IEV4aXN0ISI7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudCA9IHsKICAgICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgICAgYVBhdGllbnQ6IHt9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnBhdGllbnRfaWQgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LnBhdGllbnRfaWQ7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jZGRvYiA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5kb2IpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgfQogICAgfSwKICAgIGZpbmRQYXRpZW50OiBmdW5jdGlvbiBmaW5kUGF0aWVudCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb250YWN0T3JSZWdObywgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczcuZ2V0Rm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGlzRXhpc3RDb250YWN0OiBmdW5jdGlvbiBpc0V4aXN0Q29udGFjdCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jb250YWN0X25vLm1hdGNoKC9eKDAxKShbMC05XXs5fSkkLykpIHsKICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jb250YWN0X25vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LmdldENvbnRhY3QoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkNvbnRhY3QgbnVtYmVyIG11c3Qgc3RhcnQgd2l0aCAwMSBhbmQgdGhlIHJlcXVpcmVkIGxlbmd0aCBpcyAxMSI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDb250YWN0OiBmdW5jdGlvbiBnZXRDb250YWN0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEuY29udGFjdF9ubykgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiRHVwbGljYXRlIHBob25lIG51bWJlciEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGdldEZvcm1hdHRlZFNjaGVkdWxlOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRTY2hlZHVsZShkYXRhKSB7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQuc3RhcnRfdGltZTEgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUxKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5lbmRfdGltZTEgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMSkpKS5mb3JtYXQoImg6bW0gYSIpOwogICAgICAgIGVsZW1lbnQuc3RhcnRfdGltZTIgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUyKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5lbmRfdGltZTIgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMikpKS5mb3JtYXQoImg6bW0gYSIpOwogICAgICB9KTsKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QgPSBkYXRhOyAvL3RoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CgogICAgICB0aGlzLnNob3dEclNjaGVkdWxlRGlhbG9nKCk7CiAgICB9LAogICAgZ2V0RHJTY2hlZHVsZTogZnVuY3Rpb24gZ2V0RHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZS5nZXREb2N0b3JTY2hlZHVsZUJ5SWQodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM5LmdldEZvcm1hdHRlZFNjaGVkdWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dEclNjaGVkdWxlRGlhbG9nOiBmdW5jdGlvbiBzaG93RHJTY2hlZHVsZURpYWxvZygpIHsKICAgICAgdGhpcy5nZXRBcHBvaW50bWVudCgpOwogICAgICB0aGlzLmRyU2NoZWR1bGVEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIHZpZXdEclNjaGVkdWxlOiBmdW5jdGlvbiB2aWV3RHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIGRheXMgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107CiAgICAgIHZhciBkID0gbmV3IERhdGUobW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNjaGVkdWxlX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKSk7CiAgICAgIHZhciBkYXlOYW1lID0gZGF5c1tkLmdldERheSgpXTsKICAgICAgdGhpcy5nZXRTY2hlZHVsZUxpc3QgPSBbXTsgLy90aGlzLmdldFNjaGVkdWxlTGlzdDIgPSBbXTsKCiAgICAgIHRoaXMuc2NoZWR1bGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5fZGF5X25hbWUgPT0gZGF5TmFtZSAmJiBlbGVtZW50LmlzX2F2YWlsYWJsZSkgewogICAgICAgICAgdmFyIHN0YXJ0X3RpbWUxID0gbW9tZW50KGVsZW1lbnQuc3RhcnRfdGltZTEsICJoaDptbSBhIik7CiAgICAgICAgICB2YXIgZW5kX3RpbWUxID0gbW9tZW50KGVsZW1lbnQuZW5kX3RpbWUxLCAiaGg6bW0gYSIpOwogICAgICAgICAgdmFyIHJlc3VsdDEgPSBlbmRfdGltZTEuZGlmZihzdGFydF90aW1lMSwgJ21pbnV0ZXMnKTsKICAgICAgICAgIHZhciB0aW1lMVBlclBhdGllbnQgPSBwYXJzZUludChyZXN1bHQxIC8gZWxlbWVudC50aW1lMV9wYXRpZW50X25vKTsKICAgICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgICB2YXIgdGltZTFyYW5nZSA9IHN0YXJ0X3RpbWUxOwoKICAgICAgICAgIHdoaWxlIChpbmRleCA8IGVsZW1lbnQudGltZTFfcGF0aWVudF9ubykgewogICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyk7CiAgICAgICAgICAgIHZhciBhU2NoZWR1bGUgPSB7CiAgICAgICAgICAgICAgdGltZTFSYW5nZVN0YXJ0OiBtb21lbnQodGltZTFyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpLAogICAgICAgICAgICAgIHRpbWUxUmFuZ2VFbmQ6IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMVBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgICB0aW1lMUlzQm9va2VkOiBfdGhpczEwLmlzQXBwb2ludG1lbnRFeGlzdCh0aW1lKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXMxMC5nZXRTY2hlZHVsZUxpc3QucHVzaChhU2NoZWR1bGUpOwoKICAgICAgICAgICAgdGltZTFyYW5nZSA9IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMVBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKTsKICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgc3RhcnRfdGltZTIgPSBtb21lbnQoZWxlbWVudC5zdGFydF90aW1lMiwgImhoOm1tIGEiKTsKICAgICAgICAgIHZhciBlbmRfdGltZTIgPSBtb21lbnQoZWxlbWVudC5lbmRfdGltZTIsICJoaDptbSBhIik7CiAgICAgICAgICB2YXIgcmVzdWx0MiA9IGVuZF90aW1lMi5kaWZmKHN0YXJ0X3RpbWUyLCAnbWludXRlcycpOwogICAgICAgICAgdmFyIHRpbWUyUGVyUGF0aWVudCA9IHJlc3VsdDIgLyBlbGVtZW50LnRpbWUyX3BhdGllbnRfbm87CiAgICAgICAgICB2YXIgaW5kZXgyID0gMDsKICAgICAgICAgIHZhciB0aW1lMnJhbmdlID0gc3RhcnRfdGltZTI7CgogICAgICAgICAgd2hpbGUgKGluZGV4MiA8IGVsZW1lbnQudGltZTJfcGF0aWVudF9ubykgewogICAgICAgICAgICB2YXIgdGltZTIgPSBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpOwoKICAgICAgICAgICAgaWYgKF90aGlzMTAuZ2V0U2NoZWR1bGVMaXN0Lmxlbmd0aCA+IGluZGV4MikgewogICAgICAgICAgICAgIHZhciBhU2NoZWR1bGUyID0gX3RoaXMxMC5nZXRTY2hlZHVsZUxpc3RbaW5kZXgyXTsKICAgICAgICAgICAgICBhU2NoZWR1bGUyLnRpbWUyUmFuZ2VTdGFydCA9IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyk7CiAgICAgICAgICAgICAgYVNjaGVkdWxlMi50aW1lMlJhbmdlRW5kID0gbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICAgIGFTY2hlZHVsZTIudGltZTJJc0Jvb2tlZCA9IF90aGlzMTAuaXNBcHBvaW50bWVudEV4aXN0KHRpbWUyKTsKICAgICAgICAgICAgICBfdGhpczEwLmdldFNjaGVkdWxlTGlzdFtpbmRleDJdID0gYVNjaGVkdWxlMjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgYVNjaGVkdWxlMyA9IHsKICAgICAgICAgICAgICAgIHRpbWUxUmFuZ2VTdGFydDogJycsCiAgICAgICAgICAgICAgICB0aW1lMVJhbmdlRW5kOiAnJywKICAgICAgICAgICAgICAgIHRpbWUxSXNCb29rZWQ6IHRydWUsCiAgICAgICAgICAgICAgICB0aW1lMlJhbmdlU3RhcnQ6IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyksCiAgICAgICAgICAgICAgICB0aW1lMlJhbmdlRW5kOiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTJQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJyksCiAgICAgICAgICAgICAgICB0aW1lMklzQm9va2VkOiBfdGhpczEwLmlzQXBwb2ludG1lbnRFeGlzdCh0aW1lMikKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpczEwLmdldFNjaGVkdWxlTGlzdC5wdXNoKGFTY2hlZHVsZTMpOwogICAgICAgICAgICB9IC8vIHZhciBhU2NoZWR1bGUyID0gewogICAgICAgICAgICAvLyAgIHRpbWUyUmFuZ2VTdGFydDogbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgLy8gICB0aW1lMlJhbmdlRW5kOiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTJQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJykKICAgICAgICAgICAgLy8gfTsKICAgICAgICAgICAgLy8gdGhpcy5nZXRTY2hlZHVsZUxpc3QucHVzaChhU2NoZWR1bGUyKTsKCgogICAgICAgICAgICB0aW1lMnJhbmdlID0gbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICBpbmRleDIrKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOyAvL3RoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZ2V0QXBwb2ludG1lbnQ6IGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50KCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQgJiYgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSB7CiAgICAgICAgdmFyIGRhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlLmdldER5bmFtaWNEb2N0b3JXaXNlKGRhdGUsIGRhdGUsICJBbGwiLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTEuZ2V0QXBwb2ludG1lbnRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldEFwcG9pbnRtZW50Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRBcHBvaW50bWVudEZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRMaXN0ID0gZGF0YTsKICAgICAgdGhpcy52aWV3RHJTY2hlZHVsZSgpOwogICAgfSwKICAgIGlzQXBwb2ludG1lbnRFeGlzdDogZnVuY3Rpb24gaXNBcHBvaW50bWVudEV4aXN0KHRpbWUpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlOwogICAgICB2YXIgc2NoZWR1bGVfZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICAgIHZhciBkYXRlVGltZSA9IG1vbWVudChzY2hlZHVsZV9kYXRlICsgJyAnICsgdGltZSwgJ01NL0REL1lZWVkgaDptbTpzcyBBJyk7CiAgICAgIHZhciBkYXRlID0gZGF0ZVRpbWUuZm9ybWF0KCdNTS9ERC9ZWVlZIGg6bW06c3MgQScpOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGFwcG9pbnRfZGF0ZSA9IG1vbWVudChTdHJpbmcoZWxlbWVudC5hcHBvaW50X2RhdGUpKS5mb3JtYXQoIk1NL0REL1lZWVkgaDptbTpzcyBBIik7CgogICAgICAgIGlmIChhcHBvaW50X2RhdGUgPT0gZGF0ZSkgewogICAgICAgICAgcmVzdWx0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHNldEFwcG9pbnRtZW50OiBmdW5jdGlvbiBzZXRBcHBvaW50bWVudChhcHBvaW50bWVudFRpbWUpIHsKICAgICAgdmFyIHNjaGVkdWxlX2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICB2YXIgZGF0ZVRpbWUgPSBtb21lbnQoc2NoZWR1bGVfZGF0ZSArICcgJyArIGFwcG9pbnRtZW50VGltZSwgJ01NL0REL1lZWVkgaDptbTpzcyBhJyk7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUgPSBkYXRlVGltZS5mb3JtYXQoJ01NL0REL1lZWVkgaDptbTpzcyBhJyk7CiAgICAgIHRoaXMuZHJTY2hlZHVsZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmdldENvbnN1bHRhbmN5RmVlQnlUeXBlKCk7IC8vdGhpcy5jaGVja0RyU2NoZWR1bGUoKTsKICAgIH0sCiAgICBjaGVja0RyU2NoZWR1bGU6IGZ1bmN0aW9uIGNoZWNrRHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdGhpcy5pc1NjaGVkdWxlID0gZmFsc2U7CiAgICAgIHZhciBkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddOwogICAgICB2YXIgZCA9IG5ldyBEYXRlKG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpKTsKICAgICAgdmFyIGRheU5hbWUgPSBkYXlzW2QuZ2V0RGF5KCldOwogICAgICB0aGlzLnNjaGVkdWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIHN0YXJ0X3RpbWUxID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuc3RhcnRfdGltZTEpOwogICAgICAgIHZhciBlbmRfdGltZTEgPSBuZXcgRGF0ZSgiMjAwMC0wMS0wMSAiICsgZWxlbWVudC5lbmRfdGltZTEpOwogICAgICAgIHZhciBzdGFydF90aW1lMiA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUyKTsKICAgICAgICB2YXIgZW5kX3RpbWUyID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuZW5kX3RpbWUyKTsKICAgICAgICB2YXIgdGltZU5vdyA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBtb21lbnQoU3RyaW5nKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoImg6bW0gYSIpKTsKCiAgICAgICAgaWYgKGVsZW1lbnQuX2RheV9uYW1lID09IGRheU5hbWUgJiYgZWxlbWVudC5pc19hdmFpbGFibGUpIHsKICAgICAgICAgIGlmIChzdGFydF90aW1lMSA8PSB0aW1lTm93ICYmIHRpbWVOb3cgPD0gZW5kX3RpbWUxIHx8IHN0YXJ0X3RpbWUyIDw9IHRpbWVOb3cgJiYgdGltZU5vdyA8PSBlbmRfdGltZTIpIHsKICAgICAgICAgICAgX3RoaXMxMi5pc1NjaGVkdWxlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKCF0aGlzLmlzU2NoZWR1bGUpIHsKICAgICAgICB0aGlzLmlzU2NoZWR1bGVFeGlzdCA9ICJTY2hlZHVsZSBub3QgZXhpc3QiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTY2hlZHVsZUV4aXN0ID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY3VycmVudERhdGUsIGRvYiwgcmVzdWx0LCBfcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL3RoaXMuY2hlY2tEclNjaGVkdWxlKCk7CiAgICAgICAgICAgICAgICBfdGhpczEzLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5maXJzdF9uYW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX3llYXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9tb250aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX2RheSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuY29udGFjdF9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuZGVwYXJ0bWVudF9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50bWVudF90eXBlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5yb29tX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQucmVhc29uKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1NDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEzLmlzQ29udGFjdEV4aXN0IHx8IF90aGlzMTMuaXNTY2hlZHVsZUV4aXN0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgICAgX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50X2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQgaDptbTpzcyBhIik7CiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBkb2IgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5hZ2VfeWVhciwgY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9kYXkpOwogICAgICAgICAgICAgICAgX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5kb2IgPSBtb21lbnQoU3RyaW5nKGRvYikpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50Lmludm9pY2VfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UuYWRkKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQsIF90aGlzMTMpOwoKICAgICAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmdsb2JhbFNldHRpbmcuc2V0dGluZ192YWx1ZSA9PSAiWWVzIikgewogICAgICAgICAgICAgICAgICAgIF90aGlzMTMuY29uZmlybVBheShyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnByaW50QXBwb2ludG1lbnRUb2tlbihyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuaW52b2ljZV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3MjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZS5wdXQoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudCwgX3RoaXMxMyk7CgogICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICBfcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlN1Y2Nlc3NmdWxseSBVcGRhdGVkIiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTMucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTMucHJpbnRBcHBvaW50bWVudFRva2VuKF9yZXN1bHQuZGF0YSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEzLiRyb3V0ZXIucHVzaCgiL3BhdGllbnQtZG9jdG9yLWFwcG9pbnRtZW50LWxpc3QiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogX3Jlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3NjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDc2XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjb25maXJtUGF5OiBmdW5jdGlvbiBjb25maXJtUGF5KGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybS5yZXF1aXJlKHsKICAgICAgICBtZXNzYWdlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHBheSBub3c/JywKICAgICAgICBoZWFkZXI6ICdDb25maXJtYXRpb24nLAogICAgICAgIGljb246ICdwaSBwaS1leGNsYW1hdGlvbi10cmlhbmdsZScsCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQoKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXBwb2ludG1lbnRfaWRfZm9yX3BheW1lbnQnLCBkYXRhKTsKCiAgICAgICAgICBfdGhpczE0LiRyb3V0ZXIucHVzaCgiL2FwcG9pbnRtZW50LXBheW1lbnQtY29sbGVjdGlvbiIpOwogICAgICAgIH0sCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QoKSB7CiAgICAgICAgICBfdGhpczE0LnByaW50QXBwb2ludG1lbnRUb2tlbihkYXRhKTsKCiAgICAgICAgICBfdGhpczE0LnJlc2V0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/ot/OTScheduleForm.js"],"names":["DoctorAppointmentService","PatientRegistrationService","PatientReportService","CommonService","ConsultancyDepartmentSetupService","DoctorSetupService","BuildingSetupService","RoomSetupService","EmployeeSetupService","ReferredBySetupService","Validation","AppointmentPrescriptionService","moment","FilterMatchMode","FilterOperator","GlobalSettingsService","data","drScheduleDialog","isScheduleExist","isContactExist","isValid","isEmailValid","isExist","bloodGroupList","genderList","departmentList","doctorList","scheduleList","getScheduleList","buildingList","roomList","referredByList","doctorAppointmentList","doctorAppointment","schedule_date","String","Date","format","patient_id","aPatient","age_year","age_month","age_day","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","typeList","text","globalSetting","created","today","month","getMonth","year","getFullYear","prevMonth","prevYear","minDate","setMonth","setFullYear","doctorAppointmentService","patientRegistrationService","commonService","doctorSetupService","consultancyDepartmentSetupService","buildingSetupService","roomSetupService","employeeSetupService","referredBySetupService","patientReportService","validation","appointmentPrescriptionService","globalSettingsService","GetAllGender","then","GetAllBloodGroup","getActiveCombo","getAll","mergeReferredByInfo","mergeEmployeeInfo","mergeDoctorInfo","getBySettingName","watch","immediate","handler","getAppointment","methods","printAppointmentToken","appointmentId","GetAppointmentTokenByAppointmentId","Downloadfile","hideDialog","reset","filterData","filter","el","active","forEach","element","push","registration_no","manual_code","reffered_by_name","doc_no","doctor_name","obj","doctor_degree","lstConsultantDegree","consultant_degree_name","appointmentInfo","JSON","parse","localStorage","getItem","getConsultancyFeeByDoctorId","removeItem","emp_no","first_name","filterDoctorsDepartmentWise","department_id","aDoctor","doctor_id","first_con_fee","consultancy_fee","second_con_fee","second_con_fee_duration","third_con_fee","third_con_fee_duration","report_visit_fee","building_id","_building_id","room_id","getDrSchedule","getConsultancyFeeByType","appointment_type","prescriptionDoctorAndPatientWise","formatPreviousAppointment","length","previousAppointmentDate","prescription_date","currentAppointmentDate","cdappoint_date","previous","current","day","duration","diff","asDays","previousAppointmentDate2","currentAppointmentDate2","previous2","current2","day2","filterRoomsBuildingWise","getFormatted","cddob","dob","findPatient","getByContactOrRegNo","contactOrRegNo","isExistContact","contact_no","match","getContact","getFormattedSchedule","start_time1","end_time1","start_time2","end_time2","showDrScheduleDialog","getDoctorScheduleById","viewDrSchedule","days","d","dayName","getDay","_day_name","is_available","result1","time1PerPatient","parseInt","time1_patient_no","index","time1range","time","aSchedule","time1RangeStart","time1RangeEnd","add","time1IsBooked","isAppointmentExist","result2","time2PerPatient","time2_patient_no","index2","time2range","time2","aSchedule2","time2RangeStart","time2RangeEnd","time2IsBooked","aSchedule3","date","getDynamicDoctorWise","getAppointmentFormatted","result","dateTime","appoint_date","setAppointment","appointmentTime","checkDrSchedule","isSchedule","timeNow","reason","currentDate","getDate","invoice_id","status","$toast","severity","summary","detail","life","setting_value","confirmPay","res","put","$router","$confirm","require","message","header","icon","accept","setItem","reject"],"mappings":";;;;;;AAAA,OAAOA,wBAAP,MAAqC,mDAArC;AACA,OAAOC,0BAAP,MAAuC,qDAAvC;AACA,OAAOC,oBAAP,MAAiC,2CAAjC;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,iCAAP,MAA8C,uDAA9C;AACA,OAAOC,kBAAP,MAA+B,wCAA/B;AACA,OAAOC,oBAAP,MAAiC,0CAAjC;AACA,OAAOC,gBAAP,MAA6B,sCAA7B;AACA,OAAOC,oBAAP,MAAiC,0CAAjC;AACA,OAAOC,sBAAP,MAAmC,4CAAnC;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,8BAAP,MAA2C,2DAA3C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,eAAT,EAA0BC,cAA1B,QAAgD,cAAhD;AACA,OAAOC,qBAAP,MAAkC,8CAAlC;AAGA,eAAe;AACbC,EAAAA,IADa,kBACN;AACL,WAAO;AACLC,MAAAA,gBAAgB,EAAE,KADb;AAELC,MAAAA,eAAe,EAAE,EAFZ;AAGLC,MAAAA,cAAc,EAAE,EAHX;AAILC,MAAAA,OAAO,EAAE,EAJJ;AAKLC,MAAAA,YAAY,EAAE,EALT;AAMLC,MAAAA,OAAO,EAAE,EANJ;AAOLC,MAAAA,cAAc,EAAE,EAPX;AAQLC,MAAAA,UAAU,EAAE,EARP;AASLC,MAAAA,cAAc,EAAE,EATX;AAULC,MAAAA,UAAU,EAAE,EAVP;AAWLC,MAAAA,YAAY,EAAE,EAXT;AAYLC,MAAAA,eAAe,EAAE,EAZZ;AAaL;AACAC,MAAAA,YAAY,EAAE,EAdT;AAeLC,MAAAA,QAAQ,EAAE,EAfL;AAgBLC,MAAAA,cAAc,EAAE,EAhBX;AAiBLC,MAAAA,qBAAqB,EAAE,EAjBlB;AAkBLC,MAAAA,iBAAiB,EAAE;AACjBC,QAAAA,aAAa,EAAEtB,MAAM,CAACuB,MAAM,CAAC,IAAIC,IAAJ,EAAD,CAAP,CAAN,CAA2BC,MAA3B,CACb,YADa,CADE;AAIjBC,QAAAA,UAAU,EAAE,EAJK;AAKjBC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE,GADF;AAERC,UAAAA,SAAS,EAAE,GAFH;AAGRC,UAAAA,OAAO,EAAE;AAHD;AALO,OAlBd;AA6BLC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,SAAS,EAAEjC,eAAe,CAACkC;AAA1C,SADD;AAEPC,QAAAA,IAAI,EAAE;AAAEH,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,SAAS,EAAEjC,eAAe,CAACoC;AAA1C;AAFC,OA7BJ;AAiCLC,MAAAA,WAjCK,yBAiCS;AACZ,aAAKP,OAAL,GAAe;AACbC,UAAAA,MAAM,EAAE;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,SAAS,EAAEjC,eAAe,CAACkC;AAA1C,WADK;AAEbC,UAAAA,IAAI,EAAE;AACJG,YAAAA,QAAQ,EAAErC,cAAc,CAACsC,GADrB;AAEJC,YAAAA,WAAW,EAAE,CACX;AAAER,cAAAA,KAAK,EAAE,IAAT;AAAeC,cAAAA,SAAS,EAAEjC,eAAe,CAACoC;AAA1C,aADW;AAFT;AAFO,SAAf;AASD,OA3CI;AA4CLK,MAAAA,SAAS,EAAE,KA5CN;AA6CLC,MAAAA,QAAQ,EAAE,CACR;AAAEC,QAAAA,IAAI,EAAE,aAAR;AAAuBX,QAAAA,KAAK,EAAE;AAA9B,OADQ,EAER;AAAEW,QAAAA,IAAI,EAAE,QAAR;AAAkBX,QAAAA,KAAK,EAAE;AAAzB,OAFQ,CA7CL;AAiDLY,MAAAA,aAAa,EAAE;AAjDV,KAAP;AAmDD,GArDY;AAsDbC,EAAAA,OAtDa,qBAsDH;AAAA;;AACR;AACA,QAAIC,KAAK,GAAG,IAAIvB,IAAJ,EAAZ;AACA,QAAIwB,KAAK,GAAGD,KAAK,CAACE,QAAN,EAAZ;AACA,QAAIC,IAAI,GAAGH,KAAK,CAACI,WAAN,EAAX;AACA,QAAIC,SAAS,GAAIJ,KAAK,KAAK,CAAX,GAAgB,EAAhB,GAAqBA,KAAK,GAAG,CAA7C;AACA,QAAIK,QAAQ,GAAID,SAAS,KAAK,EAAf,GAAqBF,IAAI,GAAG,CAA5B,GAAgCA,IAA/C;AACA,SAAKI,OAAL,GAAe,IAAI9B,IAAJ,EAAf;AACA,SAAK8B,OAAL,CAAaC,QAAb,CAAsBH,SAAtB;AACA,SAAKE,OAAL,CAAaE,WAAb,CAAyBH,QAAzB;AAEA,SAAKI,wBAAL,GAAgC,IAAIrE,wBAAJ,EAAhC;AACA,SAAKsE,0BAAL,GAAkC,IAAIrE,0BAAJ,EAAlC;AACA,SAAKsE,aAAL,GAAqB,IAAIpE,aAAJ,EAArB;AACA,SAAKqE,kBAAL,GAA0B,IAAInE,kBAAJ,EAA1B;AACA,SAAKoE,iCAAL,GAAyC,IAAIrE,iCAAJ,EAAzC;AACA,SAAKsE,oBAAL,GAA4B,IAAIpE,oBAAJ,EAA5B;AACA,SAAKqE,gBAAL,GAAwB,IAAIpE,gBAAJ,EAAxB;AACA,SAAKqE,oBAAL,GAA4B,IAAIpE,oBAAJ,EAA5B;AACA,SAAKqE,sBAAL,GAA8B,IAAIpE,sBAAJ,EAA9B;AACA,SAAKqE,oBAAL,GAA4B,IAAI5E,oBAAJ,EAA5B;AACA,SAAK6E,UAAL,GAAkB,IAAIrE,UAAJ,EAAlB;AACA,SAAKsE,8BAAL,GAAsC,IAAIrE,8BAAJ,EAAtC;AACA,SAAKsE,qBAAL,GAA6B,IAAIlE,qBAAJ,EAA7B;AAEA,SAAKwD,aAAL,CACGW,YADH,GAEGC,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAW,KAAI,CAACQ,UAAL,GAAkBR,IAAI,CAACA,IAAlC;AAAA,KAFR;AAIA,SAAKuD,aAAL,CACGa,gBADH,GAEGD,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAW,KAAI,CAACO,cAAL,GAAsBP,IAAI,CAACA,IAAtC;AAAA,KAFR;AAIA,SAAKyD,iCAAL,CACGY,cADH,GAEGF,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAW,KAAI,CAACS,cAAL,GAAsBT,IAAI,CAACA,IAAtC;AAAA,KAFR;AAIA,SAAK0D,oBAAL,CACGY,MADH,GAEGH,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAW,KAAI,CAACa,YAAL,GAAoBb,IAAI,CAACA,IAApC;AAAA,KAFR;AAIA,SAAK2D,gBAAL,CAAsBW,MAAtB,GAA+BH,IAA/B,CAAoC,UAACnE,IAAD;AAAA,aAAW,KAAI,CAACc,QAAL,GAAgBd,IAAI,CAACA,IAAhC;AAAA,KAApC;AAEA,SAAK6D,sBAAL,CACGS,MADH,GAEGH,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAU,KAAI,CAACuE,mBAAL,CAAyBvE,IAAI,CAACA,IAA9B,CAAV;AAAA,KAFR;AAIA,SAAK4D,oBAAL,CACGU,MADH,GAEGH,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAU,KAAI,CAACwE,iBAAL,CAAuBxE,IAAI,CAACA,IAA5B,CAAV;AAAA,KAFR;AAIA,SAAKwD,kBAAL,CACGc,MADH,GAEGH,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAU,KAAI,CAACyE,eAAL,CAAqBzE,IAAI,CAACA,IAA1B,CAAV;AAAA,KAFR;AAIA,SAAKiE,qBAAL,CACGS,gBADH,CACoB,6BADpB,EAEGP,IAFH,CAEQ,UAACnE,IAAD;AAAA,aAAW,KAAI,CAACyC,aAAL,GAAqBzC,IAAI,CAACA,IAArC;AAAA,KAFR;AAID,GAjHY;AAkHb2E,EAAAA,KAAK,EAAE;AACL,uCAAmC;AACjCC,MAAAA,SAAS,EAAE,IADsB;AAEjCC,MAAAA,OAFiC,qBAEvB;AACR,aAAKC,cAAL,GADQ,CAER;AACD;AALgC;AAD9B,GAlHM;AA2HbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,qBADO,iCACeC,aADf,EAC8B;AAAA;;AACnC,WAAKnB,oBAAL,CAA0BoB,kCAA1B,CAA6DD,aAA7D,EAA4E,IAA5E,EAAkFd,IAAlF,CAAuF,UAACnE,IAAD;AAAA,eAAW,MAAI,CAACuD,aAAL,CAAmB4B,YAAnB,CAAgCnF,IAAI,CAACA,IAArC,CAAX;AAAA,OAAvF;AACD,KAHM;AAIPoF,IAAAA,UAJO,wBAIM;AACX,WAAKnF,gBAAL,GAAwB,KAAxB;AACD,KANM;AAOPoF,IAAAA,KAPO,mBAOC;AACN,WAAKnF,eAAL,GAAuB,EAAvB;AACA,WAAKE,OAAL,GAAe,EAAf;AACA,WAAKC,YAAL,GAAoB,EAApB;AACA,WAAKC,OAAL,GAAe,EAAf;AACA,WAAKH,cAAL,GAAsB,EAAtB;AACA,WAAKc,iBAAL,GAAyB;AACvBC,QAAAA,aAAa,EAAEtB,MAAM,CAACuB,MAAM,CAAC,IAAIC,IAAJ,EAAD,CAAP,CAAN,CAA2BC,MAA3B,CACb,YADa,CADQ;AAIvBC,QAAAA,UAAU,EAAE,EAJW;AAKvBC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,QAAQ,EAAE,GADF;AAERC,UAAAA,SAAS,EAAE,GAFH;AAGRC,UAAAA,OAAO,EAAE;AAHD;AALa,OAAzB;AAWA,WAAKY,SAAL,GAAiB,KAAjB,CAjBM,CAkBN;;AACA,WAAK3B,YAAL,GAAoB,EAApB;AACA,WAAKC,eAAL,GAAuB,EAAvB;AACD,KA5BM;AA6BP2D,IAAAA,mBA7BO,+BA6BavE,IA7Bb,EA6BmB;AAAA;;AACxB,UAAIsF,UAAU,GAAGtF,IAAI,CAACuF,MAAL,CAAY,UAAUC,EAAV,EAAc;AACzC,eAAOA,EAAE,CAACC,MAAH,IAAa,IAApB;AACD,OAFgB,EAEd,IAFc,CAAjB;AAGAH,MAAAA,UAAU,CAACI,OAAX,CAAmB,UAACC,OAAD,EAAa;AAC9B,QAAA,MAAI,CAAC5E,cAAL,CAAoB6E,IAApB,CAAyB;AACvB/D,UAAAA,KAAK,EAAE8D,OAAO,CAACE,eADQ;AAEvBrD,UAAAA,IAAI,EAAEmD,OAAO,CAACG,WAAR,GAAsB,GAAtB,GAA4BH,OAAO,CAACE,eAApC,GAAsD,GAAtD,GAA4DF,OAAO,CAACI,gBAApE,GAAuF;AAFtE,SAAzB;AAID,OALD;AAMD,KAvCM;AAwCPtB,IAAAA,eAxCO,2BAwCSzE,IAxCT,EAwCe;AAAA;;AACpB;AACAA,MAAAA,IAAI,CAAC0F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxB,QAAA,MAAI,CAAC5E,cAAL,CAAoB6E,IAApB,CAAyB;AACvB/D,UAAAA,KAAK,EAAE8D,OAAO,CAACK,MADQ;AAEvBxD,UAAAA,IAAI,EAAEmD,OAAO,CAACK,MAAR,GAAiB,GAAjB,GAAuBL,OAAO,CAACM,WAA/B,GAA6C;AAF5B,SAAzB;AAID,OALD;AAOAjG,MAAAA,IAAI,CAAC0F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxB,YAAIO,GAAG,GAAGP,OAAV;AACAO,QAAAA,GAAG,CAACC,aAAJ,GAAoB,EAApB;AACAD,QAAAA,GAAG,CAACE,mBAAJ,CAAwBV,OAAxB,CAAgC,UAACF,EAAD,EAAQ;AACtCU,UAAAA,GAAG,CAACC,aAAJ,IAAqBX,EAAE,CAACa,sBAAH,GAA4B,IAAjD;AACD,SAFD;AAIAH,QAAAA,GAAG,CAACD,WAAJ,GAAkBN,OAAO,CAACK,MAAR,GAAiB,MAAjB,GAA0BE,GAAG,CAACC,aAA9B,GAA8C,MAA9C,GAAuDR,OAAO,CAACM,WAAjF;;AACA,QAAA,MAAI,CAACvF,UAAL,CAAgBkF,IAAhB,CAAqBM,GAArB;AACD,OATD;AAWA,UAAII,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,CAAtB;;AACA,UAAIJ,eAAJ,EAAqB;AACnB,aAAKrF,iBAAL,GAAyBqF,eAAzB;AACA,aAAKK,2BAAL;AACAF,QAAAA,YAAY,CAACG,UAAb,CAAwB,iBAAxB;AACD;AACF,KAlEM;AAmEPpC,IAAAA,iBAnEO,6BAmEWxE,IAnEX,EAmEiB;AAAA;;AACtB,UAAIsF,UAAU,GAAGtF,IAAI,CAACuF,MAAL,CAAY,UAAUC,EAAV,EAAc;AACzC,eAAOA,EAAE,CAACC,MAAH,IAAa,IAApB;AACD,OAFgB,EAEd,IAFc,CAAjB;AAGAH,MAAAA,UAAU,CAACI,OAAX,CAAmB,UAACC,OAAD,EAAa;AAC9B,QAAA,MAAI,CAAC5E,cAAL,CAAoB6E,IAApB,CAAyB;AACvB/D,UAAAA,KAAK,EAAE8D,OAAO,CAACkB,MADQ;AAEvBrE,UAAAA,IAAI,EAAEmD,OAAO,CAACkB,MAAR,GAAiB,GAAjB,GAAuBlB,OAAO,CAACmB,UAA/B,GAA4C;AAF3B,SAAzB;AAID,OALD;AAMD,KA7EM;AA8EPC,IAAAA,2BA9EO,yCA8EuB;AAC5B,aAAO,KAAKrG,UAAL,CAAgB6E,MAAhB,CAAuB,UAAUC,EAAV,EAAc;AAC1C,eAAOA,EAAE,CAACwB,aAAH,KAAqB,KAAK/F,iBAAL,CAAuB+F,aAAnD;AACD,OAFM,EAEJ,IAFI,CAAP;AAGD,KAlFM;AAmFPL,IAAAA,2BAnFO,yCAmFuB;AAC5B,UAAIM,OAAO,GAAG,KAAKvG,UAAL,CAAgB6E,MAAhB,CAAuB,UAAUC,EAAV,EAAc;AACjD,eAAOA,EAAE,CAAC0B,SAAH,KAAiB,KAAKjG,iBAAL,CAAuBiG,SAA/C;AACD,OAFa,EAEX,IAFW,CAAd;AAIA,WAAKjG,iBAAL,CAAuBkG,aAAvB,GAAuCF,OAAO,CAAC,CAAD,CAAP,CAAWG,eAAlD;AACA,WAAKnG,iBAAL,CAAuBoG,cAAvB,GAAwCJ,OAAO,CAAC,CAAD,CAAP,CAAWI,cAAnD;AACA,WAAKpG,iBAAL,CAAuBqG,uBAAvB,GAAiDL,OAAO,CAAC,CAAD,CAAP,CAAWK,uBAA5D;AACA,WAAKrG,iBAAL,CAAuBsG,aAAvB,GAAuCN,OAAO,CAAC,CAAD,CAAP,CAAWM,aAAlD;AACA,WAAKtG,iBAAL,CAAuBuG,sBAAvB,GAAgDP,OAAO,CAAC,CAAD,CAAP,CAAWO,sBAA3D;AACA,WAAKvG,iBAAL,CAAuBwG,gBAAvB,GAA0CR,OAAO,CAAC,CAAD,CAAP,CAAWQ,gBAArD;AACA,WAAKxG,iBAAL,CAAuByG,WAAvB,GAAqCT,OAAO,CAAC,CAAD,CAAP,CAAWU,YAAhD;AACA,WAAK1G,iBAAL,CAAuB2G,OAAvB,GAAiCX,OAAO,CAAC,CAAD,CAAP,CAAWW,OAA5C;AAEA,WAAKC,aAAL;AACD,KAlGM;AAmGPC,IAAAA,uBAnGO,qCAmGmB;AAAA;;AACxB,UAAI,KAAK7G,iBAAL,CAAuB8G,gBAAvB,IAA2C,QAA/C,EAAyD;AACvD,aAAK9G,iBAAL,CAAuBmG,eAAvB,GAAyC,KAAKnG,iBAAL,CAAuBwG,gBAAhE;AACD,OAFD,MAEO,IAAI,KAAKxG,iBAAL,CAAuB8G,gBAAvB,IAA2C,aAA/C,EAA8D;AACnE,aAAK/D,8BAAL,CAAoCgE,gCAApC,CAAqE,KAAK/G,iBAAL,CAAuBiG,SAA5F,EAAuG,KAAKjG,iBAAL,CAAuBK,UAA9H,EAA0I,IAA1I,EAAgJ6C,IAAhJ,CAAqJ,UAACnE,IAAD;AAAA,iBAAU,MAAI,CAACiI,yBAAL,CAA+BjI,IAAI,CAACA,IAApC,CAAV;AAAA,SAArJ;AACD;AACF,KAzGM;AA0GPiI,IAAAA,yBA1GO,qCA0GmBjI,IA1GnB,EA0GyB;AAC9B,UAAIA,IAAI,CAACkI,MAAL,IAAe,CAAnB,EAAsB;AACpB,aAAKjH,iBAAL,CAAuBmG,eAAvB,GAAyC,KAAKnG,iBAAL,CAAuBkG,aAAhE;AACD,OAFD,MAEO,IAAInH,IAAI,CAACkI,MAAL,IAAe,CAAnB,EAAsB;AAC3B,YAAIC,uBAAuB,GAAGvI,MAAM,CAACuB,MAAM,CAACnB,IAAI,CAAC,CAAD,CAAJ,CAAQoI,iBAAT,CAAP,CAAN,CAA0C/G,MAA1C,CAAiD,YAAjD,CAA9B;AACA,YAAIgH,sBAAsB,GAAGzI,MAAM,CAACuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBqH,cAAxB,CAAP,CAAN,CAAsDjH,MAAtD,CAA6D,YAA7D,CAA7B;AACA,YAAIkH,QAAQ,GAAG3I,MAAM,CAACuI,uBAAD,EAA0B,YAA1B,CAArB;AACA,YAAIK,OAAO,GAAG5I,MAAM,CAACyI,sBAAD,EAAyB,YAAzB,CAApB,CAJ2B,CAK3B;;AACA,YAAII,GAAG,GAAG7I,MAAM,CAAC8I,QAAP,CAAgBF,OAAO,CAACG,IAAR,CAAaJ,QAAb,CAAhB,EAAwCK,MAAxC,EAAV;;AACA,YAAI,KAAK3H,iBAAL,CAAuBqG,uBAAvB,IAAkDmB,GAAtD,EAA2D;AACzD,eAAKxH,iBAAL,CAAuBmG,eAAvB,GAAyC,KAAKnG,iBAAL,CAAuBoG,cAAhE;AACD,SAFD,MAEO;AACL,eAAKpG,iBAAL,CAAuBmG,eAAvB,GAAyC,KAAKnG,iBAAL,CAAuBkG,aAAhE;AACD;AACF,OAZM,MAYA,IAAInH,IAAI,CAACkI,MAAL,IAAe,CAAnB,EAAsB;AAC3B,YAAIW,wBAAwB,GAAGjJ,MAAM,CAACuB,MAAM,CAACnB,IAAI,CAAC,CAAD,CAAJ,CAAQoI,iBAAT,CAAP,CAAN,CAA0C/G,MAA1C,CAAiD,YAAjD,CAA/B;AACA,YAAIyH,uBAAuB,GAAGlJ,MAAM,CAACuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBqH,cAAxB,CAAP,CAAN,CAAsDjH,MAAtD,CAA6D,YAA7D,CAA9B;AACA,YAAI0H,SAAS,GAAGnJ,MAAM,CAACiJ,wBAAD,EAA2B,YAA3B,CAAtB;AACA,YAAIG,QAAQ,GAAGpJ,MAAM,CAACkJ,uBAAD,EAA0B,YAA1B,CAArB,CAJ2B,CAK3B;;AACA,YAAIG,IAAI,GAAGrJ,MAAM,CAAC8I,QAAP,CAAgBM,QAAQ,CAACL,IAAT,CAAcI,SAAd,CAAhB,EAA0CH,MAA1C,EAAX;;AACA,YAAI,KAAK3H,iBAAL,CAAuBuG,sBAAvB,IAAiDyB,IAArD,EAA2D;AACzD,eAAKhI,iBAAL,CAAuBmG,eAAvB,GAAyC,KAAKnG,iBAAL,CAAuBsG,aAAhE;AACD,SAFD,MAEO;AACL,eAAKtG,iBAAL,CAAuBmG,eAAvB,GAAyC,KAAKnG,iBAAL,CAAuBkG,aAAhE;AACD;AACF;AACF,KAtIM;AAuIP+B,IAAAA,uBAvIO,qCAuImB;AACxB,aAAO,KAAKpI,QAAL,CAAcyE,MAAd,CAAqB,UAAUC,EAAV,EAAc;AACxC,eAAOA,EAAE,CAACkC,WAAH,KAAmB,KAAKzG,iBAAL,CAAuByG,WAAjD;AACD,OAFM,EAEJ,IAFI,CAAP;AAGD,KA3IM;AA4IPyB,IAAAA,YA5IO,wBA4IMnJ,IA5IN,EA4IY;AACjB,WAAKiB,iBAAL,CAAuBM,QAAvB,GAAkCvB,IAAlC;;AACA,UAAI,CAAC,KAAKiB,iBAAL,CAAuBM,QAAvB,CAAgCD,UAArC,EAAiD;AAC/C,aAAKhB,OAAL,GAAe,oBAAf;AACA,aAAKW,iBAAL,GAAyB;AACvBK,UAAAA,UAAU,EAAE,EADW;AAEvBC,UAAAA,QAAQ,EAAE;AAFa,SAAzB;AAID,OAND,MAMO;AACL,aAAKjB,OAAL,GAAe,EAAf;AAEA,aAAKW,iBAAL,CAAuBK,UAAvB,GACE,KAAKL,iBAAL,CAAuBM,QAAvB,CAAgCD,UADlC;AAEA,aAAKL,iBAAL,CAAuBM,QAAvB,CAAgC6H,KAAhC,GAAwCxJ,MAAM,CAC5CuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBM,QAAvB,CAAgC8H,GAAjC,CADsC,CAAN,CAEtChI,MAFsC,CAE/B,YAF+B,CAAxC;AAGD;AACF,KA7JM;AA8JPiI,IAAAA,WA9JO,yBA8JO;AAAA;;AACZ,WAAKhG,0BAAL,CACGiG,mBADH,CACuB,KAAKtI,iBAAL,CAAuBuI,cAD9C,EAC8D,IAD9D,EAEGrF,IAFH,CAEQ,UAACnE,IAAD;AAAA,eAAU,MAAI,CAACmJ,YAAL,CAAkBnJ,IAAI,CAACA,IAAvB,CAAV;AAAA,OAFR;AAGD,KAlKM;AAmKPyJ,IAAAA,cAnKO,4BAmKU;AAAA;;AACf,UACE,KAAKxI,iBAAL,CAAuBM,QAAvB,CAAgCmI,UAAhC,CAA2CC,KAA3C,CAAiD,kBAAjD,CADF,EAEE;AACA,aAAKrG,0BAAL,CACGiG,mBADH,CACuB,KAAKtI,iBAAL,CAAuBM,QAAvB,CAAgCmI,UADvD,EACmE,IADnE,EAEGvF,IAFH,CAEQ,UAACnE,IAAD;AAAA,iBAAU,MAAI,CAAC4J,UAAL,CAAgB5J,IAAI,CAACA,IAArB,CAAV;AAAA,SAFR;AAGD,OAND,MAMO;AACL,aAAKG,cAAL,GACE,iEADF;AAED;AACF,KA9KM;AA+KPyJ,IAAAA,UA/KO,sBA+KI5J,IA/KJ,EA+KU;AACf,UAAIA,IAAI,CAAC0J,UAAT,EAAqB;AACnB,aAAKvJ,cAAL,GAAsB,yBAAtB;AACD,OAFD,MAEO;AACL,aAAKA,cAAL,GAAsB,EAAtB;AACD;AACF,KArLM;AAsLP0J,IAAAA,oBAtLO,gCAsLc7J,IAtLd,EAsLoB;AACzBA,MAAAA,IAAI,CAAC0F,OAAL,CAAa,UAACC,OAAD,EAAa;AACxBA,QAAAA,OAAO,CAACmE,WAAR,GAAsBlK,MAAM,CAC1BuB,MAAM,CAAC,IAAIC,IAAJ,CAAS,gBAAgBuE,OAAO,CAACmE,WAAjC,CAAD,CADoB,CAAN,CAEpBzI,MAFoB,CAEb,QAFa,CAAtB;AAGAsE,QAAAA,OAAO,CAACoE,SAAR,GAAoBnK,MAAM,CACxBuB,MAAM,CAAC,IAAIC,IAAJ,CAAS,gBAAgBuE,OAAO,CAACoE,SAAjC,CAAD,CADkB,CAAN,CAElB1I,MAFkB,CAEX,QAFW,CAApB;AAGAsE,QAAAA,OAAO,CAACqE,WAAR,GAAsBpK,MAAM,CAC1BuB,MAAM,CAAC,IAAIC,IAAJ,CAAS,gBAAgBuE,OAAO,CAACqE,WAAjC,CAAD,CADoB,CAAN,CAEpB3I,MAFoB,CAEb,QAFa,CAAtB;AAGAsE,QAAAA,OAAO,CAACsE,SAAR,GAAoBrK,MAAM,CACxBuB,MAAM,CAAC,IAAIC,IAAJ,CAAS,gBAAgBuE,OAAO,CAACsE,SAAjC,CAAD,CADkB,CAAN,CAElB5I,MAFkB,CAEX,QAFW,CAApB;AAGD,OAbD;AAeA,WAAKV,YAAL,GAAoBX,IAApB,CAhByB,CAiBzB;;AACA,WAAKkK,oBAAL;AACD,KAzMM;AA0MPrC,IAAAA,aA1MO,2BA0MS;AAAA;;AACd,WAAKrE,kBAAL,CACG2G,qBADH,CACyB,KAAKlJ,iBAAL,CAAuBiG,SADhD,EAEG/C,IAFH,CAEQ,UAACnE,IAAD;AAAA,eAAU,MAAI,CAAC6J,oBAAL,CAA0B7J,IAAI,CAACA,IAA/B,CAAV;AAAA,OAFR;AAGD,KA9MM;AA+MPkK,IAAAA,oBA/MO,kCA+MgB;AACrB,WAAKpF,cAAL;AACA,WAAK7E,gBAAL,GAAwB,IAAxB;AACD,KAlNM;AAmNPmK,IAAAA,cAnNO,4BAmNU;AAAA;;AACf,UAAIC,IAAI,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,WAAhC,EAA6C,UAA7C,EAAyD,QAAzD,EAAmE,UAAnE,CAAX;AACA,UAAIC,CAAC,GAAG,IAAIlJ,IAAJ,CAASxB,MAAM,CACrBuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBC,aAAxB,CADe,CAAN,CAEfG,MAFe,CAER,YAFQ,CAAT,CAAR;AAGA,UAAIkJ,OAAO,GAAGF,IAAI,CAACC,CAAC,CAACE,MAAF,EAAD,CAAlB;AAEA,WAAK5J,eAAL,GAAuB,EAAvB,CAPe,CAQf;;AACA,WAAKD,YAAL,CAAkB+E,OAAlB,CAA0B,UAACC,OAAD,EAAa;AACrC,YAAIA,OAAO,CAAC8E,SAAR,IAAqBF,OAArB,IAAgC5E,OAAO,CAAC+E,YAA5C,EAA0D;AACxD,cAAIZ,WAAW,GAAGlK,MAAM,CAAC+F,OAAO,CAACmE,WAAT,EAAsB,SAAtB,CAAxB;AACA,cAAIC,SAAS,GAAGnK,MAAM,CAAC+F,OAAO,CAACoE,SAAT,EAAoB,SAApB,CAAtB;AACA,cAAIY,OAAO,GAAGZ,SAAS,CAACpB,IAAV,CAAemB,WAAf,EAA4B,SAA5B,CAAd;AACA,cAAIc,eAAe,GAAGC,QAAQ,CAACF,OAAO,GAAGhF,OAAO,CAACmF,gBAAnB,CAA9B;AAEA,cAAIC,KAAK,GAAG,CAAZ;AACA,cAAIC,UAAU,GAAGlB,WAAjB;;AACA,iBAAOiB,KAAK,GAAGpF,OAAO,CAACmF,gBAAvB,EAAyC;AACvC,gBAAIG,IAAI,GAAGrL,MAAM,CAACoL,UAAD,EAAa,SAAb,CAAN,CAA8B3J,MAA9B,CAAqC,KAArC,CAAX;AAEA,gBAAI6J,SAAS,GAAG;AACdC,cAAAA,eAAe,EAAEvL,MAAM,CAACoL,UAAD,EAAa,SAAb,CAAN,CAA8B3J,MAA9B,CAAqC,KAArC,CADH;AAEd+J,cAAAA,aAAa,EAAExL,MAAM,CAACoL,UAAD,EAAa,SAAb,CAAN,CAA8BK,GAA9B,CAAkCT,eAAlC,EAAmD,SAAnD,EAA8DvJ,MAA9D,CAAqE,KAArE,CAFD;AAGdiK,cAAAA,aAAa,EAAE,OAAI,CAACC,kBAAL,CAAwBN,IAAxB;AAHD,aAAhB;;AAMA,YAAA,OAAI,CAACrK,eAAL,CAAqBgF,IAArB,CAA0BsF,SAA1B;;AACAF,YAAAA,UAAU,GAAGpL,MAAM,CAACoL,UAAD,EAAa,SAAb,CAAN,CAA8BK,GAA9B,CAAkCT,eAAlC,EAAmD,SAAnD,EAA8DvJ,MAA9D,CAAqE,KAArE,CAAb;AACA0J,YAAAA,KAAK;AACN;;AAED,cAAIf,WAAW,GAAGpK,MAAM,CAAC+F,OAAO,CAACqE,WAAT,EAAsB,SAAtB,CAAxB;AACA,cAAIC,SAAS,GAAGrK,MAAM,CAAC+F,OAAO,CAACsE,SAAT,EAAoB,SAApB,CAAtB;AACA,cAAIuB,OAAO,GAAGvB,SAAS,CAACtB,IAAV,CAAeqB,WAAf,EAA4B,SAA5B,CAAd;AACA,cAAIyB,eAAe,GAAGD,OAAO,GAAG7F,OAAO,CAAC+F,gBAAxC;AAEA,cAAIC,MAAM,GAAG,CAAb;AACA,cAAIC,UAAU,GAAG5B,WAAjB;;AACA,iBAAO2B,MAAM,GAAGhG,OAAO,CAAC+F,gBAAxB,EAA0C;AACxC,gBAAIG,KAAK,GAAGjM,MAAM,CAACgM,UAAD,EAAa,SAAb,CAAN,CAA8BvK,MAA9B,CAAqC,KAArC,CAAZ;;AACA,gBAAI,OAAI,CAACT,eAAL,CAAqBsH,MAArB,GAA8ByD,MAAlC,EAA0C;AACxC,kBAAIG,UAAU,GAAG,OAAI,CAAClL,eAAL,CAAqB+K,MAArB,CAAjB;AACAG,cAAAA,UAAU,CAACC,eAAX,GAA6BnM,MAAM,CAACgM,UAAD,EAAa,SAAb,CAAN,CAA8BvK,MAA9B,CAAqC,KAArC,CAA7B;AACAyK,cAAAA,UAAU,CAACE,aAAX,GAA2BpM,MAAM,CAACgM,UAAD,EAAa,SAAb,CAAN,CAA8BP,GAA9B,CAAkCI,eAAlC,EAAmD,SAAnD,EAA8DpK,MAA9D,CAAqE,KAArE,CAA3B;AACAyK,cAAAA,UAAU,CAACG,aAAX,GAA2B,OAAI,CAACV,kBAAL,CAAwBM,KAAxB,CAA3B;AACA,cAAA,OAAI,CAACjL,eAAL,CAAqB+K,MAArB,IAA+BG,UAA/B;AACD,aAND,MAMO;AACL,kBAAII,UAAU,GAAG;AACff,gBAAAA,eAAe,EAAE,EADF;AAEfC,gBAAAA,aAAa,EAAE,EAFA;AAGfE,gBAAAA,aAAa,EAAE,IAHA;AAIfS,gBAAAA,eAAe,EAAEnM,MAAM,CAACgM,UAAD,EAAa,SAAb,CAAN,CAA8BvK,MAA9B,CAAqC,KAArC,CAJF;AAKf2K,gBAAAA,aAAa,EAAEpM,MAAM,CAACgM,UAAD,EAAa,SAAb,CAAN,CAA8BP,GAA9B,CAAkCI,eAAlC,EAAmD,SAAnD,EAA8DpK,MAA9D,CAAqE,KAArE,CALA;AAMf4K,gBAAAA,aAAa,EAAE,OAAI,CAACV,kBAAL,CAAwBM,KAAxB;AANA,eAAjB;;AAQA,cAAA,OAAI,CAACjL,eAAL,CAAqBgF,IAArB,CAA0BsG,UAA1B;AACD,aAlBuC,CAoBxC;AACA;AACA;AACA;AACA;;;AACAN,YAAAA,UAAU,GAAGhM,MAAM,CAACgM,UAAD,EAAa,SAAb,CAAN,CAA8BP,GAA9B,CAAkCI,eAAlC,EAAmD,SAAnD,EAA8DpK,MAA9D,CAAqE,KAArE,CAAb;AACAsK,YAAAA,MAAM;AACP;AACF;AACF,OA3DD,EATe,CAsEf;AACD,KA1RM;AA2RP7G,IAAAA,cA3RO,4BA2RU;AAAA;;AACf,UAAI,KAAK7D,iBAAL,CAAuBiG,SAAvB,IAAoC,KAAKjG,iBAAL,CAAuBC,aAA/D,EAA8E;AAC5E,YAAIiL,IAAI,GAAGvM,MAAM,CAACuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBC,aAAxB,CAAP,CAAN,CAAqDG,MAArD,CAA4D,YAA5D,CAAX;AACA,aAAKgC,wBAAL,CAA8B+I,oBAA9B,CAAmDD,IAAnD,EAAyDA,IAAzD,EAA+D,KAA/D,EAAsE,KAAKlL,iBAAL,CAAuBiG,SAA7F,EAAwG/C,IAAxG,CAA6G,UAACnE,IAAD;AAAA,iBAAU,OAAI,CAACqM,uBAAL,CAA6BrM,IAAI,CAACA,IAAlC,CAAV;AAAA,SAA7G;AACD;AACF,KAhSM;AAiSPqM,IAAAA,uBAjSO,mCAiSiBrM,IAjSjB,EAiSuB;AAC5B,WAAKgB,qBAAL,GAA6BhB,IAA7B;AACA,WAAKoK,cAAL;AACD,KApSM;AAqSPmB,IAAAA,kBArSO,8BAqSYN,IArSZ,EAqSkB;AACvB,UAAIqB,MAAM,GAAG,KAAb;AACA,UAAIpL,aAAa,GAAGtB,MAAM,CACxBuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBC,aAAxB,CADkB,CAAN,CAElBG,MAFkB,CAEX,YAFW,CAApB;AAGA,UAAIkL,QAAQ,GAAG3M,MAAM,CAACsB,aAAa,GAAG,GAAhB,GAAsB+J,IAAvB,EAA6B,sBAA7B,CAArB;AACA,UAAIkB,IAAI,GAAGI,QAAQ,CAAClL,MAAT,CAAgB,sBAAhB,CAAX;AACA,WAAKL,qBAAL,CAA2B0E,OAA3B,CAAmC,UAAAC,OAAO,EAAI;AAC5C,YAAI6G,YAAY,GAAG5M,MAAM,CAACuB,MAAM,CAACwE,OAAO,CAAC6G,YAAT,CAAP,CAAN,CAAqCnL,MAArC,CAA4C,sBAA5C,CAAnB;;AACA,YAAImL,YAAY,IAAIL,IAApB,EAA0B;AACxBG,UAAAA,MAAM,GAAG,IAAT;AACD;AACF,OALD;AAOA,aAAOA,MAAP;AACD,KApTM;AAqTPG,IAAAA,cArTO,0BAqTQC,eArTR,EAqTyB;AAC9B,UAAIxL,aAAa,GAAGtB,MAAM,CACxBuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBC,aAAxB,CADkB,CAAN,CAElBG,MAFkB,CAEX,YAFW,CAApB;AAGA,UAAIkL,QAAQ,GAAG3M,MAAM,CAACsB,aAAa,GAAG,GAAhB,GAAsBwL,eAAvB,EAAwC,sBAAxC,CAArB;AACA,WAAKzL,iBAAL,CAAuBqH,cAAvB,GAAwCiE,QAAQ,CAAClL,MAAT,CAAgB,sBAAhB,CAAxC;AACA,WAAKpB,gBAAL,GAAwB,KAAxB;AACA,WAAK6H,uBAAL,GAP8B,CAQ9B;AACD,KA9TM;AA+TP6E,IAAAA,eA/TO,6BA+TW;AAAA;;AAChB,WAAKC,UAAL,GAAkB,KAAlB;AACA,UAAIvC,IAAI,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,WAAhC,EAA6C,UAA7C,EAAyD,QAAzD,EAAmE,UAAnE,CAAX;AACA,UAAIC,CAAC,GAAG,IAAIlJ,IAAJ,CAASxB,MAAM,CACrBuB,MAAM,CAAC,KAAKF,iBAAL,CAAuBqH,cAAxB,CADe,CAAN,CAEfjH,MAFe,CAER,YAFQ,CAAT,CAAR;AAGA,UAAIkJ,OAAO,GAAGF,IAAI,CAACC,CAAC,CAACE,MAAF,EAAD,CAAlB;AAEA,WAAK7J,YAAL,CAAkB+E,OAAlB,CAA0B,UAACC,OAAD,EAAa;AACrC,YAAImE,WAAW,GAAG,IAAI1I,IAAJ,CAAS,gBAAgBuE,OAAO,CAACmE,WAAjC,CAAlB;AACA,YAAIC,SAAS,GAAG,IAAI3I,IAAJ,CAAS,gBAAgBuE,OAAO,CAACoE,SAAjC,CAAhB;AACA,YAAIC,WAAW,GAAG,IAAI5I,IAAJ,CAAS,gBAAgBuE,OAAO,CAACqE,WAAjC,CAAlB;AACA,YAAIC,SAAS,GAAG,IAAI7I,IAAJ,CAAS,gBAAgBuE,OAAO,CAACsE,SAAjC,CAAhB;AACA,YAAI4C,OAAO,GAAG,IAAIzL,IAAJ,CAAS,gBAAgBxB,MAAM,CAACuB,MAAM,CAAC,OAAI,CAACF,iBAAL,CAAuBqH,cAAxB,CAAP,CAAN,CAAsDjH,MAAtD,CAA6D,QAA7D,CAAzB,CAAd;;AACA,YAAIsE,OAAO,CAAC8E,SAAR,IAAqBF,OAArB,IAAgC5E,OAAO,CAAC+E,YAA5C,EAA0D;AACxD,cAAKZ,WAAW,IAAI+C,OAAf,IAA0BA,OAAO,IAAI9C,SAAtC,IAAqDC,WAAW,IAAI6C,OAAf,IAA0BA,OAAO,IAAI5C,SAA9F,EAA0G;AACxG,YAAA,OAAI,CAAC2C,UAAL,GAAkB,IAAlB;AACD;AACF;AACF,OAXD;;AAaA,UAAI,CAAC,KAAKA,UAAV,EAAsB;AACpB,aAAK1M,eAAL,GAAuB,oBAAvB;AACD,OAFD,MAEO;AACL,aAAKA,eAAL,GAAuB,EAAvB;AACD;AACF,KAzVM;AA0VDmL,IAAAA,GA1VC,iBA0VK;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACV;AACA,gBAAA,OAAI,CAAC/I,SAAL,GAAiB,IAAjB;AAFU;;AAAA,oBAIH,OAAI,CAACrB,iBAAL,CAAuBM,QAAvB,CAAgCuF,UAJ7B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAMI,OAAI,CAAC7F,iBAAL,CAAuBM,QAAvB,CAAgCC,QANpC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAQI,OAAI,CAACP,iBAAL,CAAuBM,QAAvB,CAAgCE,SARpC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAUI,OAAI,CAACR,iBAAL,CAAuBM,QAAvB,CAAgCG,OAVpC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAYI,OAAI,CAACT,iBAAL,CAAuBM,QAAvB,CAAgCmI,UAZpC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAcI,OAAI,CAACzI,iBAAL,CAAuB+F,aAd3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAgBI,OAAI,CAAC/F,iBAAL,CAAuBiG,SAhB3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAkBI,OAAI,CAACjG,iBAAL,CAAuB8G,gBAlB3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAoBI,OAAI,CAAC9G,iBAAL,CAAuBmG,eApB3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAsBI,OAAI,CAACnG,iBAAL,CAAuByG,WAtB3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAwBI,OAAI,CAACzG,iBAAL,CAAuB2G,OAxB3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBA0BI,OAAI,CAAC3G,iBAAL,CAAuBqH,cA1B3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBA4BI,OAAI,CAACrH,iBAAL,CAAuB6L,MA5B3B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,sBA8BG,OAAI,CAAC3M,cAAL,IAAuB,OAAI,CAACD,eA9B/B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAiCN,gBAAA,OAAI,CAACe,iBAAL,CAAuBuL,YAAvB,GAAsC5M,MAAM,CAC1CuB,MAAM,CAAC,OAAI,CAACF,iBAAL,CAAuBqH,cAAxB,CADoC,CAAN,CAEpCjH,MAFoC,CAE7B,sBAF6B,CAAtC;AAII0L,gBAAAA,WArCE,GAqCY,IAAI3L,IAAJ,EArCZ;AAsCFiI,gBAAAA,GAtCE,GAsCI,IAAIjI,IAAJ,CAAS2L,WAAW,CAAChK,WAAZ,KAA4B,OAAI,CAAC9B,iBAAL,CAAuBM,QAAvB,CAAgCC,QAArE,EAA+EuL,WAAW,CAAClK,QAAZ,KAAyB,OAAI,CAAC5B,iBAAL,CAAuBM,QAAvB,CAAgCE,SAAxI,EAAmJsL,WAAW,CAACC,OAAZ,KAAwB,OAAI,CAAC/L,iBAAL,CAAuBM,QAAvB,CAAgCG,OAA3M,CAtCJ;AAuCN,gBAAA,OAAI,CAACT,iBAAL,CAAuBM,QAAvB,CAAgC8H,GAAhC,GAAsCzJ,MAAM,CAC1CuB,MAAM,CAACkI,GAAD,CADoC,CAAN,CAEpChI,MAFoC,CAE7B,YAF6B,CAAtC;;AAvCM,oBA0CD,OAAI,CAACJ,iBAAL,CAAuBgM,UA1CtB;AAAA;AAAA;AAAA;;AAAA;AAAA,uBA2Ce,OAAI,CAAC5J,wBAAL,CAA8BgI,GAA9B,CACjB,OAAI,CAACpK,iBADY,EACO,OADP,CA3Cf;;AAAA;AA2CAqL,gBAAAA,MA3CA;;AA+CJ,oBAAIA,MAAM,CAACY,MAAP,KAAkB,GAAtB,EAA2B;AACzB,kBAAA,OAAI,CAACC,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,oBAAAA,QAAQ,EAAE,SADI;AAEdC,oBAAAA,OAAO,EAAE,SAFK;AAGdC,oBAAAA,MAAM,EAAE,oBAHM;AAIdC,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;;AAOA,sBAAI,OAAI,CAAC9K,aAAL,CAAmB+K,aAAnB,IAAoC,KAAxC,EAA+C;AAC7C,oBAAA,OAAI,CAACC,UAAL,CAAgBnB,MAAM,CAACtM,IAAvB;AACD,mBAFD,MAEO;AACL,oBAAA,OAAI,CAACqF,KAAL;;AACA,oBAAA,OAAI,CAACL,qBAAL,CAA2BsH,MAAM,CAACtM,IAAlC;AACD;AACF,iBAdD,MAcO,IAAIsM,MAAM,CAACY,MAAP,KAAkB,GAAtB,EAA2B;AAChC,kBAAA,OAAI,CAACC,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,OAFK;AAGdC,oBAAAA,MAAM,EAAEhB,MAAM,CAACtM,IAHD;AAIduN,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD,iBAPM,MAOA;AACL,kBAAA,OAAI,CAACJ,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,QAFK;AAGdC,oBAAAA,MAAM,EAAEhB,MAAM,CAACoB,GAHD;AAIdH,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD;;AA3EG;AAAA;;AAAA;AAAA,qBA4EK,OAAI,CAACtM,iBAAL,CAAuBgM,UA5E5B;AAAA;AAAA;AAAA;;AAAA;AAAA,uBA6Ee,OAAI,CAAC5J,wBAAL,CAA8BsK,GAA9B,CACjB,OAAI,CAAC1M,iBADY,EACO,OADP,CA7Ef;;AAAA;AA6EAqL,gBAAAA,OA7EA;;AAgFJ,oBAAIA,OAAM,CAACY,MAAP,KAAkB,GAAtB,EAA2B;AACzB,kBAAA,OAAI,CAACC,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,oBAAAA,QAAQ,EAAE,SADI;AAEdC,oBAAAA,OAAO,EAAE,SAFK;AAGdC,oBAAAA,MAAM,EAAE,sBAHM;AAIdC,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;;AAMA,kBAAA,OAAI,CAAClI,KAAL;;AACA,kBAAA,OAAI,CAACL,qBAAL,CAA2BsH,OAAM,CAACtM,IAAlC;;AACA,kBAAA,OAAI,CAAC4N,OAAL,CAAahI,IAAb,CAAkB,kCAAlB;AACD,iBAVD,MAUO,IAAI0G,OAAM,CAACY,MAAP,KAAkB,GAAtB,EAA2B;AAChC,kBAAA,OAAI,CAACC,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,OAFK;AAGdC,oBAAAA,MAAM,EAAEhB,OAAM,CAACtM,IAHD;AAIduN,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD,iBAPM,MAOA;AACL,kBAAA,OAAI,CAACJ,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,QAFK;AAGdC,oBAAAA,MAAM,EAAEhB,OAAM,CAACoB,GAHD;AAIdH,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD;;AAxGG;AAAA;AAAA;;AAAA;AAAA;AAAA;;AA6GR,gBAAA,OAAI,CAACJ,MAAL,CAAY9B,GAAZ,CAAgB;AACd+B,kBAAAA,QAAQ,EAAE,OADI;AAEdC,kBAAAA,OAAO,EAAE,QAFK;AAGdC,kBAAAA,MAAM,aAHQ;AAIdC,kBAAAA,IAAI,EAAE;AAJQ,iBAAhB;;AA7GQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoHX,KA9cM;AA+cPE,IAAAA,UA/cO,sBA+cIzN,IA/cJ,EA+cU;AAAA;;AACf,WAAK6N,QAAL,CAAcC,OAAd,CAAsB;AACpBC,QAAAA,OAAO,EAAE,mCADW;AAEpBC,QAAAA,MAAM,EAAE,cAFY;AAGpBC,QAAAA,IAAI,EAAE,4BAHc;AAIpBC,QAAAA,MAAM,EAAE,kBAAM;AACZzH,UAAAA,YAAY,CAAC0H,OAAb,CAAqB,4BAArB,EAAmDnO,IAAnD;;AACA,UAAA,OAAI,CAAC4N,OAAL,CAAahI,IAAb,CAAkB,iCAAlB;AACD,SAPmB;AAQpBwI,QAAAA,MAAM,EAAE,kBAAM;AACZ,UAAA,OAAI,CAACpJ,qBAAL,CAA2BhF,IAA3B;;AACA,UAAA,OAAI,CAACqF,KAAL;AACD;AAXmB,OAAtB;AAcD;AA9dM;AA3HI,CAAf","sourcesContent":["import DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\nimport EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\nimport GlobalSettingsService from \"../../service/security/GlobalSettingsService\";\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      drScheduleDialog: false,\r\n      isScheduleExist: \"\",\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      isExist: \"\",\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      departmentList: [],\r\n      doctorList: [],\r\n      scheduleList: [],\r\n      getScheduleList: [],\r\n      //getScheduleList2: [],\r\n      buildingList: [],\r\n      roomList: [],\r\n      referredByList: [],\r\n      doctorAppointmentList: [],\r\n      doctorAppointment: {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      typeList: [\r\n        { text: \"Consultancy\", value: \"Consultancy\" },\r\n        { text: \"Report\", value: \"Report\" },\r\n      ],\r\n      globalSetting: {},\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    let today = new Date();\r\n    let month = today.getMonth();\r\n    let year = today.getFullYear();\r\n    let prevMonth = (month === 0) ? 11 : month - 0;\r\n    let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    this.minDate = new Date();\r\n    this.minDate.setMonth(prevMonth);\r\n    this.minDate.setFullYear(prevYear);\r\n\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.commonService = new CommonService();\r\n    this.doctorSetupService = new DoctorSetupService();\r\n    this.consultancyDepartmentSetupService = new ConsultancyDepartmentSetupService();\r\n    this.buildingSetupService = new BuildingSetupService();\r\n    this.roomSetupService = new RoomSetupService();\r\n    this.employeeSetupService = new EmployeeSetupService();\r\n    this.referredBySetupService = new ReferredBySetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.validation = new Validation();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    this.globalSettingsService = new GlobalSettingsService();\r\n\r\n    this.commonService\r\n      .GetAllGender()\r\n      .then((data) => (this.genderList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.consultancyDepartmentSetupService\r\n      .getActiveCombo()\r\n      .then((data) => (this.departmentList = data.data));\r\n\r\n    this.buildingSetupService\r\n      .getAll()\r\n      .then((data) => (this.buildingList = data.data));\r\n\r\n    this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n    this.referredBySetupService\r\n      .getAll()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.employeeSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeEmployeeInfo(data.data));\r\n\r\n    this.doctorSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n    this.globalSettingsService\r\n      .getBySettingName(\"Appointment Payment Express\")\r\n      .then((data) => (this.globalSetting = data.data));\r\n\r\n  },\r\n  watch: {\r\n    'doctorAppointment.schedule_date': {\r\n      immediate: true,\r\n      handler() {\r\n        this.getAppointment();\r\n        //this.viewDrSchedule();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    printAppointmentToken(appointmentId) {\r\n      this.patientReportService.GetAppointmentTokenByAppointmentId(appointmentId, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    hideDialog() {\r\n      this.drScheduleDialog = false;\r\n    },\r\n    reset() {\r\n      this.isScheduleExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.isExist = \"\";\r\n      this.isContactExist = \"\";\r\n      this.doctorAppointment = {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      };\r\n      this.submitted = false;\r\n      //this.getAppointment();\r\n      this.scheduleList = [];\r\n      this.getScheduleList = [];\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.registration_no,\r\n          text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n        });\r\n      });\r\n    },\r\n    mergeDoctorInfo(data) {\r\n      //this.doctorList = data;\r\n      data.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.doc_no,\r\n          text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        });\r\n      });\r\n\r\n      data.forEach((element) => {\r\n        var obj = element;\r\n        obj.doctor_degree = \"\";\r\n        obj.lstConsultantDegree.forEach((el) => {\r\n          obj.doctor_degree += el.consultant_degree_name + \". \";\r\n        });\r\n\r\n        obj.doctor_name = element.doc_no + \" - (\" + obj.doctor_degree + \") - \" + element.doctor_name;\r\n        this.doctorList.push(obj);\r\n      });\r\n\r\n      var appointmentInfo = JSON.parse(localStorage.getItem(\"appointmentInfo\"));\r\n      if (appointmentInfo) {\r\n        this.doctorAppointment = appointmentInfo;\r\n        this.getConsultancyFeeByDoctorId();\r\n        localStorage.removeItem('appointmentInfo');\r\n      }\r\n    },\r\n    mergeEmployeeInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.emp_no,\r\n          text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        });\r\n      });\r\n    },\r\n    filterDoctorsDepartmentWise() {\r\n      return this.doctorList.filter(function (el) {\r\n        return el.department_id === this.doctorAppointment.department_id;\r\n      }, this);\r\n    },\r\n    getConsultancyFeeByDoctorId() {\r\n      var aDoctor = this.doctorList.filter(function (el) {\r\n        return el.doctor_id === this.doctorAppointment.doctor_id;\r\n      }, this);\r\n\r\n      this.doctorAppointment.first_con_fee = aDoctor[0].consultancy_fee;\r\n      this.doctorAppointment.second_con_fee = aDoctor[0].second_con_fee;\r\n      this.doctorAppointment.second_con_fee_duration = aDoctor[0].second_con_fee_duration;\r\n      this.doctorAppointment.third_con_fee = aDoctor[0].third_con_fee;\r\n      this.doctorAppointment.third_con_fee_duration = aDoctor[0].third_con_fee_duration;\r\n      this.doctorAppointment.report_visit_fee = aDoctor[0].report_visit_fee;\r\n      this.doctorAppointment.building_id = aDoctor[0]._building_id;\r\n      this.doctorAppointment.room_id = aDoctor[0].room_id;\r\n\r\n      this.getDrSchedule();\r\n    },\r\n    getConsultancyFeeByType() {\r\n      if (this.doctorAppointment.appointment_type == \"Report\") {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.report_visit_fee;\r\n      } else if (this.doctorAppointment.appointment_type == \"Consultancy\") {\r\n        this.appointmentPrescriptionService.prescriptionDoctorAndPatientWise(this.doctorAppointment.doctor_id, this.doctorAppointment.patient_id, this).then((data) => this.formatPreviousAppointment(data.data));\r\n      }\r\n    },\r\n    formatPreviousAppointment(data) {\r\n      if (data.length == 0) {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n      } else if (data.length == 1) {\r\n        var previousAppointmentDate = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous = moment(previousAppointmentDate, \"YYYY-MM-DD\");\r\n        var current = moment(currentAppointmentDate, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day = moment.duration(current.diff(previous)).asDays();\r\n        if (this.doctorAppointment.second_con_fee_duration >= day) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.second_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      } else if (data.length == 2) {\r\n        var previousAppointmentDate2 = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate2 = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous2 = moment(previousAppointmentDate2, \"YYYY-MM-DD\");\r\n        var current2 = moment(currentAppointmentDate2, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day2 = moment.duration(current2.diff(previous2)).asDays();\r\n        if (this.doctorAppointment.third_con_fee_duration >= day2) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.third_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      }\r\n    },\r\n    filterRoomsBuildingWise() {\r\n      return this.roomList.filter(function (el) {\r\n        return el.building_id === this.doctorAppointment.building_id;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      this.doctorAppointment.aPatient = data;\r\n      if (!this.doctorAppointment.aPatient.patient_id) {\r\n        this.isExist = \"Patient not Exist!\";\r\n        this.doctorAppointment = {\r\n          patient_id: \"\",\r\n          aPatient: {},\r\n        };\r\n      } else {\r\n        this.isExist = \"\";\r\n\r\n        this.doctorAppointment.patient_id =\r\n          this.doctorAppointment.aPatient.patient_id;\r\n        this.doctorAppointment.aPatient.cddob = moment(\r\n          String(this.doctorAppointment.aPatient.dob)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    findPatient() {\r\n      this.patientRegistrationService\r\n        .getByContactOrRegNo(this.doctorAppointment.contactOrRegNo, this)\r\n        .then((data) => this.getFormatted(data.data));\r\n    },\r\n    isExistContact() {\r\n      if (\r\n        this.doctorAppointment.aPatient.contact_no.match(/^(01)([0-9]{9})$/)\r\n      ) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.doctorAppointment.aPatient.contact_no, this)\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    getFormattedSchedule(data) {\r\n      data.forEach((element) => {\r\n        element.start_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time1))\r\n        ).format(\"h:mm a\");\r\n        element.end_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time1))\r\n        ).format(\"h:mm a\");\r\n        element.start_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time2))\r\n        ).format(\"h:mm a\");\r\n        element.end_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time2))\r\n        ).format(\"h:mm a\");\r\n      });\r\n\r\n      this.scheduleList = data;\r\n      //this.drScheduleDialog = true;\r\n      this.showDrScheduleDialog();\r\n    },\r\n    getDrSchedule() {\r\n      this.doctorSetupService\r\n        .getDoctorScheduleById(this.doctorAppointment.doctor_id)\r\n        .then((data) => this.getFormattedSchedule(data.data));\r\n    },\r\n    showDrScheduleDialog() {\r\n      this.getAppointment();\r\n      this.drScheduleDialog = true;\r\n    },\r\n    viewDrSchedule() {\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.getScheduleList = [];\r\n      //this.getScheduleList2 = [];\r\n      this.scheduleList.forEach((element) => {\r\n        if (element._day_name == dayName && element.is_available) {\r\n          var start_time1 = moment(element.start_time1, \"hh:mm a\");\r\n          var end_time1 = moment(element.end_time1, \"hh:mm a\");\r\n          var result1 = end_time1.diff(start_time1, 'minutes');\r\n          var time1PerPatient = parseInt(result1 / element.time1_patient_no);\r\n\r\n          var index = 0;\r\n          var time1range = start_time1;\r\n          while (index < element.time1_patient_no) {\r\n            var time = moment(time1range, \"hh:mm a\").format('LTS');\r\n\r\n            var aSchedule = {\r\n              time1RangeStart: moment(time1range, \"hh:mm a\").format('LTS'),\r\n              time1RangeEnd: moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS'),\r\n              time1IsBooked: this.isAppointmentExist(time)\r\n            };\r\n\r\n            this.getScheduleList.push(aSchedule);\r\n            time1range = moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS');\r\n            index++;\r\n          }\r\n\r\n          var start_time2 = moment(element.start_time2, \"hh:mm a\");\r\n          var end_time2 = moment(element.end_time2, \"hh:mm a\");\r\n          var result2 = end_time2.diff(start_time2, 'minutes');\r\n          var time2PerPatient = result2 / element.time2_patient_no;\r\n\r\n          var index2 = 0;\r\n          var time2range = start_time2;\r\n          while (index2 < element.time2_patient_no) {\r\n            var time2 = moment(time2range, \"hh:mm a\").format('LTS');\r\n            if (this.getScheduleList.length > index2) {\r\n              var aSchedule2 = this.getScheduleList[index2];\r\n              aSchedule2.time2RangeStart = moment(time2range, \"hh:mm a\").format('LTS');\r\n              aSchedule2.time2RangeEnd = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n              aSchedule2.time2IsBooked = this.isAppointmentExist(time2);\r\n              this.getScheduleList[index2] = aSchedule2;\r\n            } else {\r\n              var aSchedule3 = {\r\n                time1RangeStart: '',\r\n                time1RangeEnd: '',\r\n                time1IsBooked: true,\r\n                time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n                time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS'),\r\n                time2IsBooked: this.isAppointmentExist(time2),\r\n              };\r\n              this.getScheduleList.push(aSchedule3);\r\n            }\r\n\r\n            // var aSchedule2 = {\r\n            //   time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n            //   time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS')\r\n            // };\r\n            // this.getScheduleList.push(aSchedule2);\r\n            time2range = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n            index2++;\r\n          }\r\n        }\r\n      });\r\n\r\n      //this.drScheduleDialog = true;\r\n    },\r\n    getAppointment() {\r\n      if (this.doctorAppointment.doctor_id && this.doctorAppointment.schedule_date) {\r\n        var date = moment(String(this.doctorAppointment.schedule_date)).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointmentService.getDynamicDoctorWise(date, date, \"All\", this.doctorAppointment.doctor_id).then((data) => this.getAppointmentFormatted(data.data));\r\n      }\r\n    },\r\n    getAppointmentFormatted(data) {\r\n      this.doctorAppointmentList = data;\r\n      this.viewDrSchedule();\r\n    },\r\n    isAppointmentExist(time) {\r\n      var result = false\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + time, 'MM/DD/YYYY h:mm:ss A');\r\n      var date = dateTime.format('MM/DD/YYYY h:mm:ss A');\r\n      this.doctorAppointmentList.forEach(element => {\r\n        var appoint_date = moment(String(element.appoint_date)).format(\"MM/DD/YYYY h:mm:ss A\");\r\n        if (appoint_date == date) {\r\n          result = true;\r\n        }\r\n      });\r\n\r\n      return result;\r\n    },\r\n    setAppointment(appointmentTime) {\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + appointmentTime, 'MM/DD/YYYY h:mm:ss a');\r\n      this.doctorAppointment.cdappoint_date = dateTime.format('MM/DD/YYYY h:mm:ss a');\r\n      this.drScheduleDialog = false;\r\n      this.getConsultancyFeeByType();\r\n      //this.checkDrSchedule();\r\n    },\r\n    checkDrSchedule() {\r\n      this.isSchedule = false;\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.cdappoint_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.scheduleList.forEach((element) => {\r\n        var start_time1 = new Date(\"2000-01-01 \" + element.start_time1);\r\n        var end_time1 = new Date(\"2000-01-01 \" + element.end_time1);\r\n        var start_time2 = new Date(\"2000-01-01 \" + element.start_time2);\r\n        var end_time2 = new Date(\"2000-01-01 \" + element.end_time2);\r\n        var timeNow = new Date(\"2000-01-01 \" + moment(String(this.doctorAppointment.cdappoint_date)).format(\"h:mm a\"));\r\n        if (element._day_name == dayName && element.is_available) {\r\n          if ((start_time1 <= timeNow && timeNow <= end_time1) || (start_time2 <= timeNow && timeNow <= end_time2)) {\r\n            this.isSchedule = true;\r\n          }\r\n        }\r\n      });\r\n\r\n      if (!this.isSchedule) {\r\n        this.isScheduleExist = \"Schedule not exist\";\r\n      } else {\r\n        this.isScheduleExist = \"\";\r\n      }\r\n    },\r\n    async add() {\r\n      //this.checkDrSchedule();\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.doctorAppointment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_year) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_month) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_day) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.contact_no) {\r\n          return;\r\n        } else if (!this.doctorAppointment.department_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.doctor_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.appointment_type) {\r\n          return;\r\n        } else if (!this.doctorAppointment.consultancy_fee) {\r\n          return;\r\n        } else if (!this.doctorAppointment.building_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.room_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.cdappoint_date) {\r\n          return;\r\n        } else if (!this.doctorAppointment.reason) {\r\n          return;\r\n        } else if (this.isContactExist || this.isScheduleExist) {\r\n          return;\r\n        } else {\r\n          this.doctorAppointment.appoint_date = moment(\r\n            String(this.doctorAppointment.cdappoint_date)\r\n          ).format(\"YYYY-MM-DD h:mm:ss a\");\r\n\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.doctorAppointment.aPatient.age_year, currentDate.getMonth() - this.doctorAppointment.aPatient.age_month, currentDate.getDate() - this.doctorAppointment.aPatient.age_day);\r\n          this.doctorAppointment.aPatient.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n          if (!this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.add(\r\n              this.doctorAppointment, this\r\n            );\r\n\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Saved Successfully\",\r\n                life: 10000,\r\n              });\r\n\r\n              if (this.globalSetting.setting_value == \"Yes\") {\r\n                this.confirmPay(result.data);\r\n              } else {\r\n                this.reset();\r\n                this.printAppointmentToken(result.data);\r\n              }\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          } else if (this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.put(\r\n              this.doctorAppointment, this\r\n            );\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Successfully Updated\",\r\n                life: 10000,\r\n              });\r\n              this.reset();\r\n              this.printAppointmentToken(result.data);\r\n              this.$router.push(\"/patient-doctor-appointment-list\");\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          }\r\n\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    confirmPay(data) {\r\n      this.$confirm.require({\r\n        message: 'Are you sure you want to pay now?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n          localStorage.setItem('appointment_id_for_payment', data);\r\n          this.$router.push(\"/appointment-payment-collection\");\r\n        },\r\n        reject: () => {\r\n          this.printAppointmentToken(data);\r\n          this.reset();\r\n        },\r\n\r\n      });\r\n    }\r\n\r\n  },\r\n};"]}]}