{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationList.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationList.js","mtime":1688535926687},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IFBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUGF0aWVudFJlcG9ydFNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0ludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UiOwppbXBvcnQgUHJvZHVjdFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1Byb2R1Y3RTZXR1cFNlcnZpY2UiOwppbXBvcnQgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzSW52ZXN0aWdhdGlvbjogdHJ1ZSwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGludkVkaXQ6IGZhbHNlLAogICAgICBpbnZMaXN0OiB0cnVlLAogICAgICBkYXRhTGlzdDogZmFsc2UsCiAgICAgIGNvbGxlY3Rpb25MaXN0OiBbXSwKICAgICAgaW52ZXN0aWdhdGlvbkZvclN0YXR1c0xpc3Q6IFtdLAogICAgICByZXBvcnREZWxpdmVyeVN0YXR1c0xpc3Q6IFtdLAogICAgICBwYXltZW50U3RhdHVzTGlzdDogW10sCiAgICAgIHBhdGllbnRJbnZlc3RpZ2F0aW9uTGlzdDogW10sCiAgICAgIGludmVzdGlnYXRpb25MaXN0OiBbXSwKICAgICAgcmVwb3J0RGVsaXZlcnlUeXBlTGlzdDogW10sCiAgICAgIHByb2R1Y3RMaXN0OiBbXSwKICAgICAgcGF0aWVudEludmVzdGlnYXRpb246IHsKICAgICAgICBjZGZyb21kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZHRvZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgLy8gY2R0b2RhdGU6IG1vbWVudCgKICAgICAgICAvLyAgIFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpCiAgICAgICAgLy8gKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBkZWxpdmVyeV9zdGF0dXM6ICJBbGwiLAogICAgICAgIHBheW1lbnRfc3RhdHVzOiAiQWxsIiwKICAgICAgICBmb3Jfc3RhdHVzOiAiQWxsIgogICAgICB9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBwYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Q6IHsKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6ICJSZWd1bGFyIiwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHM6IFtdLAogICAgICAgIGxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyOiBbXSwKICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAwLAogICAgICAgIGRpc2NvdW50X2Ftb3VudDogMCwKICAgICAgICBjb3N0X3ByaWNlOiAwLAogICAgICAgIHBhcnRpY3VsYXJfY29zdF9wcmljZTogMCwKICAgICAgICB0b3RhbF9hbW91bnQ6IDAKICAgICAgfSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSA9IG5ldyBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlID0gbmV3IEludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucHJvZHVjdFNldHVwU2VydmljZSA9IG5ldyBQcm9kdWN0U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UgPSBuZXcgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZSA9IG5ldyBQYXRpZW50UmVwb3J0U2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEludmVzdGlnYXRpb25Gb3JTdGF0dXMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5pbnZlc3RpZ2F0aW9uRm9yU3RhdHVzTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEludmVzdGlnYXRpb25EZWxpdmVyeVN0YXR1cygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlcG9ydERlbGl2ZXJ5U3RhdHVzTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbFBheW1lbnRTdGF0dXMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYXltZW50U3RhdHVzTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmludmVzdGlnYXRpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsUmVwb3J0RGVsaXZlcnlUeXBlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVwb3J0RGVsaXZlcnlUeXBlTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByb2R1Y3RMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLnNob3coKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG1vbmV5UmVjZWlwdFByaW50OiBmdW5jdGlvbiBtb25leVJlY2VpcHRQcmludChpbnZvaWNlX2lkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRJbnZlc3RpZ2F0aW9uUGF5bWVudChpbnZvaWNlX2lkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBwcmludEludmVzdGlnYXRpb25Ub2tlbjogZnVuY3Rpb24gcHJpbnRJbnZlc3RpZ2F0aW9uVG9rZW4oaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlLkdldEludmVzdGlnYXRpb25Ub2tlbihpZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsdGVySW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gZmlsdGVySW52ZXN0aWdhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52ZXN0aWdhdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZmlsdGVyUHJvZHVjdDogZnVuY3Rpb24gZmlsdGVyUHJvZHVjdCgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdExpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2NhdGVnb3J5X2lkID09IDEgJiYgZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGludlJlc2V0OiBmdW5jdGlvbiBpbnZSZXNldCgpIHsKICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uID0gIiI7CiAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgfSwKICAgIGludmVzdGlnYXRpb25Jc0V4aXN0OiBmdW5jdGlvbiBpbnZlc3RpZ2F0aW9uSXNFeGlzdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgYUludmVzdGlnYXRpb24gPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFJbnZlc3RpZ2F0aW9uLmxlbmd0aCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJUaGlzIEludmVzdGlnYXRpb24gYWxyZWFkeSBhZGRlZCI7CiAgICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYUludiA9IHRoaXMuaW52ZXN0aWdhdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgICB9LCB0aGlzKTsKICAgICAgICB0aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UuZ2V0QnlJZChhSW52WzBdLmNvbGxlY3Rpb25fY2VudGVyX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LmNvbGxlY3Rpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhZGRJbnZlc3RpZ2F0aW9uOiBmdW5jdGlvbiBhZGRJbnZlc3RpZ2F0aW9uKCkgewogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgIHZhciBhSW52ZXN0aWdhdGlvbiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgfSwgdGhpcyk7CgogICAgICBpZiAoYUludmVzdGlnYXRpb24ubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlRoaXMgSW52ZXN0aWdhdGlvbiBhbHJlYWR5IGFkZGVkIjsgLy90aGlzLmlzSW52ZXN0aWdhdGlvbiA9IHRydWU7CgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgICB2YXIgY29zdCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlcG9ydF9kZWxpdmVyeV90eXBlID09ICJSZWd1bGFyIiA/IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uY2hhcmdlIDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi51cmdlbnRfY2FyZ2U7CiAgICAgICAgICB2YXIgdG90YWxBbW91bnQgPSBjb3N0OwogICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgaW52ZXN0aWdhdGlvbl9pZDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkLAogICAgICAgICAgICBfaW52ZXN0aW5nYXRpb25fbmFtZTogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpbmdhdGlvbl9uYW1lLAogICAgICAgICAgICBidWlsZGluZ19pZDogdGhpcy5jb2xsZWN0aW9uTGlzdC5fYnVpbGRpbmdfaWQsCiAgICAgICAgICAgIF9idWlsZGluZ19uYW1lOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9idWlsZGluZ19uYW1lLAogICAgICAgICAgICByb29tX2lkOiB0aGlzLmNvbGxlY3Rpb25MaXN0LnJvb21faWQsCiAgICAgICAgICAgIF9yb29tX25hbWU6IHRoaXMuY29sbGVjdGlvbkxpc3QuX3Jvb21fbmFtZSwKICAgICAgICAgICAgZXhwZWN0ZWRfZGVsaXZlcnk6IG1vbWVudChTdHJpbmcodGhpcy5leHBlY3RlZEhvdXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5yZXBvcnRfZGVsaXZlcnlfZHVyYXRpb24pKSkuZm9ybWF0KCJZWVlZLU1NLUREIGg6bW06c3MgYSIpLAogICAgICAgICAgICByZXBvcnRfZGVsaXZlcnlfdHlwZTogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5yZXBvcnRfZGVsaXZlcnlfdHlwZSwKICAgICAgICAgICAgcXVhbnRpdHk6IDEsCiAgICAgICAgICAgIGNvc3RfcHJpY2U6IGNvc3QsCiAgICAgICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uZGlzY291bnRfcGVyY2VudCwKICAgICAgICAgICAgdG90YWxfYW1vdW50OiB0b3RhbEFtb3VudAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5wdXNoKG9iaik7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSArIHRvdGFsQW1vdW50OyAvLwoKICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0KICAgICAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtCiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWRkUGFydGljdWxhcih0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQpOwogICAgfSwKICAgIGNhbGN1bGF0ZVRvdGFsQW1vdW50OiBmdW5jdGlvbiBjYWxjdWxhdGVUb3RhbEFtb3VudCgpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSArIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZTsKICAgIH0sCiAgICBhZGRQYXJ0aWN1bGFyOiBmdW5jdGlvbiBhZGRQYXJ0aWN1bGFyKGlkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlLmdldEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM1LmdldFBhcnRpY3VsYXJGb3JtYXR0ZWQoZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEFQYXJ0aWN1bGFyOiBmdW5jdGlvbiBhZGRBUGFydGljdWxhcihkYXRhLCBxdHksIHBuYW1lKSB7CiAgICAgIGlmICh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoIDw9IDApIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiQWRkIEludmVzdGlnYXRpb24iOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB2YXIgb2JqID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfaWQgPT09IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICB9LCB0aGlzKVswXTsKCiAgICAgICAgaWYgKG9iaikgewogICAgICAgICAgcXR5ID0gcGFyc2VJbnQob2JqLnF0eSkgKyBxdHk7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfaWQgIT0gZGF0YS5wcm9kdWN0X2lkOwogICAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5wdXNoKHsKICAgICAgICAgIHByb2R1Y3RfaWQ6IGRhdGEucHJvZHVjdF9pZCwKICAgICAgICAgIF9wcm9kdWN0X25hbWU6IHBuYW1lLAogICAgICAgICAgdW9tX2lkOiBkYXRhLnVvbV9pZCwKICAgICAgICAgIF91b21fbmFtZTogZGF0YS5fdW9tX25hbWUsCiAgICAgICAgICBjb3N0X3ByaWNlOiBkYXRhLmNvc3RfcHJpY2UsCiAgICAgICAgICBxdHk6IHF0eQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hlY2tRdHkoKTsKICAgICAgfQogICAgfSwKICAgIGdldFBhcnRpY3VsYXJGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldFBhcnRpY3VsYXJGb3JtYXR0ZWQoZGF0YSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGRhdGEuZGF0YS5fbHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLnB1c2goewogICAgICAgIC8vICAgaW52ZXN0aWdhdGlvbl9pZDogZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkLAogICAgICAgIC8vICAgcHJvZHVjdF9pZDogZWxlbWVudC5wcm9kdWN0X2lkLAogICAgICAgIC8vICAgX3Byb2R1Y3RfbmFtZTogZWxlbWVudC5fcHJvZHVjdF9uYW1lLAogICAgICAgIC8vICAgdW9tX2lkOiBlbGVtZW50LnVvbV9pZCwKICAgICAgICAvLyAgIF91b21fbmFtZTogZWxlbWVudC5fdW9tX25hbWUsCiAgICAgICAgLy8gICBjb3N0X3ByaWNlOiBlbGVtZW50LmNvc3RfcHJpY2UsCiAgICAgICAgLy8gICBxdHk6IGVsZW1lbnQucXR5LAogICAgICAgIC8vIH0pOwogICAgICAgIF90aGlzNi5hZGRBUGFydGljdWxhcihlbGVtZW50LCAxLCBlbGVtZW50Ll9wcm9kdWN0X25hbWUpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja1F0eTogZnVuY3Rpb24gY2hlY2tRdHkoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIHRvdGFsUHJpY2UgPSAwOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQucXR5ID4gX3RoaXM3LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgICBlbGVtZW50LnF0eSA9IF90aGlzNy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aDsKICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQucXR5IDw9IDApIHsKICAgICAgICAgIGVsZW1lbnQucXR5ID0gMTsKICAgICAgICB9CgogICAgICAgIGVsZW1lbnQudG90YWxQcmljZSA9IGVsZW1lbnQucXR5ICogZWxlbWVudC5jb3N0X3ByaWNlOwogICAgICAgIHRvdGFsUHJpY2UgKz0gZWxlbWVudC50b3RhbFByaWNlOwogICAgICB9KTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gdG90YWxQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGV4cGVjdGVkSG91cjogZnVuY3Rpb24gZXhwZWN0ZWRIb3VyKGgpIHsKICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgdG9kYXkuc2V0SG91cnModG9kYXkuZ2V0SG91cnMoKSArIGgpOwogICAgICByZXR1cm4gdG9kYXk7CiAgICB9LAogICAgZGVsZXRlRnJvbUxpc3Q6IGZ1bmN0aW9uIGRlbGV0ZUZyb21MaXN0KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCAhPSBkYXRhLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtIGRhdGEudG90YWxfYW1vdW50OwogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICAgIHRoaXMuY2hlY2tRdHkoKTsKCiAgICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0gW107CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gMDsKICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVGcm9tUGFydGljdWxhckxpc3Q6IGZ1bmN0aW9uIGRlbGV0ZUZyb21QYXJ0aWN1bGFyTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkICE9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSAtIGRhdGEudG90YWxQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGFkZDogZnVuY3Rpb24gYWRkKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczguaXNDb250YWN0RXhpc3QpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM4LmlzRXhpc3QgPSAiUGxlYXNlIGFkZCBhIEludmVzdGlnYXRpb24iOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfdGhpczgucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlID0gbW9tZW50KFN0cmluZyhfdGhpczgucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczgucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZS5wdXQoX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCwgX3RoaXM4KTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiVXBkYXRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM4LnNob3coKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDIxXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsKCiAgICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5jZGZyb21kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmNkdG9kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmRlbGl2ZXJ5X3N0YXR1cykgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5wYXltZW50X3N0YXR1cykgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5mb3Jfc3RhdHVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb24uZnJvbWRhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMucGF0aWVudEludmVzdGlnYXRpb24uY2Rmcm9tZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb24udG9kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmNkdG9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlLmdldER5bmFtaWModGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5mcm9tZGF0ZSwgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi50b2RhdGUsIHRoaXMucGF0aWVudEludmVzdGlnYXRpb24uZGVsaXZlcnlfc3RhdHVzLCB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLnBheW1lbnRfc3RhdHVzLCB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmZvcl9zdGF0dXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkucGF0aWVudEludmVzdGlnYXRpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmludkVkaXQgPSBmYWxzZTsKICAgICAgdGhpcy5pbnZMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IHRydWU7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh2YWx1ZSkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgfSwKICAgIGVkaXQ6IGZ1bmN0aW9uIGVkaXQob2JqKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZS5nZXRCeUlkKG9iai5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMC5nZXRFZGl0Rm9ybWF0dGVkKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRFZGl0Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRFZGl0Rm9ybWF0dGVkKGRhdGEpIHsKICAgICAgaWYgKGRhdGEuZGF0YS5oZWFsdGhfcGFja2FnZV9pZCkgewogICAgICAgIHRoaXMuJHRvYXN0LmFkZCh7CiAgICAgICAgICBzZXZlcml0eTogIndhcm4iLAogICAgICAgICAgc3VtbWFyeTogIldhcm4iLAogICAgICAgICAgZGV0YWlsOiAiQ2Fubm90IGVkaXQgSGVhbHRoIFBhY2thZ2UiLAogICAgICAgICAgbGlmZTogMzAwMAogICAgICAgIH0pOwogICAgICAgIHRoaXMuaW52TGlzdCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZGF0YS5kYXRhLmRpc2NvdW50X2Ftb3VudCA9PSAwICYmIGRhdGEuZGF0YS50b3RhbF9hbW91bnQgPT0gZGF0YS5kYXRhLmludl9kdWVfYW1vdW50KSB7CiAgICAgICAgLy90aGlzLmFkZFBhcnRpY3VsYXIoZGF0YS5kYXRhLmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlsc1swXS5pbnZlc3RpZ2F0aW9uX2lkKTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IGRhdGEuZGF0YTsKICAgICAgICB0aGlzLmNoZWNrUXR5KCk7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscyA9CiAgICAgICAgLy8gICBkYXRhLmRhdGEubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzOwogICAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0KICAgICAgICAvLyAgIGRhdGEuZGF0YS5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhcjsKICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gZGF0YS5kYXRhLmNvc3RfcHJpY2U7CiAgICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gZGF0YS5kYXRhLnRvdGFsX2Ftb3VudDsKCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY2Rkb2IgPSBtb21lbnQoU3RyaW5nKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmRvYikpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUgPSAiUmVndWxhciI7CiAgICAgICAgdGhpcy5pbnZMaXN0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5pbnZFZGl0ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0b2FzdC5hZGQoewogICAgICAgICAgc2V2ZXJpdHk6ICJ3YXJuIiwKICAgICAgICAgIHN1bW1hcnk6ICJXYXJuIiwKICAgICAgICAgIGRldGFpbDogIkNhbm5vdCBlZGl0IiwKICAgICAgICAgIGxpZmU6IDMwMDAKICAgICAgICB9KTsKICAgICAgICB0aGlzLmludkxpc3QgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/front-desk/PatientInvestigationList.js"],"names":["PatientInvestigationRequestService","PatientReportService","CommonService","InvestigationSetupService","ProductSetupService","CollectionCenterSetupService","moment","FilterMatchMode","FilterOperator","data","isInvestigation","isExist","invEdit","invList","dataList","collectionList","investigationForStatusList","reportDeliveryStatusList","paymentStatusList","patientInvestigationList","investigationList","reportDeliveryTypeList","productList","patientInvestigation","cdfromdate","String","Date","format","cdtodate","delivery_status","payment_status","for_status","submitted","patientInvestigationRequest","patient_id","aPatient","cdinvestigation_request_date","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","created","patientInvestigationRequestService","commonService","investigationSetupService","productSetupService","collectionCenterSetupService","patientReportService","GetInvestigationForStatus","then","GetAllInvestigationDeliveryStatus","GetAllPaymentStatus","getAll","GetAllReportDeliveryType","show","methods","moneyReceiptPrint","invoice_id","GetInvestigationPayment","Downloadfile","printInvestigationToken","id","GetInvestigationToken","filterInvestigation","filter","el","active","filterProduct","product_category_id","invReset","ddlinvestigation","investigationIsExist","aInvestigation","investigation_id","length","aInv","getById","collection_center_id","addInvestigation","cost","charge","urgent_carge","totalAmount","obj","_investingation_name","investingation_name","building_id","_building_id","_building_name","room_id","_room_name","expected_delivery","expectedHour","report_delivery_duration","quantity","push","calculateTotalAmount","addParticular","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","_uom_name","checkQty","_lstInvestigationParticular","forEach","element","totalPrice","h","today","setHours","getHours","deleteFromList","deleteFromParticularList","add","isContactExist","investigation_request_date","put","result","status","$toast","severity","summary","detail","life","res","fromdate","todate","getDynamic","formatDate","edit","investigation_request_id","getEditFormatted","health_package_id","inv_due_amount","cddob","dob"],"mappings":"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","sourcesContent":["import PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\nimport CollectionCenterSetupService from \"../../service/setup/CollectionCenterSetupService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isInvestigation: true,\r\n      isExist: \"\",\r\n      invEdit: false,\r\n      invList: true,\r\n      dataList: false,\r\n      collectionList: [],\r\n      investigationForStatusList: [],\r\n      reportDeliveryStatusList: [],\r\n      paymentStatusList: [],\r\n      patientInvestigationList: [],\r\n      investigationList: [],\r\n      reportDeliveryTypeList: [],\r\n      productList: [],\r\n      patientInvestigation: {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        // cdtodate: moment(\r\n        //   String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        // ).format(\"MM/DD/YYYY\"),\r\n        delivery_status: \"All\",\r\n        payment_status: \"All\",\r\n        for_status: \"All\",\r\n      },\r\n      submitted: false,\r\n      patientInvestigationRequest: {\r\n        patient_id: \"\",\r\n        aPatient: {},\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.patientInvestigationRequestService =\r\n      new PatientInvestigationRequestService();\r\n    this.commonService = new CommonService();\r\n    this.investigationSetupService = new InvestigationSetupService();\r\n    this.productSetupService = new ProductSetupService();\r\n    this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n\r\n    this.commonService\r\n      .GetInvestigationForStatus()\r\n      .then((data) => (this.investigationForStatusList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllInvestigationDeliveryStatus()\r\n      .then((data) => (this.reportDeliveryStatusList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllPaymentStatus()\r\n      .then((data) => (this.paymentStatusList = data.data));\r\n\r\n    this.investigationSetupService\r\n      .getAll()\r\n      .then((data) => (this.investigationList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllReportDeliveryType()\r\n      .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n    this.productSetupService\r\n      .getAll()\r\n      .then((data) => (this.productList = data.data));\r\n\r\n    this.show();\r\n  },\r\n  methods: {\r\n    moneyReceiptPrint(invoice_id) {\r\n      this.patientReportService.GetInvestigationPayment(invoice_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    printInvestigationToken(id) {\r\n      this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    filterInvestigation() {\r\n      return this.investigationList.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n    },\r\n    filterProduct() {\r\n      return this.productList.filter(function (el) {\r\n        return el.product_category_id == 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    invReset() {\r\n      this.isInvestigation = true;\r\n      this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n      this.isExist = \"\";\r\n    },\r\n    investigationIsExist() {\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        var aInv = this.investigationList.filter(function (el) {\r\n          return (\r\n            el.investigation_id ===\r\n            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n          );\r\n        }, this);\r\n\r\n        this.collectionCenterSetupService\r\n          .getById(aInv[0].collection_center_id)\r\n          .then((data) => (this.collectionList = data.data));\r\n\r\n        this.isExist = \"\";\r\n        this.isInvestigation = false;\r\n      }\r\n    },\r\n    addInvestigation() {\r\n      this.submitted = true;\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        //this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          var cost =\r\n            this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n              ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n              : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n          var totalAmount = cost;\r\n\r\n          var obj = {\r\n            investigation_id:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investigation_id,\r\n            _investingation_name:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investingation_name,\r\n\r\n            building_id: this.collectionList._building_id,\r\n            _building_name: this.collectionList._building_name,\r\n            room_id: this.collectionList.room_id,\r\n            _room_name: this.collectionList._room_name,\r\n            expected_delivery: moment(\r\n              String(\r\n                this.expectedHour(\r\n                  this.patientInvestigationRequest.ddlinvestigation\r\n                    .report_delivery_duration\r\n                )\r\n              )\r\n            ).format(\"YYYY-MM-DD h:mm:ss a\"),\r\n\r\n            report_delivery_type:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .report_delivery_type,\r\n\r\n            quantity: 1,\r\n            cost_price: cost,\r\n\r\n            discount_percent:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .discount_percent,\r\n\r\n            total_amount: totalAmount,\r\n          };\r\n\r\n          this.patientInvestigationRequest.lstInvestigationRequestDetails.push(\r\n            obj\r\n          );\r\n\r\n          this.patientInvestigationRequest.cost_price =\r\n            this.patientInvestigationRequest.cost_price + totalAmount;\r\n          //\r\n          this.calculateTotalAmount();\r\n          // this.patientInvestigationRequest.total_amount =\r\n          //   this.patientInvestigationRequest.cost_price -\r\n          //   this.patientInvestigationRequest.discount_amount;\r\n        }\r\n      }\r\n\r\n      this.addParticular(\r\n        this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n      );\r\n    },\r\n    calculateTotalAmount() {\r\n      this.patientInvestigationRequest.total_amount =\r\n        this.patientInvestigationRequest.cost_price +\r\n        this.patientInvestigationRequest.particular_cost_price;\r\n    },\r\n    addParticular(id) {\r\n      this.investigationSetupService\r\n        .getById(id)\r\n        .then((data) => this.getParticularFormatted(data));\r\n    },\r\n    addAParticular(data, qty, pname) {\r\n      if (\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n          .length <= 0\r\n      ) {\r\n        this.isExist = \"Add Investigation\";\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        var obj =\r\n          this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n            function (el) {\r\n              return el.product_id === data.product_id;\r\n            },\r\n            this\r\n          )[0];\r\n        if (obj) {\r\n          qty = parseInt(obj.qty) + qty;\r\n\r\n          this.patientInvestigationRequest.lstInvestigationParticular =\r\n            this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n              function (el) {\r\n                return el.product_id != data.product_id;\r\n              },\r\n              this\r\n            );\r\n        }\r\n\r\n        this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n          product_id: data.product_id,\r\n          _product_name: pname,\r\n          uom_id: data.uom_id,\r\n          _uom_name: data._uom_name,\r\n          cost_price: data.cost_price,\r\n          qty: qty,\r\n        });\r\n\r\n        this.checkQty();\r\n      }\r\n    },\r\n    getParticularFormatted(data) {\r\n      data.data._lstInvestigationParticular.forEach((element) => {\r\n        // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n        //   investigation_id: element.investigation_id,\r\n        //   product_id: element.product_id,\r\n        //   _product_name: element._product_name,\r\n        //   uom_id: element.uom_id,\r\n        //   _uom_name: element._uom_name,\r\n        //   cost_price: element.cost_price,\r\n        //   qty: element.qty,\r\n        // });\r\n\r\n        this.addAParticular(element, 1, element._product_name);\r\n      });\r\n    },\r\n    checkQty() {\r\n      var totalPrice = 0;\r\n      this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n        (element) => {\r\n          if (\r\n            element.qty >\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n              .length\r\n          ) {\r\n            element.qty =\r\n              this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n          } else if (element.qty <= 0) {\r\n            element.qty = 1;\r\n          }\r\n\r\n          element.totalPrice = element.qty * element.cost_price;\r\n          totalPrice += element.totalPrice;\r\n        }\r\n      );\r\n      this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    expectedHour(h) {\r\n      var today = new Date();\r\n      today.setHours(today.getHours() + h);\r\n      return today;\r\n    },\r\n    deleteFromList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return el.investigation_id != data.investigation_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.cost_price =\r\n        this.patientInvestigationRequest.cost_price - data.total_amount;\r\n      this.calculateTotalAmount();\r\n      this.checkQty();\r\n      if (\r\n        !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n      ) {\r\n        this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n        this.patientInvestigationRequest.particular_cost_price = 0;\r\n        this.calculateTotalAmount();\r\n      }\r\n    },\r\n    deleteFromParticularList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationParticular =\r\n        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n          function (el) {\r\n            return el.product_id != data.product_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.particular_cost_price =\r\n        this.patientInvestigationRequest.particular_cost_price -\r\n        data.totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    async add() {\r\n      try {\r\n        if (!this.patientInvestigationRequest.cdinvestigation_request_date) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n            .length\r\n        ) {\r\n          this.isExist = \"Please add a Investigation\";\r\n          return;\r\n        } else {\r\n          this.patientInvestigationRequest.investigation_request_date = moment(\r\n            String(\r\n              this.patientInvestigationRequest.cdinvestigation_request_date\r\n            )\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          let result = await this.patientInvestigationRequestService.put(\r\n            this.patientInvestigationRequest, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Updated Successfully\",\r\n              life: 10000,\r\n            });\r\n            this.show();\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    show() {\r\n      this.submitted = true;\r\n      if (!this.patientInvestigation.cdfromdate) {\r\n        return;\r\n      } else if (!this.patientInvestigation.cdtodate) {\r\n        return;\r\n      } else if (!this.patientInvestigation.delivery_status) {\r\n        return;\r\n      } else if (!this.patientInvestigation.payment_status) {\r\n        return;\r\n      } else if (!this.patientInvestigation.for_status) {\r\n        return;\r\n      } else {\r\n        this.patientInvestigation.fromdate = moment(\r\n          String(this.patientInvestigation.cdfromdate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigation.todate = moment(\r\n          String(this.patientInvestigation.cdtodate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigationRequestService\r\n          .getDynamic(\r\n            this.patientInvestigation.fromdate,\r\n            this.patientInvestigation.todate,\r\n            this.patientInvestigation.delivery_status,\r\n            this.patientInvestigation.payment_status,\r\n            this.patientInvestigation.for_status\r\n          )\r\n          .then((data) => (this.patientInvestigationList = data.data));\r\n      }\r\n      this.invEdit = false;\r\n      this.invList = true;\r\n      this.dataList = true;\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n    edit(obj) {\r\n      this.submitted = false;\r\n      this.patientInvestigationRequestService\r\n        .getById(obj.investigation_request_id)\r\n        .then((data) => this.getEditFormatted(data));\r\n    },\r\n    getEditFormatted(data) {\r\n      if(data.data.health_package_id){\r\n        this.$toast.add({\r\n          severity: \"warn\",\r\n          summary: \"Warn\",\r\n          detail: \"Cannot edit Health Package\",\r\n          life: 3000,\r\n        });\r\n        this.invList = true;\r\n        return;\r\n      }\r\n      if (data.data.discount_amount == 0 && data.data.total_amount == data.data.inv_due_amount) {\r\n        //this.addParticular(data.data.lstInvestigationRequestDetails[0].investigation_id);\r\n        this.patientInvestigationRequest = data.data;\r\n        this.checkQty();\r\n        // this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        //   data.data.lstInvestigationRequestDetails;\r\n        // this.patientInvestigationRequest.lstInvestigationParticular =\r\n        //   data.data.lstInvestigationParticular;\r\n        // this.patientInvestigationRequest.cost_price = data.data.cost_price;\r\n        // this.patientInvestigationRequest.total_amount = data.data.total_amount;\r\n        this.patientInvestigationRequest.aPatient.cddob = moment(\r\n          String(this.patientInvestigationRequest.aPatient.dob)\r\n        ).format(\"MM/DD/YYYY\");\r\n        this.patientInvestigationRequest.cdinvestigation_request_date = moment(\r\n          String(this.patientInvestigationRequest.investigation_request_date)\r\n        ).format(\"MM/DD/YYYY\");\r\n        this.patientInvestigationRequest.report_delivery_type = \"Regular\";\r\n\r\n        this.invList = false;\r\n        this.invEdit = true;\r\n      } else {\r\n        this.$toast.add({\r\n          severity: \"warn\",\r\n          summary: \"Warn\",\r\n          detail: \"Cannot edit\",\r\n          life: 3000,\r\n        });\r\n        this.invList = true;\r\n        return;\r\n      }\r\n    },\r\n  },\r\n};"]}]}