{"remainingRequest":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\service\\LoginService.js","dependencies":[{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\service\\LoginService.js","mtime":1635308385066},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOi9TVk4gUFJPSkVDVFMvRGlhZ25vc3RpY0NlbnRlck1hbmFnZW1lbnRfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjovU1ZOIFBST0pFQ1RTL0RpYWdub3N0aWNDZW50ZXJNYW5hZ2VtZW50X0NsaWVudC90cnVuay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgQVBJX1VSTCB9IGZyb20gJy4uLy4uL3B1YmxpYy9hc3NldHMvLmVudic7Cgp2YXIgTG9naW5TZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBMb2dpblNlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW5TZXJ2aWNlKTsKICB9CgogIF9jcmVhdGVDbGFzcyhMb2dpblNlcnZpY2UsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCB0aGF0KSB7CiAgICAgIHZhciBsb2FkZXIgPSB0aGF0LiRsb2FkaW5nLnNob3coewogICAgICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnMKICAgICAgICBjb250YWluZXI6IHRoYXQuJHJlZnMuZm9ybUNvbnRhaW5lciwKICAgICAgICBjb2xvcjogJyM4MDAwODAnLAogICAgICAgIGxvYWRlcjogJ2JhcnMnLAogICAgICAgIHdpZHRoOiA2NCwKICAgICAgICBoZWlnaHQ6IDY0LAogICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnCiAgICAgIH0pOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAiZW1haWwiOiB1c2VybmFtZSwKICAgICAgICAicGFzc3dvcmQiOiBwYXNzd29yZAogICAgICB9OwogICAgICByZXR1cm4gYXhpb3MucG9zdChBUElfVVJMICsgJy9hcGkvdXNlcnMvbG9naW4nLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9naW5Ub2tlbicsIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnRva2VuKSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJNZW51UGVybWlzc2lvbnMnLCByZXMuZGF0YS5wZXJtaXNzaW9ucyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEudXNlckluZm8pKTsKICAgICAgICBsb2FkZXIuaGlkZSgpOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBlcnJvci5yZXNwb25zZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VXNlck1lbnUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVzZXJNZW51KCkgewogICAgICB2YXIgdXNlck1lbnUgPSBbXTsKICAgICAgdmFyIG1lbnVJdGVtcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyTWVudVBlcm1pc3Npb25zJyk7CgogICAgICBpZiAobWVudUl0ZW1zKSB7CiAgICAgICAgdmFyIHRlbXBEYXRhID0gSlNPTi5wYXJzZShtZW51SXRlbXMpOwogICAgICAgIHRlbXBEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIGlmIChlbGVtZW50LlBhcmVudElEID09ICcnKSB7CiAgICAgICAgICAgIHZhciBhTWVudSA9IHsKICAgICAgICAgICAgICBJRDogZWxlbWVudC5JRCwKICAgICAgICAgICAgICBsYWJlbDogZWxlbWVudC5UZXh0LAogICAgICAgICAgICAgIGljb246IGVsZW1lbnQuQ0xBU1MsCiAgICAgICAgICAgICAgdG86IGVsZW1lbnQuVVJMLAogICAgICAgICAgICAgIFBhcmVudElEOiBlbGVtZW50LlBhcmVudElELAogICAgICAgICAgICAgIGhhc1N1Yk1lbnU6IGZhbHNlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHVzZXJNZW51LnB1c2goYU1lbnUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHVzZXJNZW51LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIHZhciBpdGVtcyA9IFtdOwogICAgICAgICAgdGVtcERhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudDIpIHsKICAgICAgICAgICAgaWYgKGVsZW1lbnQuSUQgPT0gZWxlbWVudDIuUGFyZW50SUQpIHsKICAgICAgICAgICAgICB2YXIgYU1lbnUgPSB7CiAgICAgICAgICAgICAgICBJRDogZWxlbWVudDIuSUQsCiAgICAgICAgICAgICAgICBsYWJlbDogZWxlbWVudDIuVGV4dCwKICAgICAgICAgICAgICAgIGljb246IGVsZW1lbnQyLkNMQVNTLAogICAgICAgICAgICAgICAgdG86IGVsZW1lbnQyLlVSTCwKICAgICAgICAgICAgICAgIFBhcmVudElEOiBlbGVtZW50Mi5QYXJlbnRJRAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgaXRlbXMucHVzaChhTWVudSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudDMpIHsKICAgICAgICAgICAgICAgIHZhciBpdGVtczIgPSBbXTsKICAgICAgICAgICAgICAgIHRlbXBEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQ0KSB7CiAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50My5JRCA9PSBlbGVtZW50NC5QYXJlbnRJRCkgewogICAgICAgICAgICAgICAgICAgIHZhciBhYU1lbnUgPSB7CiAgICAgICAgICAgICAgICAgICAgICBJRDogZWxlbWVudDQuSUQsCiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZWxlbWVudDQuVGV4dCwKICAgICAgICAgICAgICAgICAgICAgIGljb246IGVsZW1lbnQ0LkNMQVNTLAogICAgICAgICAgICAgICAgICAgICAgdG86IGVsZW1lbnQ0LlVSTCwKICAgICAgICAgICAgICAgICAgICAgIFBhcmVudElEOiBlbGVtZW50NC5QYXJlbnRJRAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaXRlbXMyLnB1c2goYWFNZW51KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zMi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDMuaXRlbXMgPSBpdGVtczI7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDMuaGFzU3ViTWVudSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnQzLnRvOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBlbGVtZW50Lml0ZW1zID0gaXRlbXM7CiAgICAgICAgICAgICAgZWxlbWVudC5oYXNTdWJNZW51ID0gdHJ1ZTsKICAgICAgICAgICAgICBkZWxldGUgZWxlbWVudC50bzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1c2VyTWVudTsKICAgIH0KICB9XSk7CgogIHJldHVybiBMb2dpblNlcnZpY2U7Cn0oKTsKCmV4cG9ydCB7IExvZ2luU2VydmljZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["F:/SVN PROJECTS/DiagnosticCenterManagement_Client/trunk/src/service/LoginService.js"],"names":["axios","API_URL","LoginService","username","password","that","loader","$loading","show","container","$refs","formContainer","color","width","height","backgroundColor","data","post","then","res","localStorage","setItem","JSON","stringify","token","permissions","userInfo","hide","catch","error","response","userMenu","menuItems","getItem","tempData","parse","forEach","element","ParentID","aMenu","ID","label","Text","icon","CLASS","to","URL","hasSubMenu","push","items","element2","length","element3","items2","element4","aaMenu"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport {API_URL} from '../../public/assets/.env';\r\n\r\nexport default class LoginService {\r\n    login(username, password, that) {\r\n        let loader = that.$loading.show({\r\n            // Optional parameters\r\n            container: that.$refs.formContainer,\r\n            color: '#800080',\r\n            loader: 'bars',\r\n            width: 64,\r\n            height: 64,\r\n            backgroundColor: '#ffffff',\r\n        });\r\n        var data = {\r\n            \"email\": username,\r\n            \"password\": password\r\n        };\r\n        return axios.post(API_URL + '/api/users/login', data)\r\n            .then(res => {\r\n                localStorage.setItem('loginToken', JSON.stringify(res.data.token));\r\n                localStorage.setItem('userMenuPermissions', res.data.permissions);\r\n                localStorage.setItem('userInfo', JSON.stringify(res.data.userInfo));\r\n                loader.hide();\r\n                return res;\r\n            })\r\n            .catch(error => {\r\n                return error.response;\r\n            });\r\n    }\r\n    getUserMenu() {\r\n        var userMenu = [];\r\n        var menuItems = localStorage.getItem('userMenuPermissions');\r\n        if (menuItems) {\r\n            var tempData = JSON.parse(menuItems);\r\n            tempData.forEach(element => {\r\n                if (element.ParentID == '') {\r\n                    var aMenu = {\r\n                        ID: element.ID,\r\n                        label: element.Text,\r\n                        icon: element.CLASS,\r\n                        to: element.URL,\r\n                        ParentID: element.ParentID,\r\n                        hasSubMenu: false\r\n                    };\r\n                    userMenu.push(aMenu);\r\n                }\r\n            });\r\n            userMenu.forEach(element => {\r\n                var items = [];\r\n                tempData.forEach(element2 => {\r\n                    if (element.ID == element2.ParentID) {\r\n                        var aMenu = {\r\n                            ID: element2.ID,\r\n                            label: element2.Text,\r\n                            icon: element2.CLASS,\r\n                            to: element2.URL,\r\n                            ParentID: element2.ParentID\r\n                        };\r\n                        items.push(aMenu);\r\n                    }\r\n                    if (items.length > 0) {\r\n                        items.forEach(element3 => {\r\n                            var items2 = [];\r\n                            tempData.forEach(element4 => {\r\n                                if (element3.ID == element4.ParentID) {\r\n                                    var aaMenu = {\r\n                                        ID: element4.ID,\r\n                                        label: element4.Text,\r\n                                        icon: element4.CLASS,\r\n                                        to: element4.URL,\r\n                                        ParentID: element4.ParentID\r\n                                    };\r\n                                    items2.push(aaMenu);\r\n                                }\r\n                                if (items2.length > 0) {\r\n                                    element3.items = items2;\r\n                                    element3.hasSubMenu = true;\r\n                                    delete element3.to;\r\n                                }\r\n                            });\r\n                        });\r\n                        element.items = items;\r\n                        element.hasSubMenu = true;\r\n                        delete element.to;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return userMenu;\r\n    }\r\n}"]}]}