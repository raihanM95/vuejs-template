{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\nurse-panel\\AdmittedPatientRequest.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\nurse-panel\\AdmittedPatientRequest.js","mtime":1662889610301},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgQWRtaXNzaW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svQWRtaXNzaW9uU2VydmljZSI7CmltcG9ydCBBZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcHJlc2NyaXB0aW9uL0FkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBWYWxpZGF0aW9uIGZyb20gIi4uLy4uL3NjcmlwdHMvdmFsaWRhdGlvbiI7CmltcG9ydCB7IEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOyAvLyBJbnZlc3RpZ2F0aW9uIFJlcXVlc3QKCmltcG9ydCBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9QYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIjsgLy9pbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKCmltcG9ydCBQYXRpZW50UmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QYXRpZW50UmVwb3J0U2VydmljZSI7IC8vaW1wb3J0IERlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvRGVzaWduYXRpb25TZXR1cFNlcnZpY2UiOwoKaW1wb3J0IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSI7CmltcG9ydCBEb2N0b3JTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Eb2N0b3JTZXR1cFNlcnZpY2UiOyAvL2ltcG9ydCBFbXBsb3llZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0VtcGxveWVlU2V0dXBTZXJ2aWNlIjsKCmltcG9ydCBCdWlsZGluZ1NldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0J1aWxkaW5nU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJvb21TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Sb29tU2V0dXBTZXJ2aWNlIjsgLy9pbXBvcnQgUmVmZXJyZWRCeVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1JlZmVycmVkQnlTZXR1cFNlcnZpY2UiOwoKaW1wb3J0IEludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9JbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFByb2R1Y3RTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Qcm9kdWN0U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IElQRFJlcXVlc3RTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvaXBkL0lQRFJlcXVlc3RTZXJ2aWNlIjsgLy8gU2VydmljZSAmIFBhY2thZ2UKCmltcG9ydCBTZXJ2aWNlU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvU2VydmljZVNldHVwU2VydmljZSI7CmltcG9ydCBTZXJ2aWNlUGFja2FnZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1NlcnZpY2VQYWNrYWdlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IElQRFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9pcGQvSVBEU2VydmljZSI7IC8vIFBoYXJtYWN5CgppbXBvcnQgTWVkaWNpbmVSZXF1ZXN0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3BoYXJtYWN5L01lZGljaW5lUmVxdWVzdFNlcnZpY2UiOwppbXBvcnQgSVBEUmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9JUERSZXBvcnRTZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhTGlzdDogdHJ1ZSwKICAgICAgaXNOdXJzZTogZmFsc2UsCiAgICAgIGlzUmVxdWVzdDogZmFsc2UsCiAgICAgIHBoYXJtYWN5OiBmYWxzZSwKICAgICAgYWN0aXZlOiAwLAogICAgICBleHBhbmRlZFJvd3M6IFtdLAogICAgICBhZG1pdHRlZFBhdGllbnRMaXN0OiBbXSwKICAgICAgYWRtaXR0ZWRQYXRpZW50OiB7CiAgICAgICAgLy8gY2Rmcm9tZGF0ZTogbW9tZW50KAogICAgICAgIC8vICAgICBTdHJpbmcobmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gODYwKSkpCiAgICAgICAgLy8gKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZGZyb21kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZHRvZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIikgLy8gY2R0b2RhdGU6IG1vbWVudCgKICAgICAgICAvLyAgICAgU3RyaW5nKG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIDcpKSkKICAgICAgICAvLyApLmZvcm1hdCgiTU0vREQvWVlZWSIpLAoKICAgICAgfSwKICAgICAgLy8KICAgICAgc3VibWl0dGVkOiBmYWxzZSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgLy8gSW52ZXN0aWdhdGlvbiBSZXF1ZXN0CiAgICAgIGFkbWlzc2lvbl9pZDogbnVsbCwKICAgICAgcGF0aWVudF9pZDogbnVsbCwKICAgICAgZG9jdG9yX2lkOiBudWxsLAogICAgICBkb2N0b3Jfbm86IG51bGwsCiAgICAgIHJlZmZlcmVkX2J5X2lkOiBudWxsLAogICAgICBpbnZlc3RpZ2F0aW9uUmVxdWVzdERpYWxvZzogZmFsc2UsCiAgICAgIGxzdFByZXNjcmlwdGlvbkludmVzdGlnYXRpb246IFtdLAogICAgICAvL2lzSW52ZXN0aWdhdGlvbjogdHJ1ZSwKICAgICAgLy9pc1ByZXNjcmlwdGlvbjogZmFsc2UsCiAgICAgIC8vaXNDb250YWN0RXhpc3Q6ICIiLAogICAgICAvL2lzVmFsaWQ6ICIiLAogICAgICAvL2lzRW1haWxWYWxpZDogIiIsCiAgICAgIC8vaXNQYXRpZW50RXhpc3Q6ICIiLAogICAgICBpc0V4aXN0OiAiIiwKICAgICAgLy9jb2xsZWN0aW9uTGlzdDogW10sCiAgICAgIC8vYmxvb2RHcm91cExpc3Q6IFtdLAogICAgICAvL2dlbmRlckxpc3Q6IFtdLAogICAgICAvL2Rlc2lnbmF0aW9udExpc3Q6IFtdLAogICAgICAvL2RlcGFydG1lbnRMaXN0OiBbXSwKICAgICAgLy9kb2N0b3JMaXN0OiBbXSwKICAgICAgYnVpbGRpbmdMaXN0OiBbXSwKICAgICAgcm9vbUxpc3Q6IFtdLAogICAgICAvL3JlZmVycmVkQnlMaXN0OiBbXSwKICAgICAgLy9lbXBsb3llZUxpc3Q6IFtdLAogICAgICAvL2Rpc2NvdW50QnlMaXN0OiBbXSwKICAgICAgaW52ZXN0aWdhdGlvbkxpc3Q6IFtdLAogICAgICByZXBvcnREZWxpdmVyeVR5cGVMaXN0OiBbXSwKICAgICAgcHJvZHVjdExpc3Q6IFtdLAogICAgICBwYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Q6IHsKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDogewogICAgICAgICAgYWdlX3llYXI6ICIwIiwKICAgICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgICAgYWdlX2RheTogIjAiCiAgICAgICAgfSwKICAgICAgICBjZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICByZXBvcnRfZGVsaXZlcnlfdHlwZTogIlJlZ3VsYXIiLAogICAgICAgIGxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlsczogW10sCiAgICAgICAgbHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXI6IFtdLAogICAgICAgIGRpc2NvdW50X2J5X2lkOiAiQ29tcGFueSIsCiAgICAgICAgZGlzY291bnRfcGVyY2VudDogMCwKICAgICAgICBkaXNjb3VudF9hbW91bnQ6IDAsCiAgICAgICAgY29zdF9wcmljZTogMCwKICAgICAgICBwYXJ0aWN1bGFyX2Nvc3RfcHJpY2U6IDAsCiAgICAgICAgdG90YWxfYW1vdW50OiAwCiAgICAgIH0sCiAgICAgIGRpc2NvdW50QnlMaXN0OiBbewogICAgICAgIHRleHQ6ICJCb3RoIiwKICAgICAgICB2YWx1ZTogIkJvdGgiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiSG9zcGl0YWwiLAogICAgICAgIHZhbHVlOiAiQ29tcGFueSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJSZWZlcmVuY2UiLAogICAgICAgIHZhbHVlOiAiUmVmZXJlbmNlIgogICAgICB9XSwKICAgICAgLy8gSW52ZXN0aWdhdGlvbiBSZXF1ZXN0CiAgICAgIGlQREludmVzdGlnYXRpb25SZXF1ZXN0TGlzdDogW10sCiAgICAgIGlQREludmVzdGlnYXRpb25SZXF1ZXN0OiB7CiAgICAgICAgaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2lkOiBudWxsLAogICAgICAgIGFkbWlzc2lvbl9pZDogbnVsbAogICAgICB9LAogICAgICAvLyBQaGFybWFjeQogICAgICBhZG1pc3Npb25fbm86IG51bGwsCiAgICAgIHJlZ2lzdHJhdGlvbl9ubzogbnVsbCwKICAgICAgcGF0aWVudF9uYW1lOiBudWxsLAogICAgICBpUERNZWRpY2luZVJlcXVlc3RMaXN0OiBbXSwKICAgICAgaVBEUHJlc2NyaXB0aW9uTGlzdDogW10sCiAgICAgIGlQRFByZXNjcmlwdGlvbk1lZGljaW5lTGlzdDogW10sCiAgICAgIGlQRE1lZGljaW5lUmVxdWVzdDogewogICAgICAgIGxzdE1lZGljaW5lUmVxdWVzdERldGFpbHM6IFtdCiAgICAgIH0sCiAgICAgIGlQRE1lZGljaW5lUmVxdWVzdERpYWxvZzogZmFsc2UsCiAgICAgIC8vIFNlcnZpY2UKICAgICAgc2VydmljZURpYWxvZzogZmFsc2UsCiAgICAgIGlQRFNlcnZpY2VPYmo6IHsKICAgICAgICBsc3RTZXJ2aWNlOiBbXQogICAgICB9LAogICAgICAvLyBQYWNrYWdlCiAgICAgIHNlcnZpY2VQYWNrYWdlRGlhbG9nOiBmYWxzZSwKICAgICAgaVBEU2VydmljZVBhY2thZ2VPYmo6IHsKICAgICAgICBsc3RTZXJ2aWNlUGFja2FnZTogW10KICAgICAgfSwKICAgICAgLy8gVGFrZW4gU2VydmljZSAmIFBhY2thZ2UKICAgICAgdGFrZW5TZXJ2aWNlUGFja2FnZURpYWxvZzogZmFsc2UsCiAgICAgIHRha2VuU2VydmljZVBhY2thZ2VPYmo6IHsKICAgICAgICBsc3RUYWtlblNlcnZpY2U6IFtdLAogICAgICAgIGxhc3RUYWtlblNlcnZpY2VQYWNrYWdlOiBbXQogICAgICB9LAogICAgICAvLyBSb3VuZCBEb2N0b3IKICAgICAgZGVwYXJ0bWVudExpc3Q6IFtdLAogICAgICBkb2N0b3JMaXN0OiBbXSwKICAgICAgYXNzaWduUm91bmREb2N0b3I6IHt9LAogICAgICByb3VuZERvY3Rvckxpc3Q6IFtdLAogICAgICBsaXN0Um91bmREb2N0b3JEaWFsb2c6IGZhbHNlLAogICAgICByb3VuZERvY3RvckRpYWxvZzogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmFkbWlzc2lvblNlcnZpY2UgPSBuZXcgQWRtaXNzaW9uU2VydmljZSgpOwogICAgdGhpcy5hZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlID0gbmV3IEFkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLnZhbGlkYXRpb24gPSBuZXcgVmFsaWRhdGlvbigpOwogICAgdGhpcy51c2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIikpOwogICAgdGhpcy5zaG93KCk7CgogICAgaWYgKHRoaXMudXNlckluZm8ubnVyc2VfaWQpIHsKICAgICAgdGhpcy5pc051cnNlID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAoIXRoaXMudXNlckluZm8ubnVyc2VfaWQpIHsKICAgICAgdGhpcy5pc051cnNlID0gZmFsc2U7CiAgICB9IC8vIEludmVzdGlnYXRpb24gUmVxdWVzdAoKCiAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgPSBuZXcgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSgpOyAvL3RoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIC8vdGhpcy5lbXBsb3llZVNldHVwU2VydmljZSA9IG5ldyBFbXBsb3llZVNldHVwU2VydmljZSgpOwoKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlID0gbmV3IERvY3RvclNldHVwU2VydmljZSgpOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UgPSBuZXcgQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlKCk7IC8vdGhpcy5kZXNpZ25hdGlvblNldHVwU2VydmljZSA9IG5ldyBEZXNpZ25hdGlvblNldHVwU2VydmljZSgpOwoKICAgIHRoaXMuYnVpbGRpbmdTZXR1cFNlcnZpY2UgPSBuZXcgQnVpbGRpbmdTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucm9vbVNldHVwU2VydmljZSA9IG5ldyBSb29tU2V0dXBTZXJ2aWNlKCk7IC8vdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlID0gbmV3IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UoKTsKCiAgICB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UgPSBuZXcgSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSgpOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXR1cFNlcnZpY2UoKTsgLy90aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UgPSBuZXcgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSgpOwoKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsgLy90aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UoKTsKCiAgICB0aGlzLmlQRFJlcXVlc3RTZXJ2aWNlID0gbmV3IElQRFJlcXVlc3RTZXJ2aWNlKCk7IC8vIFNlcnZpY2UgJiBQYWNrYWdlCgogICAgdGhpcy5zZXJ2aWNlU2V0dXBTZXJ2aWNlID0gbmV3IFNlcnZpY2VTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuc2VydmljZVBhY2thZ2VTZXR1cFNlcnZpY2UgPSBuZXcgU2VydmljZVBhY2thZ2VTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuaVBEU2VydmljZSA9IG5ldyBJUERTZXJ2aWNlKCk7IC8vIFBoYXJtYWN5CgogICAgdGhpcy5tZWRpY2luZVJlcXVlc3RTZXJ2aWNlID0gbmV3IE1lZGljaW5lUmVxdWVzdFNlcnZpY2UoKTsKICAgIHRoaXMuaVBEUmVwb3J0U2VydmljZSA9IG5ldyBJUERSZXBvcnRTZXJ2aWNlKCk7IC8vIHRoaXMuY29tbW9uU2VydmljZQogICAgLy8gICAgIC5HZXRBbGxHZW5kZXIoKQogICAgLy8gICAgIC50aGVuKChkYXRhKSA9PiAodGhpcy5nZW5kZXJMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLmNvbW1vblNlcnZpY2UKICAgIC8vICAgICAuR2V0QWxsQmxvb2RHcm91cCgpCiAgICAvLyAgICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmJsb29kR3JvdXBMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLmRlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlCiAgICAvLyAgICAgLmdldEFsbCgpCiAgICAvLyAgICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmRlc2lnbmF0aW9udExpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMuY29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlCiAgICAvLyAgICAgLmdldEFjdGl2ZUNvbWJvKCkKICAgIC8vICAgICAudGhlbigoZGF0YSkgPT4gKHRoaXMuZGVwYXJ0bWVudExpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMuYnVpbGRpbmdTZXR1cFNlcnZpY2UKICAgIC8vICAgICAuZ2V0QWxsKCkKICAgIC8vICAgICAudGhlbigoZGF0YSkgPT4gKHRoaXMuYnVpbGRpbmdMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLnJvb21TZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbigoZGF0YSkgPT4gKHRoaXMucm9vbUxpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWN0aXZlQ29tYm8oKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gKHRoaXMucmVmZXJyZWRCeUxpc3QgPSBkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWN0aXZlQ29tYm8oKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSkpOwogICAgLy8gdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlCiAgICAvLyAgIC5nZXRBbGwoKQogICAgLy8gICAudGhlbigoZGF0YSkgPT4gdGhpcy5tZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEuZGF0YSkpOwogICAgLy8gdGhpcy5kb2N0b3JTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFsbCgpCiAgICAvLyAgIC50aGVuKChkYXRhKSA9PiB0aGlzLm1lcmdlRG9jdG9ySW5mbyhkYXRhLmRhdGEpKTsKICAgIC8vIHRoaXMuZW1wbG95ZWVTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFsbCgpCiAgICAvLyAgIC50aGVuKChkYXRhKSA9PiB0aGlzLm1lcmdlRW1wbG95ZWVJbmZvKGRhdGEuZGF0YSkpOwoKICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5pbnZlc3RpZ2F0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOyAvLyB0aGlzLmludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UKICAgIC8vICAgICAuZ2V0QWxsKCkKICAgIC8vICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5mb3JtYXRJbnZlc3RpZ2F0aW9uTGlzdChkYXRhLmRhdGEpKTsKCiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsUmVwb3J0RGVsaXZlcnlUeXBlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVwb3J0RGVsaXZlcnlUeXBlTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByb2R1Y3RMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7IC8vIFNlcnZpY2UgJiBQYWNrYWdlCgogICAgdGhpcy5nZXRTZXJ2aWNlKCk7CiAgICB0aGlzLmdldFNlcnZpY2VQYWNrYWdlKCk7IC8vCgogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UuZ2V0QWN0aXZlQ29tYm8oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZXBhcnRtZW50TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5kb2N0b3JTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VEb2N0b3JJbmZvKGRhdGEuZGF0YSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNlcnZpY2U6IGZ1bmN0aW9uIGdldFNlcnZpY2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zZXJ2aWNlU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnNlcnZpY2VGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0U2VydmljZVBhY2thZ2U6IGZ1bmN0aW9uIGdldFNlcnZpY2VQYWNrYWdlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuc2VydmljZVBhY2thZ2VTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMuc2VydmljZVBhY2thZ2VGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMuYWRtaXR0ZWRQYXRpZW50LmNkZnJvbWRhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYWRtaXR0ZWRQYXRpZW50LmNkdG9kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50LmZyb21kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmFkbWl0dGVkUGF0aWVudC5jZGZyb21kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnQudG9kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmFkbWl0dGVkUGF0aWVudC5jZHRvZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMudXNlckluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpKTsKICAgICAgICB0aGlzLmFkbWlzc2lvblNlcnZpY2UuYWRtaXR0ZWRQYXRpZW50TGlzdEZvckhpc3RvcnlCeU51cnNlSWQodGhpcy5hZG1pdHRlZFBhdGllbnQuZnJvbWRhdGUsIHRoaXMuYWRtaXR0ZWRQYXRpZW50LnRvZGF0ZSwgdGhpcy51c2VySW5mby5udXJzZV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5hZG1pdHRlZFBhdGllbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgfSwKICAgIGhpZGVEaWFsb2c6IGZ1bmN0aW9uIGhpZGVEaWFsb2coKSB7CiAgICAgIC8vdmFyIHBhdGllbnRJZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInBhdGllbnRJZEZvclRyZWF0bWVudCIpKS50b1N0cmluZygpOwogICAgICB0aGlzLnJvdW5kRG9jdG9yRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMubGlzdFJvdW5kRG9jdG9yRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VydmljZVBhY2thZ2VEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy50YWtlblNlcnZpY2VQYWNrYWdlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VydmljZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmludmVzdGlnYXRpb25SZXF1ZXN0RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuaVBETWVkaWNpbmVSZXF1ZXN0RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICB9LAogICAgaGlkZUNvbGxlY3Rpb25SZXF1ZXN0OiBmdW5jdGlvbiBoaWRlQ29sbGVjdGlvblJlcXVlc3QoKSB7CiAgICAgIHRoaXMuaXNSZXF1ZXN0ID0gZmFsc2U7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSB0cnVlOyAvL2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwYXRpZW50SWRGb3JUcmVhdG1lbnQnKTsKICAgIH0sCiAgICBjb2xsZWN0aW9uUmVxdWVzdDogZnVuY3Rpb24gY29sbGVjdGlvblJlcXVlc3QoZGF0YSkgewogICAgICBkZWJ1Z2dlcjsKICAgICAgdGhpcy5nZXRJUERJbnZlc3RpZ2F0aW9uUmVxdWVzdEJ5QWRtaXNzaW9uSWQoZGF0YS5hZG1pc3Npb25faWQpOwogICAgICB0aGlzLmdldE1lZGljaW5lUmVxdWVzdExpc3RCeUFkbWlzc2lvbk5vKGRhdGEuYWRtaXNzaW9uX25vKTsKICAgICAgdGhpcy5hZG1pc3Npb25faWQgPSBkYXRhLmFkbWlzc2lvbl9pZDsKICAgICAgdGhpcy5hZG1pc3Npb25fbm8gPSBkYXRhLmFkbWlzc2lvbl9ubzsKICAgICAgdGhpcy5wYXRpZW50X2lkID0gZGF0YS5wYXRpZW50X2lkOwogICAgICB0aGlzLnJlZ2lzdHJhdGlvbl9ubyA9IGRhdGEucmVnaXN0cmF0aW9uX25vOwogICAgICB0aGlzLnBhdGllbnRfbmFtZSA9IGRhdGEucGF0aWVudF9uYW1lOwogICAgICB0aGlzLmRvY3Rvcl9pZCA9IGRhdGEuZG9jdG9yX2lkOwogICAgICB0aGlzLmRvY3Rvcl9ubyA9IGRhdGEuZG9jX25vOwogICAgICB0aGlzLnJlZmZlcmVkX2J5X2lkID0gZGF0YS5yZWZmZXJlZF9ieV9pZDsKICAgICAgdGhpcy5pc1JlcXVlc3QgPSB0cnVlOwogICAgICB0aGlzLmRhdGFMaXN0ID0gZmFsc2U7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh2YWx1ZSkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgfSwKICAgIGZvcm1hdERhdGVUaW1lOiBmdW5jdGlvbiBmb3JtYXREYXRlVGltZSh2YWx1ZSkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSBoOm1tOnNzIGEiKTsKICAgIH0sCiAgICAvLyBJbnZlc3RpZ2F0aW9uIFJlcXVlc3QKICAgIGdldElQREludmVzdGlnYXRpb25SZXF1ZXN0QnlBZG1pc3Npb25JZDogZnVuY3Rpb24gZ2V0SVBESW52ZXN0aWdhdGlvblJlcXVlc3RCeUFkbWlzc2lvbklkKGFkbWlzc2lvbl9pZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuaVBEUmVxdWVzdFNlcnZpY2UuZ2V0SVBESW52ZXN0aWdhdGlvblJlcXVlc3RCeUFkbWlzc2lvbklkKGFkbWlzc2lvbl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczUuaVBESW52ZXN0aWdhdGlvblJlcXVlc3RMaXN0ID0gZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBwcmludEludmVzdGlnYXRpb25Ub2tlbjogZnVuY3Rpb24gcHJpbnRJbnZlc3RpZ2F0aW9uVG9rZW4oaWQpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlLkdldEludmVzdGlnYXRpb25Ub2tlbihpZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczYuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgbmV3SW52ZXN0aWdhdGlvblJlcXVlc3Q6IGZ1bmN0aW9uIG5ld0ludmVzdGlnYXRpb25SZXF1ZXN0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRoaXMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZS5nZXRQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uQnlBZG1pc3Npb25JZCh0aGlzLmFkbWlzc2lvbl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczcucHJlc2NyaXB0aW9uSW52ZXN0aWdhdGlvbihkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBwcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uOiBmdW5jdGlvbiBwcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uKGRhdGEpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLmxzdFByZXNjcmlwdGlvbkludmVzdGlnYXRpb24gPSBbXTsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM4LmxzdFByZXNjcmlwdGlvbkludmVzdGlnYXRpb24ucHVzaCh7CiAgICAgICAgICBhZG1pc3Npb25faWQ6IGVsZW1lbnQuYWRtaXNzaW9uX2lkLAogICAgICAgICAgaW52ZXN0aWdhdGlvbl9pZDogZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkLAogICAgICAgICAgaW52ZXN0aW5nYXRpb25fbmFtZTogZWxlbWVudC5pbnZlc3RpbmdhdGlvbl9uYW1lLAogICAgICAgICAgaXNDaGVjazogZmFsc2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuaW52ZXN0aWdhdGlvblJlcXVlc3REaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGludmVzdGlnYXRpb25SZXF1ZXN0OiBmdW5jdGlvbiBpbnZlc3RpZ2F0aW9uUmVxdWVzdCgpIHsKICAgICAgdGhpcy5sc3RQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uID0gdGhpcy5sc3RQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaXNDaGVjayA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5nZXRGb3JtYXR0ZWRQcmVzY3JpcHRpb25XaXNlSW52ZXN0aWdhdGlvbnModGhpcy5sc3RQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uKTsKICAgIH0sCiAgICBpUERJbnZlc3RpZ2F0aW9uUmVxdWVzdFNhdmU6IGZ1bmN0aW9uIGlQREludmVzdGlnYXRpb25SZXF1ZXN0U2F2ZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzOS5pUERJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM5LmlQREludmVzdGlnYXRpb25SZXF1ZXN0LmFkbWlzc2lvbl9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkuaVBEUmVxdWVzdFNlcnZpY2UuaVBESW52ZXN0aWdhdGlvblJlcXVlc3RTYXZlKF90aGlzOS5pUERJbnZlc3RpZ2F0aW9uUmVxdWVzdCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM5LmdldElQREludmVzdGlnYXRpb25SZXF1ZXN0QnlBZG1pc3Npb25JZChfdGhpczkuYWRtaXNzaW9uX2lkKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzOS5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM5LmhpZGVEaWFsb2coKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgX3RoaXM5LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogX2NvbnRleHQudDAsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIFBoYXJtYWN5CiAgICBnZXRNZWRpY2luZVJlcXVlc3RMaXN0QnlBZG1pc3Npb25ObzogZnVuY3Rpb24gZ2V0TWVkaWNpbmVSZXF1ZXN0TGlzdEJ5QWRtaXNzaW9uTm8oYWRtaXNzaW9uX25vKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHRoaXMubWVkaWNpbmVSZXF1ZXN0U2VydmljZS5nZXRNZWRpY2luZVJlcXVlc3RMaXN0QnlBZG1pc3Npb25ObyhhZG1pc3Npb25fbm8pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMC5pUERNZWRpY2luZVJlcXVlc3RMaXN0ID0gZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBwcmludE1lZGljaW5lUmVxdWVzdDogZnVuY3Rpb24gcHJpbnRNZWRpY2luZVJlcXVlc3QoaWQpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdGhpcy5pUERSZXBvcnRTZXJ2aWNlLkdldE1lZGljaW5lUmVxdWVzdFRva2VuKGlkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMTEuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgbmV3TWVkaWNpbmVSZXF1ZXN0OiBmdW5jdGlvbiBuZXdNZWRpY2luZVJlcXVlc3QoKSB7CiAgICAgIHRoaXMuaVBETWVkaWNpbmVSZXF1ZXN0LmxzdE1lZGljaW5lUmVxdWVzdERldGFpbHMgPSBbXTsKICAgICAgdGhpcy5waGFybWFjeSA9IHRydWU7CiAgICAgIHRoaXMuaXNSZXF1ZXN0ID0gZmFsc2U7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSBmYWxzZTsKICAgIH0sCiAgICBwcmVzY3JpYmVNZWRpY2luZTogZnVuY3Rpb24gcHJlc2NyaWJlTWVkaWNpbmUoKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHRoaXMuaVBETWVkaWNpbmVSZXF1ZXN0LmFkbWlzc2lvbl9wcmVzY3JpcHRpb25faWQgPSBudWxsOwogICAgICB0aGlzLmlQRFByZXNjcmlwdGlvbk1lZGljaW5lTGlzdCA9IFtdOwogICAgICB0aGlzLmFkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UuZ2V0UHJlc2NyaXB0aW9uTm9CeUFkbWlzc2lvbklkKHRoaXMuYWRtaXNzaW9uX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMTIucHJlc2NyaXB0aW9uTm8oZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcHJlc2NyaXB0aW9uTm86IGZ1bmN0aW9uIHByZXNjcmlwdGlvbk5vKGRhdGEpIHsKICAgICAgdGhpcy5pUERQcmVzY3JpcHRpb25MaXN0ID0gZGF0YTsKICAgICAgdGhpcy5pUERNZWRpY2luZVJlcXVlc3REaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGhpZGVNZWRpY2luZVJlcXVlc3Q6IGZ1bmN0aW9uIGhpZGVNZWRpY2luZVJlcXVlc3QoKSB7CiAgICAgIHRoaXMucGhhcm1hY3kgPSBmYWxzZTsKICAgICAgdGhpcy5pc1JlcXVlc3QgPSB0cnVlOwogICAgICB0aGlzLmRhdGFMaXN0ID0gZmFsc2U7CiAgICB9LAogICAgZ2V0UHJlc2NyaXB0aW9uRGF0YTogZnVuY3Rpb24gZ2V0UHJlc2NyaXB0aW9uRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaVBETWVkaWNpbmVSZXF1ZXN0LmFkbWlzc2lvbl9wcmVzY3JpcHRpb25faWQpIHsKICAgICAgICB0aGlzLmFkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UuZ2V0UHJlc2NyaXB0aW9uRGF0YUJ5UHJlc2NyaXB0aW9uSWQodGhpcy5pUERNZWRpY2luZVJlcXVlc3QuYWRtaXNzaW9uX3ByZXNjcmlwdGlvbl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTMucHJlc2NyaXB0aW9uRGF0YShkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcHJlc2NyaXB0aW9uRGF0YTogZnVuY3Rpb24gcHJlc2NyaXB0aW9uRGF0YShkYXRhKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHRoaXMuaVBEUHJlc2NyaXB0aW9uTWVkaWNpbmVMaXN0ID0gW107CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzMTQuaVBEUHJlc2NyaXB0aW9uTWVkaWNpbmVMaXN0LnB1c2goewogICAgICAgICAgbWVkaWNpbmVfaWQ6IGVsZW1lbnQubWVkaWNpbmVfaWQsCiAgICAgICAgICBtZWRpY2luZV9uYW1lOiBlbGVtZW50Lm1lZGljaW5lX25hbWUsCiAgICAgICAgICB0cmVhdG1lbnRfcnVsZV9uYW1lOiBlbGVtZW50LnRyZWF0bWVudF9ydWxlX25hbWUsCiAgICAgICAgICB0cmVhdG1lbnRfZHVyYXRpb25fbmFtZTogZWxlbWVudC50cmVhdG1lbnRfZHVyYXRpb25fbmFtZSwKICAgICAgICAgIHRyZWF0bWVudF9kb3NlX25hbWU6IGVsZW1lbnQudHJlYXRtZW50X2Rvc2VfbmFtZSwKICAgICAgICAgIG1lZGljaW5lX2dlbmVyaWNfbmFtZTogZWxlbWVudC5tZWRpY2luZV9nZW5lcmljX25hbWUsCiAgICAgICAgICBzdHJnZW50aDogZWxlbWVudC5zdHJnZW50aCwKICAgICAgICAgIG1lZGljaW5lX3R5cGVfbmFtZTogZWxlbWVudC5tZWRpY2luZV90eXBlX25hbWUsCiAgICAgICAgICB1b21fbmFtZTogZWxlbWVudC51b21fbmFtZSwKICAgICAgICAgIG1hbnVmYWN0dXJlcl9uYW1lOiBlbGVtZW50Lm1hbnVmYWN0dXJlcl9uYW1lLAogICAgICAgICAgcmVxdWVzdF9xdHk6IDEsCiAgICAgICAgICBpc0NoZWNrOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRSZXF1ZXN0TWVkaWNpbmU6IGZ1bmN0aW9uIHNldFJlcXVlc3RNZWRpY2luZSgpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlckRhdGEgPSB0aGlzLmlQRFByZXNjcmlwdGlvbk1lZGljaW5lTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmlzQ2hlY2sgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBhTWVkaWNpbmUgPSBfdGhpczE1LmlQRE1lZGljaW5lUmVxdWVzdC5sc3RNZWRpY2luZVJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5tZWRpY2luZV9pZCA9PT0gZWxlbWVudC5tZWRpY2luZV9pZDsKICAgICAgICB9LCBfdGhpczE1KTsKCiAgICAgICAgaWYgKCFhTWVkaWNpbmUubGVuZ3RoKSB7CiAgICAgICAgICBfdGhpczE1LmlQRE1lZGljaW5lUmVxdWVzdC5sc3RNZWRpY2luZVJlcXVlc3REZXRhaWxzLnB1c2goewogICAgICAgICAgICBtZWRpY2luZV9pZDogZWxlbWVudC5tZWRpY2luZV9pZCwKICAgICAgICAgICAgbWVkaWNpbmVfbmFtZTogZWxlbWVudC5tZWRpY2luZV9uYW1lLAogICAgICAgICAgICB0cmVhdG1lbnRfcnVsZV9uYW1lOiBlbGVtZW50LnRyZWF0bWVudF9ydWxlX25hbWUsCiAgICAgICAgICAgIHRyZWF0bWVudF9kdXJhdGlvbl9uYW1lOiBlbGVtZW50LnRyZWF0bWVudF9kdXJhdGlvbl9uYW1lLAogICAgICAgICAgICB0cmVhdG1lbnRfZG9zZV9uYW1lOiBlbGVtZW50LnRyZWF0bWVudF9kb3NlX25hbWUsCiAgICAgICAgICAgIG1lZGljaW5lX2dlbmVyaWNfbmFtZTogZWxlbWVudC5tZWRpY2luZV9nZW5lcmljX25hbWUsCiAgICAgICAgICAgIG1lZGljaW5lX3N0cmdlbnRoOiBlbGVtZW50LnN0cmdlbnRoLAogICAgICAgICAgICBtZWRpY2luZV90eXBlX25hbWU6IGVsZW1lbnQubWVkaWNpbmVfdHlwZV9uYW1lLAogICAgICAgICAgICBtZWRpY2luZV91b21fbmFtZTogZWxlbWVudC51b21fbmFtZSwKICAgICAgICAgICAgbWVkaWNpbmVfbWFudWZhY3R1cmVyX25hbWU6IGVsZW1lbnQubWFudWZhY3R1cmVyX25hbWUsCiAgICAgICAgICAgIGlzQ2hlY2s6IGVsZW1lbnQuaXNDaGVjaywKICAgICAgICAgICAgcmVxdWVzdF9xdHk6IGVsZW1lbnQucmVxdWVzdF9xdHkgPT0gIiIgfHwgZWxlbWVudC5yZXF1ZXN0X3F0eSA9PSAwID8gMSA6IGVsZW1lbnQucmVxdWVzdF9xdHkKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMTUuaGlkZURpYWxvZygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczE1LiR0b2FzdC5hZGQoewogICAgICAgICAgICBzZXZlcml0eTogIndhcm4iLAogICAgICAgICAgICBzdW1tYXJ5OiAiV2FybiBNZXNzYWdlIiwKICAgICAgICAgICAgZGV0YWlsOiBhTWVkaWNpbmVbMF0ubWVkaWNpbmVfbmFtZSArICIgYWxyZWFkeSBhZGRlZCIsCiAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVJlcXVlc3RNZWRpY2luZTogZnVuY3Rpb24gZGVsZXRlUmVxdWVzdE1lZGljaW5lKGRhdGEpIHsKICAgICAgdGhpcy5pUERNZWRpY2luZVJlcXVlc3QubHN0TWVkaWNpbmVSZXF1ZXN0RGV0YWlscyA9IHRoaXMuaVBETWVkaWNpbmVSZXF1ZXN0LmxzdE1lZGljaW5lUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5tZWRpY2luZV9pZCAhPSBkYXRhLm1lZGljaW5lX2lkOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICAvLyBNZWRpY2luZSBSZXF1ZXN0CiAgICBtZWRpY2luZVJlcXVlc3Q6IGZ1bmN0aW9uIG1lZGljaW5lUmVxdWVzdCgpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGFNZWRpY2luZSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfdGhpczE2LmlQRE1lZGljaW5lUmVxdWVzdC5hZG1pc3Npb25fbm8gPSBfdGhpczE2LmFkbWlzc2lvbl9ubzsKICAgICAgICAgICAgICAgIF90aGlzMTYuaVBETWVkaWNpbmVSZXF1ZXN0LnBhdGllbnRfcmVnaXN0cmF0aW9uX25vID0gX3RoaXMxNi5yZWdpc3RyYXRpb25fbm87CiAgICAgICAgICAgICAgICBfdGhpczE2LmlQRE1lZGljaW5lUmVxdWVzdC5wYXRpZW50X25hbWUgPSBfdGhpczE2LnBhdGllbnRfbmFtZTsKICAgICAgICAgICAgICAgIGFNZWRpY2luZSA9IF90aGlzMTYuaVBETWVkaWNpbmVSZXF1ZXN0LmxzdE1lZGljaW5lUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWwucmVxdWVzdF9xdHkgPT0gIiI7CiAgICAgICAgICAgICAgICB9LCBfdGhpczE2KTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNi5pUERNZWRpY2luZVJlcXVlc3QuYWRtaXNzaW9uX25vKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNi5pUERNZWRpY2luZVJlcXVlc3QucGF0aWVudF9yZWdpc3RyYXRpb25fbm8pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTYuaVBETWVkaWNpbmVSZXF1ZXN0LnBhdGllbnRfbmFtZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBpZiAoIWFNZWRpY2luZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMxNi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6ICJQbGVhc2UgZW50ZXIgbWVkaWNpbmUgcXR5IiwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIGlmIChfdGhpczE2LmlQRE1lZGljaW5lUmVxdWVzdC5sc3RNZWRpY2luZVJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogIlBsZWFzZSBhZGQgbWVkaWNpbmUgZm9yIHJlcXVlc3QiLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE2Lm1lZGljaW5lUmVxdWVzdFNlcnZpY2UuYWRkKF90aGlzMTYuaVBETWVkaWNpbmVSZXF1ZXN0LCBfdGhpczE2KTsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxNi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJSZXF1ZXN0IFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczE2LmhpZGVNZWRpY2luZVJlcXVlc3QoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTYuZ2V0TWVkaWNpbmVSZXF1ZXN0TGlzdEJ5QWRtaXNzaW9uTm8oX3RoaXMxNi5hZG1pc3Npb25fbm8pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxNi5wcmludE1lZGljaW5lUmVxdWVzdChyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzM7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgX3RoaXMxNi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0Mi50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDMzXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBmb3JtYXRJbnZlc3RpZ2F0aW9uTGlzdChkYXRhKSB7CiAgICAvLyAgICAgbGV0IGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgLy8gICAgIH0sIHRoaXMpOwogICAgLy8gICAgIGZpbHRlckRhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgLy8gICAgICAgICB2YXIgb2JqID0gZWxlbWVudDsKICAgIC8vICAgICAgICAgb2JqLmludmVzdGluZ2F0aW9uX25hbWUgPSBlbGVtZW50Lm1hbnVhbF9jb2RlICsgIi0iICsgZWxlbWVudC5pbnZlc3RpbmdhdGlvbl9uYW1lOwogICAgLy8gICAgICAgICB0aGlzLmludmVzdGlnYXRpb25MaXN0LnB1c2gob2JqKTsKICAgIC8vICAgICB9KTsKICAgIC8vIH0sCiAgICAvLyBtZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEpIHsKICAgIC8vICAgICBsZXQgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgLy8gICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAvLyAgICAgfSwgdGhpcyk7CiAgICAvLyAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgICAgIHRoaXMucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAvLyAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC5yZWdpc3RyYXRpb25fbm8sCiAgICAvLyAgICAgICAgICAgICB0ZXh0OiBlbGVtZW50Lm1hbnVhbF9jb2RlICsgIi0iICsgZWxlbWVudC5yZWdpc3RyYXRpb25fbm8gKyAiLSIgKyBlbGVtZW50LnJlZmZlcmVkX2J5X25hbWUgKyAiKFJlZmVycmVkIEJ5KSIsCiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1lcmdlRG9jdG9ySW5mbyhkYXRhKSB7CiAgICAvLyAgICAgLy90aGlzLmRvY3Rvckxpc3QgPSBkYXRhOwogICAgLy8gICAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgLy8gICAgICAgICB0aGlzLnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgLy8gICAgICAgICAgICAgdmFsdWU6IGVsZW1lbnQuZG9jX25vLAogICAgLy8gICAgICAgICAgICAgdGV4dDogZWxlbWVudC5kb2Nfbm8gKyAiLSIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lICsgIihEb2N0b3IpIiwKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfSk7CiAgICAvLyAgICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgICAgIHRoaXMuZG9jdG9yTGlzdC5wdXNoKHsKICAgIC8vICAgICAgICAgICAgIGRlcGFydG1lbnRfaWQ6IGVsZW1lbnQuZGVwYXJ0bWVudF9pZCwKICAgIC8vICAgICAgICAgICAgIGRvY3Rvcl9pZDogZWxlbWVudC5kb2N0b3JfaWQsCiAgICAvLyAgICAgICAgICAgICBkb2N0b3JfbmFtZTogZWxlbWVudC5kb2Nfbm8gKyAiLSIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lLAogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICB9KTsKICAgIC8vIH0sCiAgICAvLyBtZXJnZUVtcGxveWVlSW5mbyhkYXRhKSB7CiAgICAvLyAgICAgbGV0IGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgLy8gICAgIH0sIHRoaXMpOwogICAgLy8gICAgIGZpbHRlckRhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgLy8gICAgICAgICB0aGlzLnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgLy8gICAgICAgICAgICAgdmFsdWU6IGVsZW1lbnQuZW1wX25vLAogICAgLy8gICAgICAgICAgICAgdGV4dDogZWxlbWVudC5lbXBfbm8gKyAiLSIgKyBlbGVtZW50LmZpcnN0X25hbWUgKyAiKEVtcGxveWVlKSIsCiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1lcmdlRG9jdG9ySW5mbyhkYXRhKSB7CiAgICAvLyAgIHRoaXMuZG9jdG9yTGlzdCA9IGRhdGE7CiAgICAvLyAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgLy8gICAgIHRoaXMuZGlzY291bnRCeUxpc3QucHVzaCh7CiAgICAvLyAgICAgICB2YWx1ZTogZWxlbWVudC5kb2Nfbm8sCiAgICAvLyAgICAgICB0ZXh0OiBlbGVtZW50LmRvY19ubyArICItIiArIGVsZW1lbnQuZG9jdG9yX25hbWUgKyAiKERvY3RvcikiLAogICAgLy8gICAgIH0pOwogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICAvLyBtZXJnZUVtcGxveWVlSW5mbyhkYXRhKSB7CiAgICAvLyAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgLy8gICAgIHRoaXMuZGlzY291bnRCeUxpc3QucHVzaCh7CiAgICAvLyAgICAgICB2YWx1ZTogZWxlbWVudC5lbXBfbm8sCiAgICAvLyAgICAgICB0ZXh0OiBlbGVtZW50LmVtcF9ubyArICItIiArIGVsZW1lbnQuZmlyc3RfbmFtZSArICIoRW1wbG95ZWUpIiwKICAgIC8vICAgICB9KTsKICAgIC8vICAgfSk7CiAgICAvLyB9LAogICAgLy8gaW52UmVzZXQoKSB7CiAgICAvLyAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24gPSAiIjsKICAgIC8vICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgIC8vIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIC8vdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICAvL3RoaXMuaXNQcmVzY3JpcHRpb24gPSBmYWxzZTsKICAgICAgLy90aGlzLmJ1dHRvbiA9IGZhbHNlOwogICAgICAvL3RoaXMuaXNWYWxpZCA9ICIiOwogICAgICAvL3RoaXMuaXNFbWFpbFZhbGlkID0gIiI7CiAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOyAvL3RoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKCiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0ID0gewogICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7CiAgICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgICB9LAogICAgICAgIGNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHJlcG9ydF9kZWxpdmVyeV90eXBlOiAiUmVndWxhciIsCiAgICAgICAgbHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzOiBbXSwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhcjogW10sCiAgICAgICAgZGlzY291bnRfYnlfaWQ6ICJDb21wYW55IiwKICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAwLAogICAgICAgIGRpc2NvdW50X2Ftb3VudDogMCwKICAgICAgICBjb3N0X3ByaWNlOiAwLAogICAgICAgIHBhcnRpY3VsYXJfY29zdF9wcmljZTogMCwKICAgICAgICB0b3RhbF9hbW91bnQ6IDAKICAgICAgfTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5pUERJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IHsKICAgICAgICBpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfaWQ6IG51bGwsCiAgICAgICAgYWRtaXNzaW9uX2lkOiBudWxsCiAgICAgIH07CiAgICB9LAogICAgLy8gZG9jdG9yUmVzZXQoKSB7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGVwYXJ0bWVudF9pZCA9ICIiOwogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlZmZlcmVkX2RvY3Rvcl9pZCA9ICIiOwogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRlc2lnbmF0aW9uX2lkID0gIiI7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Qub3V0c2lkZV9kb2N0b3JfbmFtZSA9ICIiOwogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0Lm91dHNpZGVfZG9jdG9yX2hvc3BpdGFsX25hbWUgPSAiIjsKICAgIC8vIH0sCiAgICAvLyBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2UoKSB7CiAgICAvLyAgICAgcmV0dXJuIHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAvLyAgICAgICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgICAgICBlbC5kZXBhcnRtZW50X2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZXBhcnRtZW50X2lkCiAgICAvLyAgICAgICAgICk7CiAgICAvLyAgICAgfSwgdGhpcyk7CiAgICAvLyB9LAogICAgLy8gZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkKCkgewogICAgLy8gICAgIHZhciBhRG9jdG9yID0gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuIGVsLmRvY3Rvcl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZG9jdG9yX2lkOwogICAgLy8gICAgIH0sIHRoaXMpOwogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvbnN1bHRhbmN5X2ZlZSA9CiAgICAvLyAgICAgICAgIGFEb2N0b3JbMF0uY29uc3VsdGFuY3lfZmVlOwogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmJ1aWxkaW5nX2lkID0gYURvY3RvclswXS5fYnVpbGRpbmdfaWQ7CiAgICAvLyAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Qucm9vbV9pZCA9IGFEb2N0b3JbMF0ucm9vbV9pZDsKICAgIC8vIH0sCiAgICAvLyBmaWx0ZXJSb29tc0J1aWxkaW5nV2lzZSgpIHsKICAgIC8vICAgICByZXR1cm4gdGhpcy5yb29tTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAvLyAgICAgICAgIHJldHVybiBlbC5idWlsZGluZ19pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYnVpbGRpbmdfaWQ7CiAgICAvLyAgICAgfSwgdGhpcyk7CiAgICAvLyB9LAogICAgLy8gZmlsdGVySW52ZXN0aWdhdGlvbigpIHsKICAgIC8vICAgICByZXR1cm4gdGhpcy5pbnZlc3RpZ2F0aW9uTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAvLyAgICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgIC8vICAgICB9LCB0aGlzKTsKICAgIC8vIH0sCiAgICAvLyBmaWx0ZXJQcm9kdWN0KCkgewogICAgLy8gICAgIHJldHVybiB0aGlzLnByb2R1Y3RMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIC8vICAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfY2F0ZWdvcnlfaWQgPT0gMSAmJiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgIC8vICAgICB9LCB0aGlzKTsKICAgIC8vIH0sCiAgICAvLyBnZXRGb3JtYXR0ZWQoZGF0YSkgewogICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50ID0gZGF0YTsKICAgIC8vICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LnBhdGllbnRfaWQpIHsKICAgIC8vICAgICAgICAgdGhpcy5pc1BhdGllbnRFeGlzdCA9ICJQYXRpZW50IG5vdCBFeGlzdCEiOwogICAgLy8gICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IHsKICAgIC8vICAgICAgICAgLy8gICBwYXRpZW50X2lkOiAiIiwKICAgIC8vICAgICAgICAgLy8gICBhUGF0aWVudDoge30sCiAgICAvLyAgICAgICAgIC8vIH07CiAgICAvLyAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICB0aGlzLmlzUGF0aWVudEV4aXN0ID0gIiI7CiAgICAvLyAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhdGllbnRfaWQgPQogICAgLy8gICAgICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQucGF0aWVudF9pZDsKICAgIC8vICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY2Rkb2IgPSBtb21lbnQoCiAgICAvLyAgICAgICAgICAgICBTdHJpbmcodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuZG9iKQogICAgLy8gICAgICAgICApLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgLy8gICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyLnRvU3RyaW5nKCk7CiAgICAvLyAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aC50b1N0cmluZygpOwogICAgLy8gICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheS50b1N0cmluZygpOwogICAgLy8gICAgIH0KICAgIC8vIH0sCiAgICBnZXRGb3JtYXR0ZWRQcmVzY3JpcHRpb25XaXNlSW52ZXN0aWdhdGlvbnM6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFByZXNjcmlwdGlvbldpc2VJbnZlc3RpZ2F0aW9ucyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmZpcnN0X25hbWUgPSAiSVBEIjsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY29udGFjdF9ubyA9ICIwMTciOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXRpZW50X2lkID0gdGhpcy5wYXRpZW50X2lkOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9kb2N0b3JfaWQgPSB0aGlzLmRvY3Rvcl9pZDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVmZmVyZWRfYnlfaWQgPSB0aGlzLnJlZmZlcmVkX2J5X2lkOyAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyLnRvU3RyaW5nKCk7CiAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aC50b1N0cmluZygpOwogICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheS50b1N0cmluZygpOwogICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZXBhcnRtZW50X2lkID0gZGF0YVswXS5kZXBhcnRtZW50X2lkOwogICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZWZmZXJlZF9kb2N0b3JfaWQgPSBkYXRhWzBdLmRvY3Rvcl9pZDsKICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVmZmVyZWRfYnlfaWQgPSBkYXRhWzBdLmRvY19ubzsKICAgICAgLy90aGlzLmlzUHJlc2NyaXB0aW9uID0gdHJ1ZTsKCiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBhSW52ZXN0aWdhdGlvbiA9IF90aGlzMTcuaW52ZXN0aWdhdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgICB9LCBfdGhpczE3KVswXTsKCiAgICAgICAgX3RoaXMxNy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbiA9IGFJbnZlc3RpZ2F0aW9uOwoKICAgICAgICBfdGhpczE3LmFkZEludmVzdGlnYXRpb24oKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkKCk7CiAgICB9LAogICAgLy8gZmluZFBhdGllbnQoKSB7CiAgICAvLyAgICAgbGV0IHN0ciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvbnRhY3RPclJlZ05vOwogICAgLy8gICAgIGlmIChzdHIuc3RhcnRzV2l0aCgiUFJFUyIpKSB7CiAgICAvLyAgICAgICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlCiAgICAvLyAgICAgICAgICAgICAucHJlc2NyaXB0aW9uV2lzZUludmVzdGlnYXRpb25zKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvbnRhY3RPclJlZ05vLCB0aGlzKQogICAgLy8gICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHRoaXMuZ2V0Rm9ybWF0dGVkUHJlc2NyaXB0aW9uV2lzZUludmVzdGlnYXRpb25zKGRhdGEuZGF0YSkpOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMuaXNQcmVzY3JpcHRpb24gPSBmYWxzZTsKICAgIC8vICAgICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZQogICAgLy8gICAgICAgICAgICAgLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29udGFjdE9yUmVnTm8sIHRoaXMpCiAgICAvLyAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy5nZXRGb3JtYXR0ZWQoZGF0YS5kYXRhKSk7CiAgICAvLyAgICAgfQogICAgLy8gfSwKICAgIC8vIGlzRXhpc3RDb250YWN0KCkgewogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY29udGFjdF9uby5tYXRjaCgKICAgIC8vICAgICAgICAgICAgIC9eKDAxKShbMC05XXs5fSkkLwogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKSB7CiAgICAvLyAgICAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UKICAgIC8vICAgICAgICAgICAgIC5nZXRCeUNvbnRhY3RPclJlZ05vKAogICAgLy8gICAgICAgICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmNvbnRhY3Rfbm8sIHRoaXMKICAgIC8vICAgICAgICAgICAgICkKICAgIC8vICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLmdldENvbnRhY3QoZGF0YS5kYXRhKSk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9CiAgICAvLyAgICAgICAgICAgICAiQ29udGFjdCBudW1iZXIgbXVzdCBzdGFydCB3aXRoIDAxIGFuZCB0aGUgcmVxdWlyZWQgbGVuZ3RoIGlzIDExIjsKICAgIC8vICAgICB9CiAgICAvLyB9LAogICAgLy8gZ2V0Q29udGFjdChkYXRhKSB7CiAgICAvLyAgICAgaWYgKGRhdGEuY29udGFjdF9ubykgewogICAgLy8gICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkR1cGxpY2F0ZSBwaG9uZSBudW1iZXIhIjsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAvLyAgICAgfQogICAgLy8gfSwKICAgIGludmVzdGlnYXRpb25Jc0V4aXN0OiBmdW5jdGlvbiBpbnZlc3RpZ2F0aW9uSXNFeGlzdCgpIHsKICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhSW52ZXN0aWdhdGlvbi5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBJbnZlc3RpZ2F0aW9uIGFscmVhZHkgYWRkZWQiOwogICAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdmFyIGFJbnYgPSB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAvLyAgIHJldHVybiAoCiAgICAgICAgLy8gICAgIGVsLmludmVzdGlnYXRpb25faWQgPT09CiAgICAgICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZAogICAgICAgIC8vICAgKTsKICAgICAgICAvLyB9LCB0aGlzKTsKICAgICAgICAvLyB0aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UKICAgICAgICAvLyAgIC5nZXRCeUlkKGFJbnZbMF0uY29sbGVjdGlvbl9jZW50ZXJfaWQpCiAgICAgICAgLy8gICAudGhlbigoZGF0YSkgPT4gKHRoaXMuY29sbGVjdGlvbkxpc3QgPSBkYXRhLmRhdGEpKTsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmlzSW52ZXN0aWdhdGlvbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYWRkSW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gYWRkSW52ZXN0aWdhdGlvbigpIHsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICB2YXIgYUludmVzdGlnYXRpb24gPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFJbnZlc3RpZ2F0aW9uLmxlbmd0aCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJUaGlzIEludmVzdGlnYXRpb24gYWxyZWFkeSBhZGRlZCI7IC8vdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwoKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgICAgdmFyIGNvc3QgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSA9PSAiUmVndWxhciIgPyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmNoYXJnZSA6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24udXJnZW50X2NhcmdlOwogICAgICAgICAgdmFyIGRlbGl2ZXJ5VGltZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlcG9ydF9kZWxpdmVyeV90eXBlID09ICJSZWd1bGFyIiA/IHRoaXMuZXhwZWN0ZWRIb3VyKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24ucmVwb3J0X2RlbGl2ZXJ5X2R1cmF0aW9uKSA6IHRoaXMuZXhwZWN0ZWRIb3VyKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uZW1tZXJnZW5jeV9yZXBvcnRfZGVsaXZlcnlfZHVyYXRpb24pOwogICAgICAgICAgdmFyIGRpc2NvdW50QW1vdW50ID0gMSAqIGNvc3QgKiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmRpc2NvdW50X3BlcmNlbnQgLyAxMDA7CiAgICAgICAgICB2YXIgdG90YWxBbW91bnQgPSAxICogY29zdCAtIGRpc2NvdW50QW1vdW50OwogICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgaW52ZXN0aWdhdGlvbl9pZDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkLAogICAgICAgICAgICBfaW52ZXN0aW5nYXRpb25fbmFtZTogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpbmdhdGlvbl9uYW1lLAogICAgICAgICAgICBfaW52ZXN0aWdhdGlvbl9jYXRlZ29yeV9oZWFkX25hbWU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uX2ludmVzdGlnYXRpb25fY2F0ZWdvcnlfaGVhZF9uYW1lLAogICAgICAgICAgICAvLyBidWlsZGluZ19pZDogdGhpcy5jb2xsZWN0aW9uTGlzdC5fYnVpbGRpbmdfaWQsCiAgICAgICAgICAgIC8vIF9idWlsZGluZ19uYW1lOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9idWlsZGluZ19uYW1lLAogICAgICAgICAgICAvLyByb29tX2lkOiB0aGlzLmNvbGxlY3Rpb25MaXN0LnJvb21faWQsCiAgICAgICAgICAgIC8vIF9yb29tX25hbWU6IHRoaXMuY29sbGVjdGlvbkxpc3QuX3Jvb21fbmFtZSwKICAgICAgICAgICAgYnVpbGRpbmdfaWQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uX2J1aWxkaW5nX2lkLAogICAgICAgICAgICByb29tX2lkOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLl9yb29tX2lkLAogICAgICAgICAgICBleHBlY3RlZF9kZWxpdmVyeTogZGVsaXZlcnlUaW1lLAogICAgICAgICAgICByZXBvcnRfZGVsaXZlcnlfdHlwZTogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUsCiAgICAgICAgICAgIHF1YW50aXR5OiAxLAogICAgICAgICAgICBjb3N0X3ByaWNlOiBjb3N0LAogICAgICAgICAgICBkaXNjb3VudF9wZXJjZW50OiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmRpc2NvdW50X3BlcmNlbnQsCiAgICAgICAgICAgIGRpc2NvdW50X2Ftb3VudDogZGlzY291bnRBbW91bnQsCiAgICAgICAgICAgIHRvdGFsX2Ftb3VudDogdG90YWxBbW91bnQKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMucHVzaChvYmopOwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKyB0b3RhbEFtb3VudDsgLy8KCiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9CiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFkZFBhcnRpY3VsYXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkKTsKICAgIH0sCiAgICBjYWxjdWxhdGVQZXJJbnZlc3RpZ2F0aW9uRGlzY291bnRQZXJjZW50OiBmdW5jdGlvbiBjYWxjdWxhdGVQZXJJbnZlc3RpZ2F0aW9uRGlzY291bnRQZXJjZW50KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkID09IGRhdGEuaW52ZXN0aWdhdGlvbl9pZCkgewogICAgICAgICAgZWxlbWVudC5kaXNjb3VudF9wZXJjZW50ID0gZWxlbWVudC5kaXNjb3VudF9hbW91bnQgLyBlbGVtZW50LmNvc3RfcHJpY2UgKiAxMDA7IC8vdmFyIGRpc2NvdW50X2Ftb3VudCA9IChlbGVtZW50LmNvc3RfcHJpY2UgKiBlbGVtZW50LmRpc2NvdW50X3BlcmNlbnQpIC8gMTAwOwoKICAgICAgICAgIGVsZW1lbnQudG90YWxfYW1vdW50ID0gZWxlbWVudC5jb3N0X3ByaWNlIC0gZWxlbWVudC5kaXNjb3VudF9hbW91bnQ7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5jYWxjdWxhdGVDb3N0UHJpY2UoKTsKICAgIH0sCiAgICBjYWxjdWxhdGVQZXJJbnZlc3RpZ2F0aW9uRGlzY291bnRBbW91bnQ6IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlckludmVzdGlnYXRpb25EaXNjb3VudEFtb3VudChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZCA9PSBkYXRhLmludmVzdGlnYXRpb25faWQpIHsKICAgICAgICAgIGVsZW1lbnQuZGlzY291bnRfYW1vdW50ID0gZWxlbWVudC5jb3N0X3ByaWNlICogZWxlbWVudC5kaXNjb3VudF9wZXJjZW50IC8gMTAwOwogICAgICAgICAgZWxlbWVudC50b3RhbF9hbW91bnQgPSBlbGVtZW50LmNvc3RfcHJpY2UgLSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNhbGN1bGF0ZUNvc3RQcmljZSgpOwogICAgfSwKICAgIGNhbGN1bGF0ZUNvc3RQcmljZTogZnVuY3Rpb24gY2FsY3VsYXRlQ29zdFByaWNlKCkgewogICAgICB2YXIgY29zdFByaWNlID0gMDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBjb3N0UHJpY2UgPSBjb3N0UHJpY2UgKyBlbGVtZW50LnRvdGFsX2Ftb3VudDsKICAgICAgfSk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgPSBjb3N0UHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBjYWxjdWxhdGVUb3RhbEFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxBbW91bnQoKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IE1hdGguY2VpbCh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlIC0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50ICsgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlKTsKICAgIH0sCiAgICBhZGRQYXJ0aWN1bGFyOiBmdW5jdGlvbiBhZGRQYXJ0aWN1bGFyKGlkKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZS5nZXRCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMTguZ2V0UGFydGljdWxhckZvcm1hdHRlZChkYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkQVBhcnRpY3VsYXI6IGZ1bmN0aW9uIGFkZEFQYXJ0aWN1bGFyKGRhdGEsIHF0eSwgcG5hbWUpIHsKICAgICAgaWYgKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGggPD0gMCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJBZGQgSW52ZXN0aWdhdGlvbiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgIHZhciBvYmogPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9pZCA9PT0gZGF0YS5wcm9kdWN0X2lkOwogICAgICAgIH0sIHRoaXMpWzBdOwoKICAgICAgICBpZiAob2JqKSB7CiAgICAgICAgICBxdHkgPSBwYXJzZUludChvYmoucXR5KSArIHF0eTsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9pZCAhPSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgICAgICB9LCB0aGlzKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLnB1c2goewogICAgICAgICAgcHJvZHVjdF9pZDogZGF0YS5wcm9kdWN0X2lkLAogICAgICAgICAgX3Byb2R1Y3RfbmFtZTogcG5hbWUsCiAgICAgICAgICB1b21faWQ6IGRhdGEudW9tX2lkLAogICAgICAgICAgX3VvbV9uYW1lOiBkYXRhLl91b21fbmFtZSwKICAgICAgICAgIGNvc3RfcHJpY2U6IGRhdGEuY29zdF9wcmljZSwKICAgICAgICAgIHF0eTogcXR5CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaGVja1F0eSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0UGFydGljdWxhckZvcm1hdHRlZDogZnVuY3Rpb24gZ2V0UGFydGljdWxhckZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHZhciBfdGhpczE5ID0gdGhpczsKCiAgICAgIGRhdGEuZGF0YS5fbHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLnB1c2goewogICAgICAgIC8vICAgaW52ZXN0aWdhdGlvbl9pZDogZWxlbWVudC5pbnZlc3RpZ2F0aW9uX2lkLAogICAgICAgIC8vICAgcHJvZHVjdF9pZDogZWxlbWVudC5wcm9kdWN0X2lkLAogICAgICAgIC8vICAgX3Byb2R1Y3RfbmFtZTogZWxlbWVudC5fcHJvZHVjdF9uYW1lLAogICAgICAgIC8vICAgdW9tX2lkOiBlbGVtZW50LnVvbV9pZCwKICAgICAgICAvLyAgIF91b21fbmFtZTogZWxlbWVudC5fdW9tX25hbWUsCiAgICAgICAgLy8gICBjb3N0X3ByaWNlOiBlbGVtZW50LmNvc3RfcHJpY2UsCiAgICAgICAgLy8gICBxdHk6IGVsZW1lbnQucXR5LAogICAgICAgIC8vIH0pOwogICAgICAgIF90aGlzMTkuYWRkQVBhcnRpY3VsYXIoZWxlbWVudCwgMSwgZWxlbWVudC5fcHJvZHVjdF9uYW1lKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tRdHk6IGZ1bmN0aW9uIGNoZWNrUXR5KCkgewogICAgICB2YXIgX3RoaXMyMCA9IHRoaXM7CgogICAgICB2YXIgdG90YWxQcmljZSA9IDA7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5xdHkgPiBfdGhpczIwLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgICBlbGVtZW50LnF0eSA9IF90aGlzMjAucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGg7CiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnF0eSA8PSAwKSB7CiAgICAgICAgICBlbGVtZW50LnF0eSA9IDE7CiAgICAgICAgfQoKICAgICAgICBlbGVtZW50LnRvdGFsUHJpY2UgPSBlbGVtZW50LnF0eSAqIGVsZW1lbnQuY29zdF9wcmljZTsKICAgICAgICB0b3RhbFByaWNlICs9IGVsZW1lbnQudG90YWxQcmljZTsKICAgICAgfSk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IHRvdGFsUHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBnZXREaXNjb3VudFBlcmNlbnQ6IGZ1bmN0aW9uIGdldERpc2NvdW50UGVyY2VudCgpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfcGVyY2VudCA9IE1hdGguY2VpbCh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlICogMTAwKTsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKAogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudCk7CgogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgZ2V0RGlzY291bnRBbW91bnQ6IGZ1bmN0aW9uIGdldERpc2NvdW50QW1vdW50KCkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlICogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfcGVyY2VudCAvIDEwMDsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKAogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudCk7CgogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgZXhwZWN0ZWRIb3VyOiBmdW5jdGlvbiBleHBlY3RlZEhvdXIoaCkgewogICAgICAvLyB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAvLyB0b2RheS5zZXRIb3Vycyh0b2RheS5nZXRIb3VycygpICsgaCk7CiAgICAgIHZhciB0cmF2ZWxUaW1lID0gbW9tZW50KCkuYWRkKGgsICdob3VycycpLmZvcm1hdCgnWVlZWS1NTS1ERCBoaDptbSBBJyk7CiAgICAgIHJldHVybiB0cmF2ZWxUaW1lOwogICAgfSwKICAgIGRlbGV0ZUZyb21MaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscyA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgIT0gZGF0YS5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLSBkYXRhLnRvdGFsX2Ftb3VudDsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgICB0aGlzLmNoZWNrUXR5KCk7CgogICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IFtdOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IDA7CiAgICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlRnJvbVBhcnRpY3VsYXJMaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tUGFydGljdWxhckxpc3QoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9pZCAhPSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgLSBkYXRhLnRvdGFsUHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzMjEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGN1cnJlbnREYXRlLCBkb2IsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczIxLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyMS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIxLmlzRXhpc3QgPSAiUGxlYXNlIGFkZCBhIEludmVzdGlnYXRpb24iOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXMyMS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzMjEucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIGRvYiA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgLSBfdGhpczIxLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhciwgY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIF90aGlzMjEucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aCwgY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gX3RoaXMyMS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheSk7CiAgICAgICAgICAgICAgICBfdGhpczIxLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5kb2IgPSBtb21lbnQoU3RyaW5nKGRvYikpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOyAvLwoKICAgICAgICAgICAgICAgIF90aGlzMjEucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyID0gX3RoaXMyMS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgIF90aGlzMjEucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aCA9IF90aGlzMjEucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9tb250aC50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX3RoaXMyMS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheSA9IF90aGlzMjEucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV9kYXkudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyMS5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlLmFkZChfdGhpczIxLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCwgX3RoaXMyMSk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjEuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiUmVxdWVzdCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyMS5wcmludEludmVzdGlnYXRpb25Ub2tlbihyZXN1bHQuZGF0YSk7CgogICAgICAgICAgICAgICAgICBfdGhpczIxLmlQREludmVzdGlnYXRpb25SZXF1ZXN0LmludmVzdGlnYXRpb25fcmVxdWVzdF9pZCA9IHJlc3VsdC5kYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIF90aGlzMjEuaVBESW52ZXN0aWdhdGlvblJlcXVlc3QuYWRtaXNzaW9uX2lkID0gX3RoaXMyMS5hZG1pc3Npb25faWQ7CgogICAgICAgICAgICAgICAgICBfdGhpczIxLmlQREludmVzdGlnYXRpb25SZXF1ZXN0U2F2ZSgpOyAvL3RoaXMuY29uZmlybVBheShyZXN1bHQuZGF0YSk7CgogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyMS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczIxLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMjM7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgX3RoaXMyMS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0My50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzAsIDIzXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBTZXJ2aWNlCiAgICB0YWtlU2VydmljZTogZnVuY3Rpb24gdGFrZVNlcnZpY2UoZGF0YSkgewogICAgICB0aGlzLmlQRFNlcnZpY2VPYmouYWRtaXNzaW9uX2lkID0gZGF0YS5hZG1pc3Npb25faWQ7CiAgICAgIHRoaXMuc2VydmljZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLy8gUGFja2FnZQogICAgdGFrZVBhY2thZ2U6IGZ1bmN0aW9uIHRha2VQYWNrYWdlKGRhdGEpIHsKICAgICAgdGhpcy5pUERTZXJ2aWNlUGFja2FnZU9iai5hZG1pc3Npb25faWQgPSBkYXRhLmFkbWlzc2lvbl9pZDsKICAgICAgdGhpcy5zZXJ2aWNlUGFja2FnZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLy8gVGFrZW4gU2VydmljZSAmIFBhY2thZ2UKICAgIHRha2VuTGlzdDogZnVuY3Rpb24gdGFrZW5MaXN0KGRhdGEpIHsKICAgICAgdmFyIF90aGlzMjIgPSB0aGlzOwoKICAgICAgdGhpcy5pUERTZXJ2aWNlLmdldFRha2VuU2VydmljZUFuZFNlcnZpY2VQYWNrYWdlKGRhdGEuYWRtaXNzaW9uX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMjIuZm9ybWF0dGVkVGFrZW5MaXN0KGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIFZpZXcgUm91bmQgRG9jdG9yCiAgICB2aWV3Um91bmREb2N0b3I6IGZ1bmN0aW9uIHZpZXdSb3VuZERvY3RvcihkYXRhKSB7CiAgICAgIHZhciBfdGhpczIzID0gdGhpczsKCiAgICAgIHRoaXMuYXNzaWduUm91bmREb2N0b3IgPSB7Ly9yb3VuZF90aW1lOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkgaDptbSBBIiksCiAgICAgIH07CiAgICAgIHRoaXMuYXNzaWduUm91bmREb2N0b3IuYWRtaXNzaW9uX2lkID0gZGF0YS5hZG1pc3Npb25faWQ7CiAgICAgIHRoaXMuaVBEU2VydmljZS5nZXRBc3NpZ25JUERSb3VuZERvY3RvcihkYXRhLmFkbWlzc2lvbl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIzLmZvcm1hdHRlZFJvdW5kRG9jdG9yTGlzdChkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRNYWluQ29uc3VsdGFudDogZnVuY3Rpb24gc2V0TWFpbkNvbnN1bHRhbnQoKSB7CiAgICAgIGlmICghdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5pc01haW5Db25zdWx0YW50KSB7CiAgICAgICAgdmFyIGFBZG1pdHRlZFBhdGllbnQgPSB0aGlzLmFkbWl0dGVkUGF0aWVudExpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLmFkbWlzc2lvbl9pZCA9PT0gdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5hZG1pc3Npb25faWQ7CiAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5kZXBhcnRtZW50X2lkID0gYUFkbWl0dGVkUGF0aWVudFswXS5jb25zdWx0YW5jeV9kZXBhcnRtZW50X2lkOwogICAgICAgIHRoaXMuYXNzaWduUm91bmREb2N0b3Iucm91bmRfZG9jdG9yX2lkID0gYUFkbWl0dGVkUGF0aWVudFswXS5kb2N0b3JfaWQ7CiAgICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5jaGFyZ2UgPSBhQWRtaXR0ZWRQYXRpZW50WzBdLmlwZF9jb25zdWx0YW5jeV9mZWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5kZXBhcnRtZW50X2lkID0gIiI7CiAgICAgICAgdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5yb3VuZF9kb2N0b3JfaWQgPSAiIjsKICAgICAgICB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmNoYXJnZSA9ICIiOwogICAgICB9CiAgICB9LAogICAgbWVyZ2VEb2N0b3JJbmZvOiBmdW5jdGlvbiBtZXJnZURvY3RvckluZm8oZGF0YSkgewogICAgICB2YXIgX3RoaXMyNCA9IHRoaXM7CgogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgb2JqID0gZWxlbWVudDsKICAgICAgICBvYmouZG9jdG9yX2RlZ3JlZSA9ICIiOwogICAgICAgIG9iai5sc3RDb25zdWx0YW50RGVncmVlLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICBvYmouZG9jdG9yX2RlZ3JlZSArPSBlbC5jb25zdWx0YW50X2RlZ3JlZV9uYW1lICsgIi4gIjsKICAgICAgICB9KTsKICAgICAgICBvYmouZG9jdG9yX25hbWUgPSBlbGVtZW50LmRvY19ubyArICIgLSAoIiArIG9iai5kb2N0b3JfZGVncmVlICsgIikgLSAiICsgZWxlbWVudC5kb2N0b3JfbmFtZTsKCiAgICAgICAgX3RoaXMyNC5kb2N0b3JMaXN0LnB1c2gob2JqKTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsdGVyRG9jdG9yc0RlcGFydG1lbnRXaXNlOiBmdW5jdGlvbiBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2UoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvY3Rvckxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5kZXBhcnRtZW50X2lkID09PSB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmRlcGFydG1lbnRfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGdldENoYXJnZTogZnVuY3Rpb24gZ2V0Q2hhcmdlKCkgewogICAgICB2YXIgYURvY3RvciA9IHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRvY3Rvcl9pZCA9PT0gdGhpcy5hc3NpZ25Sb3VuZERvY3Rvci5yb3VuZF9kb2N0b3JfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLmFzc2lnblJvdW5kRG9jdG9yLmNoYXJnZSA9IGFEb2N0b3JbMF0uaXBkX2NvbnN1bHRhbmN5X2ZlZTsKICAgIH0sCiAgICAvLyBSb3VuZCBEb2N0b3IKICAgIHJvdW5kRG9jdG9yOiBmdW5jdGlvbiByb3VuZERvY3RvcigpIHsKICAgICAgdGhpcy5saXN0Um91bmREb2N0b3JEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5yb3VuZERvY3RvckRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZm9ybWF0dGVkUm91bmREb2N0b3JMaXN0OiBmdW5jdGlvbiBmb3JtYXR0ZWRSb3VuZERvY3Rvckxpc3QoZGF0YSkgewogICAgICB0aGlzLnJvdW5kRG9jdG9yTGlzdCA9IFtdOwogICAgICB0aGlzLnJvdW5kRG9jdG9yTGlzdCA9IGRhdGE7CiAgICAgIHRoaXMubGlzdFJvdW5kRG9jdG9yRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBmb3JtYXR0ZWRUYWtlbkxpc3Q6IGZ1bmN0aW9uIGZvcm1hdHRlZFRha2VuTGlzdChkYXRhKSB7CiAgICAgIHRoaXMudGFrZW5TZXJ2aWNlUGFja2FnZU9iai5sc3RUYWtlblNlcnZpY2UgPSBkYXRhLmxzdFRha2VuU2VydmljZTsKICAgICAgdGhpcy50YWtlblNlcnZpY2VQYWNrYWdlT2JqLmxhc3RUYWtlblNlcnZpY2VQYWNrYWdlID0gZGF0YS5sYXN0VGFrZW5TZXJ2aWNlUGFja2FnZTsKICAgICAgdGhpcy50YWtlblNlcnZpY2VQYWNrYWdlRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBzZXJ2aWNlRm9ybWF0dGVkOiBmdW5jdGlvbiBzZXJ2aWNlRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMjUgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuc2VydmljZV9oZWFkX2lkID09ICcxJyB8fCBlbC5zZXJ2aWNlX2hlYWRfaWQgPT0gJzMnOwogICAgICB9LCB0aGlzKTsKICAgICAgdmFyIGZpbHRlckRhdGEyID0gZmlsdGVyRGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlICYmIGVsLnNlcnZpY2VfdHlwZV9pZCAhPSAnMic7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLmlQRFNlcnZpY2VPYmoubHN0U2VydmljZSA9IFtdOwogICAgICBmaWx0ZXJEYXRhMi5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMyNS5pUERTZXJ2aWNlT2JqLmxzdFNlcnZpY2UucHVzaCh7CiAgICAgICAgICBzZXJ2aWNlX2lkOiBlbGVtZW50LnNlcnZpY2VfaWQsCiAgICAgICAgICBzZXJ2aWNlX25hbWU6IGVsZW1lbnQuc2VydmljZV9uYW1lLAogICAgICAgICAgc2VydmljZV9oZWFkX2lkOiBlbGVtZW50LnNlcnZpY2VfaGVhZF9pZCwKICAgICAgICAgIF9zZXJ2aWNlX2hlYWRfbmFtZTogZWxlbWVudC5fc2VydmljZV9oZWFkX25hbWUsCiAgICAgICAgICBzZXJ2aWNlX3R5cGVfaWQ6IGVsZW1lbnQuc2VydmljZV90eXBlX2lkLAogICAgICAgICAgX3NlcnZpY2VfdHlwZV9uYW1lOiBlbGVtZW50Ll9zZXJ2aWNlX3R5cGVfbmFtZSwKICAgICAgICAgIHNlcnZpY2VfY2hhcmdlOiBlbGVtZW50LnNlcnZpY2VfY2hhcmdlLAogICAgICAgICAgZXJfc2VydmljZV9jaGFyZ2U6IGVsZW1lbnQuZXJfc2VydmljZV9jaGFyZ2UsCiAgICAgICAgICBkaXNjb3VudDogZWxlbWVudC5kaXNjb3VudCwKICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlcnZpY2VQYWNrYWdlRm9ybWF0dGVkOiBmdW5jdGlvbiBzZXJ2aWNlUGFja2FnZUZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHZhciBfdGhpczI2ID0gdGhpczsKCiAgICAgIHRoaXMuaVBEU2VydmljZVBhY2thZ2VPYmoubHN0U2VydmljZVBhY2thZ2UgPSBbXTsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMyNi5pUERTZXJ2aWNlUGFja2FnZU9iai5sc3RTZXJ2aWNlUGFja2FnZS5wdXNoKHsKICAgICAgICAgIHNlcnZpY2VfcGFja2FnZV9pZDogZWxlbWVudC5zZXJ2aWNlX3BhY2thZ2VfaWQsCiAgICAgICAgICBzZXJ2aWNlX3BhY2thZ2VfbmFtZTogZWxlbWVudC5zZXJ2aWNlX3BhY2thZ2VfbmFtZSwKICAgICAgICAgIGNoYXJnZTogZWxlbWVudC5jaGFyZ2UsCiAgICAgICAgICBpc0NoZWNrOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBBc3NpZ24gUm91bmQgRG9jdG9yCiAgICBhZGREb2N0b3JBc3NpZ246IGZ1bmN0aW9uIGFkZERvY3RvckFzc2lnbigpIHsKICAgICAgdmFyIF90aGlzMjcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMjcuYXNzaWduUm91bmREb2N0b3IuZGVwYXJ0bWVudF9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMjcuYXNzaWduUm91bmREb2N0b3Iucm91bmRfZG9jdG9yX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyNy5hc3NpZ25Sb3VuZERvY3Rvci5jaGFyZ2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMjcuYXNzaWduUm91bmREb2N0b3Iucm91bmRfdGltZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjcuaVBEU2VydmljZS5hc3NpZ25JUERSb3VuZERvY3RvcihfdGhpczI3LmFzc2lnblJvdW5kRG9jdG9yLCBfdGhpczI3KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LnN0YXR1cyk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczI3LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczI3LmhpZGVEaWFsb2coKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyNy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczI3LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZFNlcnZpY2U6IGZ1bmN0aW9uIGFkZFNlcnZpY2UoKSB7CiAgICAgIHZhciBfdGhpczI4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMjguaVBEU2VydmljZU9iai5sc3RTZXJ2aWNlID0gX3RoaXMyOC5pUERTZXJ2aWNlT2JqLmxzdFNlcnZpY2UuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWwuaXNDaGVjayA9PSB0cnVlOwogICAgICAgICAgICAgICAgfSwgX3RoaXMyOCk7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyOC5pUERTZXJ2aWNlT2JqLmxzdFNlcnZpY2UubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyOC5pUERTZXJ2aWNlLnNhdmVJUERTZXJ2aWNlKF90aGlzMjguaVBEU2VydmljZU9iaiwgX3RoaXMyOCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTYXZlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyOC5oaWRlRGlhbG9nKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczI4LmdldFNlcnZpY2UoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZFNlcnZpY2VQYWNrYWdlOiBmdW5jdGlvbiBhZGRTZXJ2aWNlUGFja2FnZSgpIHsKICAgICAgdmFyIF90aGlzMjkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyOS5pUERTZXJ2aWNlUGFja2FnZU9iai5sc3RTZXJ2aWNlUGFja2FnZSA9IF90aGlzMjkuaVBEU2VydmljZVBhY2thZ2VPYmoubHN0U2VydmljZVBhY2thZ2UuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWwuaXNDaGVjayA9PSB0cnVlOwogICAgICAgICAgICAgICAgfSwgX3RoaXMyOSk7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyOS5pUERTZXJ2aWNlUGFja2FnZU9iai5sc3RTZXJ2aWNlUGFja2FnZS5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczI5LmlQRFNlcnZpY2Uuc2F2ZUlQRFNlcnZpY2VQYWNrYWdlKF90aGlzMjkuaVBEU2VydmljZVBhY2thZ2VPYmosIF90aGlzMjkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjkuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMjkuaGlkZURpYWxvZygpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyOS5nZXRTZXJ2aWNlUGFja2FnZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyOS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczI5LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/nurse-panel/AdmittedPatientRequest.js"],"names":["AdmissionService","AdmissionPrescriptionService","CommonService","moment","Validation","FilterMatchMode","FilterOperator","PatientInvestigationRequestService","PatientReportService","ConsultancyDepartmentSetupService","DoctorSetupService","BuildingSetupService","RoomSetupService","InvestigationSetupService","ProductSetupService","IPDRequestService","ServiceSetupService","ServicePackageSetupService","IPDService","MedicineRequestService","IPDReportService","data","dataList","isNurse","isRequest","pharmacy","active","expandedRows","admittedPatientList","admittedPatient","cdfromdate","String","Date","format","cdtodate","submitted","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","admission_id","patient_id","doctor_id","doctor_no","reffered_by_id","investigationRequestDialog","lstPrescriptionInvestigation","isExist","buildingList","roomList","investigationList","reportDeliveryTypeList","productList","patientInvestigationRequest","aPatient","age_year","age_month","age_day","cdinvestigation_request_date","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_by_id","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","discountByList","text","iPDInvestigationRequestList","iPDInvestigationRequest","investigation_request_id","admission_no","registration_no","patient_name","iPDMedicineRequestList","iPDPrescriptionList","iPDPrescriptionMedicineList","iPDMedicineRequest","lstMedicineRequestDetails","iPDMedicineRequestDialog","serviceDialog","iPDServiceObj","lstService","servicePackageDialog","iPDServicePackageObj","lstServicePackage","takenServicePackageDialog","takenServicePackageObj","lstTakenService","lastTakenServicePackage","departmentList","doctorList","assignRoundDoctor","roundDoctorList","listRoundDoctorDialog","roundDoctorDialog","created","admissionService","admissionPrescriptionService","commonService","validation","userInfo","JSON","parse","localStorage","getItem","show","nurse_id","patientInvestigationRequestService","doctorSetupService","consultancyDepartmentSetupService","buildingSetupService","roomSetupService","investigationSetupService","productSetupService","patientReportService","iPDRequestService","serviceSetupService","servicePackageSetupService","iPDService","medicineRequestService","iPDReportService","getAll","then","GetAllReportDeliveryType","getService","getServicePackage","getActiveCombo","mergeDoctorInfo","methods","serviceFormatted","servicePackageFormatted","fromdate","todate","admittedPatientListForHistoryByNurseId","hideDialog","hideCollectionRequest","collectionRequest","getIPDInvestigationRequestByAdmissionId","getMedicineRequestListByAdmissionNo","doc_no","formatDate","formatDateTime","printInvestigationToken","id","GetInvestigationToken","Downloadfile","newInvestigationRequest","getPrescriptionInvestigationByAdmissionId","prescriptionInvestigation","forEach","element","push","investigation_id","investingation_name","isCheck","investigationRequest","filter","el","getFormattedPrescriptionWiseInvestigations","iPDInvestigationRequestSave","result","status","reset","$toast","add","severity","summary","detail","res","life","printMedicineRequest","GetMedicineRequestToken","newMedicineRequest","prescribeMedicine","admission_prescription_id","getPrescriptionNoByAdmissionId","prescriptionNo","hideMedicineRequest","getPrescriptionData","getPrescriptionDataByPrescriptionId","prescriptionData","medicine_id","medicine_name","treatment_rule_name","treatment_duration_name","treatment_dose_name","medicine_generic_name","strgenth","medicine_type_name","uom_name","manufacturer_name","request_qty","setRequestMedicine","filterData","aMedicine","length","medicine_strgenth","medicine_uom_name","medicine_manufacturer_name","deleteRequestMedicine","medicineRequest","patient_registration_no","first_name","contact_no","reffered_doctor_id","aInvestigation","ddlinvestigation","addInvestigation","investigationIsExist","isInvestigation","cost","charge","urgent_carge","deliveryTime","expectedHour","report_delivery_duration","emmergency_report_delivery_duration","discountAmount","totalAmount","obj","_investingation_name","_investigation_category_head_name","building_id","_building_id","room_id","_room_id","expected_delivery","quantity","calculateTotalAmount","addParticular","calculatePerInvestigationDiscountPercent","calculateCostPrice","calculatePerInvestigationDiscountAmount","costPrice","Math","ceil","getById","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","_uom_name","checkQty","_lstInvestigationParticular","totalPrice","getDiscountPercent","getDiscountAmount","h","travelTime","deleteFromList","deleteFromParticularList","investigation_request_date","currentDate","dob","getFullYear","getMonth","getDate","toString","takeService","takePackage","takenList","getTakenServiceAndServicePackage","formattedTakenList","viewRoundDoctor","getAssignIPDRoundDoctor","formattedRoundDoctorList","setMainConsultant","isMainConsultant","aAdmittedPatient","department_id","consultancy_department_id","round_doctor_id","ipd_consultancy_fee","doctor_degree","lstConsultantDegree","consultant_degree_name","doctor_name","filterDoctorsDepartmentWise","getCharge","aDoctor","roundDoctor","service_head_id","filterData2","service_type_id","service_id","service_name","_service_head_name","_service_type_name","service_charge","er_service_charge","discount","service_package_id","service_package_name","addDoctorAssign","round_time","assignIPDRoundDoctor","console","log","addService","saveIPDService","addServicePackage","saveIPDServicePackage"],"mappings":"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","sourcesContent":["import AdmissionService from \"../../service/front-desk/AdmissionService\";\r\nimport AdmissionPrescriptionService from \"../../service/prescription/AdmissionPrescriptionService\";\r\n\r\nimport CommonService from \"../../service/CommonService\";\r\n\r\nimport moment from \"moment\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\n// Investigation Request\r\nimport PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\n//import PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\n//import DesignationSetupService from \"../../service/setup/DesignationSetupService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\n//import EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\n//import ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\nimport IPDRequestService from \"../../service/ipd/IPDRequestService\";\r\n// Service & Package\r\nimport ServiceSetupService from \"../../service/setup/ServiceSetupService\";\r\nimport ServicePackageSetupService from \"../../service/setup/ServicePackageSetupService\";\r\nimport IPDService from \"../../service/ipd/IPDService\";\r\n// Pharmacy\r\nimport MedicineRequestService from \"../../service/pharmacy/MedicineRequestService\";\r\nimport IPDReportService from \"../../service/report/IPDReportService\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            dataList: true,\r\n            isNurse: false,\r\n            isRequest: false,\r\n            pharmacy: false,\r\n            active: 0,\r\n            expandedRows: [],\r\n            admittedPatientList: [],\r\n            admittedPatient: {\r\n                // cdfromdate: moment(\r\n                //     String(new Date(new Date().setDate(new Date().getDate() - 860)))\r\n                // ).format(\"MM/DD/YYYY\"),\r\n                cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n                cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n                // cdtodate: moment(\r\n                //     String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n                // ).format(\"MM/DD/YYYY\"),\r\n            },\r\n            //\r\n\r\n            submitted: false,\r\n            filters: {\r\n                global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n                name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            },\r\n            initFilters() {\r\n                this.filters = {\r\n                    global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n                    name: {\r\n                        operator: FilterOperator.AND,\r\n                        constraints: [\r\n                            { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n                        ],\r\n                    },\r\n                };\r\n            },\r\n\r\n            // Investigation Request\r\n            admission_id: null,\r\n            patient_id: null,\r\n            doctor_id: null,\r\n            doctor_no: null,\r\n            reffered_by_id: null,\r\n            investigationRequestDialog: false,\r\n            lstPrescriptionInvestigation: [],\r\n\r\n            //isInvestigation: true,\r\n            //isPrescription: false,\r\n            //isContactExist: \"\",\r\n            //isValid: \"\",\r\n            //isEmailValid: \"\",\r\n            //isPatientExist: \"\",\r\n            isExist: \"\",\r\n            //collectionList: [],\r\n            //bloodGroupList: [],\r\n            //genderList: [],\r\n            //designationtList: [],\r\n            //departmentList: [],\r\n            //doctorList: [],\r\n            buildingList: [],\r\n            roomList: [],\r\n            //referredByList: [],\r\n            //employeeList: [],\r\n            //discountByList: [],\r\n            investigationList: [],\r\n            reportDeliveryTypeList: [],\r\n            productList: [],\r\n            patientInvestigationRequest: {\r\n                patient_id: \"\",\r\n                aPatient: {\r\n                    age_year: \"0\",\r\n                    age_month: \"0\",\r\n                    age_day: \"0\",\r\n                },\r\n                cdinvestigation_request_date: moment(String(new Date())).format(\r\n                    \"MM/DD/YYYY\"\r\n                ),\r\n                report_delivery_type: \"Regular\",\r\n                lstInvestigationRequestDetails: [],\r\n                lstInvestigationParticular: [],\r\n                discount_by_id: \"Company\",\r\n                discount_percent: 0,\r\n                discount_amount: 0,\r\n                cost_price: 0,\r\n                particular_cost_price: 0,\r\n                total_amount: 0,\r\n            },\r\n            discountByList: [\r\n                { text: \"Both\", value: \"Both\" },\r\n                { text: \"Hospital\", value: \"Company\" },\r\n                { text: \"Reference\", value: \"Reference\" },\r\n            ],\r\n\r\n            // Investigation Request\r\n            iPDInvestigationRequestList: [],\r\n            iPDInvestigationRequest: {\r\n                investigation_request_id: null,\r\n                admission_id: null,\r\n            },\r\n            // Pharmacy\r\n            admission_no: null,\r\n            registration_no: null,\r\n            patient_name: null,\r\n            iPDMedicineRequestList: [],\r\n            iPDPrescriptionList: [],\r\n            iPDPrescriptionMedicineList: [],\r\n            iPDMedicineRequest: {\r\n                lstMedicineRequestDetails: [],\r\n            },\r\n            iPDMedicineRequestDialog: false,\r\n\r\n            // Service\r\n            serviceDialog: false,\r\n            iPDServiceObj: {\r\n                lstService: [],\r\n            },\r\n            // Package\r\n            servicePackageDialog: false,\r\n            iPDServicePackageObj: {\r\n                lstServicePackage: [],\r\n            },\r\n            // Taken Service & Package\r\n            takenServicePackageDialog: false,\r\n            takenServicePackageObj: {\r\n                lstTakenService: [],\r\n                lastTakenServicePackage: [],\r\n            },\r\n            // Round Doctor\r\n            departmentList: [],\r\n            doctorList: [],\r\n            assignRoundDoctor: {},\r\n            roundDoctorList: [],\r\n            listRoundDoctorDialog: false,\r\n            roundDoctorDialog: false,\r\n        };\r\n    },\r\n    created() {\r\n        this.admissionService = new AdmissionService();\r\n        this.admissionPrescriptionService = new AdmissionPrescriptionService();\r\n\r\n        this.commonService = new CommonService();\r\n        this.validation = new Validation();\r\n\r\n        this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n        this.show();\r\n\r\n        if (this.userInfo.nurse_id) {\r\n            this.isNurse = true;\r\n        } else if (!this.userInfo.nurse_id) {\r\n            this.isNurse = false;\r\n        }\r\n\r\n        // Investigation Request\r\n        this.patientInvestigationRequestService =\r\n            new PatientInvestigationRequestService();\r\n        //this.patientRegistrationService = new PatientRegistrationService();\r\n        //this.employeeSetupService = new EmployeeSetupService();\r\n        this.doctorSetupService = new DoctorSetupService();\r\n        this.consultancyDepartmentSetupService =\r\n            new ConsultancyDepartmentSetupService();\r\n        //this.designationSetupService = new DesignationSetupService();\r\n        this.buildingSetupService = new BuildingSetupService();\r\n        this.roomSetupService = new RoomSetupService();\r\n        //this.referredBySetupService = new ReferredBySetupService();\r\n        this.investigationSetupService = new InvestigationSetupService();\r\n        this.productSetupService = new ProductSetupService();\r\n        //this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n        this.patientReportService = new PatientReportService();\r\n        //this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n        this.iPDRequestService = new IPDRequestService();\r\n        // Service & Package\r\n        this.serviceSetupService = new ServiceSetupService();\r\n        this.servicePackageSetupService = new ServicePackageSetupService();\r\n        this.iPDService = new IPDService();\r\n        // Pharmacy\r\n        this.medicineRequestService = new MedicineRequestService();\r\n        this.iPDReportService = new IPDReportService();\r\n\r\n\r\n        // this.commonService\r\n        //     .GetAllGender()\r\n        //     .then((data) => (this.genderList = data.data));\r\n\r\n        // this.commonService\r\n        //     .GetAllBloodGroup()\r\n        //     .then((data) => (this.bloodGroupList = data.data));\r\n\r\n        // this.designationSetupService\r\n        //     .getAll()\r\n        //     .then((data) => (this.designationtList = data.data));\r\n\r\n        // this.consultancyDepartmentSetupService\r\n        //     .getActiveCombo()\r\n        //     .then((data) => (this.departmentList = data.data));\r\n\r\n        // this.buildingSetupService\r\n        //     .getAll()\r\n        //     .then((data) => (this.buildingList = data.data));\r\n\r\n        // this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n        // this.referredBySetupService\r\n        //   .getActiveCombo()\r\n        //   .then((data) => (this.referredByList = data.data));\r\n\r\n        // this.referredBySetupService\r\n        //   .getActiveCombo()\r\n        //   .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n        // this.referredBySetupService\r\n        //   .getAll()\r\n        //   .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n        // this.doctorSetupService\r\n        //   .getAll()\r\n        //   .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n        // this.employeeSetupService\r\n        //   .getAll()\r\n        //   .then((data) => this.mergeEmployeeInfo(data.data));\r\n\r\n        this.investigationSetupService\r\n            .getAll()\r\n            .then((data) => (this.investigationList = data.data));\r\n\r\n        // this.investigationSetupService\r\n        //     .getAll()\r\n        //     .then((data) => this.formatInvestigationList(data.data));\r\n\r\n        this.commonService\r\n            .GetAllReportDeliveryType()\r\n            .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n        this.productSetupService\r\n            .getAll()\r\n            .then((data) => (this.productList = data.data));\r\n\r\n        // Service & Package\r\n        this.getService();\r\n        this.getServicePackage();\r\n\r\n        //\r\n        this.consultancyDepartmentSetupService\r\n            .getActiveCombo()\r\n            .then((data) => (this.departmentList = data.data));\r\n\r\n        this.doctorSetupService\r\n            .getAll()\r\n            .then((data) => this.mergeDoctorInfo(data.data));\r\n    },\r\n    methods: {\r\n        getService() {\r\n            this.serviceSetupService\r\n                .getAll()\r\n                .then((data) => this.serviceFormatted(data.data));\r\n        },\r\n        getServicePackage() {\r\n            this.servicePackageSetupService\r\n                .getAll()\r\n                .then((data) => this.servicePackageFormatted(data.data));\r\n        },\r\n\r\n        show() {\r\n            this.submitted = true;\r\n            if (!this.admittedPatient.cdfromdate) {\r\n                return;\r\n            } else if (!this.admittedPatient.cdtodate) {\r\n                return;\r\n            } else {\r\n                this.admittedPatient.fromdate = moment(\r\n                    String(this.admittedPatient.cdfromdate)\r\n                ).format(\"YYYY-MM-DD\");\r\n                this.admittedPatient.todate = moment(\r\n                    String(this.admittedPatient.cdtodate)\r\n                ).format(\"YYYY-MM-DD\");\r\n                this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n                this.admissionService\r\n                    .admittedPatientListForHistoryByNurseId(this.admittedPatient.fromdate, this.admittedPatient.todate, this.userInfo.nurse_id)\r\n                    .then((data) => (this.admittedPatientList = data.data));\r\n            }\r\n            this.dataList = true;\r\n            this.submitted = true;\r\n        },\r\n        hideDialog() {\r\n            //var patientId = JSON.parse(localStorage.getItem(\"patientIdForTreatment\")).toString();\r\n            this.roundDoctorDialog = false;\r\n            this.listRoundDoctorDialog = false;\r\n            this.servicePackageDialog = false;\r\n            this.takenServicePackageDialog = false;\r\n            this.serviceDialog = false;\r\n            this.investigationRequestDialog = false;\r\n            this.iPDMedicineRequestDialog = false;\r\n            this.submitted = false;\r\n        },\r\n        hideCollectionRequest() {\r\n            this.isRequest = false;\r\n            this.dataList = true;\r\n            //localStorage.removeItem('patientIdForTreatment');\r\n        },\r\n        collectionRequest(data) {\r\n            debugger;\r\n            this.getIPDInvestigationRequestByAdmissionId(data.admission_id);\r\n            this.getMedicineRequestListByAdmissionNo(data.admission_no);\r\n            this.admission_id = data.admission_id;\r\n            this.admission_no = data.admission_no;\r\n            this.patient_id = data.patient_id;\r\n            this.registration_no = data.registration_no;\r\n            this.patient_name = data.patient_name;\r\n            this.doctor_id = data.doctor_id;\r\n            this.doctor_no = data.doc_no;\r\n            this.reffered_by_id = data.reffered_by_id;\r\n            this.isRequest = true;\r\n            this.dataList = false;\r\n        },\r\n\r\n        formatDate(value) {\r\n            return moment(String(value)).format(\"MM/DD/YYYY\");\r\n        },\r\n        formatDateTime(value) {\r\n            return moment(String(value)).format(\"MM/DD/YYYY h:mm:ss a\");\r\n        },\r\n        // Investigation Request\r\n        getIPDInvestigationRequestByAdmissionId(admission_id) {\r\n            this.iPDRequestService.getIPDInvestigationRequestByAdmissionId(admission_id)\r\n                .then((data) => (this.iPDInvestigationRequestList = data.data));\r\n        },\r\n        printInvestigationToken(id) {\r\n            this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n        },\r\n        newInvestigationRequest() {\r\n            this.admissionPrescriptionService\r\n                .getPrescriptionInvestigationByAdmissionId(this.admission_id)\r\n                .then((data) => this.prescriptionInvestigation(data.data));\r\n        },\r\n        prescriptionInvestigation(data) {\r\n            this.lstPrescriptionInvestigation = [];\r\n            data.forEach((element) => {\r\n                this.lstPrescriptionInvestigation.push({\r\n                    admission_id: element.admission_id,\r\n                    investigation_id: element.investigation_id,\r\n                    investingation_name: element.investingation_name,\r\n                    isCheck: false\r\n                });\r\n            });\r\n\r\n            this.investigationRequestDialog = true;\r\n        },\r\n        investigationRequest() {\r\n            this.lstPrescriptionInvestigation = this.lstPrescriptionInvestigation.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            this.getFormattedPrescriptionWiseInvestigations(this.lstPrescriptionInvestigation);\r\n        },\r\n        async iPDInvestigationRequestSave() {\r\n            try {\r\n                if (!this.iPDInvestigationRequest.investigation_request_id) {\r\n                    return;\r\n                } else if (!this.iPDInvestigationRequest.admission_id) {\r\n                    return;\r\n                } else {\r\n                    let result = await this.iPDRequestService.iPDInvestigationRequestSave(this.iPDInvestigationRequest);\r\n                    if (result.status === 201) {\r\n                        this.getIPDInvestigationRequestByAdmissionId(this.admission_id);\r\n                        this.reset();\r\n                        this.hideDialog();\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n\r\n        // Pharmacy\r\n        getMedicineRequestListByAdmissionNo(admission_no) {\r\n            this.medicineRequestService.getMedicineRequestListByAdmissionNo(admission_no)\r\n                .then((data) => (this.iPDMedicineRequestList = data.data));\r\n        },\r\n        printMedicineRequest(id) {\r\n            this.iPDReportService.GetMedicineRequestToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n        },\r\n        newMedicineRequest() {\r\n            this.iPDMedicineRequest.lstMedicineRequestDetails = [];\r\n            this.pharmacy = true;\r\n            this.isRequest = false;\r\n            this.dataList = false;\r\n        },\r\n        prescribeMedicine() {\r\n            this.iPDMedicineRequest.admission_prescription_id = null;\r\n            this.iPDPrescriptionMedicineList = [];\r\n\r\n            this.admissionPrescriptionService\r\n                .getPrescriptionNoByAdmissionId(this.admission_id)\r\n                .then((data) => this.prescriptionNo(data.data));\r\n        },\r\n        prescriptionNo(data) {\r\n            this.iPDPrescriptionList = data;\r\n            this.iPDMedicineRequestDialog = true;\r\n        },\r\n        hideMedicineRequest() {\r\n            this.pharmacy = false;\r\n            this.isRequest = true;\r\n            this.dataList = false;\r\n        },\r\n        getPrescriptionData() {\r\n            if (this.iPDMedicineRequest.admission_prescription_id) {\r\n                this.admissionPrescriptionService\r\n                    .getPrescriptionDataByPrescriptionId(this.iPDMedicineRequest.admission_prescription_id)\r\n                    .then((data) => this.prescriptionData(data.data));\r\n            }\r\n        },\r\n        prescriptionData(data) {\r\n            this.iPDPrescriptionMedicineList = [];\r\n            data.forEach((element) => {\r\n                this.iPDPrescriptionMedicineList.push({\r\n                    medicine_id: element.medicine_id,\r\n                    medicine_name: element.medicine_name,\r\n                    treatment_rule_name: element.treatment_rule_name,\r\n                    treatment_duration_name: element.treatment_duration_name,\r\n                    treatment_dose_name: element.treatment_dose_name,\r\n                    medicine_generic_name: element.medicine_generic_name,\r\n                    strgenth: element.strgenth,\r\n                    medicine_type_name: element.medicine_type_name,\r\n                    uom_name: element.uom_name,\r\n                    manufacturer_name: element.manufacturer_name,\r\n                    request_qty: 1,\r\n                    isCheck: false\r\n                });\r\n            });\r\n        },\r\n        setRequestMedicine() {\r\n            var filterData = this.iPDPrescriptionMedicineList.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            filterData.forEach((element) => {\r\n                var aMedicine =\r\n                    this.iPDMedicineRequest.lstMedicineRequestDetails.filter(\r\n                        function (el) {\r\n                            return el.medicine_id === element.medicine_id;\r\n                        },\r\n                        this\r\n                    );\r\n                if (!aMedicine.length) {\r\n                    this.iPDMedicineRequest.lstMedicineRequestDetails.push({\r\n                        medicine_id: element.medicine_id,\r\n                        medicine_name: element.medicine_name,\r\n                        treatment_rule_name: element.treatment_rule_name,\r\n                        treatment_duration_name: element.treatment_duration_name,\r\n                        treatment_dose_name: element.treatment_dose_name,\r\n                        medicine_generic_name: element.medicine_generic_name,\r\n                        medicine_strgenth: element.strgenth,\r\n                        medicine_type_name: element.medicine_type_name,\r\n                        medicine_uom_name: element.uom_name,\r\n                        medicine_manufacturer_name: element.manufacturer_name,\r\n                        isCheck: element.isCheck,\r\n                        request_qty: (element.request_qty == \"\" || element.request_qty == 0) ? 1 : element.request_qty\r\n                    });\r\n                    this.hideDialog();\r\n                }\r\n                else {\r\n                    this.$toast.add({\r\n                        severity: \"warn\",\r\n                        summary: \"Warn Message\",\r\n                        detail: aMedicine[0].medicine_name + \" already added\",\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        deleteRequestMedicine(data) {\r\n            this.iPDMedicineRequest.lstMedicineRequestDetails = this.iPDMedicineRequest.lstMedicineRequestDetails.filter(function (el) {\r\n                return el.medicine_id != data.medicine_id;\r\n            }, this);\r\n        },\r\n        // Medicine Request\r\n        async medicineRequest() {\r\n            try {\r\n                this.iPDMedicineRequest.admission_no = this.admission_no;\r\n                this.iPDMedicineRequest.patient_registration_no = this.registration_no;\r\n                this.iPDMedicineRequest.patient_name = this.patient_name;\r\n                var aMedicine = this.iPDMedicineRequest.lstMedicineRequestDetails.filter(function (el) {\r\n                    return el.request_qty == \"\";\r\n                }, this);\r\n\r\n                if (!this.iPDMedicineRequest.admission_no) {\r\n                    return;\r\n                } else if (!this.iPDMedicineRequest.patient_registration_no) {\r\n                    return;\r\n                } else if (!this.iPDMedicineRequest.patient_name) {\r\n                    return;\r\n                } else if (aMedicine.length) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: \"Please enter medicine qty\",\r\n                        life: 10000,\r\n                    });\r\n                    return;\r\n                } else if (\r\n                    !this.iPDMedicineRequest.lstMedicineRequestDetails.length\r\n                ) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: \"Please add medicine for request\",\r\n                        life: 10000,\r\n                    });\r\n                    return;\r\n                } else {\r\n                    let result = await this.medicineRequestService.add(\r\n                        this.iPDMedicineRequest, this\r\n                    );\r\n                    if (result.status === 200) {\r\n                        this.$toast.add({\r\n                            severity: \"success\",\r\n                            summary: \"Success\",\r\n                            detail: \"Request Successfully\",\r\n                            life: 10000,\r\n                        });\r\n                        this.hideMedicineRequest();\r\n                        this.getMedicineRequestListByAdmissionNo(this.admission_no);\r\n                        this.printMedicineRequest(result.data);\r\n\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n        // formatInvestigationList(data) {\r\n        //     let filterData = data.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        //     filterData.forEach((element) => {\r\n        //         var obj = element;\r\n        //         obj.investingation_name = element.manual_code + \"-\" + element.investingation_name;\r\n        //         this.investigationList.push(obj);\r\n        //     });\r\n        // },\r\n        // mergeReferredByInfo(data) {\r\n        //     let filterData = data.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        //     filterData.forEach((element) => {\r\n        //         this.referredByList.push({\r\n        //             value: element.registration_no,\r\n        //             text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n        //         });\r\n        //     });\r\n        // },\r\n        // mergeDoctorInfo(data) {\r\n        //     //this.doctorList = data;\r\n        //     data.forEach((element) => {\r\n        //         this.referredByList.push({\r\n        //             value: element.doc_no,\r\n        //             text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        //         });\r\n        //     });\r\n\r\n        //     data.forEach((element) => {\r\n        //         this.doctorList.push({\r\n        //             department_id: element.department_id,\r\n        //             doctor_id: element.doctor_id,\r\n        //             doctor_name: element.doc_no + \"-\" + element.doctor_name,\r\n        //         });\r\n        //     });\r\n        // },\r\n        // mergeEmployeeInfo(data) {\r\n        //     let filterData = data.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        //     filterData.forEach((element) => {\r\n        //         this.referredByList.push({\r\n        //             value: element.emp_no,\r\n        //             text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        //         });\r\n        //     });\r\n        // },\r\n        // mergeDoctorInfo(data) {\r\n        //   this.doctorList = data;\r\n        //   data.forEach((element) => {\r\n        //     this.discountByList.push({\r\n        //       value: element.doc_no,\r\n        //       text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        //     });\r\n        //   });\r\n        // },\r\n        // mergeEmployeeInfo(data) {\r\n        //   data.forEach((element) => {\r\n        //     this.discountByList.push({\r\n        //       value: element.emp_no,\r\n        //       text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        //     });\r\n        //   });\r\n        // },\r\n        // invReset() {\r\n        //     this.isInvestigation = true;\r\n        //     this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n        //     this.isExist = \"\";\r\n        // },\r\n        reset() {\r\n            //this.isInvestigation = true;\r\n            //this.isPrescription = false;\r\n            //this.button = false;\r\n            //this.isValid = \"\";\r\n            //this.isEmailValid = \"\";\r\n            this.isExist = \"\";\r\n            //this.isContactExist = \"\";\r\n            this.patientInvestigationRequest = {\r\n                patient_id: \"\",\r\n                aPatient: {\r\n                    age_year: \"0\",\r\n                    age_month: \"0\",\r\n                    age_day: \"0\",\r\n                },\r\n                cdinvestigation_request_date: moment(String(new Date())).format(\r\n                    \"MM/DD/YYYY\"\r\n                ),\r\n                report_delivery_type: \"Regular\",\r\n                lstInvestigationRequestDetails: [],\r\n                lstInvestigationParticular: [],\r\n                discount_by_id: \"Company\",\r\n                discount_percent: 0,\r\n                discount_amount: 0,\r\n                cost_price: 0,\r\n                particular_cost_price: 0,\r\n                total_amount: 0,\r\n            };\r\n            this.submitted = false;\r\n            this.iPDInvestigationRequest = {\r\n                investigation_request_id: null,\r\n                admission_id: null,\r\n            }\r\n        },\r\n        // doctorReset() {\r\n        //     this.patientInvestigationRequest.department_id = \"\";\r\n        //     this.patientInvestigationRequest.reffered_doctor_id = \"\";\r\n        //     this.patientInvestigationRequest.designation_id = \"\";\r\n        //     this.patientInvestigationRequest.outside_doctor_name = \"\";\r\n        //     this.patientInvestigationRequest.outside_doctor_hospital_name = \"\";\r\n        // },\r\n        // filterDoctorsDepartmentWise() {\r\n        //     return this.doctorList.filter(function (el) {\r\n        //         return (\r\n        //             el.department_id === this.patientInvestigationRequest.department_id\r\n        //         );\r\n        //     }, this);\r\n        // },\r\n        // getConsultancyFeeByDoctorId() {\r\n        //     var aDoctor = this.doctorList.filter(function (el) {\r\n        //         return el.doctor_id === this.patientInvestigationRequest.doctor_id;\r\n        //     }, this);\r\n\r\n        //     this.patientInvestigationRequest.consultancy_fee =\r\n        //         aDoctor[0].consultancy_fee;\r\n        //     this.patientInvestigationRequest.building_id = aDoctor[0]._building_id;\r\n        //     this.patientInvestigationRequest.room_id = aDoctor[0].room_id;\r\n        // },\r\n        // filterRoomsBuildingWise() {\r\n        //     return this.roomList.filter(function (el) {\r\n        //         return el.building_id === this.patientInvestigationRequest.building_id;\r\n        //     }, this);\r\n        // },\r\n        // filterInvestigation() {\r\n        //     return this.investigationList.filter(function (el) {\r\n        //         return el.active == true;\r\n        //     }, this);\r\n        // },\r\n        // filterProduct() {\r\n        //     return this.productList.filter(function (el) {\r\n        //         return el.product_category_id == 1 && el.active == true;\r\n        //     }, this);\r\n        // },\r\n        // getFormatted(data) {\r\n        //     this.patientInvestigationRequest.aPatient = data;\r\n        //     if (!this.patientInvestigationRequest.aPatient.patient_id) {\r\n        //         this.isPatientExist = \"Patient not Exist!\";\r\n        //         // this.patientInvestigationRequest = {\r\n        //         //   patient_id: \"\",\r\n        //         //   aPatient: {},\r\n        //         // };\r\n        //         this.reset();\r\n        //     } else {\r\n        //         this.isPatientExist = \"\";\r\n\r\n        //         this.patientInvestigationRequest.patient_id =\r\n        //             this.patientInvestigationRequest.aPatient.patient_id;\r\n        //         this.patientInvestigationRequest.aPatient.cddob = moment(\r\n        //             String(this.patientInvestigationRequest.aPatient.dob)\r\n        //         ).format(\"YYYY-MM-DD\");\r\n        //         this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n        //         this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n        //         this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n        //     }\r\n        // },\r\n        getFormattedPrescriptionWiseInvestigations(data) {\r\n            this.patientInvestigationRequest.aPatient.first_name = \"IPD\";\r\n            this.patientInvestigationRequest.aPatient.contact_no = \"017\";\r\n            this.patientInvestigationRequest.patient_id = this.patient_id;\r\n            this.patientInvestigationRequest.reffered_doctor_id = this.doctor_id;\r\n            this.patientInvestigationRequest.reffered_by_id = this.reffered_by_id;\r\n            // this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n            // this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n            // this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n            // this.patientInvestigationRequest.department_id = data[0].department_id;\r\n            // this.patientInvestigationRequest.reffered_doctor_id = data[0].doctor_id;\r\n            // this.patientInvestigationRequest.reffered_by_id = data[0].doc_no;\r\n            //this.isPrescription = true;\r\n            data.forEach((element) => {\r\n                var aInvestigation =\r\n                    this.investigationList.filter(\r\n                        function (el) {\r\n                            return (\r\n                                el.investigation_id ===\r\n                                element.investigation_id\r\n                            );\r\n                        },\r\n                        this\r\n                    )[0];\r\n\r\n                this.patientInvestigationRequest.ddlinvestigation = aInvestigation;\r\n                this.addInvestigation();\r\n            });\r\n            this.add();\r\n        },\r\n        // findPatient() {\r\n        //     let str = this.patientInvestigationRequest.contactOrRegNo;\r\n\r\n        //     if (str.startsWith(\"PRES\")) {\r\n        //         this.appointmentPrescriptionService\r\n        //             .prescriptionWiseInvestigations(this.patientInvestigationRequest.contactOrRegNo, this)\r\n        //             .then((data) => this.getFormattedPrescriptionWiseInvestigations(data.data));\r\n        //     } else {\r\n        //         this.isPrescription = false;\r\n        //         this.patientRegistrationService\r\n        //             .getByContactOrRegNo(this.patientInvestigationRequest.contactOrRegNo, this)\r\n        //             .then((data) => this.getFormatted(data.data));\r\n        //     }\r\n        // },\r\n        // isExistContact() {\r\n        //     if (\r\n        //         this.patientInvestigationRequest.aPatient.contact_no.match(\r\n        //             /^(01)([0-9]{9})$/\r\n        //         )\r\n        //     ) {\r\n        //         this.patientRegistrationService\r\n        //             .getByContactOrRegNo(\r\n        //                 this.patientInvestigationRequest.aPatient.contact_no, this\r\n        //             )\r\n        //             .then((data) => this.getContact(data.data));\r\n        //     } else {\r\n        //         this.isContactExist =\r\n        //             \"Contact number must start with 01 and the required length is 11\";\r\n        //     }\r\n        // },\r\n        // getContact(data) {\r\n        //     if (data.contact_no) {\r\n        //         this.isContactExist = \"Duplicate phone number!\";\r\n        //     } else {\r\n        //         this.isContactExist = \"\";\r\n        //     }\r\n        // },\r\n        investigationIsExist() {\r\n            var aInvestigation =\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n                    function (el) {\r\n                        return (\r\n                            el.investigation_id ===\r\n                            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n                        );\r\n                    },\r\n                    this\r\n                );\r\n\r\n            if (aInvestigation.length) {\r\n                this.isExist = \"This Investigation already added\";\r\n                this.isInvestigation = true;\r\n                return;\r\n            } else {\r\n                // var aInv = this.investigationList.filter(function (el) {\r\n                //   return (\r\n                //     el.investigation_id ===\r\n                //     this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n                //   );\r\n                // }, this);\r\n                // this.collectionCenterSetupService\r\n                //   .getById(aInv[0].collection_center_id)\r\n                //   .then((data) => (this.collectionList = data.data));\r\n\r\n                this.isExist = \"\";\r\n                this.isInvestigation = false;\r\n            }\r\n        },\r\n        addInvestigation() {\r\n            this.submitted = true;\r\n            var aInvestigation =\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n                    function (el) {\r\n                        return (\r\n                            el.investigation_id ===\r\n                            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n                        );\r\n                    },\r\n                    this\r\n                );\r\n\r\n            if (aInvestigation.length) {\r\n                this.isExist = \"This Investigation already added\";\r\n                //this.isInvestigation = true;\r\n                return;\r\n            } else {\r\n                if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n                    return;\r\n                } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n                    return;\r\n                } else if (\r\n                    !this.patientInvestigationRequest.cdinvestigation_request_date\r\n                ) {\r\n                    return;\r\n                } else {\r\n                    this.isExist = \"\";\r\n                    var cost =\r\n                        this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n                            ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n                            : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n                    var deliveryTime = this.patientInvestigationRequest.report_delivery_type == \"Regular\" ? this.expectedHour(this.patientInvestigationRequest.ddlinvestigation.report_delivery_duration) : this.expectedHour(this.patientInvestigationRequest.ddlinvestigation.emmergency_report_delivery_duration);\r\n\r\n                    var discountAmount =\r\n                        (1 *\r\n                            cost *\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .discount_percent) /\r\n                        100;\r\n\r\n                    var totalAmount = 1 * cost - discountAmount;\r\n\r\n                    var obj = {\r\n                        investigation_id:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .investigation_id,\r\n                        _investingation_name:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .investingation_name,\r\n                        _investigation_category_head_name:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                ._investigation_category_head_name,\r\n\r\n                        // building_id: this.collectionList._building_id,\r\n                        // _building_name: this.collectionList._building_name,\r\n                        // room_id: this.collectionList.room_id,\r\n                        // _room_name: this.collectionList._room_name,\r\n                        building_id: this.patientInvestigationRequest.ddlinvestigation._building_id,\r\n                        room_id: this.patientInvestigationRequest.ddlinvestigation._room_id,\r\n                        expected_delivery: deliveryTime,\r\n\r\n                        report_delivery_type:\r\n                            this.patientInvestigationRequest.report_delivery_type,\r\n\r\n                        quantity: 1,\r\n                        cost_price: cost,\r\n\r\n                        discount_percent:\r\n                            this.patientInvestigationRequest.ddlinvestigation\r\n                                .discount_percent,\r\n\r\n                        discount_amount: discountAmount,\r\n\r\n                        total_amount: totalAmount,\r\n                    };\r\n\r\n                    this.patientInvestigationRequest.lstInvestigationRequestDetails.push(\r\n                        obj\r\n                    );\r\n\r\n                    this.patientInvestigationRequest.cost_price =\r\n                        this.patientInvestigationRequest.cost_price + totalAmount;\r\n                    //\r\n                    this.calculateTotalAmount();\r\n                    // this.patientInvestigationRequest.total_amount =\r\n                    //   this.patientInvestigationRequest.cost_price -\r\n                    //   this.patientInvestigationRequest.discount_amount;\r\n                }\r\n            }\r\n\r\n            this.addParticular(\r\n                this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n        },\r\n        calculatePerInvestigationDiscountPercent(data) {\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n                (element) => {\r\n                    if (element.investigation_id == data.investigation_id) {\r\n                        element.discount_percent = (element.discount_amount / element.cost_price) * 100;\r\n                        //var discount_amount = (element.cost_price * element.discount_percent) / 100;\r\n                        element.total_amount = element.cost_price - element.discount_amount;\r\n                    }\r\n                }\r\n            );\r\n            this.calculateCostPrice();\r\n        },\r\n        calculatePerInvestigationDiscountAmount(data) {\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n                (element) => {\r\n                    if (element.investigation_id == data.investigation_id) {\r\n                        element.discount_amount = (element.cost_price * element.discount_percent) / 100;\r\n                        element.total_amount = element.cost_price - element.discount_amount;\r\n                    }\r\n                }\r\n            );\r\n            this.calculateCostPrice();\r\n        },\r\n        calculateCostPrice() {\r\n            var costPrice = 0;\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails.forEach(\r\n                (element) => {\r\n                    costPrice = costPrice + element.total_amount;\r\n                }\r\n            );\r\n            this.patientInvestigationRequest.cost_price = costPrice;\r\n\r\n            this.calculateTotalAmount();\r\n        },\r\n        calculateTotalAmount() {\r\n            this.patientInvestigationRequest.total_amount = Math.ceil(\r\n                this.patientInvestigationRequest.cost_price -\r\n                this.patientInvestigationRequest.discount_amount +\r\n                this.patientInvestigationRequest.particular_cost_price);\r\n        },\r\n        addParticular(id) {\r\n            this.investigationSetupService\r\n                .getById(id)\r\n                .then((data) => this.getParticularFormatted(data));\r\n        },\r\n        addAParticular(data, qty, pname) {\r\n            if (\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n                    .length <= 0\r\n            ) {\r\n                this.isExist = \"Add Investigation\";\r\n                return;\r\n            } else {\r\n                this.isExist = \"\";\r\n                var obj =\r\n                    this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n                        function (el) {\r\n                            return el.product_id === data.product_id;\r\n                        },\r\n                        this\r\n                    )[0];\r\n                if (obj) {\r\n                    qty = parseInt(obj.qty) + qty;\r\n\r\n                    this.patientInvestigationRequest.lstInvestigationParticular =\r\n                        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n                            function (el) {\r\n                                return el.product_id != data.product_id;\r\n                            },\r\n                            this\r\n                        );\r\n                }\r\n\r\n                this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n                    product_id: data.product_id,\r\n                    _product_name: pname,\r\n                    uom_id: data.uom_id,\r\n                    _uom_name: data._uom_name,\r\n                    cost_price: data.cost_price,\r\n                    qty: qty,\r\n                });\r\n\r\n                this.checkQty();\r\n            }\r\n        },\r\n        getParticularFormatted(data) {\r\n            data.data._lstInvestigationParticular.forEach((element) => {\r\n                // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n                //   investigation_id: element.investigation_id,\r\n                //   product_id: element.product_id,\r\n                //   _product_name: element._product_name,\r\n                //   uom_id: element.uom_id,\r\n                //   _uom_name: element._uom_name,\r\n                //   cost_price: element.cost_price,\r\n                //   qty: element.qty,\r\n                // });\r\n\r\n                this.addAParticular(element, 1, element._product_name);\r\n            });\r\n        },\r\n        checkQty() {\r\n            var totalPrice = 0;\r\n            this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n                (element) => {\r\n                    if (\r\n                        element.qty >\r\n                        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n                            .length\r\n                    ) {\r\n                        element.qty =\r\n                            this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n                    } else if (element.qty <= 0) {\r\n                        element.qty = 1;\r\n                    }\r\n\r\n                    element.totalPrice = element.qty * element.cost_price;\r\n                    totalPrice += element.totalPrice;\r\n                }\r\n            );\r\n            this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n            this.calculateTotalAmount();\r\n        },\r\n        getDiscountPercent() {\r\n            this.patientInvestigationRequest.discount_percent = Math.ceil(\r\n                (this.patientInvestigationRequest.discount_amount /\r\n                    this.patientInvestigationRequest.cost_price) *\r\n                100);\r\n\r\n            // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n            //   this.patientInvestigationRequest.cost_price -\r\n            //   this.patientInvestigationRequest.discount_amount);\r\n            this.calculateTotalAmount();\r\n        },\r\n        getDiscountAmount() {\r\n            this.patientInvestigationRequest.discount_amount =\r\n                (this.patientInvestigationRequest.cost_price *\r\n                    this.patientInvestigationRequest.discount_percent) /\r\n                100;\r\n\r\n            // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n            //   this.patientInvestigationRequest.cost_price -\r\n            //   this.patientInvestigationRequest.discount_amount);\r\n            this.calculateTotalAmount();\r\n        },\r\n        expectedHour(h) {\r\n            // var today = new Date();\r\n            // today.setHours(today.getHours() + h);\r\n            var travelTime = moment().add(h, 'hours').format('YYYY-MM-DD hh:mm A');\r\n            return travelTime;\r\n        },\r\n        deleteFromList(data) {\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n                this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n                    function (el) {\r\n                        return el.investigation_id != data.investigation_id;\r\n                    },\r\n                    this\r\n                );\r\n            this.patientInvestigationRequest.cost_price =\r\n                this.patientInvestigationRequest.cost_price - data.total_amount;\r\n            this.calculateTotalAmount();\r\n            this.checkQty();\r\n\r\n            if (\r\n                !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n            ) {\r\n                this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n                this.patientInvestigationRequest.particular_cost_price = 0;\r\n                this.calculateTotalAmount();\r\n            }\r\n        },\r\n        deleteFromParticularList(data) {\r\n            this.patientInvestigationRequest.lstInvestigationParticular =\r\n                this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n                    function (el) {\r\n                        return el.product_id != data.product_id;\r\n                    },\r\n                    this\r\n                );\r\n            this.patientInvestigationRequest.particular_cost_price =\r\n                this.patientInvestigationRequest.particular_cost_price -\r\n                data.totalPrice;\r\n            this.calculateTotalAmount();\r\n        },\r\n        async add() {\r\n            try {\r\n                if (\r\n                    !this.patientInvestigationRequest.cdinvestigation_request_date\r\n                ) {\r\n                    return;\r\n                } else if (\r\n                    !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n                        .length\r\n                ) {\r\n                    this.isExist = \"Please add a Investigation\";\r\n                    return;\r\n                } else {\r\n                    this.patientInvestigationRequest.investigation_request_date = moment(\r\n                        String(\r\n                            this.patientInvestigationRequest.cdinvestigation_request_date\r\n                        )\r\n                    ).format(\"YYYY-MM-DD\");\r\n\r\n                    var currentDate = new Date();\r\n                    var dob = new Date(currentDate.getFullYear() - this.patientInvestigationRequest.aPatient.age_year, currentDate.getMonth() - this.patientInvestigationRequest.aPatient.age_month, currentDate.getDate() - this.patientInvestigationRequest.aPatient.age_day);\r\n                    this.patientInvestigationRequest.aPatient.dob = moment(\r\n                        String(dob)\r\n                    ).format(\"YYYY-MM-DD\");\r\n                    //\r\n                    this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n                    this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n                    this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n\r\n                    let result = await this.patientInvestigationRequestService.add(\r\n                        this.patientInvestigationRequest, this\r\n                    );\r\n                    if (result.status === 200) {\r\n                        this.$toast.add({\r\n                            severity: \"success\",\r\n                            summary: \"Success\",\r\n                            detail: \"Request Successfully\",\r\n                            life: 10000,\r\n                        });\r\n                        this.printInvestigationToken(result.data);\r\n                        this.iPDInvestigationRequest.investigation_request_id = result.data.toString();\r\n                        this.iPDInvestigationRequest.admission_id = this.admission_id;\r\n                        this.iPDInvestigationRequestSave();\r\n                        //this.confirmPay(result.data);\r\n                    } else if (result.status === 401) {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Error\",\r\n                            detail: result.data,\r\n                            life: 10000,\r\n                        });\r\n                    } else {\r\n                        this.$toast.add({\r\n                            severity: \"error\",\r\n                            summary: \"Failed\",\r\n                            detail: result.res,\r\n                            life: 10000,\r\n                        });\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$toast.add({\r\n                    severity: \"error\",\r\n                    summary: \"Failed\",\r\n                    detail: error,\r\n                    life: 10000,\r\n                });\r\n            }\r\n        },\r\n\r\n\r\n        // Service\r\n        takeService(data) {\r\n            this.iPDServiceObj.admission_id = data.admission_id;\r\n            this.serviceDialog = true;\r\n        },\r\n        // Package\r\n        takePackage(data) {\r\n            this.iPDServicePackageObj.admission_id = data.admission_id;\r\n            this.servicePackageDialog = true;\r\n        },\r\n        // Taken Service & Package\r\n        takenList(data) {\r\n            this.iPDService\r\n                .getTakenServiceAndServicePackage(data.admission_id)\r\n                .then((data) => this.formattedTakenList(data.data));\r\n        },\r\n        // View Round Doctor\r\n        viewRoundDoctor(data) {\r\n            this.assignRoundDoctor = {\r\n                //round_time: moment(String(new Date())).format(\"MM/DD/YYYY h:mm A\"),\r\n            };\r\n            this.assignRoundDoctor.admission_id = data.admission_id;\r\n            this.iPDService\r\n                .getAssignIPDRoundDoctor(data.admission_id)\r\n                .then((data) => this.formattedRoundDoctorList(data.data));\r\n        },\r\n        setMainConsultant() {\r\n            if (!this.assignRoundDoctor.isMainConsultant) {\r\n                var aAdmittedPatient = this.admittedPatientList.filter(function (el) {\r\n                    return el.admission_id === this.assignRoundDoctor.admission_id;\r\n                }, this);\r\n                this.assignRoundDoctor.department_id = aAdmittedPatient[0].consultancy_department_id;\r\n                this.assignRoundDoctor.round_doctor_id = aAdmittedPatient[0].doctor_id;\r\n                this.assignRoundDoctor.charge = aAdmittedPatient[0].ipd_consultancy_fee;\r\n            } else {\r\n                this.assignRoundDoctor.department_id = \"\";\r\n                this.assignRoundDoctor.round_doctor_id = \"\";\r\n                this.assignRoundDoctor.charge = \"\";\r\n            }\r\n        },\r\n        mergeDoctorInfo(data) {\r\n            data.forEach((element) => {\r\n                var obj = element;\r\n                obj.doctor_degree = \"\";\r\n                obj.lstConsultantDegree.forEach((el) => {\r\n                    obj.doctor_degree += el.consultant_degree_name + \". \";\r\n                });\r\n\r\n                obj.doctor_name = element.doc_no + \" - (\" + obj.doctor_degree + \") - \" + element.doctor_name;\r\n                this.doctorList.push(obj);\r\n            });\r\n        },\r\n        filterDoctorsDepartmentWise() {\r\n            return this.doctorList.filter(function (el) {\r\n                return el.department_id === this.assignRoundDoctor.department_id;\r\n            }, this);\r\n        },\r\n        getCharge() {\r\n            var aDoctor = this.doctorList.filter(function (el) {\r\n                return el.doctor_id === this.assignRoundDoctor.round_doctor_id;\r\n            }, this);\r\n            this.assignRoundDoctor.charge = aDoctor[0].ipd_consultancy_fee;\r\n        },\r\n        // Round Doctor\r\n        roundDoctor() {\r\n            this.listRoundDoctorDialog = false;\r\n            this.roundDoctorDialog = true;\r\n        },\r\n        formattedRoundDoctorList(data) {\r\n            this.roundDoctorList = [];\r\n            this.roundDoctorList = data;\r\n            this.listRoundDoctorDialog = true;\r\n        },\r\n        formattedTakenList(data) {\r\n            this.takenServicePackageObj.lstTakenService = data.lstTakenService;\r\n            this.takenServicePackageObj.lastTakenServicePackage = data.lastTakenServicePackage;\r\n            this.takenServicePackageDialog = true;\r\n        },\r\n        serviceFormatted(data) {\r\n            let filterData = data.filter(function (el) {\r\n                return el.service_head_id == '1' || el.service_head_id == '3';\r\n            }, this);\r\n            let filterData2 = filterData.filter(function (el) {\r\n                return el.active == true && el.service_type_id != '2';\r\n            }, this);\r\n            this.iPDServiceObj.lstService = [];\r\n            filterData2.forEach((element) => {\r\n                this.iPDServiceObj.lstService.push({\r\n                    service_id: element.service_id,\r\n                    service_name: element.service_name,\r\n                    service_head_id: element.service_head_id,\r\n                    _service_head_name: element._service_head_name,\r\n                    service_type_id: element.service_type_id,\r\n                    _service_type_name: element._service_type_name,\r\n                    service_charge: element.service_charge,\r\n                    er_service_charge: element.er_service_charge,\r\n                    discount: element.discount,\r\n                    isCheck: false\r\n                });\r\n            });\r\n        },\r\n        servicePackageFormatted(data) {\r\n            this.iPDServicePackageObj.lstServicePackage = [];\r\n            data.forEach((element) => {\r\n                this.iPDServicePackageObj.lstServicePackage.push({\r\n                    service_package_id: element.service_package_id,\r\n                    service_package_name: element.service_package_name,\r\n                    charge: element.charge,\r\n                    isCheck: false\r\n                });\r\n            });\r\n        },\r\n        // Assign Round Doctor\r\n        async addDoctorAssign() {\r\n            if (!this.assignRoundDoctor.department_id) {\r\n                return;\r\n            } else if (!this.assignRoundDoctor.round_doctor_id) {\r\n                return;\r\n            } else if (!this.assignRoundDoctor.charge) {\r\n                return;\r\n            } else if (!this.assignRoundDoctor.round_time) {\r\n                return;\r\n            } else {\r\n                //this.assignRoundDoctor.round_time = moment(String(this.assignRoundDoctor.cdround_time)).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                let result = await this.iPDService.assignIPDRoundDoctor(this.assignRoundDoctor, this);\r\n                console.log(result.status);\r\n                if (result.status === 200) {\r\n                    this.$toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Success\",\r\n                        detail: \"Saved Successfully\",\r\n                        life: 10000,\r\n                    });\r\n                    this.hideDialog();\r\n                } else if (result.status === 409) {\r\n                    debugger;\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Error\",\r\n                        detail: result.data,\r\n                        life: 10000,\r\n                    });\r\n                } else {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: result.res,\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        async addService() {\r\n            this.iPDServiceObj.lstService = this.iPDServiceObj.lstService.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            if (this.iPDServiceObj.lstService.length > 0) {\r\n                let result = await this.iPDService.saveIPDService(this.iPDServiceObj, this);\r\n                if (result.status === 200) {\r\n                    this.$toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Success\",\r\n                        detail: \"Saved Successfully\",\r\n                        life: 10000,\r\n                    });\r\n                    this.hideDialog();\r\n                    this.getService();\r\n                } else if (result.status === 401) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Error\",\r\n                        detail: result.data,\r\n                        life: 10000,\r\n                    });\r\n                } else {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: result.res,\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        async addServicePackage() {\r\n            this.iPDServicePackageObj.lstServicePackage = this.iPDServicePackageObj.lstServicePackage.filter(function (el) {\r\n                return el.isCheck == true;\r\n            }, this);\r\n\r\n            if (this.iPDServicePackageObj.lstServicePackage.length > 0) {\r\n                let result = await this.iPDService.saveIPDServicePackage(this.iPDServicePackageObj, this);\r\n                if (result.status === 200) {\r\n                    this.$toast.add({\r\n                        severity: \"success\",\r\n                        summary: \"Success\",\r\n                        detail: \"Saved Successfully\",\r\n                        life: 10000,\r\n                    });\r\n                    this.hideDialog();\r\n                    this.getServicePackage();\r\n                } else if (result.status === 401) {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Error\",\r\n                        detail: result.data,\r\n                        life: 10000,\r\n                    });\r\n                } else {\r\n                    this.$toast.add({\r\n                        severity: \"error\",\r\n                        summary: \"Failed\",\r\n                        detail: result.res,\r\n                        life: 10000,\r\n                    });\r\n                }\r\n            }\r\n        },\r\n    },\r\n};"]}]}