{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\DoctorAppointment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\DoctorAppointment.js","mtime":1640498582584},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9Eb2N0b3JBcHBvaW50bWVudFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L1BhdGllbnRSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSI7CmltcG9ydCBEb2N0b3JTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Eb2N0b3JTZXR1cFNlcnZpY2UiOwppbXBvcnQgQnVpbGRpbmdTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9CdWlsZGluZ1NldHVwU2VydmljZSI7CmltcG9ydCBSb29tU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUm9vbVNldHVwU2VydmljZSI7CmltcG9ydCBSZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUmVmZXJyZWRCeVNldHVwU2VydmljZSI7CmltcG9ydCBWYWxpZGF0aW9uIGZyb20gIi4uLy4uL3NjcmlwdHMvdmFsaWRhdGlvbiI7CmltcG9ydCBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9kb2N0b3ItcGFuZWwvQXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yIH0gZnJvbSAicHJpbWV2dWUvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkclNjaGVkdWxlRGlhbG9nOiBmYWxzZSwKICAgICAgaXNTY2hlZHVsZUV4aXN0OiAiIiwKICAgICAgaXNDb250YWN0RXhpc3Q6ICIiLAogICAgICBpc1ZhbGlkOiAiIiwKICAgICAgaXNFbWFpbFZhbGlkOiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGJsb29kR3JvdXBMaXN0OiBbXSwKICAgICAgZ2VuZGVyTGlzdDogW10sCiAgICAgIGRlcGFydG1lbnRMaXN0OiBbXSwKICAgICAgZG9jdG9yTGlzdDogW10sCiAgICAgIHNjaGVkdWxlTGlzdDogW10sCiAgICAgIGdldFNjaGVkdWxlTGlzdDogW10sCiAgICAgIC8vZ2V0U2NoZWR1bGVMaXN0MjogW10sCiAgICAgIGJ1aWxkaW5nTGlzdDogW10sCiAgICAgIHJvb21MaXN0OiBbXSwKICAgICAgcmVmZXJyZWRCeUxpc3Q6IFtdLAogICAgICBkb2N0b3JBcHBvaW50bWVudExpc3Q6IFtdLAogICAgICBkb2N0b3JBcHBvaW50bWVudDogewogICAgICAgIHNjaGVkdWxlX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7CiAgICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICB9LAogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluaXRGaWx0ZXJzOiBmdW5jdGlvbiBpbml0RmlsdGVycygpIHsKICAgICAgICB0aGlzLmZpbHRlcnMgPSB7CiAgICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogewogICAgICAgICAgICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELAogICAgICAgICAgICBjb25zdHJhaW50czogW3sKICAgICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHN1Ym1pdHRlZDogZmFsc2UsCiAgICAgIHR5cGVMaXN0OiBbewogICAgICAgIHRleHQ6ICJDb25zdWx0YW5jeSIsCiAgICAgICAgdmFsdWU6ICJDb25zdWx0YW5jeSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJSZXBvcnQiLAogICAgICAgIHZhbHVlOiAiUmVwb3J0IgogICAgICB9XQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIHBhc3QgZGF0ZS15ZWFyIGRpc2FibGVkCiAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgdmFyIG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKTsKICAgIHZhciB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsKICAgIHZhciBwcmV2TW9udGggPSBtb250aCA9PT0gMCA/IDExIDogbW9udGggLSAwOwogICAgdmFyIHByZXZZZWFyID0gcHJldk1vbnRoID09PSAxMSA/IHllYXIgLSAwIDogeWVhcjsKICAgIHRoaXMubWluRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB0aGlzLm1pbkRhdGUuc2V0TW9udGgocHJldk1vbnRoKTsKICAgIHRoaXMubWluRGF0ZS5zZXRGdWxsWWVhcihwcmV2WWVhcik7CiAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZSA9IG5ldyBEb2N0b3JBcHBvaW50bWVudFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZSA9IG5ldyBEb2N0b3JTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuY29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlID0gbmV3IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSgpOwogICAgdGhpcy5idWlsZGluZ1NldHVwU2VydmljZSA9IG5ldyBCdWlsZGluZ1NldHVwU2VydmljZSgpOwogICAgdGhpcy5yb29tU2V0dXBTZXJ2aWNlID0gbmV3IFJvb21TZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZSA9IG5ldyBSZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlID0gbmV3IFBhdGllbnRSZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLnZhbGlkYXRpb24gPSBuZXcgVmFsaWRhdGlvbigpOwogICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UgPSBuZXcgQXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsR2VuZGVyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2VuZGVyTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEJsb29kR3JvdXAoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ibG9vZEdyb3VwTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UuZ2V0QWN0aXZlQ29tYm8oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZXBhcnRtZW50TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5idWlsZGluZ1NldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5idWlsZGluZ0xpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMucm9vbVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yb29tTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlLmdldEFjdGl2ZUNvbWJvKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZURvY3RvckluZm8oZGF0YS5kYXRhKTsKICAgIH0pOwogIH0sCiAgd2F0Y2g6IHsKICAgICdkb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlJzogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5nZXRBcHBvaW50bWVudCgpOyAvL3RoaXMudmlld0RyU2NoZWR1bGUoKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8gc3VibWl0KCkgewogICAgLy8gICBsZXQgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KHsKICAgIC8vICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzCiAgICAvLyAgICAgY29udGFpbmVyOiB0aGlzLmZ1bGxQYWdlID8gbnVsbCA6IHRoaXMuJHJlZnMuZm9ybUNvbnRhaW5lciwKICAgIC8vICAgICBjb2xvcjogJyM4MDAwODAnLAogICAgLy8gICAgIGxvYWRlcjogJ2JhcnMnLAogICAgLy8gICAgIHdpZHRoOiA2NCwKICAgIC8vICAgICBoZWlnaHQ6IDY0LAogICAgLy8gICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLAogICAgLy8gICB9KTsKICAgIC8vICAgLy8gc2ltdWxhdGUgQUpBWAogICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsKICAgIC8vICAgICBsb2FkZXIuaGlkZSgpCiAgICAvLyAgIH0sIDEwMDApCiAgICAvLyB9LAogICAgcHJpbnRBcHBvaW50bWVudFRva2VuOiBmdW5jdGlvbiBwcmludEFwcG9pbnRtZW50VG9rZW4oYXBwb2ludG1lbnRJZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0QXBwb2ludG1lbnRUb2tlbkJ5QXBwb2ludG1lbnRJZChhcHBvaW50bWVudElkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBoaWRlRGlhbG9nOiBmdW5jdGlvbiBoaWRlRGlhbG9nKCkgewogICAgICB0aGlzLmRyU2NoZWR1bGVEaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuaXNTY2hlZHVsZUV4aXN0ID0gIiI7CiAgICAgIHRoaXMuaXNWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRW1haWxWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50ID0gewogICAgICAgIHNjaGVkdWxlX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7CiAgICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7IC8vdGhpcy5nZXRBcHBvaW50bWVudCgpOwoKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QgPSBbXTsKICAgICAgdGhpcy5nZXRTY2hlZHVsZUxpc3QgPSBbXTsKICAgIH0sCiAgICBtZXJnZURvY3RvckluZm86IGZ1bmN0aW9uIG1lcmdlRG9jdG9ySW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy90aGlzLmRvY3Rvckxpc3QgPSBkYXRhOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgb2JqID0gZWxlbWVudDsKICAgICAgICBvYmouZG9jdG9yX2RlZ3JlZSA9ICIiOwogICAgICAgIG9iai5sc3RDb25zdWx0YW50RGVncmVlLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICBvYmouZG9jdG9yX2RlZ3JlZSArPSBlbC5jb25zdWx0YW50X2RlZ3JlZV9uYW1lICsgIi4gIjsKICAgICAgICB9KTsKICAgICAgICBvYmouZG9jdG9yX25hbWUgPSBlbGVtZW50LmRvY19ubyArICIgLSAoIiArIG9iai5kb2N0b3JfZGVncmVlICsgIikgLSAiICsgZWxlbWVudC5kb2N0b3JfbmFtZTsKCiAgICAgICAgX3RoaXMzLmRvY3Rvckxpc3QucHVzaChvYmopOwogICAgICB9KTsKICAgICAgdmFyIGFwcG9pbnRtZW50SW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFwcG9pbnRtZW50SW5mbyIpKTsKCiAgICAgIGlmIChhcHBvaW50bWVudEluZm8pIHsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50ID0gYXBwb2ludG1lbnRJbmZvOwogICAgICAgIHRoaXMuZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkKCk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FwcG9pbnRtZW50SW5mbycpOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyRG9jdG9yc0RlcGFydG1lbnRXaXNlOiBmdW5jdGlvbiBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2UoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvY3Rvckxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5kZXBhcnRtZW50X2lkID09PSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRlcGFydG1lbnRfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGdldENvbnN1bHRhbmN5RmVlQnlEb2N0b3JJZDogZnVuY3Rpb24gZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkKCkgewogICAgICB2YXIgYURvY3RvciA9IHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRvY3Rvcl9pZCA9PT0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWUgPSBhRG9jdG9yWzBdLmNvbnN1bHRhbmN5X2ZlZTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZSA9IGFEb2N0b3JbMF0uc2Vjb25kX2Nvbl9mZWU7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2Vjb25kX2Nvbl9mZWVfZHVyYXRpb24gPSBhRG9jdG9yWzBdLnNlY29uZF9jb25fZmVlX2R1cmF0aW9uOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRoaXJkX2Nvbl9mZWUgPSBhRG9jdG9yWzBdLnRoaXJkX2Nvbl9mZWU7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZV9kdXJhdGlvbiA9IGFEb2N0b3JbMF0udGhpcmRfY29uX2ZlZV9kdXJhdGlvbjsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5yZXBvcnRfdmlzaXRfZmVlID0gYURvY3RvclswXS5yZXBvcnRfdmlzaXRfZmVlOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkID0gYURvY3RvclswXS5fYnVpbGRpbmdfaWQ7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucm9vbV9pZCA9IGFEb2N0b3JbMF0ucm9vbV9pZDsKICAgICAgdGhpcy5nZXREclNjaGVkdWxlKCk7CiAgICB9LAogICAgZ2V0Q29uc3VsdGFuY3lGZWVCeVR5cGU6IGZ1bmN0aW9uIGdldENvbnN1bHRhbmN5RmVlQnlUeXBlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFwcG9pbnRtZW50X3R5cGUgPT0gIlJlcG9ydCIpIHsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucmVwb3J0X3Zpc2l0X2ZlZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFwcG9pbnRtZW50X3R5cGUgPT0gIkNvbnN1bHRhbmN5IikgewogICAgICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlLnByZXNjcmlwdGlvbkRvY3RvckFuZFBhdGllbnRXaXNlKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnBhdGllbnRfaWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuZm9ybWF0UHJldmlvdXNBcHBvaW50bWVudChkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZm9ybWF0UHJldmlvdXNBcHBvaW50bWVudDogZnVuY3Rpb24gZm9ybWF0UHJldmlvdXNBcHBvaW50bWVudChkYXRhKSB7CiAgICAgIGlmIChkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWU7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGggPT0gMSkgewogICAgICAgIHZhciBwcmV2aW91c0FwcG9pbnRtZW50RGF0ZSA9IG1vbWVudChTdHJpbmcoZGF0YVswXS5wcmVzY3JpcHRpb25fZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBjdXJyZW50QXBwb2ludG1lbnREYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNkYXBwb2ludF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIHByZXZpb3VzID0gbW9tZW50KHByZXZpb3VzQXBwb2ludG1lbnREYXRlLCAiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBjdXJyZW50ID0gbW9tZW50KGN1cnJlbnRBcHBvaW50bWVudERhdGUsICJZWVlZLU1NLUREIik7IC8vRGlmZmVyZW5jZSBpbiBudW1iZXIgb2YgZGF5cwoKICAgICAgICB2YXIgZGF5ID0gbW9tZW50LmR1cmF0aW9uKGN1cnJlbnQuZGlmZihwcmV2aW91cykpLmFzRGF5cygpOwoKICAgICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZV9kdXJhdGlvbiA8PSBkYXkpIHsKICAgICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoID09IDIpIHsKICAgICAgICB2YXIgcHJldmlvdXNBcHBvaW50bWVudERhdGUyID0gbW9tZW50KFN0cmluZyhkYXRhWzBdLnByZXNjcmlwdGlvbl9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIGN1cnJlbnRBcHBvaW50bWVudERhdGUyID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNkYXBwb2ludF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIHByZXZpb3VzMiA9IG1vbWVudChwcmV2aW91c0FwcG9pbnRtZW50RGF0ZTIsICJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIGN1cnJlbnQyID0gbW9tZW50KGN1cnJlbnRBcHBvaW50bWVudERhdGUyLCAiWVlZWS1NTS1ERCIpOyAvL0RpZmZlcmVuY2UgaW4gbnVtYmVyIG9mIGRheXMKCiAgICAgICAgdmFyIGRheTIgPSBtb21lbnQuZHVyYXRpb24oY3VycmVudDIuZGlmZihwcmV2aW91czIpKS5hc0RheXMoKTsKCiAgICAgICAgaWYgKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZV9kdXJhdGlvbiA8PSBkYXkyKSB7CiAgICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbWVyZ2VSZWZlcnJlZEJ5SW5mbzogZnVuY3Rpb24gbWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM1LnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgICAgICAgdmFsdWU6IGVsZW1lbnQudmFsdWUsCiAgICAgICAgICB0ZXh0OiBlbGVtZW50LnZhbHVlICsgIi0iICsgZWxlbWVudC50ZXh0CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbHRlclJvb21zQnVpbGRpbmdXaXNlOiBmdW5jdGlvbiBmaWx0ZXJSb29tc0J1aWxkaW5nV2lzZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucm9vbUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5idWlsZGluZ19pZCA9PT0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5idWlsZGluZ19pZDsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZ2V0Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWQoZGF0YSkgewogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50ID0gZGF0YTsKCiAgICAgIGlmICghdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5wYXRpZW50X2lkKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlBhdGllbnQgbm90IEV4aXN0ISI7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudCA9IHsKICAgICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgICAgYVBhdGllbnQ6IHt9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnBhdGllbnRfaWQgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LnBhdGllbnRfaWQ7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jZGRvYiA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5kb2IpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgfQogICAgfSwKICAgIGZpbmRQYXRpZW50OiBmdW5jdGlvbiBmaW5kUGF0aWVudCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb250YWN0T3JSZWdObywgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczYuZ2V0Rm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGlzRXhpc3RDb250YWN0OiBmdW5jdGlvbiBpc0V4aXN0Q29udGFjdCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jb250YWN0X25vLm1hdGNoKC9eKDAxKShbMC05XXs5fSkkLykpIHsKICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jb250YWN0X25vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM3LmdldENvbnRhY3QoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkNvbnRhY3QgbnVtYmVyIG11c3Qgc3RhcnQgd2l0aCAwMSBhbmQgdGhlIHJlcXVpcmVkIGxlbmd0aCBpcyAxMSI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDb250YWN0OiBmdW5jdGlvbiBnZXRDb250YWN0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEuY29udGFjdF9ubykgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiRHVwbGljYXRlIHBob25lIG51bWJlciEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGdldEZvcm1hdHRlZFNjaGVkdWxlOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRTY2hlZHVsZShkYXRhKSB7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQuc3RhcnRfdGltZTEgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUxKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5lbmRfdGltZTEgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMSkpKS5mb3JtYXQoImg6bW0gYSIpOwogICAgICAgIGVsZW1lbnQuc3RhcnRfdGltZTIgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUyKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5lbmRfdGltZTIgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMikpKS5mb3JtYXQoImg6bW0gYSIpOwogICAgICB9KTsKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QgPSBkYXRhOyAvL3RoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CgogICAgICB0aGlzLnNob3dEclNjaGVkdWxlRGlhbG9nKCk7CiAgICB9LAogICAgZ2V0RHJTY2hlZHVsZTogZnVuY3Rpb24gZ2V0RHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZS5nZXREb2N0b3JTY2hlZHVsZUJ5SWQodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM4LmdldEZvcm1hdHRlZFNjaGVkdWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dEclNjaGVkdWxlRGlhbG9nOiBmdW5jdGlvbiBzaG93RHJTY2hlZHVsZURpYWxvZygpIHsKICAgICAgdGhpcy5nZXRBcHBvaW50bWVudCgpOwogICAgICB0aGlzLmRyU2NoZWR1bGVEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIHZpZXdEclNjaGVkdWxlOiBmdW5jdGlvbiB2aWV3RHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB2YXIgZGF5cyA9IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXTsKICAgICAgdmFyIGQgPSBuZXcgRGF0ZShtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpKTsKICAgICAgdmFyIGRheU5hbWUgPSBkYXlzW2QuZ2V0RGF5KCldOwogICAgICB0aGlzLmdldFNjaGVkdWxlTGlzdCA9IFtdOyAvL3RoaXMuZ2V0U2NoZWR1bGVMaXN0MiA9IFtdOwoKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50Ll9kYXlfbmFtZSA9PSBkYXlOYW1lICYmIGVsZW1lbnQuaXNfYXZhaWxhYmxlKSB7CiAgICAgICAgICB2YXIgc3RhcnRfdGltZTEgPSBtb21lbnQoZWxlbWVudC5zdGFydF90aW1lMSwgImhoOm1tIGEiKTsKICAgICAgICAgIHZhciBlbmRfdGltZTEgPSBtb21lbnQoZWxlbWVudC5lbmRfdGltZTEsICJoaDptbSBhIik7CiAgICAgICAgICB2YXIgcmVzdWx0MSA9IGVuZF90aW1lMS5kaWZmKHN0YXJ0X3RpbWUxLCAnbWludXRlcycpOwogICAgICAgICAgdmFyIHRpbWUxUGVyUGF0aWVudCA9IHBhcnNlSW50KHJlc3VsdDEgLyBlbGVtZW50LnRpbWUxX3BhdGllbnRfbm8pOwogICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgIHZhciB0aW1lMXJhbmdlID0gc3RhcnRfdGltZTE7CgogICAgICAgICAgd2hpbGUgKGluZGV4IDwgZWxlbWVudC50aW1lMV9wYXRpZW50X25vKSB7CiAgICAgICAgICAgIHZhciB0aW1lID0gbW9tZW50KHRpbWUxcmFuZ2UsICJoaDptbSBhIikuZm9ybWF0KCdMVFMnKTsKICAgICAgICAgICAgdmFyIGFTY2hlZHVsZSA9IHsKICAgICAgICAgICAgICB0aW1lMVJhbmdlU3RhcnQ6IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyksCiAgICAgICAgICAgICAgdGltZTFSYW5nZUVuZDogbW9tZW50KHRpbWUxcmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUxUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpLAogICAgICAgICAgICAgIHRpbWUxSXNCb29rZWQ6IF90aGlzOS5pc0FwcG9pbnRtZW50RXhpc3QodGltZSkKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIF90aGlzOS5nZXRTY2hlZHVsZUxpc3QucHVzaChhU2NoZWR1bGUpOwoKICAgICAgICAgICAgdGltZTFyYW5nZSA9IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMVBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKTsKICAgICAgICAgICAgaW5kZXgrKzsgLy9jb25zb2xlLmxvZyh0aW1lMXJhbmdlKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgc3RhcnRfdGltZTIgPSBtb21lbnQoZWxlbWVudC5zdGFydF90aW1lMiwgImhoOm1tIGEiKTsKICAgICAgICAgIHZhciBlbmRfdGltZTIgPSBtb21lbnQoZWxlbWVudC5lbmRfdGltZTIsICJoaDptbSBhIik7CiAgICAgICAgICB2YXIgcmVzdWx0MiA9IGVuZF90aW1lMi5kaWZmKHN0YXJ0X3RpbWUyLCAnbWludXRlcycpOwogICAgICAgICAgdmFyIHRpbWUyUGVyUGF0aWVudCA9IHJlc3VsdDIgLyBlbGVtZW50LnRpbWUyX3BhdGllbnRfbm87CiAgICAgICAgICB2YXIgaW5kZXgyID0gMDsKICAgICAgICAgIHZhciB0aW1lMnJhbmdlID0gc3RhcnRfdGltZTI7CgogICAgICAgICAgd2hpbGUgKGluZGV4MiA8IGVsZW1lbnQudGltZTJfcGF0aWVudF9ubykgewogICAgICAgICAgICB2YXIgdGltZTIgPSBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpOwoKICAgICAgICAgICAgaWYgKF90aGlzOS5nZXRTY2hlZHVsZUxpc3QubGVuZ3RoID4gaW5kZXgyKSB7CiAgICAgICAgICAgICAgdmFyIGFTY2hlZHVsZTIgPSBfdGhpczkuZ2V0U2NoZWR1bGVMaXN0W2luZGV4Ml07CiAgICAgICAgICAgICAgYVNjaGVkdWxlMi50aW1lMlJhbmdlU3RhcnQgPSBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICAgIGFTY2hlZHVsZTIudGltZTJSYW5nZUVuZCA9IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMlBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKTsKICAgICAgICAgICAgICBhU2NoZWR1bGUyLnRpbWUySXNCb29rZWQgPSBfdGhpczkuaXNBcHBvaW50bWVudEV4aXN0KHRpbWUyKTsKICAgICAgICAgICAgICBfdGhpczkuZ2V0U2NoZWR1bGVMaXN0W2luZGV4Ml0gPSBhU2NoZWR1bGUyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBhU2NoZWR1bGUzID0gewogICAgICAgICAgICAgICAgdGltZTFSYW5nZVN0YXJ0OiAnJywKICAgICAgICAgICAgICAgIHRpbWUxUmFuZ2VFbmQ6ICcnLAogICAgICAgICAgICAgICAgdGltZTFJc0Jvb2tlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIHRpbWUyUmFuZ2VTdGFydDogbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgICAgIHRpbWUyUmFuZ2VFbmQ6IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMlBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgICAgIHRpbWUySXNCb29rZWQ6IF90aGlzOS5pc0FwcG9pbnRtZW50RXhpc3QodGltZTIpCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX3RoaXM5LmdldFNjaGVkdWxlTGlzdC5wdXNoKGFTY2hlZHVsZTMpOwogICAgICAgICAgICB9IC8vIHZhciBhU2NoZWR1bGUyID0gewogICAgICAgICAgICAvLyAgIHRpbWUyUmFuZ2VTdGFydDogbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgLy8gICB0aW1lMlJhbmdlRW5kOiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTJQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJykKICAgICAgICAgICAgLy8gfTsKICAgICAgICAgICAgLy8gdGhpcy5nZXRTY2hlZHVsZUxpc3QucHVzaChhU2NoZWR1bGUyKTsKCgogICAgICAgICAgICB0aW1lMnJhbmdlID0gbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICBpbmRleDIrKzsgLy9jb25zb2xlLmxvZyh0aW1lMnJhbmdlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOyAvL3RoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZ2V0QXBwb2ludG1lbnQ6IGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50KCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQgJiYgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSB7CiAgICAgICAgdmFyIGRhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlLmdldER5bmFtaWNEb2N0b3JXaXNlKGRhdGUsIGRhdGUsICJBY3RpdmUiLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTAuZ2V0QXBwb2ludG1lbnRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldEFwcG9pbnRtZW50Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRBcHBvaW50bWVudEZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRMaXN0ID0gZGF0YTsKICAgICAgdGhpcy52aWV3RHJTY2hlZHVsZSgpOwogICAgfSwKICAgIGlzQXBwb2ludG1lbnRFeGlzdDogZnVuY3Rpb24gaXNBcHBvaW50bWVudEV4aXN0KHRpbWUpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlOwogICAgICB2YXIgc2NoZWR1bGVfZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICAgIHZhciBkYXRlVGltZSA9IG1vbWVudChzY2hlZHVsZV9kYXRlICsgJyAnICsgdGltZSwgJ01NL0REL1lZWVkgaDptbTpzcyBBJyk7CiAgICAgIHZhciBkYXRlID0gZGF0ZVRpbWUuZm9ybWF0KCdNTS9ERC9ZWVlZIGg6bW06c3MgQScpOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGFwcG9pbnRfZGF0ZSA9IG1vbWVudChTdHJpbmcoZWxlbWVudC5hcHBvaW50X2RhdGUpKS5mb3JtYXQoIk1NL0REL1lZWVkgaDptbTpzcyBBIik7CgogICAgICAgIGlmIChhcHBvaW50X2RhdGUgPT0gZGF0ZSkgewogICAgICAgICAgcmVzdWx0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHNldEFwcG9pbnRtZW50OiBmdW5jdGlvbiBzZXRBcHBvaW50bWVudChhcHBvaW50bWVudFRpbWUpIHsKICAgICAgdmFyIHNjaGVkdWxlX2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICB2YXIgZGF0ZVRpbWUgPSBtb21lbnQoc2NoZWR1bGVfZGF0ZSArICcgJyArIGFwcG9pbnRtZW50VGltZSwgJ01NL0REL1lZWVkgaDptbTpzcyBhJyk7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUgPSBkYXRlVGltZS5mb3JtYXQoJ01NL0REL1lZWVkgaDptbTpzcyBhJyk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpOwogICAgICB0aGlzLmRyU2NoZWR1bGVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5nZXRDb25zdWx0YW5jeUZlZUJ5VHlwZSgpOyAvL3RoaXMuY2hlY2tEclNjaGVkdWxlKCk7CiAgICB9LAogICAgY2hlY2tEclNjaGVkdWxlOiBmdW5jdGlvbiBjaGVja0RyU2NoZWR1bGUoKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHRoaXMuaXNTY2hlZHVsZSA9IGZhbHNlOwogICAgICB2YXIgZGF5cyA9IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXTsKICAgICAgdmFyIGQgPSBuZXcgRGF0ZShtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKSk7CiAgICAgIHZhciBkYXlOYW1lID0gZGF5c1tkLmdldERheSgpXTsKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBzdGFydF90aW1lMSA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUxKTsKICAgICAgICB2YXIgZW5kX3RpbWUxID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuZW5kX3RpbWUxKTsKICAgICAgICB2YXIgc3RhcnRfdGltZTIgPSBuZXcgRGF0ZSgiMjAwMC0wMS0wMSAiICsgZWxlbWVudC5zdGFydF90aW1lMik7CiAgICAgICAgdmFyIGVuZF90aW1lMiA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMik7CiAgICAgICAgdmFyIHRpbWVOb3cgPSBuZXcgRGF0ZSgiMjAwMC0wMS0wMSAiICsgbW9tZW50KFN0cmluZyhfdGhpczExLmRvY3RvckFwcG9pbnRtZW50LmNkYXBwb2ludF9kYXRlKSkuZm9ybWF0KCJoOm1tIGEiKSk7CgogICAgICAgIGlmIChlbGVtZW50Ll9kYXlfbmFtZSA9PSBkYXlOYW1lICYmIGVsZW1lbnQuaXNfYXZhaWxhYmxlKSB7CiAgICAgICAgICBpZiAoc3RhcnRfdGltZTEgPD0gdGltZU5vdyAmJiB0aW1lTm93IDw9IGVuZF90aW1lMSB8fCBzdGFydF90aW1lMiA8PSB0aW1lTm93ICYmIHRpbWVOb3cgPD0gZW5kX3RpbWUyKSB7CiAgICAgICAgICAgIF90aGlzMTEuaXNTY2hlZHVsZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmICghdGhpcy5pc1NjaGVkdWxlKSB7CiAgICAgICAgdGhpcy5pc1NjaGVkdWxlRXhpc3QgPSAiU2NoZWR1bGUgbm90IGV4aXN0IjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzU2NoZWR1bGVFeGlzdCA9ICIiOwogICAgICB9CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGN1cnJlbnREYXRlLCBkb2IsIHJlc3VsdCwgX3Jlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy90aGlzLmNoZWNrRHJTY2hlZHVsZSgpOwogICAgICAgICAgICAgICAgX3RoaXMxMi5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuZmlyc3RfbmFtZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV95ZWFyKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5hZ2VfbW9udGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9kYXkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmNvbnRhY3Rfbm8pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmRlcGFydG1lbnRfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYXBwb2ludG1lbnRfdHlwZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5idWlsZGluZ19pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQucm9vbV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LnJlYXNvbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU0OgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMxMi5pc0NvbnRhY3RFeGlzdCB8fCBfdGhpczEyLmlzU2NoZWR1bGVFeGlzdCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgIF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYXBwb2ludF9kYXRlID0gbW9tZW50KFN0cmluZyhfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmNkYXBwb2ludF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIGg6bW06c3MgYSIpOwogICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZG9iID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX3llYXIsIGN1cnJlbnREYXRlLmdldE1vbnRoKCkgLSBfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9tb250aCwgY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5hZ2VfZGF5KTsKICAgICAgICAgICAgICAgIF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuZG9iID0gbW9tZW50KFN0cmluZyhkb2IpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudC5pbnZvaWNlX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlLmFkZChfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50LCBfdGhpczEyKTsKCiAgICAgICAgICAgICAgY2FzZSA2NToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEyLnJlc2V0KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczEyLnByaW50QXBwb2ludG1lbnRUb2tlbihyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTIuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3NDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczEyLmRvY3RvckFwcG9pbnRtZW50Lmludm9pY2VfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMi5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UucHV0KF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQsIF90aGlzMTIpOwoKICAgICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgICAgX3Jlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKF9yZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTdWNjZXNzZnVsbHkgVXBkYXRlZCIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEyLnJlc2V0KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczEyLnByaW50QXBwb2ludG1lbnRUb2tlbihfcmVzdWx0LmRhdGEpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMi4kcm91dGVyLnB1c2goIi9wYXRpZW50LWRvY3Rvci1hcHBvaW50bWVudC1saXN0Iik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9yZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogX3Jlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IF9yZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDc0OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNzY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNzY7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwoKICAgICAgICAgICAgICAgIF90aGlzMTIuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfY29udGV4dC50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA3Nl1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/front-desk/DoctorAppointment.js"],"names":["DoctorAppointmentService","PatientRegistrationService","PatientReportService","CommonService","ConsultancyDepartmentSetupService","DoctorSetupService","BuildingSetupService","RoomSetupService","ReferredBySetupService","Validation","AppointmentPrescriptionService","moment","FilterMatchMode","FilterOperator","data","drScheduleDialog","isScheduleExist","isContactExist","isValid","isEmailValid","isExist","bloodGroupList","genderList","departmentList","doctorList","scheduleList","getScheduleList","buildingList","roomList","referredByList","doctorAppointmentList","doctorAppointment","schedule_date","String","Date","format","patient_id","aPatient","age_year","age_month","age_day","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","typeList","text","created","today","month","getMonth","year","getFullYear","prevMonth","prevYear","minDate","setMonth","setFullYear","doctorAppointmentService","patientRegistrationService","commonService","doctorSetupService","consultancyDepartmentSetupService","buildingSetupService","roomSetupService","referredBySetupService","patientReportService","validation","appointmentPrescriptionService","GetAllGender","then","GetAllBloodGroup","getActiveCombo","getAll","mergeReferredByInfo","mergeDoctorInfo","watch","immediate","handler","getAppointment","methods","printAppointmentToken","appointmentId","GetAppointmentTokenByAppointmentId","Downloadfile","hideDialog","reset","forEach","element","obj","doctor_degree","lstConsultantDegree","el","consultant_degree_name","doctor_name","doc_no","push","appointmentInfo","JSON","parse","localStorage","getItem","getConsultancyFeeByDoctorId","removeItem","filterDoctorsDepartmentWise","filter","department_id","aDoctor","doctor_id","first_con_fee","consultancy_fee","second_con_fee","second_con_fee_duration","third_con_fee","third_con_fee_duration","report_visit_fee","building_id","_building_id","room_id","getDrSchedule","getConsultancyFeeByType","appointment_type","prescriptionDoctorAndPatientWise","formatPreviousAppointment","length","previousAppointmentDate","prescription_date","currentAppointmentDate","cdappoint_date","previous","current","day","duration","diff","asDays","previousAppointmentDate2","currentAppointmentDate2","previous2","current2","day2","filterRoomsBuildingWise","getFormatted","cddob","dob","findPatient","getByContactOrRegNo","contactOrRegNo","isExistContact","contact_no","match","getContact","getFormattedSchedule","start_time1","end_time1","start_time2","end_time2","showDrScheduleDialog","getDoctorScheduleById","viewDrSchedule","days","d","dayName","getDay","_day_name","is_available","result1","time1PerPatient","parseInt","time1_patient_no","index","time1range","time","aSchedule","time1RangeStart","time1RangeEnd","add","time1IsBooked","isAppointmentExist","result2","time2PerPatient","time2_patient_no","index2","time2range","time2","aSchedule2","time2RangeStart","time2RangeEnd","time2IsBooked","aSchedule3","date","getDynamicDoctorWise","getAppointmentFormatted","result","dateTime","appoint_date","setAppointment","appointmentTime","console","log","checkDrSchedule","isSchedule","timeNow","first_name","reason","currentDate","getDate","invoice_id","status","$toast","severity","summary","detail","life","res","put","$router"],"mappings":"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","sourcesContent":["import DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      drScheduleDialog: false,\r\n      isScheduleExist: \"\",\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      isExist: \"\",\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      departmentList: [],\r\n      doctorList: [],\r\n      scheduleList: [],\r\n      getScheduleList: [],\r\n      //getScheduleList2: [],\r\n      buildingList: [],\r\n      roomList: [],\r\n      referredByList: [],\r\n      doctorAppointmentList: [],\r\n      doctorAppointment: {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      typeList: [\r\n        { text: \"Consultancy\", value: \"Consultancy\" },\r\n        { text: \"Report\", value: \"Report\" },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    let today = new Date();\r\n    let month = today.getMonth();\r\n    let year = today.getFullYear();\r\n    let prevMonth = (month === 0) ? 11 : month - 0;\r\n    let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    this.minDate = new Date();\r\n    this.minDate.setMonth(prevMonth);\r\n    this.minDate.setFullYear(prevYear);\r\n\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.commonService = new CommonService();\r\n    this.doctorSetupService = new DoctorSetupService();\r\n    this.consultancyDepartmentSetupService = new ConsultancyDepartmentSetupService();\r\n    this.buildingSetupService = new BuildingSetupService();\r\n    this.roomSetupService = new RoomSetupService();\r\n    this.referredBySetupService = new ReferredBySetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.validation = new Validation();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n\r\n    this.commonService\r\n      .GetAllGender()\r\n      .then((data) => (this.genderList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.consultancyDepartmentSetupService\r\n      .getActiveCombo()\r\n      .then((data) => (this.departmentList = data.data));\r\n\r\n    this.buildingSetupService\r\n      .getAll()\r\n      .then((data) => (this.buildingList = data.data));\r\n\r\n    this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n    this.referredBySetupService\r\n      .getActiveCombo()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.doctorSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n\r\n  },\r\n  watch: {\r\n    'doctorAppointment.schedule_date': {\r\n      immediate: true,\r\n      handler() {\r\n        this.getAppointment();\r\n        //this.viewDrSchedule();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    // submit() {\r\n    //   let loader = this.$loading.show({\r\n    //     // Optional parameters\r\n    //     container: this.fullPage ? null : this.$refs.formContainer,\r\n    //     color: '#800080',\r\n    //     loader: 'bars',\r\n    //     width: 64,\r\n    //     height: 64,\r\n    //     backgroundColor: '#ffffff',\r\n    //   });\r\n    //   // simulate AJAX\r\n    //   setTimeout(() => {\r\n    //     loader.hide()\r\n    //   }, 1000)\r\n    // },\r\n    printAppointmentToken(appointmentId) {\r\n      this.patientReportService.GetAppointmentTokenByAppointmentId(appointmentId, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    hideDialog() {\r\n      this.drScheduleDialog = false;\r\n    },\r\n    reset() {\r\n      this.isScheduleExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.isExist = \"\";\r\n      this.isContactExist = \"\";\r\n      this.doctorAppointment = {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      };\r\n      this.submitted = false;\r\n      //this.getAppointment();\r\n      this.scheduleList = [];\r\n      this.getScheduleList = [];\r\n    },\r\n    mergeDoctorInfo(data) {\r\n      //this.doctorList = data;\r\n      data.forEach((element) => {\r\n        var obj = element;\r\n        obj.doctor_degree = \"\";\r\n        obj.lstConsultantDegree.forEach((el) => {\r\n          obj.doctor_degree += el.consultant_degree_name + \". \";\r\n        });\r\n\r\n        obj.doctor_name = element.doc_no + \" - (\" + obj.doctor_degree + \") - \" + element.doctor_name;\r\n        this.doctorList.push(obj);\r\n      });\r\n\r\n      var appointmentInfo = JSON.parse(localStorage.getItem(\"appointmentInfo\"));\r\n      if (appointmentInfo) {\r\n        this.doctorAppointment = appointmentInfo;\r\n        this.getConsultancyFeeByDoctorId();\r\n        localStorage.removeItem('appointmentInfo');\r\n      }\r\n    },\r\n    filterDoctorsDepartmentWise() {\r\n      return this.doctorList.filter(function (el) {\r\n        return el.department_id === this.doctorAppointment.department_id;\r\n      }, this);\r\n    },\r\n    getConsultancyFeeByDoctorId() {\r\n      var aDoctor = this.doctorList.filter(function (el) {\r\n        return el.doctor_id === this.doctorAppointment.doctor_id;\r\n      }, this);\r\n\r\n      this.doctorAppointment.first_con_fee = aDoctor[0].consultancy_fee;\r\n      this.doctorAppointment.second_con_fee = aDoctor[0].second_con_fee;\r\n      this.doctorAppointment.second_con_fee_duration = aDoctor[0].second_con_fee_duration;\r\n      this.doctorAppointment.third_con_fee = aDoctor[0].third_con_fee;\r\n      this.doctorAppointment.third_con_fee_duration = aDoctor[0].third_con_fee_duration;\r\n      this.doctorAppointment.report_visit_fee = aDoctor[0].report_visit_fee;\r\n      this.doctorAppointment.building_id = aDoctor[0]._building_id;\r\n      this.doctorAppointment.room_id = aDoctor[0].room_id;\r\n\r\n      this.getDrSchedule();\r\n    },\r\n    getConsultancyFeeByType() {\r\n      if (this.doctorAppointment.appointment_type == \"Report\") {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.report_visit_fee;\r\n      } else if (this.doctorAppointment.appointment_type == \"Consultancy\") {\r\n        this.appointmentPrescriptionService.prescriptionDoctorAndPatientWise(this.doctorAppointment.doctor_id, this.doctorAppointment.patient_id, this).then((data) => this.formatPreviousAppointment(data.data));\r\n      }\r\n    },\r\n    formatPreviousAppointment(data) {\r\n      if (data.length == 0) {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n      } else if (data.length == 1) {\r\n        var previousAppointmentDate = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous = moment(previousAppointmentDate, \"YYYY-MM-DD\");\r\n        var current = moment(currentAppointmentDate, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day = moment.duration(current.diff(previous)).asDays();\r\n        if (this.doctorAppointment.second_con_fee_duration <= day) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.second_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      } else if (data.length == 2) {\r\n        var previousAppointmentDate2 = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate2 = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous2 = moment(previousAppointmentDate2, \"YYYY-MM-DD\");\r\n        var current2 = moment(currentAppointmentDate2, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day2 = moment.duration(current2.diff(previous2)).asDays();\r\n        if (this.doctorAppointment.third_con_fee_duration <= day2) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.third_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      }\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      data.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.value,\r\n          text: element.value + \"-\" + element.text,\r\n        });\r\n      });\r\n    },\r\n    filterRoomsBuildingWise() {\r\n      return this.roomList.filter(function (el) {\r\n        return el.building_id === this.doctorAppointment.building_id;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      this.doctorAppointment.aPatient = data;\r\n      if (!this.doctorAppointment.aPatient.patient_id) {\r\n        this.isExist = \"Patient not Exist!\";\r\n        this.doctorAppointment = {\r\n          patient_id: \"\",\r\n          aPatient: {},\r\n        };\r\n      } else {\r\n        this.isExist = \"\";\r\n\r\n        this.doctorAppointment.patient_id =\r\n          this.doctorAppointment.aPatient.patient_id;\r\n        this.doctorAppointment.aPatient.cddob = moment(\r\n          String(this.doctorAppointment.aPatient.dob)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    findPatient() {\r\n      this.patientRegistrationService\r\n        .getByContactOrRegNo(this.doctorAppointment.contactOrRegNo, this)\r\n        .then((data) => this.getFormatted(data.data));\r\n    },\r\n    isExistContact() {\r\n      if (\r\n        this.doctorAppointment.aPatient.contact_no.match(/^(01)([0-9]{9})$/)\r\n      ) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.doctorAppointment.aPatient.contact_no, this)\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    getFormattedSchedule(data) {\r\n      data.forEach((element) => {\r\n        element.start_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time1))\r\n        ).format(\"h:mm a\");\r\n        element.end_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time1))\r\n        ).format(\"h:mm a\");\r\n        element.start_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time2))\r\n        ).format(\"h:mm a\");\r\n        element.end_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time2))\r\n        ).format(\"h:mm a\");\r\n      });\r\n\r\n      this.scheduleList = data;\r\n      //this.drScheduleDialog = true;\r\n      this.showDrScheduleDialog();\r\n    },\r\n    getDrSchedule() {\r\n      this.doctorSetupService\r\n        .getDoctorScheduleById(this.doctorAppointment.doctor_id)\r\n        .then((data) => this.getFormattedSchedule(data.data));\r\n    },\r\n    showDrScheduleDialog() {\r\n      this.getAppointment();\r\n      this.drScheduleDialog = true;\r\n    },\r\n    viewDrSchedule() {\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.getScheduleList = [];\r\n      //this.getScheduleList2 = [];\r\n      this.scheduleList.forEach((element) => {\r\n        if (element._day_name == dayName && element.is_available) {\r\n          var start_time1 = moment(element.start_time1, \"hh:mm a\");\r\n          var end_time1 = moment(element.end_time1, \"hh:mm a\");\r\n          var result1 = end_time1.diff(start_time1, 'minutes');\r\n          var time1PerPatient = parseInt(result1 / element.time1_patient_no);\r\n\r\n          var index = 0;\r\n          var time1range = start_time1;\r\n          while (index < element.time1_patient_no) {\r\n            var time = moment(time1range, \"hh:mm a\").format('LTS');\r\n\r\n            var aSchedule = {\r\n              time1RangeStart: moment(time1range, \"hh:mm a\").format('LTS'),\r\n              time1RangeEnd: moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS'),\r\n              time1IsBooked: this.isAppointmentExist(time)\r\n            };\r\n\r\n            this.getScheduleList.push(aSchedule);\r\n            time1range = moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS');\r\n            index++;\r\n            //console.log(time1range);\r\n          }\r\n\r\n          var start_time2 = moment(element.start_time2, \"hh:mm a\");\r\n          var end_time2 = moment(element.end_time2, \"hh:mm a\");\r\n          var result2 = end_time2.diff(start_time2, 'minutes');\r\n          var time2PerPatient = result2 / element.time2_patient_no;\r\n\r\n          var index2 = 0;\r\n          var time2range = start_time2;\r\n          while (index2 < element.time2_patient_no) {\r\n            var time2 = moment(time2range, \"hh:mm a\").format('LTS');\r\n            if (this.getScheduleList.length > index2) {\r\n              var aSchedule2 = this.getScheduleList[index2];\r\n              aSchedule2.time2RangeStart = moment(time2range, \"hh:mm a\").format('LTS');\r\n              aSchedule2.time2RangeEnd = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n              aSchedule2.time2IsBooked = this.isAppointmentExist(time2);\r\n              this.getScheduleList[index2] = aSchedule2;\r\n            } else {\r\n              var aSchedule3 = {\r\n                time1RangeStart: '',\r\n                time1RangeEnd: '',\r\n                time1IsBooked: true,\r\n                time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n                time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS'),\r\n                time2IsBooked: this.isAppointmentExist(time2),\r\n              };\r\n              this.getScheduleList.push(aSchedule3);\r\n            }\r\n\r\n            // var aSchedule2 = {\r\n            //   time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n            //   time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS')\r\n            // };\r\n            // this.getScheduleList.push(aSchedule2);\r\n            time2range = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n            index2++;\r\n            //console.log(time2range);\r\n          }\r\n        }\r\n      });\r\n\r\n      //this.drScheduleDialog = true;\r\n    },\r\n    getAppointment() {\r\n      if (this.doctorAppointment.doctor_id && this.doctorAppointment.schedule_date) {\r\n        var date = moment(String(this.doctorAppointment.schedule_date)).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointmentService.getDynamicDoctorWise(date, date, \"Active\", this.doctorAppointment.doctor_id).then((data) => this.getAppointmentFormatted(data.data));\r\n      }\r\n    },\r\n    getAppointmentFormatted(data) {\r\n      this.doctorAppointmentList = data;\r\n      this.viewDrSchedule();\r\n    },\r\n    isAppointmentExist(time) {\r\n      var result = false\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + time, 'MM/DD/YYYY h:mm:ss A');\r\n      var date = dateTime.format('MM/DD/YYYY h:mm:ss A');\r\n      this.doctorAppointmentList.forEach(element => {\r\n        var appoint_date = moment(String(element.appoint_date)).format(\"MM/DD/YYYY h:mm:ss A\");\r\n        if (appoint_date == date) {\r\n          result = true;\r\n        }\r\n      });\r\n\r\n      return result;\r\n    },\r\n    setAppointment(appointmentTime) {\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + appointmentTime, 'MM/DD/YYYY h:mm:ss a');\r\n      this.doctorAppointment.cdappoint_date = dateTime.format('MM/DD/YYYY h:mm:ss a');\r\n      console.log(this.doctorAppointment.cdappoint_date);\r\n      this.drScheduleDialog = false;\r\n      this.getConsultancyFeeByType();\r\n      //this.checkDrSchedule();\r\n    },\r\n    checkDrSchedule() {\r\n      this.isSchedule = false;\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.cdappoint_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.scheduleList.forEach((element) => {\r\n        var start_time1 = new Date(\"2000-01-01 \" + element.start_time1);\r\n        var end_time1 = new Date(\"2000-01-01 \" + element.end_time1);\r\n        var start_time2 = new Date(\"2000-01-01 \" + element.start_time2);\r\n        var end_time2 = new Date(\"2000-01-01 \" + element.end_time2);\r\n        var timeNow = new Date(\"2000-01-01 \" + moment(String(this.doctorAppointment.cdappoint_date)).format(\"h:mm a\"));\r\n        if (element._day_name == dayName && element.is_available) {\r\n          if ((start_time1 <= timeNow && timeNow <= end_time1) || (start_time2 <= timeNow && timeNow <= end_time2)) {\r\n            this.isSchedule = true;\r\n          }\r\n        }\r\n      });\r\n\r\n      if (!this.isSchedule) {\r\n        this.isScheduleExist = \"Schedule not exist\";\r\n      } else {\r\n        this.isScheduleExist = \"\";\r\n      }\r\n    },\r\n    async add() {\r\n      //this.checkDrSchedule();\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.doctorAppointment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_year) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_month) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_day) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.contact_no) {\r\n          return;\r\n        } else if (!this.doctorAppointment.department_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.doctor_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.appointment_type) {\r\n          return;\r\n        } else if (!this.doctorAppointment.consultancy_fee) {\r\n          return;\r\n        } else if (!this.doctorAppointment.building_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.room_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.cdappoint_date) {\r\n          return;\r\n        } else if (!this.doctorAppointment.reason) {\r\n          return;\r\n        } else if (this.isContactExist || this.isScheduleExist) {\r\n          return;\r\n        } else {\r\n          this.doctorAppointment.appoint_date = moment(\r\n            String(this.doctorAppointment.cdappoint_date)\r\n          ).format(\"YYYY-MM-DD h:mm:ss a\");\r\n\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.doctorAppointment.aPatient.age_year, currentDate.getMonth() - this.doctorAppointment.aPatient.age_month, currentDate.getDate() - this.doctorAppointment.aPatient.age_day);\r\n          this.doctorAppointment.aPatient.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n          if (!this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.add(\r\n              this.doctorAppointment, this\r\n            );\r\n\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Saved Successfully\",\r\n                life: 10000,\r\n              });\r\n              this.reset();\r\n              this.printAppointmentToken(result.data);\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          } else if (this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.put(\r\n              this.doctorAppointment, this\r\n            );\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Successfully Updated\",\r\n                life: 10000,\r\n              });\r\n              this.reset();\r\n              this.printAppointmentToken(result.data);\r\n              this.$router.push(\"/patient-doctor-appointment-list\");\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          }\r\n\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};"]}]}