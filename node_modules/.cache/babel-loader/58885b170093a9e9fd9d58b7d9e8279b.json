{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\opd\\AppointmentPrescription.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\opd\\AppointmentPrescription.js","mtime":1692621553392},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsgLy8gUHJlc2NyaXB0aW9uCgppbXBvcnQgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9Eb2N0b3JBcHBvaW50bWVudFNlcnZpY2UiOyAvL2ltcG9ydCBGaWd1cmVTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9GaWd1cmVTZXR1cFNlcnZpY2UiOwoKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgUHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QcmVzY3JpcHRpb25SZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IFByZXNjcmlwdGlvbiBmcm9tICIuLi8uLi9jb21wb25lbnRzL1ByZXNjcmlwdGlvbiI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgRmlsdGVyTWF0Y2hNb2RlLCBGaWx0ZXJPcGVyYXRvciB9IGZyb20gInByaW1ldnVlL2FwaSI7CmltcG9ydCBQYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUGF0aWVudFJlcG9ydFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSI7CmltcG9ydCBEaWFnbm9zaXNSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L0RpYWdub3Npc1JlcG9ydFNlcnZpY2UiOyAvL2ltcG9ydCBEaWFnbm9zaXNTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9EaWFnbm9zaXNTZXR1cFNlcnZpY2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFByZXNjcmlwdGlvbjogUHJlc2NyaXB0aW9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNEb2N0b3I6IGZhbHNlLAogICAgICBkYXRhTGlzdDogdHJ1ZSwKICAgICAgaXNIaXN0b3J5OiBmYWxzZSwKICAgICAgLy9maWd1cmVEaWFsb2c6IGZhbHNlLAogICAgICAvL2RpYWdub3Npc0xpc3Q6IFtdLAogICAgICBhcHBvaW5tZW50U3RhdHVzTGlzdDogW10sCiAgICAgIGRvY3RvckFwcG9pbnRtZW50TGlzdDogW10sCiAgICAgIHByZXZQcmVzY3JpcHRpb25EaWFsb2c6IGZhbHNlLAogICAgICBwcmV2UHJlc2NyaXB0aW9uTGlzdDogW10sCiAgICAgIGFwcG9pbnRtZW50SW5mbzoge30sCiAgICAgIC8vZmlndXJlOiB7fSwKICAgICAgZG9jdG9yX2lkOiAiIiwKICAgICAgZG9jdG9yQXBwb2ludG1lbnQ6IHsKICAgICAgICBjZGZyb21kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZHRvZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgLy8gY2R0b2RhdGU6IG1vbWVudCgKICAgICAgICAvLyAgIFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpCiAgICAgICAgLy8gKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBhcHBvaW5tZW50X3N0YXR1czogIkFjdGl2ZSIKICAgICAgfSwKICAgICAgYXBwb2ludG1lbnRQcmVzY3JpcHRpb246IHsKICAgICAgICBjZHByZXNjcmlwdGlvbl9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZGZvbG93dXBfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBmaWd1cmVfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIGZhbWlseUhpc3Rvcnlfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIHBhc3RIaXN0b3J5X3Nob3dfaW5fcHJlc2NyaXB0aW9uOiBmYWxzZSwKICAgICAgICBhbGxBZHZpY2U6IGZhbHNlLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25Db21wbGlhbnRzOiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uT25FeGFtaW5hdGlvbjogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkZpZ3VyZTogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkludmVzdGlnYXRpb246IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25EaWFnbm9zaXM6IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25GYW1pbHlIaXN0b3J5OiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uUGFzdEhpc3Rvcnk6IFtdLAogICAgICAgIGxzdE51dHJpdGlvbjogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvblRyZWF0bWVudDogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkFkdmljZTogW10KICAgICAgfSwKICAgICAgLy8gY2FudmFzIHN0YXJ0CiAgICAgIGNhbnZhczogbnVsbCwKICAgICAgY29udGV4dDogbnVsbCwKICAgICAgaXNEcmF3aW5nOiBmYWxzZSwKICAgICAgc3RhcnRYOiAwLAogICAgICBzdGFydFk6IDAsCiAgICAgIHBvaW50czogW10sCiAgICAgIC8vIGNhbnZhcyBlbmQKICAgICAgc3VibWl0dGVkOiBmYWxzZSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIHBhc3QgZGF0ZS15ZWFyIGRpc2FibGVkCiAgICAvLyBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgLy8gbGV0IG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKTsKICAgIC8vIGxldCB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsKICAgIC8vIGxldCBwcmV2TW9udGggPSAobW9udGggPT09IDApID8gMTEgOiBtb250aCAtIDA7CiAgICAvLyBsZXQgcHJldlllYXIgPSAocHJldk1vbnRoID09PSAxMSkgPyB5ZWFyIC0gMCA6IHllYXI7CiAgICAvLyB0aGlzLm1pbkRhdGUgPSBuZXcgRGF0ZSgpOwogICAgLy8gdGhpcy5taW5EYXRlLnNldE1vbnRoKHByZXZNb250aCk7CiAgICAvLyB0aGlzLm1pbkRhdGUuc2V0RnVsbFllYXIocHJldlllYXIpOwogICAgdGhpcy5taW5EYXRlID0gbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgMSkpOwogICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UgPSBuZXcgQXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlKCk7IC8vdGhpcy5maWd1cmVTZXR1cFNlcnZpY2UgPSBuZXcgRmlndXJlU2V0dXBTZXJ2aWNlKCk7CgogICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UgPSBuZXcgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy5wcmVzY3JpcHRpb25SZXBvcnRTZXJ2aWNlID0gbmV3IFByZXNjcmlwdGlvblJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSA9IG5ldyBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlKCk7CiAgICB0aGlzLmRpYWdub3Npc1JlcG9ydFNlcnZpY2UgPSBuZXcgRGlhZ25vc2lzUmVwb3J0U2VydmljZSgpOyAvL3RoaXMuZGlhZ25vc2lzU2V0dXBTZXJ2aWNlID0gbmV3IERpYWdub3Npc1NldHVwU2VydmljZSgpOwoKICAgIHRoaXMudXNlckluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpKTsgLy8gdGhpcy5kaWFnbm9zaXNTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFsbCgpCiAgICAvLyAgIC50aGVuKChkYXRhKSA9PiAodGhpcy5kaWFnbm9zaXNMaXN0ID0gZGF0YS5kYXRhKSk7CgogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEFwcG9pbm1lbnRTdGF0dXMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5hcHBvaW5tZW50U3RhdHVzTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwoKICAgIGlmICh0aGlzLnVzZXJJbmZvLmRvY3Rvcl9pZCkgewogICAgICB0aGlzLmlzRG9jdG9yID0gdHJ1ZTsKICAgICAgdGhpcy5kb2N0b3JfaWQgPSB0aGlzLnVzZXJJbmZvLmRvY3Rvcl9pZDsKICAgIH0gZWxzZSBpZiAoIXRoaXMudXNlckluZm8uZG9jdG9yX2lkKSB7CiAgICAgIHRoaXMuaXNEb2N0b3IgPSBmYWxzZTsKICAgIH0KCiAgICB0aGlzLnNob3coKTsgLy8gc2hvcnRjdXQga2V5IHN0YXJ0CiAgICAvLyBsZXQgdGhhdCA9IHRoaXM7CiAgICAvLyBkb2N1bWVudC5vbmtleXVwID0gZnVuY3Rpb24gKGUpIHsKICAgIC8vICAgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDY3KSB7CiAgICAvLyAgICAgdGhhdC5nZXRQYXRpZW50Q29tcGxhaW50cygpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDY5KSB7CiAgICAvLyAgICAgdGhhdC5nZXRPbkV4YW1pbmF0aW9uc1BvcHVwKCk7CiAgICAvLyAgICAgdGhhdC5nZXRPbkV4YW1pbmF0aW9ucygpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDcwKSB7CiAgICAvLyAgICAgdGhhdC5nZXRGaWd1cmUoKTsKICAgIC8vICAgfSBlbHNlIGlmIChlLmN0cmxLZXkgJiYgZS5hbHRLZXkgJiYgZS53aGljaCA9PSA3MykgewogICAgLy8gICAgIHRoYXQuZ2V0SW52ZXN0aWdhdGlvbigpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDY4KSB7CiAgICAvLyAgICAgdGhhdC5nZXREaWFnbm9zaXMoKTsKICAgIC8vICAgfSBlbHNlIGlmIChlLmN0cmxLZXkgJiYgZS5hbHRLZXkgJiYgZS53aGljaCA9PSA3MikgewogICAgLy8gICAgIHRoYXQuZ2V0RmFtaWx5SGlzdG9yeSgpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDgwKSB7CiAgICAvLyAgICAgdGhhdC5nZXRQYXN0SGlzdG9yeSgpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDg0KSB7CiAgICAvLyAgICAgdGhhdC5nZXRUcmVhdG1lbnQoKTsKICAgIC8vICAgfSBlbHNlIGlmIChlLmN0cmxLZXkgJiYgZS5hbHRLZXkgJiYgZS53aGljaCA9PSA2NSkgewogICAgLy8gICAgIHRoYXQuZ2V0QWR2aWNlKCk7CiAgICAvLyAgIH0KICAgIC8vICAgLy8gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUuc2hpZnRLZXkpIHsKICAgIC8vICAgLy8gfQogICAgLy8gfTsKICAgIC8vIHNob3J0Y3V0IGtleSBlbmQKICAgIC8vIHZhciBwcmVzY3JpcHRpb25EYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJlc2NyaXB0aW9uRGF0YScpKTsKICAgIC8vIGlmIChwcmVzY3JpcHRpb25EYXRhKSB7CiAgICAvLyAgIHRoaXMucHJlc2NyaXB0aW9uKHByZXNjcmlwdGlvbkRhdGEpOwogICAgLy8gICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncHJlc2NyaXB0aW9uRGF0YScpOwogICAgLy8gfQogIH0sCiAgbWV0aG9kczogewogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50ID0gewogICAgICAgIGNkZnJvbWRhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIGNkdG9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICAvLyBjZHRvZGF0ZTogbW9tZW50KAogICAgICAgIC8vICAgU3RyaW5nKG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIDcpKSkKICAgICAgICAvLyApLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIGFwcG9pbm1lbnRfc3RhdHVzOiAiQWN0aXZlIgogICAgICB9OyAvLyB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgICAgLy8gdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKCiAgICAgIHRoaXMuc2hvdygpOwogICAgfSwKICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwoKICAgICAgaWYgKCF0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNkZnJvbWRhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2R0b2RhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYXBwb2lubWVudF9zdGF0dXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5mcm9tZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGZyb21kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC50b2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2R0b2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZS5nZXREeW5hbWljRG9jdG9yV2lzZSh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZyb21kYXRlLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRvZGF0ZSwgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW5tZW50X3N0YXR1cywgdGhpcy5kb2N0b3JfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIuZG9jdG9yQXBwb2ludG1lbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5pc0hpc3RvcnkgPSBmYWxzZTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICBoaWRlSGlzdG9yeTogZnVuY3Rpb24gaGlkZUhpc3RvcnkoKSB7CiAgICAgIHRoaXMuaXNIaXN0b3J5ID0gZmFsc2U7CiAgICB9LAogICAgcmVwb3J0UHJpbnQ6IGZ1bmN0aW9uIHJlcG9ydFByaW50KGJhcmNvZGVfb3JfbGV2ZWwsIHRlbXBsYXRlX25hbWUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmRpYWdub3Npc1JlcG9ydFNlcnZpY2UuR2V0SW52ZXN0aWdhdGlvblJlcG9ydFRlbXBsYXRlV2lzZShiYXJjb2RlX29yX2xldmVsLCB0ZW1wbGF0ZV9uYW1lLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICB2aWV3UGF0aWVudFByb2ZpbGU6IGZ1bmN0aW9uIHZpZXdQYXRpZW50UHJvZmlsZShwYXRpZW50X2lkKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXRpZW50SWRfZm9yX3Byb2ZpbGUnLCBwYXRpZW50X2lkKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9wYXRpZW50LXByb2ZpbGUiKTsKICAgIH0sCiAgICBwcmV2aW91c1ByZXNjcmlwdGlvbjogZnVuY3Rpb24gcHJldmlvdXNQcmVzY3JpcHRpb24ocGF0aWVudF9pZCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlLmdldFBhdGllbnRXaXNlUHJlc2NyaXB0aW9uTGlzdChwYXRpZW50X2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5wcmV2UHJlc2NyaXB0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgICAgfSk7CiAgICAgIHRoaXMucHJldlByZXNjcmlwdGlvbkRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgY2hlY2tEYXRlOiBmdW5jdGlvbiBjaGVja0RhdGUoZGF0ZSkgewogICAgICB2YXIgdG9kYXkgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKTsKICAgICAgdmFyIGFwcHREYXRlID0gbW9tZW50KFN0cmluZyhkYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CgogICAgICBpZiAodG9kYXkgPT0gYXBwdERhdGUpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBoaWRlRGlhbG9nOiBmdW5jdGlvbiBoaWRlRGlhbG9nKCkgewogICAgICAvL3RoaXMuZmlndXJlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMucHJldlByZXNjcmlwdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIC8vIEZpZ3VyZSBTdGFydCAKICAgIC8vIGdldERpYWdub3NpcygpIHsKICAgIC8vICAgdGhpcy5oZWFkZXJOYW1lID0gIkRpYWdub3NpcyI7CiAgICAvLyAgIHRoaXMuZmlsdGVyc1snZ2xvYmFsJ10udmFsdWUgPSAiIjsKICAgIC8vICAgdGhpcy5pc0FkdmljZSA9IGZhbHNlOwogICAgLy8gICB0aGlzLnRlbXBEYXRhID0gW107CiAgICAvLyAgIHRoaXMucHJlc2NyaXB0aW9uRGF0YUxpc3QubHN0RGlhZ25vc2lzLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgIC8vICAgICB0aGlzLnRlbXBEYXRhLnB1c2goewogICAgLy8gICAgICAgbmFtZTogZWxlbWVudC5kaWFnbm9zaXNfbmFtZSwKICAgIC8vICAgICAgIGlkOiBlbGVtZW50LmRpYWdub3Npc19pZCwKICAgIC8vICAgICB9KTsKICAgIC8vICAgfSk7CiAgICAvLyB9LAogICAgLy8gZ2V0RmlndXJlKCkgewogICAgLy8gICB0aGlzLmhlYWRlck5hbWUgPSAiRmlndXJlIjsKICAgIC8vICAgdGhpcy5maWx0ZXJzWydnbG9iYWwnXS52YWx1ZSA9ICIiOwogICAgLy8gICB0aGlzLmlzQWR2aWNlID0gZmFsc2U7CiAgICAvLyAgIHRoaXMudGVtcERhdGEgPSBbXTsKICAgIC8vICAgdGhpcy5wcmVzY3JpcHRpb25EYXRhTGlzdC5sc3RGaWd1cmVTZXR1cC5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAvLyAgICAgdGhpcy50ZW1wRGF0YS5wdXNoKHsKICAgIC8vICAgICAgIG5hbWU6IGVsZW1lbnQuZmlndXJlX25hbWUsCiAgICAvLyAgICAgICBpZDogZWxlbWVudC5maWd1cmVfaWQsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgIH0pOwogICAgLy8gfSwKICAgIC8vIGdldEZpZ3VyZUZvcm1hdHRlZChkYXRhKSB7CiAgICAvLyAgIHRoaXMuZmlndXJlLmZpZ3VyZV9pbWFnZSA9ICJkYXRhOmltYWdlL2pwZztiYXNlNjQsIiArIGRhdGEuZmlndXJlX2ltYWdlOwogICAgLy8gICAvLyBjYW52YXMKICAgIC8vICAgdmFyIHZtID0gdGhpczsKICAgIC8vICAgdm0uY2FudmFzID0gdm0uJHJlZnMuY2FudmFzOwogICAgLy8gICB2bS5jb250ZXh0ID0gdm0uY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAvLyAgIHZtLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCB2bS5tb3VzZWRvd24pOwogICAgLy8gICB2bS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgdm0ubW91c2Vtb3ZlKTsKICAgIC8vICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsIHZtLm1vdXNldXApOwogICAgLy8gICB2bS5pbWcgPSBuZXcgSW1hZ2UoKTsKICAgIC8vICAgdm0uaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIC8vICAgICB2bS5jb250ZXh0LmRyYXdJbWFnZSh2bS5pbWcsIDAsIDAsIDMwMCwgMjAwKTsgLy8gT3IgYXQgd2hhdGV2ZXIgb2Zmc2V0IHlvdSBsaWtlIGFuZCBzZXQgaGVpZ2h0LCB3aWR0aAogICAgLy8gICB9OwogICAgLy8gICB2bS5pbWcuc3JjID0gdGhpcy5maWd1cmUuZmlndXJlX2ltYWdlOwogICAgLy8gfSwKICAgIC8vIC8vIGNhbnZhcwogICAgLy8gbW91c2Vkb3duKGUpIHsKICAgIC8vICAgdmFyIHZtID0gdGhpczsKICAgIC8vICAgdmFyIHJlY3QgPSB2bS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAvLyAgIHZhciB4ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgLy8gICB2YXIgeSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgLy8gICB2bS5pc0RyYXdpbmcgPSB0cnVlOwogICAgLy8gICB2bS5zdGFydFggPSB4OwogICAgLy8gICB2bS5zdGFydFkgPSB5OwogICAgLy8gICB2bS5wb2ludHMucHVzaCh7CiAgICAvLyAgICAgeDogeCwKICAgIC8vICAgICB5OiB5LAogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICAvLyBtb3VzZW1vdmUoZSkgewogICAgLy8gICB2YXIgdm0gPSB0aGlzOwogICAgLy8gICB2YXIgcmVjdCA9IHZtLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIC8vICAgdmFyIHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAvLyAgIHZhciB5ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAvLyAgIGlmICh2bS5pc0RyYXdpbmcpIHsKICAgIC8vICAgICB2bS5jb250ZXh0LmJlZ2luUGF0aCgpOwogICAgLy8gICAgIHZtLmNvbnRleHQubW92ZVRvKHZtLnN0YXJ0WCwgdm0uc3RhcnRZKTsKICAgIC8vICAgICB2bS5jb250ZXh0LmxpbmVUbyh4LCB5KTsKICAgIC8vICAgICB2bS5jb250ZXh0LmxpbmVXaWR0aCA9IDE7CiAgICAvLyAgICAgdm0uY29udGV4dC5saW5lQ2FwID0gInJvdW5kIjsKICAgIC8vICAgICB2bS5jb250ZXh0LnN0cm9rZVN0eWxlID0gInJnYmEoMCwwLDAsMSkiOwogICAgLy8gICAgIHZtLmNvbnRleHQuc3Ryb2tlKCk7CiAgICAvLyAgICAgdm0uc3RhcnRYID0geDsKICAgIC8vICAgICB2bS5zdGFydFkgPSB5OwogICAgLy8gICAgIHZtLnBvaW50cy5wdXNoKHsKICAgIC8vICAgICAgIHg6IHgsCiAgICAvLyAgICAgICB5OiB5LAogICAgLy8gICAgIH0pOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy8gbW91c2V1cCgpIHsKICAgIC8vICAgdmFyIHZtID0gdGhpczsKICAgIC8vICAgdm0uaXNEcmF3aW5nID0gZmFsc2U7CiAgICAvLyAgIGlmICh2bS5wb2ludHMubGVuZ3RoID4gMCkgewogICAgLy8gICAgIGxvY2FsU3RvcmFnZVsicG9pbnRzIl0gPSBKU09OLnN0cmluZ2lmeSh2bS5wb2ludHMpOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy8gcmVzZXRDYW52YXMoKSB7CiAgICAvLyAgIC8vIHZhciB2bSA9IHRoaXM7CiAgICAvLyAgIC8vIHZtLmNhbnZhcy53aWR0aCA9IHZtLmNhbnZhcy53aWR0aDsKICAgIC8vICAgLy8gdm0ucG9pbnRzLmxlbmd0aCA9IDA7IC8vIHJlc2V0IHBvaW50cyBhcnJheQogICAgLy8gICB2YXIgdm0gPSB0aGlzOwogICAgLy8gICB2bS5jYW52YXMgPSB2bS4kcmVmcy5jYW52YXM7CiAgICAvLyAgIHZtLmNvbnRleHQgPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgIC8vICAgdm0uY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIHZtLm1vdXNlZG93bik7CiAgICAvLyAgIHZtLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCB2bS5tb3VzZW1vdmUpOwogICAgLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgdm0ubW91c2V1cCk7CiAgICAvLyAgIHZtLmltZyA9IG5ldyBJbWFnZSgpOwogICAgLy8gICB2bS5pbWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgLy8gICAgIHZtLmNvbnRleHQuZHJhd0ltYWdlKHZtLmltZywgMCwgMCwgMzAwLCAyMDApOyAvLyBPciBhdCB3aGF0ZXZlciBvZmZzZXQgeW91IGxpa2UgYW5kIHNldCBoZWlnaHQsIHdpZHRoCiAgICAvLyAgIH07CiAgICAvLyAgIHZtLmltZy5zcmMgPSB0aGlzLmZpZ3VyZS5maWd1cmVfaW1hZ2U7CiAgICAvLyAgIHZtLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoOwogICAgLy8gICB2bS5wb2ludHMubGVuZ3RoID0gMDsgLy8gcmVzZXQgcG9pbnRzIGFycmF5CiAgICAvLyB9LAogICAgLy8gLy8gc2F2ZUltYWdlKCkgewogICAgLy8gLy8gICB2YXIgdm0gPSB0aGlzOwogICAgLy8gLy8gICB2YXIgZGF0YVVSTCA9IHZtLmNhbnZhcy50b0RhdGFVUkwoKTsKICAgIC8vIC8vICAgdmFyIGltZyA9IHZtLiRyZWZzLmltZzsKICAgIC8vIC8vICAgaW1nLnNyYyA9IGRhdGFVUkw7CiAgICAvLyAvLyB9LAogICAgLy8gLy8KICAgIC8vIGFkZEZpZ3VyZSgpIHsKICAgIC8vICAgdmFyIGRhdGFVUkwgPSB0aGlzLmNhbnZhcy50b0RhdGFVUkwoKTsKICAgIC8vICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uRmlndXJlLnB1c2goewogICAgLy8gICAgIG5hbWU6IHRoaXMuZmlndXJlLm5hbWUsCiAgICAvLyAgICAgZmlndXJlX2lkOiB0aGlzLmZpZ3VyZS5maWd1cmVfaWQsCiAgICAvLyAgICAgZmlndXJlX2ltYWdlOiBkYXRhVVJMLnNwbGl0KCIsIilbMV0sCiAgICAvLyAgIH0pOwogICAgLy8gICB0aGlzLmZpZ3VyZURpYWxvZyA9IGZhbHNlOwogICAgLy8gICB0aGlzLnNob3dJblByZXNjcmlwdGlvbigKICAgIC8vICAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25GaWd1cmUsCiAgICAvLyAgICAgIXRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24uZmlndXJlX3Nob3dfaW5fcHJlc2NyaXB0aW9uCiAgICAvLyAgICk7CiAgICAvLyB9LAogICAgLy8gRmlndXJlIEVuZCAKICAgIHNob3dJblByZXNjcmlwdGlvbjogZnVuY3Rpb24gc2hvd0luUHJlc2NyaXB0aW9uKGxzdCwgdmFsKSB7CiAgICAgIGxzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgZWxlbWVudC5zaG93X2luX3ByZXNjcmlwdGlvbiA9ICF2YWw7CiAgICAgIH0pOwogICAgfSwKICAgIHByZXNjcmlwdGlvbjogZnVuY3Rpb24gcHJlc2NyaXB0aW9uKGRhdGEpIHsKICAgICAgdGhpcy5hcHBvaW50bWVudEluZm8uYXBwb2lubWVudF9pZCA9IGRhdGEuYXBwb2lubWVudF9pZDsKICAgICAgdGhpcy5hcHBvaW50bWVudEluZm8ucGF0aWVudFJlZyA9IGRhdGEuYVBhdGllbnQucmVnaXN0cmF0aW9uX25vOwogICAgICB0aGlzLmFwcG9pbnRtZW50SW5mby5wYXRpZW50TmFtZSA9IGRhdGEuYVBhdGllbnQuZmlyc3RfbmFtZSArICIgIiArIGRhdGEuYVBhdGllbnQubGFzdF9uYW1lOwogICAgICB0aGlzLmFwcG9pbnRtZW50SW5mby5wYXRpZW50R2VuZGVyID0gZGF0YS5hUGF0aWVudC5nZW5kZXI7CiAgICAgIHRoaXMuYXBwb2ludG1lbnRJbmZvLnBhdGllbnRBZ2VZZWFyID0gZGF0YS5hUGF0aWVudC5hZ2VfeWVhcjsKICAgICAgdGhpcy5hcHBvaW50bWVudEluZm8ucGF0aWVudEFnZU1vbnRoID0gZGF0YS5hUGF0aWVudC5hZ2VfbW9udGg7CiAgICAgIHRoaXMuYXBwb2ludG1lbnRJbmZvLnBhdGllbnRBZ2VEYXkgPSBkYXRhLmFQYXRpZW50LmFnZV9kYXk7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSBmYWxzZTsgLy8gcGFzcyBkYXRhIGludG8gY29tcG9uZW50IAoKICAgICAgdGhpcy4kcmVmcy5wcmVzY3JpcHRpb25Db21wb25lbnQucHJlc2NyaXB0aW9uKGRhdGEpOwogICAgfSwKICAgIGFkZDogZnVuY3Rpb24gYWRkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHByZXNjcmlwdGlvbkluZm8sIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBnZXQgZGF0YSBmcm9tIGNvbXBvbmVudCBhbmQgbWFwcGVkCiAgICAgICAgICAgICAgICBwcmVzY3JpcHRpb25JbmZvID0gX3RoaXM1LiRyZWZzLnByZXNjcmlwdGlvbkNvbXBvbmVudC4kZGF0YS5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvOwogICAgICAgICAgICAgICAgX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25Db21wbGlhbnRzID0gX3RoaXM1LiRyZWZzLnByZXNjcmlwdGlvbkNvbXBvbmVudC4kZGF0YS5jaGllZkNvbXBsYWluTGlzdDsKICAgICAgICAgICAgICAgIF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uT25FeGFtaW5hdGlvbiA9IF90aGlzNS4kcmVmcy5wcmVzY3JpcHRpb25Db21wb25lbnQuJGRhdGEucGF0aWVudExhdGVzdEhpc3RvcnkubHN0UGF0aWVudE9uRXhhbWluYXRpb247CiAgICAgICAgICAgICAgICBfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24ubHN0QXBwb2lubWVudFByZXNjcmlwdGlvblRyZWF0bWVudCA9IHByZXNjcmlwdGlvbkluZm8ubHN0QWRtaXNzaW9uUHJlc2NyaXB0aW9uVHJlYXRtZW50OwogICAgICAgICAgICAgICAgX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uID0gcHJlc2NyaXB0aW9uSW5mby5sc3RBZG1pc3Npb25QcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uOwogICAgICAgICAgICAgICAgX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25BZHZpY2UgPSBwcmVzY3JpcHRpb25JbmZvLmxzdEFkbWlzc2lvblByZXNjcmlwdGlvbkFkdmljZTsKICAgICAgICAgICAgICAgIF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uT25FeGFtaW5hdGlvbiA9IF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uT25FeGFtaW5hdGlvbi5maWx0ZXIoZnVuY3Rpb24gKGVsbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWxtLm9uX2V4YW1pbmF0aW9uX3Jlc3VsdCAhPSBudWxsICYmIGVsbS5vbl9leGFtaW5hdGlvbl9yZXN1bHQgIT0gJyc7CiAgICAgICAgICAgICAgICB9LCBfdGhpczUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CgogICAgICAgICAgICAgICAgaWYgKCEoIV90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uQWR2aWNlLmxlbmd0aCAmJiAhX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uLmxlbmd0aCAmJiAhX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25UcmVhdG1lbnQubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzNS5yZXNldCgpOyAvLyB0aGlzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgLy8gICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgIC8vICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgIC8vICAgZGV0YWlsOiAiUGxlYXNlIGFkZCBQYXRpZW50IEFkdmljZSIsCiAgICAgICAgICAgICAgICAvLyAgIGxpZmU6IDEwMDAwLAogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvLyByZXR1cm47CgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmFwcG9pbm1lbnRfaWQgPSBfdGhpczUuYXBwb2ludG1lbnRJbmZvLmFwcG9pbm1lbnRfaWQ7CiAgICAgICAgICAgICAgICBfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24ucHJlc2NyaXB0aW9uX2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5jZHByZXNjcmlwdGlvbl9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5jZGZvbG93dXBfZGF0ZSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24uZm9sb3d1cF9kYXRlID0gbW9tZW50KFN0cmluZyhfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24uY2Rmb2xvd3VwX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZS5hZGQoX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLCBfdGhpczUpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS5kb3dubG9hZFByZXNjcmlwdGlvbihfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24uYXBwb2lubWVudF9pZCk7CgogICAgICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiUHJlc2NyaWJlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1Lm5ld1ByZXNjcmlwdGlvbigpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LnJlc2V0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDcpOwoKICAgICAgICAgICAgICAgIF90aGlzNS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzcsIDIxXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkb3dubG9hZFByZXNjcmlwdGlvbjogZnVuY3Rpb24gZG93bmxvYWRQcmVzY3JpcHRpb24oYXBwb2lubWVudF9pZCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMucHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZS5HZXRQZXNjcmlwdGlvbihhcHBvaW5tZW50X2lkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNi5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBuZXdQcmVzY3JpcHRpb246IGZ1bmN0aW9uIG5ld1ByZXNjcmlwdGlvbigpIHsKICAgICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvbiA9IHsKICAgICAgICBjZHByZXNjcmlwdGlvbl9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZGZvbG93dXBfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBmaWd1cmVfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIGZhbWlseUhpc3Rvcnlfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIHBhc3RIaXN0b3J5X3Nob3dfaW5fcHJlc2NyaXB0aW9uOiBmYWxzZSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uQ29tcGxpYW50czogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbk9uRXhhbWluYXRpb246IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25GaWd1cmU6IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uOiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uRGlhZ25vc2lzOiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uRmFtaWx5SGlzdG9yeTogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvblBhc3RIaXN0b3J5OiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uVHJlYXRtZW50OiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uQWR2aWNlOiBbXQogICAgICB9OwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOyAvLyByZXNldCBjb21wb25lbnQgb2JqCgogICAgICB0aGlzLiRyZWZzLnByZXNjcmlwdGlvbkNvbXBvbmVudC5uZXdQcmVzY3JpcHRpb24oKTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIGg6bW06c3MgYSIpOwogICAgfSwKICAgIGZvcm1hdERhdGUyOiBmdW5jdGlvbiBmb3JtYXREYXRlMih2YWx1ZSkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/opd/AppointmentPrescription.js"],"names":["CommonService","DoctorAppointmentService","AppointmentPrescriptionService","PrescriptionReportService","Prescription","moment","FilterMatchMode","FilterOperator","PatientRegistrationService","PatientReportService","PatientInvestigationRequestService","DiagnosisReportService","components","data","isDoctor","dataList","isHistory","appoinmentStatusList","doctorAppointmentList","prevPrescriptionDialog","prevPrescriptionList","appointmentInfo","doctor_id","doctorAppointment","cdfromdate","String","Date","format","cdtodate","appoinment_status","appointmentPrescription","cdprescription_date","cdfolowup_date","setDate","getDate","figure_show_in_prescription","familyHistory_show_in_prescription","pastHistory_show_in_prescription","allAdvice","lstAppoinmentPrescriptionCompliants","lstAppoinmentPrescriptionOnExamination","lstAppoinmentPrescriptionFigure","lstAppoinmentPrescriptionInvestigation","lstAppoinmentPrescriptionDiagnosis","lstAppoinmentPrescriptionFamilyHistory","lstAppoinmentPrescriptionPastHistory","lstNutrition","lstAppoinmentPrescriptionTreatment","lstAppoinmentPrescriptionAdvice","canvas","context","isDrawing","startX","startY","points","submitted","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","created","minDate","appointmentPrescriptionService","doctorAppointmentService","commonService","prescriptionReportService","patientRegistrationService","patientReportService","patientInvestigationRequestService","diagnosisReportService","userInfo","JSON","parse","localStorage","getItem","GetAllAppoinmentStatus","then","show","methods","reset","fromdate","todate","getDynamicDoctorWise","hideHistory","reportPrint","barcode_or_level","template_name","GetInvestigationReportTemplateWise","Downloadfile","viewPatientProfile","patient_id","setItem","$router","push","previousPrescription","getPatientWisePrescriptionList","checkDate","date","today","apptDate","hideDialog","showInPrescription","lst","val","forEach","element","show_in_prescription","prescription","appoinment_id","patientReg","aPatient","registration_no","patientName","first_name","last_name","patientGender","gender","patientAgeYear","age_year","patientAgeMonth","age_month","patientAgeDay","age_day","$refs","prescriptionComponent","add","prescriptionInfo","$data","admissionPrescriptionInfo","chiefComplainList","patientLatestHistory","lstPatientOnExamination","lstAdmissionPrescriptionTreatment","lstAdmissionPrescriptionInvestigation","lstAdmissionPrescriptionAdvice","filter","elm","on_examination_result","length","prescription_date","folowup_date","result","status","downloadPrescription","$toast","severity","summary","detail","life","newPrescription","res","GetPescription","formatDate","formatDate2"],"mappings":"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WAAKxF,sBAAL,GAA8B,KAA9B;AACA,WAAKoC,SAAL,GAAiB,KAAjB;AACD,KA3EM;AA6EP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAqD,IAAAA,kBAnNO,8BAmNYC,GAnNZ,EAmNiBC,GAnNjB,EAmNsB;AAC3BD,MAAAA,GAAG,CAACE,OAAJ,CAAY,UAACC,OAAD,EAAa;AACvBA,QAAAA,OAAO,CAACC,oBAAR,GAA+B,CAACH,GAAhC;AACD,OAFD;AAGD,KAvNM;AAwNPI,IAAAA,YAxNO,wBAwNMrG,IAxNN,EAwNY;AACjB,WAAKQ,eAAL,CAAqB8F,aAArB,GAAqCtG,IAAI,CAACsG,aAA1C;AACA,WAAK9F,eAAL,CAAqB+F,UAArB,GAAkCvG,IAAI,CAACwG,QAAL,CAAcC,eAAhD;AACA,WAAKjG,eAAL,CAAqBkG,WAArB,GACE1G,IAAI,CAACwG,QAAL,CAAcG,UAAd,GAA2B,GAA3B,GAAiC3G,IAAI,CAACwG,QAAL,CAAcI,SADjD;AAEA,WAAKpG,eAAL,CAAqBqG,aAArB,GAAqC7G,IAAI,CAACwG,QAAL,CAAcM,MAAnD;AACA,WAAKtG,eAAL,CAAqBuG,cAArB,GAAsC/G,IAAI,CAACwG,QAAL,CAAcQ,QAApD;AACA,WAAKxG,eAAL,CAAqByG,eAArB,GAAuCjH,IAAI,CAACwG,QAAL,CAAcU,SAArD;AACA,WAAK1G,eAAL,CAAqB2G,aAArB,GAAqCnH,IAAI,CAACwG,QAAL,CAAcY,OAAnD;AAEA,WAAKlH,QAAL,GAAgB,KAAhB,CAViB,CAWjB;;AACA,WAAKmH,KAAL,CAAWC,qBAAX,CAAiCjB,YAAjC,CAA8CrG,IAA9C;AACD,KArOM;AAsODuH,IAAAA,GAtOC,iBAsOK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACV;AACIC,gBAAAA,gBAFM,GAEa,MAAI,CAACH,KAAL,CAAWC,qBAAX,CAAiCG,KAAjC,CAAuCC,yBAFpD;AAGV,gBAAA,MAAI,CAACzG,uBAAL,CAA6BS,mCAA7B,GAAmE,MAAI,CAAC2F,KAAL,CAAWC,qBAAX,CAAiCG,KAAjC,CAAuCE,iBAA1G;AACA,gBAAA,MAAI,CAAC1G,uBAAL,CAA6BU,sCAA7B,GAAsE,MAAI,CAAC0F,KAAL,CAAWC,qBAAX,CAAiCG,KAAjC,CAAuCG,oBAAvC,CAA4DC,uBAAlI;AACA,gBAAA,MAAI,CAAC5G,uBAAL,CAA6BiB,kCAA7B,GAAkEsF,gBAAgB,CAACM,iCAAnF;AACA,gBAAA,MAAI,CAAC7G,uBAAL,CAA6BY,sCAA7B,GAAsE2F,gBAAgB,CAACO,qCAAvF;AACA,gBAAA,MAAI,CAAC9G,uBAAL,CAA6BkB,+BAA7B,GAA+DqF,gBAAgB,CAACQ,8BAAhF;AACA,gBAAA,MAAI,CAAC/G,uBAAL,CAA6BU,sCAA7B,GAAsE,MAAI,CAACV,uBAAL,CAA6BU,sCAA7B,CAAoEsG,MAApE,CAA2E,UAAUC,GAAV,EAAe;AAC9J,yBAAOA,GAAG,CAACC,qBAAJ,IAA6B,IAA7B,IAAqCD,GAAG,CAACC,qBAAJ,IAA6B,EAAzE;AACD,iBAFqE,EAEnE,MAFmE,CAAtE;AARU;;AAAA,sBAaJ,CAAC,MAAI,CAAClH,uBAAL,CAA6BkB,+BAA7B,CAA6DiG,MAA9D,IAAwE,CAAC,MAAI,CAACnH,uBAAL,CAA6BY,sCAA7B,CAAoEuG,MAA7I,IAAwJ,CAAC,MAAI,CAACnH,uBAAL,CAA6BiB,kCAA7B,CAAgEkG,MAbrN;AAAA;AAAA;AAAA;;AAcN,gBAAA,MAAI,CAAC3D,KAAL,GAdM,CAeN;AACA;AACA;AACA;AACA;AACA;AACA;;;AArBM;AAAA;;AAAA;AAuBN,gBAAA,MAAI,CAACxD,uBAAL,CAA6BqF,aAA7B,GACE,MAAI,CAAC9F,eAAL,CAAqB8F,aADvB;AAGA,gBAAA,MAAI,CAACrF,uBAAL,CAA6BoH,iBAA7B,GAAiD7I,MAAM,CACrDoB,MAAM,CAAC,MAAI,CAACK,uBAAL,CAA6BC,mBAA9B,CAD+C,CAAN,CAE/CJ,MAF+C,CAExC,YAFwC,CAAjD;;AAIA,oBAAI,MAAI,CAACG,uBAAL,CAA6BE,cAAjC,EAAiD;AAC/C,kBAAA,MAAI,CAACF,uBAAL,CAA6BqH,YAA7B,GAA4C9I,MAAM,CAChDoB,MAAM,CAAC,MAAI,CAACK,uBAAL,CAA6BE,cAA9B,CAD0C,CAAN,CAE1CL,MAF0C,CAEnC,YAFmC,CAA5C;AAGD;;AAlCK;AAAA,uBAoCa,MAAI,CAAC0C,8BAAL,CAAoC+D,GAApC,CACjB,MAAI,CAACtG,uBADY,EACa,MADb,CApCb;;AAAA;AAoCFsH,gBAAAA,MApCE;;AAuCN,oBAAIA,MAAM,CAACC,MAAP,KAAkB,GAAtB,EAA2B;AACzB,kBAAA,MAAI,CAACC,oBAAL,CAA0B,MAAI,CAACxH,uBAAL,CAA6BqF,aAAvD;;AACA,kBAAA,MAAI,CAACoC,MAAL,CAAYnB,GAAZ,CAAgB;AACdoB,oBAAAA,QAAQ,EAAE,SADI;AAEdC,oBAAAA,OAAO,EAAE,SAFK;AAGdC,oBAAAA,MAAM,EAAE,yBAHM;AAIdC,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;;AAMA,kBAAA,MAAI,CAACC,eAAL;;AACA,kBAAA,MAAI,CAACtE,KAAL;AACD,iBAVD,MAUO;AACL,kBAAA,MAAI,CAACiE,MAAL,CAAYnB,GAAZ,CAAgB;AACdoB,oBAAAA,QAAQ,EAAE,OADI;AAEdC,oBAAAA,OAAO,EAAE,QAFK;AAGdC,oBAAAA,MAAM,EAAEN,MAAM,CAACS,GAHD;AAIdF,oBAAAA,IAAI,EAAE;AAJQ,mBAAhB;AAMD;;AAxDK;AAAA;AAAA;;AAAA;AAAA;AAAA;;AA2DR,gBAAA,MAAI,CAACJ,MAAL,CAAYnB,GAAZ,CAAgB;AACdoB,kBAAAA,QAAQ,EAAE,OADI;AAEdC,kBAAAA,OAAO,EAAE,QAFK;AAGdC,kBAAAA,MAAM,aAHQ;AAIdC,kBAAAA,IAAI,EAAE;AAJQ,iBAAhB;;AA3DQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkEX,KAxSM;AAySPL,IAAAA,oBAzSO,gCAyScnC,aAzSd,EAyS6B;AAAA;;AAClC,WAAK3C,yBAAL,CAA+BsF,cAA/B,CAA8C3C,aAA9C,EAA6D,IAA7D,EAAmEhC,IAAnE,CAAwE,UAACtE,IAAD;AAAA,eAAW,MAAI,CAAC0D,aAAL,CAAmBwB,YAAnB,CAAgClF,IAAI,CAACA,IAArC,CAAX;AAAA,OAAxE;AACD,KA3SM;AA4SP+I,IAAAA,eA5SO,6BA4SW;AAChB,WAAK9H,uBAAL,GAA+B;AAC7BC,QAAAA,mBAAmB,EAAE1B,MAAM,CAACoB,MAAM,CAAC,IAAIC,IAAJ,EAAD,CAAP,CAAN,CAA2BC,MAA3B,CAAkC,YAAlC,CADQ;AAE7BK,QAAAA,cAAc,EAAE3B,MAAM,CACpBoB,MAAM,CAAC,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWO,OAAX,CAAmB,IAAIP,IAAJ,GAAWQ,OAAX,KAAuB,CAA1C,CAAT,CAAD,CADc,CAAN,CAEdP,MAFc,CAEP,YAFO,CAFa;AAM7BQ,QAAAA,2BAA2B,EAAE,KANA;AAO7BC,QAAAA,kCAAkC,EAAE,KAPP;AAQ7BC,QAAAA,gCAAgC,EAAE,KARL;AAU7BE,QAAAA,mCAAmC,EAAE,EAVR;AAW7BC,QAAAA,sCAAsC,EAAE,EAXX;AAY7BC,QAAAA,+BAA+B,EAAE,EAZJ;AAa7BC,QAAAA,sCAAsC,EAAE,EAbX;AAc7BC,QAAAA,kCAAkC,EAAE,EAdP;AAe7BC,QAAAA,sCAAsC,EAAE,EAfX;AAgB7BC,QAAAA,oCAAoC,EAAE,EAhBT;AAiB7BE,QAAAA,kCAAkC,EAAE,EAjBP;AAkB7BC,QAAAA,+BAA+B,EAAE;AAlBJ,OAA/B;AAqBA,WAAKO,SAAL,GAAiB,KAAjB,CAtBgB,CAuBhB;;AACA,WAAK2E,KAAL,CAAWC,qBAAX,CAAiCyB,eAAjC;AACD,KArUM;AAsUPG,IAAAA,UAtUO,sBAsUIrG,KAtUJ,EAsUW;AAChB,aAAOrD,MAAM,CAACoB,MAAM,CAACiC,KAAD,CAAP,CAAN,CAAsB/B,MAAtB,CAA6B,sBAA7B,CAAP;AACD,KAxUM;AAyUPqI,IAAAA,WAzUO,uBAyUKtG,KAzUL,EAyUY;AACjB,aAAOrD,MAAM,CAACoB,MAAM,CAACiC,KAAD,CAAP,CAAN,CAAsB/B,MAAtB,CAA6B,YAA7B,CAAP;AACD;AA3UM;AAxJI,CAAf","sourcesContent":["import CommonService from \"../../service/CommonService\";\r\n// Prescription\r\nimport DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\n//import FigureSetupService from \"../../service/setup/FigureSetupService\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport PrescriptionReportService from \"../../service/report/PrescriptionReportService\";\r\nimport Prescription from \"../../components/Prescription\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport DiagnosisReportService from \"../../service/report/DiagnosisReportService\";\r\n//import DiagnosisSetupService from \"../../service/setup/DiagnosisSetupService\";\r\n\r\nexport default {\r\n  components: {\r\n    Prescription\r\n  },\r\n  data() {\r\n    return {\r\n      isDoctor: false,\r\n      dataList: true,\r\n      isHistory: false,\r\n      //figureDialog: false,\r\n      //diagnosisList: [],\r\n      appoinmentStatusList: [],\r\n      doctorAppointmentList: [],\r\n      prevPrescriptionDialog: false,\r\n      prevPrescriptionList: [],\r\n      appointmentInfo: {},\r\n      //figure: {},\r\n      doctor_id: \"\",\r\n      doctorAppointment: {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        // cdtodate: moment(\r\n        //   String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        // ).format(\"MM/DD/YYYY\"),\r\n        appoinment_status: \"Active\",\r\n      },\r\n      appointmentPrescription: {\r\n        cdprescription_date: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdfolowup_date: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n\r\n        figure_show_in_prescription: false,\r\n        familyHistory_show_in_prescription: false,\r\n        pastHistory_show_in_prescription: false,\r\n        allAdvice: false,\r\n\r\n        lstAppoinmentPrescriptionCompliants: [],\r\n        lstAppoinmentPrescriptionOnExamination: [],\r\n        lstAppoinmentPrescriptionFigure: [],\r\n        lstAppoinmentPrescriptionInvestigation: [],\r\n        lstAppoinmentPrescriptionDiagnosis: [],\r\n        lstAppoinmentPrescriptionFamilyHistory: [],\r\n        lstAppoinmentPrescriptionPastHistory: [],\r\n        lstNutrition: [],\r\n        lstAppoinmentPrescriptionTreatment: [],\r\n        lstAppoinmentPrescriptionAdvice: [],\r\n      },\r\n\r\n      // canvas start\r\n      canvas: null,\r\n      context: null,\r\n      isDrawing: false,\r\n      startX: 0,\r\n      startY: 0,\r\n      points: [],\r\n      // canvas end\r\n\r\n      submitted: false,\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    // let today = new Date();\r\n    // let month = today.getMonth();\r\n    // let year = today.getFullYear();\r\n    // let prevMonth = (month === 0) ? 11 : month - 0;\r\n    // let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    // this.minDate = new Date();\r\n    // this.minDate.setMonth(prevMonth);\r\n    // this.minDate.setFullYear(prevYear);\r\n    this.minDate = new Date(new Date().setDate(new Date().getDate() + 1));\r\n\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    //this.figureSetupService = new FigureSetupService();\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.commonService = new CommonService();\r\n    this.prescriptionReportService = new PrescriptionReportService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.patientInvestigationRequestService = new PatientInvestigationRequestService();\r\n    this.diagnosisReportService = new DiagnosisReportService();\r\n    //this.diagnosisSetupService = new DiagnosisSetupService();\r\n\r\n    this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n\r\n    // this.diagnosisSetupService\r\n    //   .getAll()\r\n    //   .then((data) => (this.diagnosisList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllAppoinmentStatus()\r\n      .then((data) => (this.appoinmentStatusList = data.data));\r\n\r\n    if (this.userInfo.doctor_id) {\r\n      this.isDoctor = true;\r\n      this.doctor_id = this.userInfo.doctor_id;\r\n    } else if (!this.userInfo.doctor_id) {\r\n      this.isDoctor = false;\r\n    }\r\n    this.show();\r\n\r\n    // shortcut key start\r\n    // let that = this;\r\n    // document.onkeyup = function (e) {\r\n    //   if (e.ctrlKey && e.altKey && e.which == 67) {\r\n    //     that.getPatientComplaints();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 69) {\r\n    //     that.getOnExaminationsPopup();\r\n    //     that.getOnExaminations();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 70) {\r\n    //     that.getFigure();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 73) {\r\n    //     that.getInvestigation();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 68) {\r\n    //     that.getDiagnosis();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 72) {\r\n    //     that.getFamilyHistory();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 80) {\r\n    //     that.getPastHistory();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 84) {\r\n    //     that.getTreatment();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 65) {\r\n    //     that.getAdvice();\r\n    //   }\r\n    //   // else if (e.ctrlKey && e.altKey && e.shiftKey) {\r\n\r\n    //   // }\r\n    // };\r\n    // shortcut key end\r\n\r\n    // var prescriptionData = JSON.parse(localStorage.getItem('prescriptionData'));\r\n    // if (prescriptionData) {\r\n    //   this.prescription(prescriptionData);\r\n    //   localStorage.removeItem('prescriptionData');\r\n    // }\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.doctorAppointment = {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        // cdtodate: moment(\r\n        //   String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        // ).format(\"MM/DD/YYYY\"),\r\n        appoinment_status: \"Active\",\r\n      };\r\n\r\n      // this.dataList = true;\r\n      // this.submitted = false;\r\n      this.show();\r\n    },\r\n    show() {\r\n      this.submitted = true;\r\n      if (!this.doctorAppointment.cdfromdate) {\r\n        return;\r\n      } else if (!this.doctorAppointment.cdtodate) {\r\n        return;\r\n      } else if (!this.doctorAppointment.appoinment_status) {\r\n        return;\r\n      } else {\r\n        this.doctorAppointment.fromdate = moment(\r\n          String(this.doctorAppointment.cdfromdate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointment.todate = moment(\r\n          String(this.doctorAppointment.cdtodate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointmentService\r\n          .getDynamicDoctorWise(\r\n            this.doctorAppointment.fromdate,\r\n            this.doctorAppointment.todate,\r\n            this.doctorAppointment.appoinment_status,\r\n            this.doctor_id\r\n          )\r\n          .then((data) => (this.doctorAppointmentList = data.data));\r\n      }\r\n      this.dataList = true;\r\n      this.isHistory = false;\r\n      this.submitted = false;\r\n    },\r\n    hideHistory() {\r\n      this.isHistory = false;\r\n    },\r\n    reportPrint(barcode_or_level, template_name) {\r\n      this.diagnosisReportService.GetInvestigationReportTemplateWise(barcode_or_level, template_name, this).then((data) => this.commonService.Downloadfile(data.data));\r\n    },\r\n    viewPatientProfile(patient_id) {\r\n      localStorage.setItem('patientId_for_profile', patient_id);\r\n      this.$router.push(\"/patient-profile\");\r\n    },\r\n    previousPrescription(patient_id) {\r\n      this.appointmentPrescriptionService\r\n        .getPatientWisePrescriptionList(patient_id)\r\n        .then((data) => (this.prevPrescriptionList = data.data));\r\n\r\n      this.prevPrescriptionDialog = true;\r\n    },\r\n\r\n    checkDate(date) {\r\n      var today = moment(String(new Date())).format(\"MM/DD/YYYY\");\r\n      var apptDate = moment(String(date)).format(\"MM/DD/YYYY\");\r\n      if (today == apptDate) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    hideDialog() {\r\n      //this.figureDialog = false;\r\n      this.prevPrescriptionDialog = false;\r\n      this.submitted = false;\r\n    },\r\n\r\n    // Figure Start \r\n    // getDiagnosis() {\r\n    //   this.headerName = \"Diagnosis\";\r\n    //   this.filters['global'].value = \"\";\r\n    //   this.isAdvice = false;\r\n    //   this.tempData = [];\r\n    //   this.prescriptionDataList.lstDiagnosis.forEach((element) => {\r\n    //     this.tempData.push({\r\n    //       name: element.diagnosis_name,\r\n    //       id: element.diagnosis_id,\r\n    //     });\r\n    //   });\r\n    // },\r\n\r\n    // getFigure() {\r\n    //   this.headerName = \"Figure\";\r\n    //   this.filters['global'].value = \"\";\r\n    //   this.isAdvice = false;\r\n    //   this.tempData = [];\r\n    //   this.prescriptionDataList.lstFigureSetup.forEach((element) => {\r\n    //     this.tempData.push({\r\n    //       name: element.figure_name,\r\n    //       id: element.figure_id,\r\n    //     });\r\n    //   });\r\n    // },\r\n\r\n    // getFigureFormatted(data) {\r\n    //   this.figure.figure_image = \"data:image/jpg;base64,\" + data.figure_image;\r\n    //   // canvas\r\n    //   var vm = this;\r\n    //   vm.canvas = vm.$refs.canvas;\r\n    //   vm.context = vm.canvas.getContext(\"2d\");\r\n    //   vm.canvas.addEventListener(\"mousedown\", vm.mousedown);\r\n    //   vm.canvas.addEventListener(\"mousemove\", vm.mousemove);\r\n    //   document.addEventListener(\"mouseup\", vm.mouseup);\r\n\r\n    //   vm.img = new Image();\r\n    //   vm.img.onload = function () {\r\n    //     vm.context.drawImage(vm.img, 0, 0, 300, 200); // Or at whatever offset you like and set height, width\r\n    //   };\r\n\r\n    //   vm.img.src = this.figure.figure_image;\r\n    // },\r\n    // // canvas\r\n    // mousedown(e) {\r\n    //   var vm = this;\r\n    //   var rect = vm.canvas.getBoundingClientRect();\r\n    //   var x = e.clientX - rect.left;\r\n    //   var y = e.clientY - rect.top;\r\n\r\n    //   vm.isDrawing = true;\r\n    //   vm.startX = x;\r\n    //   vm.startY = y;\r\n    //   vm.points.push({\r\n    //     x: x,\r\n    //     y: y,\r\n    //   });\r\n    // },\r\n    // mousemove(e) {\r\n    //   var vm = this;\r\n    //   var rect = vm.canvas.getBoundingClientRect();\r\n    //   var x = e.clientX - rect.left;\r\n    //   var y = e.clientY - rect.top;\r\n\r\n    //   if (vm.isDrawing) {\r\n    //     vm.context.beginPath();\r\n    //     vm.context.moveTo(vm.startX, vm.startY);\r\n    //     vm.context.lineTo(x, y);\r\n    //     vm.context.lineWidth = 1;\r\n    //     vm.context.lineCap = \"round\";\r\n    //     vm.context.strokeStyle = \"rgba(0,0,0,1)\";\r\n    //     vm.context.stroke();\r\n\r\n    //     vm.startX = x;\r\n    //     vm.startY = y;\r\n\r\n    //     vm.points.push({\r\n    //       x: x,\r\n    //       y: y,\r\n    //     });\r\n    //   }\r\n    // },\r\n    // mouseup() {\r\n    //   var vm = this;\r\n    //   vm.isDrawing = false;\r\n    //   if (vm.points.length > 0) {\r\n    //     localStorage[\"points\"] = JSON.stringify(vm.points);\r\n    //   }\r\n    // },\r\n    // resetCanvas() {\r\n    //   // var vm = this;\r\n    //   // vm.canvas.width = vm.canvas.width;\r\n    //   // vm.points.length = 0; // reset points array\r\n\r\n    //   var vm = this;\r\n    //   vm.canvas = vm.$refs.canvas;\r\n    //   vm.context = vm.canvas.getContext(\"2d\");\r\n    //   vm.canvas.addEventListener(\"mousedown\", vm.mousedown);\r\n    //   vm.canvas.addEventListener(\"mousemove\", vm.mousemove);\r\n    //   document.addEventListener(\"mouseup\", vm.mouseup);\r\n\r\n    //   vm.img = new Image();\r\n    //   vm.img.onload = function () {\r\n    //     vm.context.drawImage(vm.img, 0, 0, 300, 200); // Or at whatever offset you like and set height, width\r\n    //   };\r\n\r\n    //   vm.img.src = this.figure.figure_image;\r\n\r\n    //   vm.canvas.width = this.canvas.width;\r\n    //   vm.points.length = 0; // reset points array\r\n    // },\r\n    // // saveImage() {\r\n    // //   var vm = this;\r\n    // //   var dataURL = vm.canvas.toDataURL();\r\n    // //   var img = vm.$refs.img;\r\n    // //   img.src = dataURL;\r\n    // // },\r\n    // //\r\n    // addFigure() {\r\n    //   var dataURL = this.canvas.toDataURL();\r\n    //   this.appointmentPrescription.lstAppoinmentPrescriptionFigure.push({\r\n    //     name: this.figure.name,\r\n    //     figure_id: this.figure.figure_id,\r\n    //     figure_image: dataURL.split(\",\")[1],\r\n    //   });\r\n    //   this.figureDialog = false;\r\n    //   this.showInPrescription(\r\n    //     this.appointmentPrescription.lstAppoinmentPrescriptionFigure,\r\n    //     !this.appointmentPrescription.figure_show_in_prescription\r\n    //   );\r\n    // },\r\n    // Figure End \r\n\r\n    showInPrescription(lst, val) {\r\n      lst.forEach((element) => {\r\n        element.show_in_prescription = !val;\r\n      });\r\n    },\r\n    prescription(data) {\r\n      this.appointmentInfo.appoinment_id = data.appoinment_id;\r\n      this.appointmentInfo.patientReg = data.aPatient.registration_no;\r\n      this.appointmentInfo.patientName =\r\n        data.aPatient.first_name + \" \" + data.aPatient.last_name;\r\n      this.appointmentInfo.patientGender = data.aPatient.gender;\r\n      this.appointmentInfo.patientAgeYear = data.aPatient.age_year;\r\n      this.appointmentInfo.patientAgeMonth = data.aPatient.age_month;\r\n      this.appointmentInfo.patientAgeDay = data.aPatient.age_day;\r\n\r\n      this.dataList = false;\r\n      // pass data into component \r\n      this.$refs.prescriptionComponent.prescription(data);\r\n    },\r\n    async add() {\r\n      // get data from component and mapped\r\n      var prescriptionInfo = this.$refs.prescriptionComponent.$data.admissionPrescriptionInfo;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionCompliants = this.$refs.prescriptionComponent.$data.chiefComplainList;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionOnExamination = this.$refs.prescriptionComponent.$data.patientLatestHistory.lstPatientOnExamination;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionTreatment = prescriptionInfo.lstAdmissionPrescriptionTreatment;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionInvestigation = prescriptionInfo.lstAdmissionPrescriptionInvestigation;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionAdvice = prescriptionInfo.lstAdmissionPrescriptionAdvice;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionOnExamination = this.appointmentPrescription.lstAppoinmentPrescriptionOnExamination.filter(function (elm) {\r\n        return elm.on_examination_result != null && elm.on_examination_result != '';\r\n      }, this);\r\n      \r\n      try {\r\n        if (!this.appointmentPrescription.lstAppoinmentPrescriptionAdvice.length && !this.appointmentPrescription.lstAppoinmentPrescriptionInvestigation.length &&  !this.appointmentPrescription.lstAppoinmentPrescriptionTreatment.length) {\r\n          this.reset();\r\n          // this.$toast.add({\r\n          //   severity: \"error\",\r\n          //   summary: \"Error\",\r\n          //   detail: \"Please add Patient Advice\",\r\n          //   life: 10000,\r\n          // });\r\n          // return;\r\n        } else {\r\n          this.appointmentPrescription.appoinment_id =\r\n            this.appointmentInfo.appoinment_id;\r\n\r\n          this.appointmentPrescription.prescription_date = moment(\r\n            String(this.appointmentPrescription.cdprescription_date)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (this.appointmentPrescription.cdfolowup_date) {\r\n            this.appointmentPrescription.folowup_date = moment(\r\n              String(this.appointmentPrescription.cdfolowup_date)\r\n            ).format(\"YYYY-MM-DD\");\r\n          }\r\n\r\n          let result = await this.appointmentPrescriptionService.add(\r\n            this.appointmentPrescription, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.downloadPrescription(this.appointmentPrescription.appoinment_id);\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Prescribed Successfully\",\r\n              life: 10000,\r\n            });\r\n            this.newPrescription();\r\n            this.reset();\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    downloadPrescription(appoinment_id) {\r\n      this.prescriptionReportService.GetPescription(appoinment_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    newPrescription() {\r\n      this.appointmentPrescription = {\r\n        cdprescription_date: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdfolowup_date: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n\r\n        figure_show_in_prescription: false,\r\n        familyHistory_show_in_prescription: false,\r\n        pastHistory_show_in_prescription: false,\r\n\r\n        lstAppoinmentPrescriptionCompliants: [],\r\n        lstAppoinmentPrescriptionOnExamination: [],\r\n        lstAppoinmentPrescriptionFigure: [],\r\n        lstAppoinmentPrescriptionInvestigation: [],\r\n        lstAppoinmentPrescriptionDiagnosis: [],\r\n        lstAppoinmentPrescriptionFamilyHistory: [],\r\n        lstAppoinmentPrescriptionPastHistory: [],\r\n        lstAppoinmentPrescriptionTreatment: [],\r\n        lstAppoinmentPrescriptionAdvice: [],\r\n      };\r\n\r\n      this.submitted = false;\r\n      // reset component obj\r\n      this.$refs.prescriptionComponent.newPrescription();\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY h:mm:ss a\");\r\n    },\r\n    formatDate2(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n  },\r\n};"]}]}