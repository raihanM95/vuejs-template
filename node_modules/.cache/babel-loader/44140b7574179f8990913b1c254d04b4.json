{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\emergency\\PatientRegTreatment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\emergency\\PatientRegTreatment.js","mtime":1668680636283},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L1BhdGllbnRSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAiLi4vLi4vc2NyaXB0cy92YWxpZGF0aW9uIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yIH0gZnJvbSAicHJpbWV2dWUvYXBpIjsgLy8gU2VydmljZQoKaW1wb3J0IFNlcnZpY2VTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9TZXJ2aWNlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IEVtZXJnZW5jeVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9lbWVyZ2VuY3kvRW1lcmdlbmN5U2VydmljZSI7IC8vIFByZXNjcmlwdGlvbgoKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgQWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3ByZXNjcmlwdGlvbi9BZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlIjsKaW1wb3J0IFByZXNjcmlwdGlvblJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSI7CmltcG9ydCBQcmVzY3JpcHRpb24gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9QcmVzY3JpcHRpb24iOyAvLyBIaXN0b3J5CgppbXBvcnQgUGF0aWVudEhpc3RvcnkgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9QYXRpZW50SGlzdG9yeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBQcmVzY3JpcHRpb246IFByZXNjcmlwdGlvbiwKICAgIFBhdGllbnRIaXN0b3J5OiBQYXRpZW50SGlzdG9yeQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2U6IDEwMCwKICAgICAgaXNDb250YWN0RXhpc3Q6ICIiLAogICAgICBpc1ZhbGlkOiAiIiwKICAgICAgaXNFbWFpbFZhbGlkOiAiIiwKICAgICAgbmV3SW5mbzogZmFsc2UsCiAgICAgIGRhdGFMaXN0OiB0cnVlLAogICAgICByZWxhdGlvbkxpc3Q6IFtdLAogICAgICBibG9vZEdyb3VwTGlzdDogW10sCiAgICAgIGdlbmRlckxpc3Q6IFtdLAogICAgICBwYXRpZW50UmVnaXN0cmF0aW9uTGlzdDogW10sCiAgICAgIHBhdGllbnRSZWdpc3RyYXRpb246IHsKICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgIGFnZV9kYXk6ICIwIgogICAgICB9LAogICAgICBmaWx0ZXJzOiB7CiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgfSwKICAgICAgICBuYW1lOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgfQogICAgICB9LAogICAgICBpbml0RmlsdGVyczogZnVuY3Rpb24gaW5pdEZpbHRlcnMoKSB7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gewogICAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgICAgfSwKICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCwKICAgICAgICAgICAgY29uc3RyYWludHM6IFt7CiAgICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICAgICAgfV0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICAvLyBTZXJ2aWNlCiAgICAgIHNlcnZpY2VUYWtlbkxpc3REaWFsb2c6IGZhbHNlLAogICAgICBsc3RUYWtlblNlcnZpY2U6IFtdLAogICAgICBzZXJ2aWNlRGlhbG9nOiBmYWxzZSwKICAgICAgZW1lcmdlbmN5U2VydmljZU9iajogewogICAgICAgIGxzdFNlcnZpY2U6IFtdCiAgICAgIH0sCiAgICAgIC8vIFByZXNjcmlwdGlvbgogICAgICBpc0RvY3RvcjogZmFsc2UsCiAgICAgIGFkbWl0dGVkUGF0aWVudEluZm86IHt9LAogICAgICBhZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvOiB7CiAgICAgICAgY2RwcmVzY3JpcHRpb25fZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgY2Rmb2xvd3VwX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgNykpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIikKICAgICAgfSwKICAgICAgLy8gSGlzdG9yeQogICAgICBpc0hpc3Rvcnk6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gcGFzdCBkYXRlLXllYXIgZGlzYWJsZWQKICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICB2YXIgbW9udGggPSB0b2RheS5nZXRNb250aCgpOwogICAgdmFyIHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOwogICAgdmFyIHByZXZNb250aCA9IG1vbnRoID09PSAwID8gMTEgOiBtb250aCAtIDA7CiAgICB2YXIgcHJldlllYXIgPSBwcmV2TW9udGggPT09IDExID8geWVhciAtIDAgOiB5ZWFyOwogICAgdGhpcy5taW5EYXRlID0gbmV3IERhdGUoKTsKICAgIHRoaXMubWluRGF0ZS5zZXRNb250aChwcmV2TW9udGgpOwogICAgdGhpcy5taW5EYXRlLnNldEZ1bGxZZWFyKHByZXZZZWFyKTsKICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLnZhbGlkYXRpb24gPSBuZXcgVmFsaWRhdGlvbigpOyAvLyBTZXJ2aWNlCgogICAgdGhpcy5zZXJ2aWNlU2V0dXBTZXJ2aWNlID0gbmV3IFNlcnZpY2VTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuZW1lcmdlbmN5U2VydmljZSA9IG5ldyBFbWVyZ2VuY3lTZXJ2aWNlKCk7IC8vIFByZXNjcmlwdGlvbgoKICAgIHRoaXMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlKCk7CiAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UoKTsKICAgIHRoaXMucHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSA9IG5ldyBQcmVzY3JpcHRpb25SZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsR2VuZGVyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZ2VuZGVyTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEJsb29kR3JvdXAoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ibG9vZEdyb3VwTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbFBhdGllbnRzUmVsYXRpdmVzKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVsYXRpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7IC8vIHNlcnZlciBzaWRlIHBhZ2luYXRpb24KCiAgICB2YXIgZmlsdGVyID0gdGhpcy5maWx0ZXJzWydnbG9iYWwnXS52YWx1ZSA/IHRoaXMuZmlsdGVyc1snZ2xvYmFsJ10udmFsdWUgOiAiIjsKICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0UGF0aWVudFdpdGhQYWdpbmF0aW9uKCIwIiwgIjEwIiwgZmlsdGVyLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYXRpZW50Rm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICB9KTsKICAgIHRoaXMudXNlckluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpKTsKCiAgICBpZiAodGhpcy51c2VySW5mby5kb2N0b3JfaWQpIHsKICAgICAgdGhpcy5pc0RvY3RvciA9IHRydWU7CiAgICB9IGVsc2UgaWYgKCF0aGlzLnVzZXJJbmZvLmRvY3Rvcl9pZCkgewogICAgICB0aGlzLmlzRG9jdG9yID0gZmFsc2U7CiAgICB9IC8vIFNlcnZpY2UKCgogICAgdGhpcy5nZXRTZXJ2aWNlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRTZXJ2aWNlOiBmdW5jdGlvbiBnZXRTZXJ2aWNlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuc2VydmljZVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5zZXJ2aWNlRm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlcnZpY2VGb3JtYXR0ZWQ6IGZ1bmN0aW9uIHNlcnZpY2VGb3JtYXR0ZWQoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXJEYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnNlcnZpY2VfaGVhZF9pZCA9PSAnMicgfHwgZWwuc2VydmljZV9oZWFkX2lkID09ICczJyAmJiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlID0gW107CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzMy5lbWVyZ2VuY3lTZXJ2aWNlT2JqLmxzdFNlcnZpY2UucHVzaCh7CiAgICAgICAgICBzZXJ2aWNlX2lkOiBlbGVtZW50LnNlcnZpY2VfaWQsCiAgICAgICAgICBzZXJ2aWNlX25hbWU6IGVsZW1lbnQuc2VydmljZV9uYW1lLAogICAgICAgICAgLy9zZXJ2aWNlX2hlYWRfaWQ6IGVsZW1lbnQuc2VydmljZV9oZWFkX2lkLAogICAgICAgICAgLy9fc2VydmljZV9oZWFkX25hbWU6IGVsZW1lbnQuX3NlcnZpY2VfaGVhZF9uYW1lLAogICAgICAgICAgLy9zZXJ2aWNlX3R5cGVfaWQ6IGVsZW1lbnQuc2VydmljZV90eXBlX2lkLAogICAgICAgICAgLy9fc2VydmljZV90eXBlX25hbWU6IGVsZW1lbnQuX3NlcnZpY2VfdHlwZV9uYW1lLAogICAgICAgICAgY2hhcmdlOiBlbGVtZW50LnNlcnZpY2VfY2hhcmdlLAogICAgICAgICAgZGlzY291bnRfYW1vdW50OiBlbGVtZW50LmRpc2NvdW50LAogICAgICAgICAgZGlzY291bnRfcGVyY2VudDogZWxlbWVudC5kaXNjb3VudCAvIGVsZW1lbnQuc2VydmljZV9jaGFyZ2UgKiAxMDAsCiAgICAgICAgICB0b3RhbF9hbW91bnQ6IGVsZW1lbnQuc2VydmljZV9jaGFyZ2UgLSBlbGVtZW50LmRpc2NvdW50LAogICAgICAgICAgaXNDaGVjazogZmFsc2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcHJpbnRBbGxQYXRpZW50OiBmdW5jdGlvbiBwcmludEFsbFBhdGllbnQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5nZXRBbGwodGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczQuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcHJpbnRJRDogZnVuY3Rpb24gcHJpbnRJRChyZWdObykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0UGF0aWVudElkQ2FyZEJ5UmVnTm8ocmVnTm8sIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM1LmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHBhdGllbnRGb3JtYXR0ZWQ6IGZ1bmN0aW9uIHBhdGllbnRGb3JtYXR0ZWQoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25MaXN0ID0gZGF0YTsKICAgICAgdGhpcy5wYWdlID0gZGF0YS5sZW5ndGggPyBkYXRhWzBdLl90b3RhbF9yZWNvcmRzIDogMTAwOwogICAgfSwKICAgIC8vIHNlcnZlciBzaWRlIHBhZ2luYXRpb24KICAgIG9uUGFnZTogZnVuY3Rpb24gb25QYWdlKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlciA9IHRoaXMuZmlsdGVyc1snZ2xvYmFsJ10udmFsdWUgPyB0aGlzLmZpbHRlcnNbJ2dsb2JhbCddLnZhbHVlIDogIiI7CiAgICAgIHZhciBwYWdlID0gZXZlbnQgPT0gMCA/IDAgOiBldmVudC5wYWdlOwogICAgICB2YXIgcm93cyA9IGV2ZW50ID09IDAgPyAxMCA6IGV2ZW50LnJvd3M7CiAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0UGF0aWVudFdpdGhQYWdpbmF0aW9uKHBhZ2UsIHJvd3MsIGZpbHRlciwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczYucGF0aWVudEZvcm1hdHRlZChkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBvcGVuTmV3OiBmdW5jdGlvbiBvcGVuTmV3KCkgewogICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAgIHRoaXMuaXNWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRW1haWxWYWxpZCA9ICIiOwogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24gPSB7CiAgICAgICAgYWdlX3llYXI6ICIwIiwKICAgICAgICBhZ2VfbW9udGg6ICIwIiwKICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgfTsKICAgICAgdGhpcy5uZXdJbmZvID0gdHJ1ZTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IGZhbHNlOwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIGhpZGVOZXc6IGZ1bmN0aW9uIGhpZGVOZXcoKSB7CiAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc1ZhbGlkID0gIiI7CiAgICAgIHRoaXMuaXNFbWFpbFZhbGlkID0gIiI7CiAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvbiA9IHsKICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgIGFnZV9kYXk6ICIwIgogICAgICB9OwogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5pc0hpc3RvcnkgPSBmYWxzZTsKICAgICAgdGhpcy5uZXdJbmZvID0gZmFsc2U7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICB9LAogICAgaXNFeGlzdENvbnRhY3Q6IGZ1bmN0aW9uIGlzRXhpc3RDb250YWN0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24uY29udGFjdF9uby5tYXRjaCgvXigwMSkoWzAtOV17OX0pJC8pKSB7CiAgICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZS5nZXRCeUNvbnRhY3RPclJlZ05vKHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvbi5jb250YWN0X25vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM3LmdldENvbnRhY3QoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkNvbnRhY3QgbnVtYmVyIG11c3Qgc3RhcnQgd2l0aCAwMSBhbmQgdGhlIHJlcXVpcmVkIGxlbmd0aCBpcyAxMSI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDb250YWN0OiBmdW5jdGlvbiBnZXRDb250YWN0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEuY29udGFjdF9ubykgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiRHVwbGljYXRlIHBob25lIG51bWJlciEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGFkZDogZnVuY3Rpb24gYWRkKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGN1cnJlbnREYXRlLCBkb2IsIHJlc3VsdCwgX3Jlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM4LnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb24uZmlyc3RfbmFtZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmIChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5hZ2VfeWVhcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLmFnZV9tb250aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLmFnZV9kYXkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5jb250YWN0X25vKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzOC5pc0NvbnRhY3RFeGlzdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZG9iID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLmFnZV95ZWFyLCBjdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb24uYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5hZ2VfZGF5KTsKICAgICAgICAgICAgICAgIF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLmRvYiA9IG1vbWVudChTdHJpbmcoZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLnBhdGllbnRfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmFkZChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbiwgX3RoaXM4KTsKCiAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LmlzRG9jdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmdldFBhdGllbnRJZChyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTYXZlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM4LmhpZGVOZXcoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzOC5vblBhZ2UoMCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UucHV0KF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLCBfdGhpczgpOwoKICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgX3Jlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKF9yZXN1bHQuc3RhdHVzID09PSAyMDIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlVwZGF0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzOC5oaWRlTmV3KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczgub25QYWdlKDApOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfcmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogX3Jlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogX3Jlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0MjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogX2NvbnRleHQudDAsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgNDJdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFBhdGllbnRJZDogZnVuY3Rpb24gZ2V0UGF0aWVudElkKHBhdGllbnRfaWQpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5SWQocGF0aWVudF9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczkucHJlc2NyaXB0aW9uKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEFkZCBTZXJ2aWNlCiAgICB0YWtlU2VydmljZTogZnVuY3Rpb24gdGFrZVNlcnZpY2UoKSB7CiAgICAgIHRoaXMuc2VydmljZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuc2VydmljZVRha2VuTGlzdERpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIC8vIGxpbmUgZGlzY291bnQKICAgIGNhbGN1bGF0ZVBlclNlcnZpY2VEaXNjb3VudEFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlUGVyU2VydmljZURpc2NvdW50QW1vdW50KGRhdGEpIHsKICAgICAgdGhpcy5lbWVyZ2VuY3lTZXJ2aWNlT2JqLmxzdFNlcnZpY2UuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LnNlcnZpY2VfaWQgPT0gZGF0YS5zZXJ2aWNlX2lkKSB7CiAgICAgICAgICBlbGVtZW50LmRpc2NvdW50X2Ftb3VudCA9IGVsZW1lbnQuY2hhcmdlICogZWxlbWVudC5kaXNjb3VudF9wZXJjZW50IC8gMTAwOwogICAgICAgICAgZWxlbWVudC50b3RhbF9hbW91bnQgPSBlbGVtZW50LmNoYXJnZSAtIGVsZW1lbnQuZGlzY291bnRfYW1vdW50OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2FsY3VsYXRlUGVyU2VydmljZURpc2NvdW50UGVyY2VudDogZnVuY3Rpb24gY2FsY3VsYXRlUGVyU2VydmljZURpc2NvdW50UGVyY2VudChkYXRhKSB7CiAgICAgIHRoaXMuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5zZXJ2aWNlX2lkID09IGRhdGEuc2VydmljZV9pZCkgewogICAgICAgICAgZWxlbWVudC5kaXNjb3VudF9wZXJjZW50ID0gZWxlbWVudC5kaXNjb3VudF9hbW91bnQgLyBlbGVtZW50LmNoYXJnZSAqIDEwMDsKICAgICAgICAgIGVsZW1lbnQudG90YWxfYW1vdW50ID0gZWxlbWVudC5jaGFyZ2UgLSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIFRha2VuIFNlcnZpY2UKICAgIHRha2VuTGlzdDogZnVuY3Rpb24gdGFrZW5MaXN0KGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnRJbmZvLnBhdGllbnRfaWQgPSBkYXRhLnBhdGllbnRfaWQ7CiAgICAgIHRoaXMuZW1lcmdlbmN5U2VydmljZS5nZXRUYWtlblNlcnZpY2UoZGF0YS5wYXRpZW50X2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMTAuZm9ybWF0dGVkVGFrZW5MaXN0KGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZvcm1hdHRlZFRha2VuTGlzdDogZnVuY3Rpb24gZm9ybWF0dGVkVGFrZW5MaXN0KGRhdGEpIHsKICAgICAgdGhpcy5sc3RUYWtlblNlcnZpY2UgPSBkYXRhOwogICAgICB0aGlzLnNlcnZpY2VUYWtlbkxpc3REaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGFkZFNlcnZpY2U6IGZ1bmN0aW9uIGFkZFNlcnZpY2UoKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTEuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlID0gX3RoaXMxMS5lbWVyZ2VuY3lTZXJ2aWNlT2JqLmxzdFNlcnZpY2UuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWwuaXNDaGVjayA9PSB0cnVlOwogICAgICAgICAgICAgICAgfSwgX3RoaXMxMSk7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMxMS5lbWVyZ2VuY3lTZXJ2aWNlT2JqLmxzdFNlcnZpY2UubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczExLmVtZXJnZW5jeVNlcnZpY2VPYmoucGF0aWVudF9pZCA9IF90aGlzMTEuYWRtaXR0ZWRQYXRpZW50SW5mby5wYXRpZW50X2lkOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuZW1lcmdlbmN5U2VydmljZS5hZGQoX3RoaXMxMS5lbWVyZ2VuY3lTZXJ2aWNlT2JqLCBfdGhpczExKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczExLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczExLmhpZGVEaWFsb2coKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTEuZ2V0U2VydmljZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczExLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF90aGlzMTEuZ2V0U2VydmljZSgpOwoKICAgICAgICAgICAgICAgIF90aGlzMTEuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2VsZWN0IFNlcnZpY2UiLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB0cmFuc2ZlcklQRDogZnVuY3Rpb24gdHJhbnNmZXJJUEQoZGF0YSkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtLnJlcXVpcmUoewogICAgICAgIG1lc3NhZ2U6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gdHJhbnNmZXIgSVBEPycsCiAgICAgICAgaGVhZGVyOiAnQ29uZmlybWF0aW9uJywKICAgICAgICBpY29uOiAncGkgcGktZXhjbGFtYXRpb24tdHJpYW5nbGUnLAogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RyYW5zZmVyUGF0aWVudFJlZ05vJywgZGF0YS5yZWdpc3RyYXRpb25fbm8pOwoKICAgICAgICAgIF90aGlzMTIuJHJvdXRlci5wdXNoKCIvcGF0aWVudC1hZG1pc3Npb24tZm9ybSIpOwogICAgICAgIH0sCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QoKSB7CiAgICAgICAgICByZXR1cm47IC8vdGhpcy5vblBhZ2UoMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGl0OiBmdW5jdGlvbiBlZGl0KG9iaikgewogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBvYmopOyAvLyB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24uY2Rkb2IgPSBtb21lbnQoCiAgICAgIC8vICAgU3RyaW5nKHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvbi5kb2IpCiAgICAgIC8vICkuZm9ybWF0KCJZWVlZLU1NLUREIik7CgogICAgICB0aGlzLmRhdGFMaXN0ID0gZmFsc2U7CiAgICAgIHRoaXMubmV3SW5mbyA9IHRydWU7CiAgICB9LAogICAgaGlkZURpYWxvZzogZnVuY3Rpb24gaGlkZURpYWxvZygpIHsKICAgICAgdGhpcy5zZXJ2aWNlVGFrZW5MaXN0RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VydmljZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIC8vIHByZXNjcmlwdGlvbgogICAgcHJlc2NyaXB0aW9uOiBmdW5jdGlvbiBwcmVzY3JpcHRpb24oZGF0YSkgewogICAgICB0aGlzLmFkbWl0dGVkUGF0aWVudEluZm8ucGF0aWVudF9pZCA9IGRhdGEucGF0aWVudF9pZDsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhdGllbnRJZEZvclRyZWF0bWVudCcsIGRhdGEucGF0aWVudF9pZCk7CiAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50SW5mby5yZWdpc3RyYXRpb25fbm8gPSBkYXRhLnJlZ2lzdHJhdGlvbl9ubzsKICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnRJbmZvLnBhdGllbnRfbmFtZSA9IGRhdGEuZmlyc3RfbmFtZTsKICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnRJbmZvLmdlbmRlciA9IGRhdGEuZ2VuZGVyOwogICAgICB0aGlzLmFkbWl0dGVkUGF0aWVudEluZm8uYWdlX3llYXIgPSBkYXRhLmFnZV95ZWFyOwogICAgICB0aGlzLmFkbWl0dGVkUGF0aWVudEluZm8uYWdlX21vbnRoID0gZGF0YS5hZ2VfbW9udGg7CiAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50SW5mby5hZ2VfZGF5ID0gZGF0YS5hZ2VfZGF5OwogICAgICB0aGlzLmRhdGFMaXN0ID0gZmFsc2U7IC8vIHBhc3MgZGF0YSBpbnRvIGNvbXBvbmVudCAKCiAgICAgIHRoaXMuJHJlZnMucHJlc2NyaXB0aW9uQ29tcG9uZW50LnByZXNjcmlwdGlvbihkYXRhKTsKICAgIH0sCiAgICBhZGRSeDogZnVuY3Rpb24gYWRkUngoKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIGdldCBkYXRhIGZyb20gY29tcG9uZW50IAogICAgICAgICAgICAgICAgX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvID0gX3RoaXMxMy4kcmVmcy5wcmVzY3JpcHRpb25Db21wb25lbnQuJGRhdGEuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mbzsKICAgICAgICAgICAgICAgIF90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5jZGZvbG93dXBfZGF0ZSA9IF90aGlzMTMuYWRtaXR0ZWRQYXRpZW50SW5mby5jZGZvbG93dXBfZGF0ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMjsKCiAgICAgICAgICAgICAgICBpZiAoISghX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLmxzdEFkbWlzc2lvblByZXNjcmlwdGlvbkFkdmljZS5sZW5ndGggJiYgIV90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5sc3RBZG1pc3Npb25QcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uLmxlbmd0aCAmJiAhX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLmxzdEFkbWlzc2lvblByZXNjcmlwdGlvblRyZWF0bWVudC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMxMy5oaWRlTmV3KCk7IC8vIHRoaXMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAvLyAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgLy8gICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgLy8gICBkZXRhaWw6ICJQbGVhc2UgYWRkIFBhdGllbnQgQWR2aWNlIiwKICAgICAgICAgICAgICAgIC8vICAgbGlmZTogMTAwMDAsCiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICAgIC8vIHJldHVybjsKCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm8ucGF0aWVudF9pZCA9IF90aGlzMTMuYWRtaXR0ZWRQYXRpZW50SW5mby5wYXRpZW50X2lkOwogICAgICAgICAgICAgICAgX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLnByZXNjcmlwdGlvbl9kYXRlID0gbW9tZW50KFN0cmluZyhfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm8uY2RwcmVzY3JpcHRpb25fZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm8uY2Rmb2xvd3VwX2RhdGUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLmZvbG93dXBfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLmNkZm9sb3d1cF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UuYWRkKF90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mbyk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuZG93bmxvYWRQcmVzY3JpcHRpb24ocmVzdWx0LmRhdGEpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJQcmVzY3JpYmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEzLm5ld1ByZXNjcmlwdGlvbigpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMy5oaWRlTmV3KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTY7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMik7CgogICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0My50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzIsIDE2XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkb3dubG9hZFByZXNjcmlwdGlvbjogZnVuY3Rpb24gZG93bmxvYWRQcmVzY3JpcHRpb24oYWRtaXNzaW9uX3ByZXNjcmlwdGlvbl9pZCkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgICB0aGlzLnByZXNjcmlwdGlvblJlcG9ydFNlcnZpY2UuR2V0RW1lcmdlbmN5UGVzY3JpcHRpb24oYWRtaXNzaW9uX3ByZXNjcmlwdGlvbl9pZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczE0LmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIG5ld1ByZXNjcmlwdGlvbjogZnVuY3Rpb24gbmV3UHJlc2NyaXB0aW9uKCkgewogICAgICAvLyByZXNldCBjb21wb25lbnQgb2JqCiAgICAgIHRoaXMuJHJlZnMucHJlc2NyaXB0aW9uQ29tcG9uZW50Lm5ld1ByZXNjcmlwdGlvbigpOwogICAgfSwKICAgIGZvcm1hdERhdGU6IGZ1bmN0aW9uIGZvcm1hdERhdGUodmFsdWUpIHsKICAgICAgcmV0dXJuIG1vbWVudChTdHJpbmcodmFsdWUpKS5mb3JtYXQoIk1NL0REL1lZWVkiKTsKICAgIH0sCiAgICBmb3JtYXREYXRlVGltZTogZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUodmFsdWUpIHsKICAgICAgcmV0dXJuIG1vbWVudChTdHJpbmcodmFsdWUpKS5mb3JtYXQoIk1NL0REL1lZWVkgaDptbTpzcyBhIik7CiAgICB9LAogICAgLy8gaGlzdG9yeSBzdGFydAogICAgaGlzdG9yeUNvbGxlY3Rpb246IGZ1bmN0aW9uIGhpc3RvcnlDb2xsZWN0aW9uKCkgewogICAgICB2YXIgZGF0YSA9IHRoaXMuYWRtaXR0ZWRQYXRpZW50SW5mbzsgLy8gcGFzcyBkYXRhIGludG8gY29tcG9uZW50IAoKICAgICAgdGhpcy4kcmVmcy5wYXRpZW50SGlzdG9yeUNvbXBvbmVudC5oaXN0b3J5Q29sbGVjdGlvbihkYXRhKTsKICAgICAgdGhpcy5pc0hpc3RvcnkgPSB0cnVlOwogICAgICB0aGlzLmRhdGFMaXN0ID0gZmFsc2U7IC8vIGNvbGxlY3QgaGlzdG9yeSBwYXRpZW50IHdpc2UgLy8KICAgIH0sCiAgICBoaWRlSGlzdG9yeTogZnVuY3Rpb24gaGlkZUhpc3RvcnkoKSB7CiAgICAgIHRoaXMuaXNIaXN0b3J5ID0gZmFsc2U7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSB0cnVlOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGF0aWVudElkRm9yVHJlYXRtZW50Jyk7CiAgICB9IC8vIGhpc3RvcnkgZW5kCgogIH0KfTs="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/emergency/PatientRegTreatment.js"],"names":["PatientRegistrationService","PatientReportService","CommonService","Validation","moment","FilterMatchMode","FilterOperator","ServiceSetupService","EmergencyService","AppointmentPrescriptionService","AdmissionPrescriptionService","PrescriptionReportService","Prescription","PatientHistory","components","data","page","isContactExist","isValid","isEmailValid","newInfo","dataList","relationList","bloodGroupList","genderList","patientRegistrationList","patientRegistration","age_year","age_month","age_day","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","serviceTakenListDialog","lstTakenService","serviceDialog","emergencyServiceObj","lstService","isDoctor","admittedPatientInfo","admissionPrescriptionInfo","cdprescription_date","String","Date","format","cdfolowup_date","setDate","getDate","isHistory","created","today","month","getMonth","year","getFullYear","prevMonth","prevYear","minDate","setMonth","setFullYear","patientRegistrationService","patientReportService","commonService","validation","serviceSetupService","emergencyService","admissionPrescriptionService","appointmentPrescriptionService","prescriptionReportService","GetAllGender","then","GetAllBloodGroup","GetAllPatientsRelatives","filter","getPatientWithPagination","patientFormatted","userInfo","JSON","parse","localStorage","getItem","doctor_id","getService","methods","getAll","serviceFormatted","filterData","el","service_head_id","active","forEach","element","push","service_id","service_name","charge","service_charge","discount_amount","discount","discount_percent","total_amount","isCheck","printAllPatient","Downloadfile","printID","regNo","GetPatientIdCardByRegNo","length","_total_records","onPage","event","rows","openNew","hideNew","isExistContact","contact_no","match","getByContactOrRegNo","getContact","add","first_name","currentDate","dob","patient_id","result","status","getPatientId","$toast","severity","summary","detail","life","res","put","getById","prescription","takeService","calculatePerServiceDiscountAmount","calculatePerServiceDiscountPercent","takenList","getTakenService","formattedTakenList","addService","hideDialog","transferIPD","$confirm","require","message","header","icon","accept","setItem","registration_no","$router","reject","edit","obj","Object","assign","patient_name","gender","$refs","prescriptionComponent","addRx","$data","lstAdmissionPrescriptionAdvice","lstAdmissionPrescriptionInvestigation","lstAdmissionPrescriptionTreatment","prescription_date","folowup_date","downloadPrescription","newPrescription","admission_prescription_id","GetEmergencyPescription","formatDate","formatDateTime","historyCollection","patientHistoryComponent","hideHistory","removeItem"],"mappings":"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","sourcesContent":["import PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n// Service\r\nimport ServiceSetupService from \"../../service/setup/ServiceSetupService\";\r\nimport EmergencyService from \"../../service/emergency/EmergencyService\";\r\n// Prescription\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport AdmissionPrescriptionService from \"../../service/prescription/AdmissionPrescriptionService\";\r\nimport PrescriptionReportService from \"../../service/report/PrescriptionReportService\";\r\nimport Prescription from \"../../components/Prescription\";\r\n// History\r\nimport PatientHistory from \"../../components/PatientHistory\";\r\n\r\nexport default {\r\n  components: {\r\n    Prescription,\r\n    PatientHistory\r\n  },\r\n  data() {\r\n    return {\r\n      page: 100,\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      newInfo: false,\r\n      dataList: true,\r\n      relationList: [],\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      patientRegistrationList: [],\r\n      patientRegistration: {\r\n        age_year: \"0\",\r\n        age_month: \"0\",\r\n        age_day: \"0\",\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      // Service\r\n      serviceTakenListDialog: false,\r\n      lstTakenService: [],\r\n      serviceDialog: false,\r\n      emergencyServiceObj: {\r\n        lstService: [],\r\n      },\r\n      // Prescription\r\n      isDoctor: false,\r\n      admittedPatientInfo: {},\r\n      admissionPrescriptionInfo: {\r\n        cdprescription_date: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdfolowup_date: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n      },\r\n\r\n      // History\r\n      isHistory: false,\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    let today = new Date();\r\n    let month = today.getMonth();\r\n    let year = today.getFullYear();\r\n    let prevMonth = (month === 0) ? 11 : month - 0;\r\n    let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    this.minDate = new Date();\r\n    this.minDate.setMonth(prevMonth);\r\n    this.minDate.setFullYear(prevYear);\r\n\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.commonService = new CommonService();\r\n    this.validation = new Validation();\r\n    // Service\r\n    this.serviceSetupService = new ServiceSetupService();\r\n    this.emergencyService = new EmergencyService();\r\n    // Prescription\r\n    this.admissionPrescriptionService = new AdmissionPrescriptionService();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    this.prescriptionReportService = new PrescriptionReportService();\r\n\r\n    this.commonService.GetAllGender().then(\r\n      (data) =>\r\n        (this.genderList = data.data)\r\n    );\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllPatientsRelatives()\r\n      .then((data) => (this.relationList = data.data));\r\n\r\n    // server side pagination\r\n    var filter = this.filters['global'].value ? this.filters['global'].value : \"\";\r\n    this.patientRegistrationService\r\n      .getPatientWithPagination(\"0\", \"10\", filter, this)\r\n      .then((data) => this.patientFormatted(data.data));\r\n\r\n    this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n    if (this.userInfo.doctor_id) {\r\n      this.isDoctor = true;\r\n    } else if (!this.userInfo.doctor_id) {\r\n      this.isDoctor = false;\r\n    }\r\n\r\n    // Service\r\n    this.getService();\r\n  },\r\n  methods: {\r\n    getService() {\r\n      this.serviceSetupService\r\n        .getAll()\r\n        .then((data) => this.serviceFormatted(data.data));\r\n    },\r\n    serviceFormatted(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.service_head_id == '2' || el.service_head_id == '3' && el.active == true;\r\n      }, this);\r\n      this.emergencyServiceObj.lstService = [];\r\n      filterData.forEach((element) => {\r\n        this.emergencyServiceObj.lstService.push({\r\n          service_id: element.service_id,\r\n          service_name: element.service_name,\r\n          //service_head_id: element.service_head_id,\r\n          //_service_head_name: element._service_head_name,\r\n          //service_type_id: element.service_type_id,\r\n          //_service_type_name: element._service_type_name,\r\n          charge: element.service_charge,\r\n          discount_amount: element.discount,\r\n          discount_percent:  (element.discount / element.service_charge) * 100,\r\n          total_amount:  element.service_charge - element.discount,\r\n          isCheck: false\r\n        });\r\n      });\r\n    },\r\n    printAllPatient() {\r\n      this.patientReportService.getAll(this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    printID(regNo) {\r\n      this.patientReportService.GetPatientIdCardByRegNo(regNo, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    patientFormatted(data) {\r\n      this.patientRegistrationList = data;\r\n      this.page = data.length ? data[0]._total_records : 100;\r\n    },\r\n    // server side pagination\r\n    onPage(event) {\r\n      var filter = this.filters['global'].value ? this.filters['global'].value : \"\";\r\n      var page = event == 0 ? 0 : event.page;\r\n      var rows = event == 0 ? 10 : event.rows;\r\n\r\n      this.patientRegistrationService\r\n        .getPatientWithPagination(page, rows, filter, this)\r\n        .then((data) => this.patientFormatted(data.data));\r\n    },\r\n    openNew() {\r\n      this.isContactExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.patientRegistration = {\r\n        age_year: \"0\",\r\n        age_month: \"0\",\r\n        age_day: \"0\",\r\n      };\r\n      this.newInfo = true;\r\n      this.dataList = false;\r\n      this.submitted = false;\r\n    },\r\n    hideNew() {\r\n      this.isContactExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.patientRegistration = {\r\n        age_year: \"0\",\r\n        age_month: \"0\",\r\n        age_day: \"0\",\r\n      };\r\n      this.dataList = true;\r\n      this.isHistory = false;\r\n      this.newInfo = false;\r\n      this.submitted = false;\r\n    },\r\n    isExistContact() {\r\n      if (this.patientRegistration.contact_no.match(/^(01)([0-9]{9})$/)) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.patientRegistration.contact_no, this)\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    async add() {\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.patientRegistration.first_name) {\r\n          return;\r\n        } else if (!this.patientRegistration.age_year) {\r\n          return;\r\n        } else if (!this.patientRegistration.age_month) {\r\n          return;\r\n        } else if (!this.patientRegistration.age_day) {\r\n          return;\r\n        } else if (!this.patientRegistration.contact_no) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else {\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.patientRegistration.age_year, currentDate.getMonth() - this.patientRegistration.age_month, currentDate.getDate() - this.patientRegistration.age_day);\r\n          this.patientRegistration.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (!this.patientRegistration.patient_id) {\r\n            let result = await this.patientRegistrationService.add(\r\n              this.patientRegistration, this\r\n            );\r\n            if (result.status === 200) {\r\n              if (this.isDoctor) {\r\n                this.getPatientId(result.data);\r\n              }\r\n\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Saved Successfully\",\r\n                life: 10000,\r\n              });\r\n              this.hideNew();\r\n              this.onPage(0);\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          } else {\r\n            let result = await this.patientRegistrationService.put(\r\n              this.patientRegistration,\r\n              this\r\n            );\r\n            if (result.status === 202) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Updated Successfully\",\r\n                life: 10000,\r\n              });\r\n              this.hideNew();\r\n              this.onPage(0);\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    getPatientId(patient_id) {\r\n      this.patientRegistrationService\r\n        .getById(patient_id)\r\n        .then((data) => this.prescription(data.data));\r\n    },\r\n    // Add Service\r\n    takeService() {\r\n      this.serviceDialog = true;\r\n      this.serviceTakenListDialog = false;\r\n    },\r\n    // line discount\r\n    calculatePerServiceDiscountAmount(data) {\r\n      this.emergencyServiceObj.lstService.forEach(\r\n        (element) => {\r\n          if (element.service_id == data.service_id) {\r\n            element.discount_amount = (element.charge * element.discount_percent) / 100;\r\n            element.total_amount = element.charge - element.discount_amount;\r\n          }\r\n        }\r\n      );\r\n    },\r\n    calculatePerServiceDiscountPercent(data) {\r\n      this.emergencyServiceObj.lstService.forEach(\r\n        (element) => {\r\n          if (element.service_id == data.service_id) {\r\n            element.discount_percent = (element.discount_amount / element.charge) * 100;\r\n            element.total_amount = element.charge - element.discount_amount;\r\n          }\r\n        }\r\n      );\r\n    },\r\n    // Taken Service\r\n    takenList(data) {\r\n      this.admittedPatientInfo.patient_id = data.patient_id;\r\n      this.emergencyService\r\n        .getTakenService(data.patient_id)\r\n        .then((data) => this.formattedTakenList(data.data));\r\n    },\r\n    formattedTakenList(data) {\r\n      this.lstTakenService = data;\r\n      this.serviceTakenListDialog = true;\r\n    },\r\n\r\n    async addService() {\r\n      this.emergencyServiceObj.lstService = this.emergencyServiceObj.lstService.filter(function (el) {\r\n        return el.isCheck == true;\r\n      }, this);\r\n\r\n      if (this.emergencyServiceObj.lstService.length > 0) {\r\n        this.emergencyServiceObj.patient_id = this.admittedPatientInfo.patient_id;\r\n        let result = await this.emergencyService.add(this.emergencyServiceObj, this);\r\n        if (result.status === 200) {\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Success\",\r\n            detail: \"Saved Successfully\",\r\n            life: 10000,\r\n          });\r\n          this.hideDialog();\r\n          this.getService();\r\n        } else if (result.status === 401) {\r\n          this.$toast.add({\r\n            severity: \"error\",\r\n            summary: \"Error\",\r\n            detail: result.data,\r\n            life: 10000,\r\n          });\r\n        } else {\r\n          this.$toast.add({\r\n            severity: \"error\",\r\n            summary: \"Failed\",\r\n            detail: result.res,\r\n            life: 10000,\r\n          });\r\n        }\r\n      } else{\r\n        this.getService();\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: \"Select Service\",\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    transferIPD(data) {\r\n      this.$confirm.require({\r\n        message: 'Are you sure you want to transfer IPD?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n          localStorage.setItem('transferPatientRegNo', data.registration_no);\r\n          this.$router.push(\"/patient-admission-form\");\r\n        },\r\n        reject: () => {\r\n          return;\r\n          //this.onPage(0);\r\n        },\r\n\r\n      });\r\n    },\r\n    edit(obj) {\r\n      this.patientRegistration = Object.assign({}, obj);\r\n      // this.patientRegistration.cddob = moment(\r\n      //   String(this.patientRegistration.dob)\r\n      // ).format(\"YYYY-MM-DD\");\r\n      this.dataList = false;\r\n      this.newInfo = true;\r\n    },\r\n    hideDialog() {\r\n      this.serviceTakenListDialog = false;\r\n      this.serviceDialog = false;\r\n      this.submitted = false;\r\n    },\r\n    // prescription\r\n    prescription(data) {\r\n      this.admittedPatientInfo.patient_id = data.patient_id;\r\n      localStorage.setItem('patientIdForTreatment', data.patient_id);\r\n      this.admittedPatientInfo.registration_no = data.registration_no;\r\n      this.admittedPatientInfo.patient_name = data.first_name;\r\n      this.admittedPatientInfo.gender = data.gender;\r\n      this.admittedPatientInfo.age_year = data.age_year;\r\n      this.admittedPatientInfo.age_month = data.age_month;\r\n      this.admittedPatientInfo.age_day = data.age_day;\r\n\r\n      this.dataList = false;\r\n      // pass data into component \r\n      this.$refs.prescriptionComponent.prescription(data);\r\n    },\r\n    async addRx() {\r\n      // get data from component \r\n      this.admissionPrescriptionInfo = this.$refs.prescriptionComponent.$data.admissionPrescriptionInfo;\r\n      this.admissionPrescriptionInfo.cdfolowup_date = this.admittedPatientInfo.cdfolowup_date;\r\n      try {\r\n        if (!this.admissionPrescriptionInfo.lstAdmissionPrescriptionAdvice.length && !this.admissionPrescriptionInfo.lstAdmissionPrescriptionInvestigation.length && !this.admissionPrescriptionInfo.lstAdmissionPrescriptionTreatment.length) {\r\n          this.hideNew();\r\n          // this.$toast.add({\r\n          //   severity: \"error\",\r\n          //   summary: \"Error\",\r\n          //   detail: \"Please add Patient Advice\",\r\n          //   life: 10000,\r\n          // });\r\n          // return;\r\n        } else {\r\n          this.admissionPrescriptionInfo.patient_id =\r\n            this.admittedPatientInfo.patient_id;\r\n\r\n          this.admissionPrescriptionInfo.prescription_date = moment(\r\n            String(this.admissionPrescriptionInfo.cdprescription_date)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (this.admissionPrescriptionInfo.cdfolowup_date) {\r\n            this.admissionPrescriptionInfo.folowup_date = moment(\r\n              String(this.admissionPrescriptionInfo.cdfolowup_date)\r\n            ).format(\"YYYY-MM-DD\");\r\n          }\r\n\r\n          let result = await this.admissionPrescriptionService.add(\r\n            this.admissionPrescriptionInfo\r\n          );\r\n          if (result.status === 200) {\r\n            this.downloadPrescription(result.data);\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Prescribed Successfully\",\r\n              life: 10000,\r\n            });\r\n            this.newPrescription();\r\n            this.hideNew();\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    downloadPrescription(admission_prescription_id) {\r\n      this.prescriptionReportService.GetEmergencyPescription(admission_prescription_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    newPrescription() {\r\n      // reset component obj\r\n      this.$refs.prescriptionComponent.newPrescription();\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n    formatDateTime(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY h:mm:ss a\");\r\n    },\r\n    // history start\r\n    historyCollection() {\r\n      var data = this.admittedPatientInfo;\r\n      // pass data into component \r\n      this.$refs.patientHistoryComponent.historyCollection(data);\r\n\r\n      this.isHistory = true;\r\n      this.dataList = false;\r\n      // collect history patient wise //\r\n    },\r\n    hideHistory() {\r\n      this.isHistory = false;\r\n      this.dataList = true;\r\n      localStorage.removeItem('patientIdForTreatment');\r\n    },\r\n    // history end\r\n  },\r\n};"]}]}