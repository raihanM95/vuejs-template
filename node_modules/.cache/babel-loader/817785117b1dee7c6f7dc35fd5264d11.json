{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\reports\\MarketingReferralReport.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\reports\\MarketingReferralReport.js","mtime":1667295927690},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBNSVNSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L01JU1JlcG9ydFNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBSZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUmVmZXJyZWRCeVNldHVwU2VydmljZSI7IC8vYWRkZWQgCgppbXBvcnQgRW1wbG95ZWVTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9FbXBsb3llZVNldHVwU2VydmljZSI7CmltcG9ydCBVc2VyU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2VjdXJpdHkvVXNlclNldHVwU2VydmljZSI7IC8vL2FkZCBuZXcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcnNMaXN0OiBbXSwKICAgICAgZW1wbG95ZWVMaXN0OiBbXSwKICAgICAgcmVmZXJyZWRCeUxpc3Q6IFtdLAogICAgICBhbGxDb2xsZWN0aW9uOiB7CiAgICAgICAgY2Rmcm9tZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgLSA3KSkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZHRvZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgY29sbGVjdGlvblR5cGU6ICJJbnZlc3RpZ2F0aW9uIiwKICAgICAgICB1c2VyX25vOiAiQWxsIiwKICAgICAgICBlbXBfbm86ICJBbGwiLAogICAgICAgIHJlZl9ubzogIkFsbCIsCiAgICAgICAgcmVwb3J0Rm9ybWF0OiAic3VtbWFyeSIKICAgICAgfSwKICAgICAgc3VibWl0dGVkOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMubUlTUmVwb3J0U2VydmljZSA9IG5ldyBNSVNSZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy51c2VyU2V0dXBTZXJ2aWNlID0gbmV3IFVzZXJTZXR1cFNlcnZpY2UoKTsgLy9hZGQgbmV3CgogICAgdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlID0gbmV3IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UoKTsgLy9hZGQgbmV3CgogICAgdGhpcy5lbXBsb3llZVNldHVwU2VydmljZSA9IG5ldyBFbXBsb3llZVNldHVwU2VydmljZSgpOyAvL2FkZCBuZXcKCiAgICB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLnVzZXJTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMudXNlcnNMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7IC8vYWRkIG5ldwoKICAgIHRoaXMuZW1wbG95ZWVTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VFbXBsb3llZUluZm8oZGF0YS5kYXRhKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMuYWxsQ29sbGVjdGlvbi5jZGZyb21kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLmFsbENvbGxlY3Rpb24uY2R0b2RhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hbGxDb2xsZWN0aW9uLmZyb21kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmFsbENvbGxlY3Rpb24uY2Rmcm9tZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMuYWxsQ29sbGVjdGlvbi50b2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuYWxsQ29sbGVjdGlvbi5jZHRvZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOyAvLyBpZih0aGlzLnVzZXJfbm89PT0ibnVsbCIpCiAgICAgICAgLy8gewogICAgICAgIC8vICAgdGhpcy51c2VyX25vPSJBbGwiCiAgICAgICAgLy8gfQoKICAgICAgICBpZiAodGhpcy5hbGxDb2xsZWN0aW9uLmNvbGxlY3Rpb25UeXBlID09PSAnSW52ZXN0aWdhdGlvbicgJiYgdGhpcy5hbGxDb2xsZWN0aW9uLnJlcG9ydEZvcm1hdCA9PT0gJ3N1bW1hcnknKSB7CiAgICAgICAgICB0aGlzLm1JU1JlcG9ydFNlcnZpY2UuR2V0TWFya2V0aW5nUmVmZXJyYWxIaXN0b3J5KHRoaXMuYWxsQ29sbGVjdGlvbi5mcm9tZGF0ZSwgdGhpcy5hbGxDb2xsZWN0aW9uLnRvZGF0ZSwgdGhpcy5hbGxDb2xsZWN0aW9uLnJlZl9ubywgdGhpcy5hbGxDb2xsZWN0aW9uLmVtcF9ubywgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmFsbENvbGxlY3Rpb24uY29sbGVjdGlvblR5cGUgPT09ICdJbnZlc3RpZ2F0aW9uJyAmJiB0aGlzLmFsbENvbGxlY3Rpb24ucmVwb3J0Rm9ybWF0ID09PSAnZGV0YWlscycpIHsKICAgICAgICAgIHRoaXMubUlTUmVwb3J0U2VydmljZS5HZXRNYXJrZXRpbmdSZWZlcnJhbEhpc3RvcnlEZXRhaWxzUmVwb3J0KHRoaXMuYWxsQ29sbGVjdGlvbi5mcm9tZGF0ZSwgdGhpcy5hbGxDb2xsZWN0aW9uLnRvZGF0ZSwgdGhpcy5hbGxDb2xsZWN0aW9uLnJlZl9ubywgdGhpcy5hbGxDb2xsZWN0aW9uLmVtcF9ubywgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBtZXJnZVJlZmVycmVkQnlJbmZvOiBmdW5jdGlvbiBtZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzMy5yZWZlcnJlZEJ5TGlzdC5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubywKICAgICAgICAgIHRleHQ6IGVsZW1lbnQubWFudWFsX2NvZGUgKyAiLSIgKyBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubyArICItIiArIGVsZW1lbnQucmVmZmVyZWRfYnlfbmFtZSArICIoUmVmZXJyZWQgQnkpIiwKICAgICAgICAgIGVtcGxveWVlX2lkOiBlbGVtZW50LmVtcGxveWVlX2lkCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG1lcmdlRW1wbG95ZWVJbmZvOiBmdW5jdGlvbiBtZXJnZUVtcGxveWVlSW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWUgJiYgZWwuZGVzaWduYXRpb25faWQgPT0gJzInOwogICAgICB9LCB0aGlzKTsKICAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM0LmVtcGxveWVlTGlzdC5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmVtcF9ubywKICAgICAgICAgIHRleHQ6IGVsZW1lbnQuZW1wX25vICsgIi0iICsgZWxlbWVudC5maXJzdF9uYW1lICsgIihFbXBsb3llZSkiLAogICAgICAgICAgZW1wbG95ZWVfaWQ6IGVsZW1lbnQuZW1wbG95ZWVfaWQKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsdGVyUmVmZmVyZWRCeTogZnVuY3Rpb24gZmlsdGVyUmVmZmVyZWRCeSgpIHsKICAgICAgdmFyIGZpbHRlckVtcGxveWVlID0gdGhpcy5lbXBsb3llZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC52YWx1ZSA9PSB0aGlzLmFsbENvbGxlY3Rpb24uZW1wX25vOwogICAgICB9LCB0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVmZXJyZWRCeUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5lbXBsb3llZV9pZCA9PSAoZmlsdGVyRW1wbG95ZWUubGVuZ3RoID09PSAwID8gJycgOiBmaWx0ZXJFbXBsb3llZVswXS5lbXBsb3llZV9pZCk7CiAgICAgIH0sIHRoaXMpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/reports/MarketingReferralReport.js"],"names":["MISReportService","CommonService","moment","ReferredBySetupService","EmployeeSetupService","UserSetupService","data","usersList","employeeList","referredByList","allCollection","cdfromdate","String","Date","setDate","getDate","format","cdtodate","collectionType","user_no","emp_no","ref_no","reportFormat","submitted","created","mISReportService","commonService","userSetupService","referredBySetupService","employeeSetupService","getAll","then","mergeReferredByInfo","mergeEmployeeInfo","methods","show","fromdate","todate","GetMarketingReferralHistory","Downloadfile","GetMarketingReferralHistoryDetailsReport","filterData","filter","el","active","forEach","element","push","value","registration_no","text","manual_code","reffered_by_name","employee_id","designation_id","first_name","filterRefferedBy","filterEmployee","length"],"mappings":"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","sourcesContent":["import MISReportService from \"../../service/report/MISReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport moment from \"moment\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";//added \r\nimport EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport UserSetupService from \"../../service/security/UserSetupService\";///add new\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      usersList: [],\r\n      employeeList: [],\r\n      referredByList: [],\r\n        allCollection: {\r\n        cdfromdate: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() - 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        collectionType: \"Investigation\",\r\n        user_no:\"All\",\r\n        emp_no:\"All\", \r\n        ref_no:\"All\",\r\n        reportFormat:\"summary\",\r\n      },\r\n      submitted: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.mISReportService = new MISReportService();\r\n    this.commonService = new CommonService();\r\n    this.userSetupService = new UserSetupService(); //add new\r\n    this.referredBySetupService = new ReferredBySetupService();//add new\r\n    this.employeeSetupService = new EmployeeSetupService();//add new\r\n    this.referredBySetupService\r\n      .getAll()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n    this.userSetupService.getAll().then((data) => (this.usersList = data.data)); //add new\r\n    \r\n      this.employeeSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeEmployeeInfo(data.data));\r\n  },\r\n  methods: {\r\n    show() {\r\n      this.submitted = true;\r\n      if (!this.allCollection.cdfromdate) {\r\n        return;\r\n      } else if (!this.allCollection.cdtodate) {\r\n        return;\r\n      } else {\r\n        this.allCollection.fromdate = moment(\r\n          String(this.allCollection.cdfromdate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.allCollection.todate = moment(\r\n          String(this.allCollection.cdtodate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        // if(this.user_no===\"null\")\r\n        // {\r\n        //   this.user_no=\"All\"\r\n        // }\r\n            if(this.allCollection.collectionType==='Investigation'&& this.allCollection.reportFormat==='summary')\r\n            {\r\n              this.mISReportService.GetMarketingReferralHistory(this.allCollection.fromdate, this.allCollection.todate, this.allCollection.ref_no, this.allCollection.emp_no , this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n            }\r\n\r\n            if(this.allCollection.collectionType==='Investigation'&& this.allCollection.reportFormat==='details')\r\n            {\r\n              this.mISReportService.GetMarketingReferralHistoryDetailsReport(this.allCollection.fromdate, this.allCollection.todate, this.allCollection.ref_no, this.allCollection.emp_no , this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n            }\r\n           \r\n        this.submitted = false;\r\n      }\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.registration_no,\r\n          text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n          employee_id: element.employee_id,\r\n        });\r\n      });\r\n    },\r\n    mergeEmployeeInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true && el.designation_id == '2';\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n          this.employeeList.push({\r\n            value: element.emp_no,\r\n            text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n            employee_id: element.employee_id,\r\n          });\r\n      });\r\n    },\r\n    filterRefferedBy(){\r\n      var filterEmployee = this.employeeList.filter(function (el) {\r\n        return el.value == this.allCollection.emp_no;\r\n      }, this);\r\n      return this.referredByList.filter(function (el) {\r\n        return el.employee_id == ((filterEmployee.length===0)?'':filterEmployee[0].employee_id);\r\n      }, this);\r\n    },\r\n    \r\n  },\r\n};"]}]}