{"remainingRequest":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\cash-counter\\InvestigationPayment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\cash-counter\\InvestigationPayment.js","mtime":1638685602689},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9EaWFnbm9zdGljQ2VudGVyTWFuYWdlbWVudF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgUGF0aWVudFBheW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvY2FzaC1jb3VudGVyL1BhdGllbnRQYXltZW50U2VydmljZSI7CmltcG9ydCBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9QYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlIjsKaW1wb3J0IFBheW1lbnRUeXBlU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUGF5bWVudFR5cGVTZXR1cFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUGF0aWVudFJlcG9ydFNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzUGF5bWVudDogdHJ1ZSwKICAgICAgYWRkTGlzdDogZmFsc2UsCiAgICAgIGJ1dHRvbjogZmFsc2UsCiAgICAgIGlzQ2FzaDogZmFsc2UsCiAgICAgIGlzUGFpZDogIiIsCiAgICAgIGlzQ2FzaFBhaWQ6ICIiLAogICAgICBpc0R1ZUV4aXN0OiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIHBheW1lbnRUeXBlTGlzdDogW10sCiAgICAgIHRvdGFsUHR5QW1vdW50OiAwLAogICAgICBwYXRpZW50UGF5bWVudDogewogICAgICAgIGNkcGF5bWVudF9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBwdHlwYWlkX2Ftb3VudDogMCwKICAgICAgICB0b3RhbF9hbW91bnRfaW5mOiAwLAogICAgICAgIHBheW1lbnRUeXBlQ2FzaDogIjEiLAogICAgICAgIGludm9pY2VfaWQ6ICIiLAogICAgICAgIGFQYXRpZW50OiB7fSwKICAgICAgICBsc3RQYXRpZW50UGF5bWVudERldGFpbHM6IFtdCiAgICAgIH0sCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICB9LAogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluaXRGaWx0ZXJzOiBmdW5jdGlvbiBpbml0RmlsdGVycygpIHsKICAgICAgICB0aGlzLmZpbHRlcnMgPSB7CiAgICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogewogICAgICAgICAgICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELAogICAgICAgICAgICBjb25zdHJhaW50czogW3sKICAgICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHN1Ym1pdHRlZDogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnBhdGllbnRQYXltZW50U2VydmljZSA9IG5ldyBQYXRpZW50UGF5bWVudFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSA9IG5ldyBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlKCk7CiAgICB0aGlzLnBheW1lbnRUeXBlU2V0dXBTZXJ2aWNlID0gbmV3IFBheW1lbnRUeXBlU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlID0gbmV3IFBhdGllbnRSZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy5wYXltZW50VHlwZVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYXltZW50VHlwZUxpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHZhciBpbnZfcmVxdWVzdF9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpbnZfcmVxdWVzdF9pZCcpOwoKICAgIGlmIChpbnZfcmVxdWVzdF9pZCkgewogICAgICB0aGlzLnBhdGllbnRQYXltZW50LmludmVzdGlnYXRpb25fbm8gPSBpbnZfcmVxdWVzdF9pZDsgLy9sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaW52ZXN0aWdhdGlvbl9pZCcpOwoKICAgICAgdGhpcy5maW5kSW52ZXN0aWdhdGlvbigpOwogICAgfQoKICAgIHZhciBpbnZfcmVxdWVzdF9ubyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpbnZfcmVxdWVzdF9ubycpOwoKICAgIGlmIChpbnZfcmVxdWVzdF9ubykgewogICAgICB0aGlzLnBhdGllbnRQYXltZW50LmludmVzdGlnYXRpb25fbm8gPSBpbnZfcmVxdWVzdF9ubzsgLy9sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaW52ZXN0aWdhdGlvbl9pZCcpOwoKICAgICAgdGhpcy5maW5kSW52ZXN0aWdhdGlvbigpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcHJpbnRBcHBvaW50bWVudFBheW1lbnQ6IGZ1bmN0aW9uIHByaW50QXBwb2ludG1lbnRQYXltZW50KElkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRJbnZlc3RpZ2F0aW9uUGF5bWVudChJZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcGF5bWVudFJlc2V0OiBmdW5jdGlvbiBwYXltZW50UmVzZXQoKSB7CiAgICAgIHRoaXMuaXNQYXltZW50ID0gdHJ1ZTsKICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5kZGxQYXltZW50VHlwZSA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuaXNQYXltZW50ID0gdHJ1ZTsKICAgICAgdGhpcy5hZGRMaXN0ID0gZmFsc2U7CiAgICAgIHRoaXMuYnV0dG9uID0gZmFsc2U7CiAgICAgIHRoaXMuaXNDYXNoID0gZmFsc2U7CiAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICB0aGlzLmlzUGFpZCA9ICIiOwogICAgICB0aGlzLmlzQ2FzaFBhaWQgPSAiIjsKICAgICAgdGhpcy50b3RhbFB0eUFtb3VudCA9IDA7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQgPSB7CiAgICAgICAgY2RwYXltZW50X2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHB0eXBhaWRfYW1vdW50OiAwLAogICAgICAgIHRvdGFsX2Ftb3VudF9pbmY6IDAsCiAgICAgICAgcGF5bWVudFR5cGVDYXNoOiAiMSIsCiAgICAgICAgY2FzaF9wYWlkX2Ftb3VudDogMCwKICAgICAgICBpbnZvaWNlX2lkOiAiIiwKICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgbHN0UGF0aWVudFBheW1lbnREZXRhaWxzOiBbXQogICAgICB9OwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIGZpbHRlclBheW1lbnRUeXBlOiBmdW5jdGlvbiBmaWx0ZXJQYXltZW50VHlwZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGF5bWVudFR5cGVMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucGF5bWVudF90eXBlX2lkICE9IDEgJiYgZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGdldEZvcm1hdHRlZDogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkKGRhdGEpIHsKICAgICAgaWYgKGRhdGEuaW52X2R1ZV9hbW91bnQgPT0gMCkgewogICAgICAgIHRoaXMuaXNEdWVFeGlzdCA9ICJOb3QgZHVlISI7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudCA9IHsKICAgICAgICAgIHBheW1lbnRUeXBlQ2FzaDogIjEiLAogICAgICAgICAgaW52b2ljZV9pZDogIiIsCiAgICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgICBsc3RQYXRpZW50UGF5bWVudERldGFpbHM6IFtdCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRHVlRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50Lmludm9pY2VfaWQgPSBkYXRhLmludm9pY2VfaWQ7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5hUGF0aWVudC5wYXRpZW50X2lkID0gZGF0YS5hUGF0aWVudC5wYXRpZW50X2lkOwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuYVBhdGllbnQuZmlyc3RfbmFtZSA9IGRhdGEuYVBhdGllbnQuZmlyc3RfbmFtZTsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LmFQYXRpZW50LmNvbnRhY3Rfbm8gPSBkYXRhLmFQYXRpZW50LmNvbnRhY3Rfbm87CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC50b3RhbF9hbW91bnQgPSBkYXRhLmludl9kdWVfYW1vdW50OwogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCA9IGRhdGEuaW52X2R1ZV9hbW91bnQ7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5wdHlwYWlkX2Ftb3VudCA9IGRhdGEuaW52X2R1ZV9hbW91bnQ7CiAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlID0gbW9tZW50KFN0cmluZyhkYXRhLmludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kSW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gZmluZEludmVzdGlnYXRpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlLmdldEJ5SWQodGhpcy5wYXRpZW50UGF5bWVudC5pbnZlc3RpZ2F0aW9uX25vKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcGF5bWVudFR5cGVJc0V4aXN0OiBmdW5jdGlvbiBwYXltZW50VHlwZUlzRXhpc3QoKSB7CiAgICAgIHZhciBhUGF5bWVudFR5cGUgPSB0aGlzLnBhdGllbnRQYXltZW50LmxzdFBhdGllbnRQYXltZW50RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnBheW1lbnRfdHlwZV9pZCA9PT0gdGhpcy5wYXRpZW50UGF5bWVudC5kZGxQYXltZW50VHlwZS5wYXltZW50X3R5cGVfaWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFQYXltZW50VHlwZS5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBQYXltZW50IFR5cGUgYWxyZWFkeSBhZGRlZCI7CiAgICAgICAgdGhpcy5pc1BheW1lbnQgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmlzUGF5bWVudCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYWRkUGF5bWVudFR5cGU6IGZ1bmN0aW9uIGFkZFBheW1lbnRUeXBlKCkgewogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgIHZhciBhUGF5bWVudFR5cGUgPSB0aGlzLnBhdGllbnRQYXltZW50LmxzdFBhdGllbnRQYXltZW50RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnBheW1lbnRfdHlwZV9pZCA9PT0gdGhpcy5wYXRpZW50UGF5bWVudC5kZGxQYXltZW50VHlwZS5wYXltZW50X3R5cGVfaWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFQYXltZW50VHlwZS5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBQYXltZW50IFR5cGUgYWxyZWFkeSBhZGRlZCI7IC8vdGhpcy5pc1BheW1lbnQgPSB0cnVlOwoKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLnBhdGllbnRQYXltZW50LmFQYXRpZW50LmZpcnN0X25hbWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRQYXltZW50LmNkcGF5bWVudF9kYXRlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50UGF5bWVudC5kZGxQYXltZW50VHlwZSkgewogICAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlBheW1lbnQgVHlwZSBpcyByZXF1aXJlZC4iOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXRpZW50UGF5bWVudC5wdHlwYWlkX2Ftb3VudCA8PSAwICYmICF0aGlzLnBhdGllbnRQYXltZW50LnB0eXBhaWRfYW1vdW50KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhdGllbnRQYXltZW50LmNhc2hfcGFpZF9hbW91bnQgPD0gMCB8fCB0aGlzLnBhdGllbnRQYXltZW50LmNhc2hfcGFpZF9hbW91bnQgPCB0aGlzLnBhdGllbnRQYXltZW50LnB0eXBhaWRfYW1vdW50KSB7CiAgICAgICAgICB0aGlzLmlzUGFpZCA9ICJFeGNlZWQgYW1vdW50ISI7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgICAgdGhpcy5pc1BhaWQgPSAiIjsKICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIHBheW1lbnRfdHlwZV9pZDogdGhpcy5wYXRpZW50UGF5bWVudC5kZGxQYXltZW50VHlwZS5wYXltZW50X3R5cGVfaWQsCiAgICAgICAgICAgIF9wYXltZW50X3R5cGVfbmFtZTogdGhpcy5wYXRpZW50UGF5bWVudC5kZGxQYXltZW50VHlwZS5wYXltZW50X3R5cGVfbmFtZSwKICAgICAgICAgICAgcGFpZF9hbW91bnQ6IHBhcnNlSW50KHRoaXMucGF0aWVudFBheW1lbnQucHR5cGFpZF9hbW91bnQpCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5sc3RQYXRpZW50UGF5bWVudERldGFpbHMucHVzaChvYmopOyAvLyB0aGlzLnRvdGFsUHR5QW1vdW50ID0KICAgICAgICAgIC8vICAgdGhpcy50b3RhbFB0eUFtb3VudCArIHBhcnNlSW50KHRoaXMucGF0aWVudFBheW1lbnQucHR5cGFpZF9hbW91bnQpOwogICAgICAgICAgLy8gdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50ID0KICAgICAgICAgIC8vICAgdGhpcy5wYXRpZW50UGF5bWVudC50b3RhbF9hbW91bnQgLSB0aGlzLnRvdGFsUHR5QW1vdW50OwoKICAgICAgICAgIHRoaXMuZ3JpZFN1bSgpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hZGRMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5idXR0b24gPSB0cnVlOwogICAgfSwKICAgIGRlbGV0ZUZyb21MaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQubHN0UGF0aWVudFBheW1lbnREZXRhaWxzID0gdGhpcy5wYXRpZW50UGF5bWVudC5sc3RQYXRpZW50UGF5bWVudERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5wYXltZW50X3R5cGVfaWQgIT0gZGF0YS5wYXltZW50X3R5cGVfaWQ7CiAgICAgIH0sIHRoaXMpOyAvLyB0aGlzLnBhdGllbnRQYXltZW50LmNhc2hfcGFpZF9hbW91bnQgPQogICAgICAvLyAgIHRoaXMucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCArIHBhcnNlSW50KGRhdGEucGFpZF9hbW91bnQpOwoKICAgICAgaWYgKCF0aGlzLnBhdGllbnRQYXltZW50LmxzdFBhdGllbnRQYXltZW50RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICB0aGlzLmFkZExpc3QgPSBmYWxzZTsKICAgICAgICB0aGlzLmJ1dHRvbiA9IGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLmdyaWRTdW0oKTsKICAgIH0sCiAgICBncmlkU3VtOiBmdW5jdGlvbiBncmlkU3VtKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50X2luZiA9IDA7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQubHN0UGF0aWVudFBheW1lbnREZXRhaWxzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczQucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50X2luZiArPSBlbGVtZW50LnBhaWRfYW1vdW50OwogICAgICB9KTsKICAgICAgdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50ID0gdGhpcy5wYXRpZW50UGF5bWVudC50b3RhbF9hbW91bnQgLSB0aGlzLnBhdGllbnRQYXltZW50LnRvdGFsX2Ftb3VudF9pbmY7CiAgICAgIHRoaXMuZHVlQ2FsY3VsYXRlKCk7CiAgICB9LAogICAgZHVlQ2FsY3VsYXRlOiBmdW5jdGlvbiBkdWVDYWxjdWxhdGUoKSB7CiAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuZHVlX2Ftb3VudCA9IHRoaXMucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50IC0gdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50IC0gdGhpcy5wYXRpZW50UGF5bWVudC50b3RhbF9hbW91bnRfaW5mOwoKICAgICAgaWYgKHRoaXMucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50IDwgdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50KSB7CiAgICAgICAgdGhpcy5pc0Nhc2hQYWlkID0gIkV4Y2VlZCBhbW91bnQhIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ2FzaFBhaWQgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGNhbGN1bGF0ZUNoYW5nZUFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlQ2hhbmdlQW1vdW50KCkgewogICAgICBpZiAodGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX2Ftb3VudC5sZW5ndGgpIHsKICAgICAgICB0aGlzLnBhdGllbnRQYXltZW50LmNoYW5nZV9hbW91bnQgPSB0aGlzLnBhdGllbnRQYXltZW50LmNhc2hfYW1vdW50IC0gdGhpcy5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGF0aWVudFBheW1lbnQuY2hhbmdlX2Ftb3VudCA9IDA7CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQsIGludl9yZXF1ZXN0X2lkLCBpbnZfcmVxdWVzdF9ubzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczUuc3VibWl0dGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUucGF0aWVudFBheW1lbnQuYVBhdGllbnQuZmlyc3RfbmFtZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUucGF0aWVudFBheW1lbnQuY2RwYXltZW50X2RhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczUucGF0aWVudFBheW1lbnQuaW52b2ljZV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczUuaXNDYXNoUGFpZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX3RoaXM1LnBhdGllbnRQYXltZW50LnBheW1lbnRfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXM1LnBhdGllbnRQYXltZW50LmNkcGF5bWVudF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNS5wYXRpZW50UGF5bWVudC5jYXNoX3BhaWRfYW1vdW50ID4gMCAmJiAhX3RoaXM1LmlzQ2FzaCkgewogICAgICAgICAgICAgICAgICBfdGhpczUucGF0aWVudFBheW1lbnQubHN0UGF0aWVudFBheW1lbnREZXRhaWxzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHBheW1lbnRfdHlwZV9pZDogX3RoaXM1LnBhdGllbnRQYXltZW50LnBheW1lbnRUeXBlQ2FzaCwKICAgICAgICAgICAgICAgICAgICBwYWlkX2Ftb3VudDogX3RoaXM1LnBhdGllbnRQYXltZW50LmNhc2hfcGFpZF9hbW91bnQKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczUuaXNDYXNoID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczUucGF0aWVudFBheW1lbnQucGFpZF9hbW91bnQgPSBwYXJzZUludChfdGhpczUucGF0aWVudFBheW1lbnQuY2FzaF9wYWlkX2Ftb3VudCkgKyBwYXJzZUludChfdGhpczUucGF0aWVudFBheW1lbnQudG90YWxfYW1vdW50X2luZik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LnBhdGllbnRQYXltZW50U2VydmljZS5hZGQoX3RoaXM1LnBhdGllbnRQYXltZW50LCBfdGhpczUpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNhdmVkIFN1Y2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNS5wcmludEFwcG9pbnRtZW50UGF5bWVudChyZXN1bHQuZGF0YSk7CgogICAgICAgICAgICAgICAgICBfdGhpczUucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgIGludl9yZXF1ZXN0X2lkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ludl9yZXF1ZXN0X2lkJyk7CgogICAgICAgICAgICAgICAgICBpZiAoaW52X3JlcXVlc3RfaWQpIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaW52X3JlcXVlc3RfaWQnKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIucHVzaCgiL3BhdGllbnQtaW52ZXN0aWdhdGlvbi1yZXF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGludl9yZXF1ZXN0X25vID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ludl9yZXF1ZXN0X25vJyk7CgogICAgICAgICAgICAgICAgICBpZiAoaW52X3JlcXVlc3Rfbm8pIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaW52X3JlcXVlc3Rfbm8nKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIucHVzaCgiL2ludmVzdGlnYXRpb24tcmVzdWx0LWRpc3BhdGNoIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczUucmVzZXQoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI3OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKCiAgICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXM1LnJlc2V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDI3XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/DiagnosticCenterManagement_Client/trunk/src/scripts/cash-counter/InvestigationPayment.js"],"names":["PatientPaymentService","PatientInvestigationRequestService","PaymentTypeSetupService","PatientReportService","CommonService","moment","FilterMatchMode","FilterOperator","data","isPayment","addList","button","isCash","isPaid","isCashPaid","isDueExist","isExist","paymentTypeList","totalPtyAmount","patientPayment","cdpayment_date","String","Date","format","ptypaid_amount","total_amount_inf","paymentTypeCash","invoice_id","aPatient","lstPatientPaymentDetails","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","created","patientPaymentService","patientInvestigationRequestService","paymentTypeSetupService","patientReportService","commonService","getAll","then","inv_request_id","localStorage","getItem","investigation_no","findInvestigation","inv_request_no","methods","printAppointmentPayment","Id","GetInvestigationPayment","Downloadfile","paymentReset","ddlPaymentType","reset","cash_paid_amount","filterPaymentType","filter","el","payment_type_id","active","getFormatted","inv_due_amount","patient_id","first_name","contact_no","total_amount","cdinvestigation_request_date","investigation_request_date","getById","paymentTypeIsExist","aPaymentType","length","addPaymentType","obj","_payment_type_name","payment_type_name","paid_amount","parseInt","push","gridSum","deleteFromList","forEach","element","dueCalculate","due_amount","calculateChangeAmount","cash_amount","change_amount","add","payment_date","result","status","$toast","severity","summary","detail","life","removeItem","$router","res"],"mappings":"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","sourcesContent":["import PatientPaymentService from \"../../service/cash-counter/PatientPaymentService\";\r\nimport PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport PaymentTypeSetupService from \"../../service/setup/PaymentTypeSetupService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isPayment: true,\r\n      addList: false,\r\n      button: false,\r\n      isCash: false,\r\n      isPaid: \"\",\r\n      isCashPaid: \"\",\r\n      isDueExist: \"\",\r\n      isExist: \"\",\r\n      paymentTypeList: [],\r\n      totalPtyAmount: 0,\r\n      patientPayment: {\r\n        cdpayment_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        ptypaid_amount: 0,\r\n        total_amount_inf: 0,\r\n        paymentTypeCash: \"1\",\r\n        invoice_id: \"\",\r\n        aPatient: {},\r\n        lstPatientPaymentDetails: [],\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.patientPaymentService = new PatientPaymentService();\r\n    this.patientInvestigationRequestService =\r\n      new PatientInvestigationRequestService();\r\n    this.paymentTypeSetupService = new PaymentTypeSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.commonService = new CommonService();\r\n\r\n    this.paymentTypeSetupService\r\n      .getAll()\r\n      .then((data) => (this.paymentTypeList = data.data));\r\n\r\n      var inv_request_id = localStorage.getItem('inv_request_id');\r\n      if (inv_request_id) {\r\n        this.patientPayment.investigation_no = inv_request_id;\r\n        //localStorage.removeItem('investigation_id');\r\n        this.findInvestigation();\r\n      }\r\n\r\n      var inv_request_no = localStorage.getItem('inv_request_no');\r\n      if (inv_request_no) {\r\n        this.patientPayment.investigation_no = inv_request_no;\r\n        //localStorage.removeItem('investigation_id');\r\n        this.findInvestigation();\r\n      }\r\n  },\r\n  methods: {\r\n    printAppointmentPayment(Id){\r\n      this.patientReportService.GetInvestigationPayment(Id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    paymentReset() {\r\n      this.isPayment = true;\r\n      this.patientPayment.ddlPaymentType = \"\";\r\n      this.isExist = \"\";\r\n    },\r\n    reset() {\r\n      this.isPayment = true;\r\n      this.addList = false;\r\n      this.button = false;\r\n      this.isCash = false;\r\n      this.isExist = \"\";\r\n      this.isPaid = \"\";\r\n      this.isCashPaid = \"\";\r\n      this.totalPtyAmount = 0;\r\n      this.patientPayment = {\r\n        cdpayment_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        ptypaid_amount: 0,\r\n        total_amount_inf: 0,\r\n        paymentTypeCash: \"1\",\r\n        cash_paid_amount: 0,\r\n        invoice_id: \"\",\r\n        aPatient: {},\r\n        lstPatientPaymentDetails: [],\r\n      };\r\n      this.submitted = false;\r\n    },\r\n    filterPaymentType() {\r\n      return this.paymentTypeList.filter(function (el) {\r\n        return el.payment_type_id != 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      if (data.inv_due_amount == 0) {\r\n        this.isDueExist = \"Not due!\";\r\n        this.patientPayment = {\r\n          paymentTypeCash: \"1\",\r\n          invoice_id: \"\",\r\n          aPatient: {},\r\n          lstPatientPaymentDetails: [],\r\n        };\r\n      } else {\r\n        this.isDueExist = \"\";\r\n        this.patientPayment.invoice_id = data.invoice_id;\r\n        this.patientPayment.aPatient.patient_id = data.aPatient.patient_id;\r\n        this.patientPayment.aPatient.first_name = data.aPatient.first_name;\r\n        this.patientPayment.aPatient.contact_no = data.aPatient.contact_no;\r\n\r\n        this.patientPayment.total_amount = data.inv_due_amount;\r\n        this.patientPayment.cash_paid_amount = data.inv_due_amount;\r\n        this.patientPayment.ptypaid_amount = data.inv_due_amount;\r\n\r\n        this.patientPayment.cdinvestigation_request_date = moment(\r\n          String(data.investigation_request_date)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    findInvestigation() {\r\n      this.patientInvestigationRequestService\r\n        .getById(this.patientPayment.investigation_no)\r\n        .then((data) => this.getFormatted(data.data));\r\n    },\r\n\r\n    paymentTypeIsExist() {\r\n      var aPaymentType = this.patientPayment.lstPatientPaymentDetails.filter(\r\n        function (el) {\r\n          return (\r\n            el.payment_type_id ===\r\n            this.patientPayment.ddlPaymentType.payment_type_id\r\n          );\r\n        },\r\n        this\r\n      );\r\n\r\n      if (aPaymentType.length) {\r\n        this.isExist = \"This Payment Type already added\";\r\n        this.isPayment = true;\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        this.isPayment = false;\r\n      }\r\n    },\r\n    addPaymentType() {\r\n      this.submitted = true;\r\n      var aPaymentType = this.patientPayment.lstPatientPaymentDetails.filter(\r\n        function (el) {\r\n          return (\r\n            el.payment_type_id ===\r\n            this.patientPayment.ddlPaymentType.payment_type_id\r\n          );\r\n        },\r\n        this\r\n      );\r\n\r\n      if (aPaymentType.length) {\r\n        this.isExist = \"This Payment Type already added\";\r\n        //this.isPayment = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientPayment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.patientPayment.cdpayment_date) {\r\n          return;\r\n        } else if (!this.patientPayment.ddlPaymentType) {\r\n          this.isExist = \"Payment Type is required.\";\r\n          return;\r\n        } else if (\r\n          this.patientPayment.ptypaid_amount <= 0 &&\r\n          !this.patientPayment.ptypaid_amount\r\n        ) {\r\n          return;\r\n        } else if (\r\n          this.patientPayment.cash_paid_amount <= 0 ||\r\n          this.patientPayment.cash_paid_amount <\r\n            this.patientPayment.ptypaid_amount\r\n        ) {\r\n          this.isPaid = \"Exceed amount!\";\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          this.isPaid = \"\";\r\n\r\n          var obj = {\r\n            payment_type_id: this.patientPayment.ddlPaymentType.payment_type_id,\r\n            _payment_type_name:\r\n              this.patientPayment.ddlPaymentType.payment_type_name,\r\n\r\n            paid_amount: parseInt(this.patientPayment.ptypaid_amount),\r\n          };\r\n\r\n          this.patientPayment.lstPatientPaymentDetails.push(obj);\r\n\r\n          // this.totalPtyAmount =\r\n          //   this.totalPtyAmount + parseInt(this.patientPayment.ptypaid_amount);\r\n\r\n          // this.patientPayment.cash_paid_amount =\r\n          //   this.patientPayment.total_amount - this.totalPtyAmount;\r\n          this.gridSum();\r\n        }\r\n      }\r\n\r\n      this.addList = true;\r\n      this.button = true;\r\n    },\r\n\r\n    deleteFromList(data) {\r\n      this.patientPayment.lstPatientPaymentDetails =\r\n        this.patientPayment.lstPatientPaymentDetails.filter(function (el) {\r\n          return el.payment_type_id != data.payment_type_id;\r\n        }, this);\r\n\r\n      // this.patientPayment.cash_paid_amount =\r\n      //   this.patientPayment.cash_paid_amount + parseInt(data.paid_amount);\r\n\r\n      if (!this.patientPayment.lstPatientPaymentDetails.length) {\r\n        this.addList = false;\r\n        this.button = false;\r\n      }\r\n      this.gridSum();\r\n    },\r\n    gridSum() {\r\n      this.patientPayment.total_amount_inf = 0;\r\n      this.patientPayment.lstPatientPaymentDetails.forEach((element) => {\r\n        this.patientPayment.total_amount_inf += element.paid_amount;\r\n      });\r\n      this.patientPayment.cash_paid_amount =\r\n        this.patientPayment.total_amount - this.patientPayment.total_amount_inf;\r\n\r\n      this.dueCalculate();\r\n    },\r\n    dueCalculate() {\r\n      this.patientPayment.due_amount =\r\n        this.patientPayment.total_amount -\r\n        this.patientPayment.cash_paid_amount -\r\n        this.patientPayment.total_amount_inf;\r\n\r\n      if (\r\n        this.patientPayment.total_amount < this.patientPayment.cash_paid_amount\r\n      ) {\r\n        this.isCashPaid = \"Exceed amount!\";\r\n      } else {\r\n        this.isCashPaid = \"\";\r\n      }\r\n    },\r\n    calculateChangeAmount() {\r\n      if (this.patientPayment.cash_amount.length) {\r\n        this.patientPayment.change_amount =\r\n          this.patientPayment.cash_amount -\r\n          this.patientPayment.cash_paid_amount;\r\n      } else {\r\n        this.patientPayment.change_amount = 0;\r\n      }\r\n    },\r\n    async add() {\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.patientPayment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.patientPayment.cdpayment_date) {\r\n          return;\r\n        } else if (!this.patientPayment.invoice_id) {\r\n          return;\r\n        } else if (this.isCashPaid) {\r\n          return;\r\n        } else {\r\n          this.patientPayment.payment_date = moment(\r\n            String(this.patientPayment.cdpayment_date)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (this.patientPayment.cash_paid_amount > 0 && !this.isCash) {\r\n            this.patientPayment.lstPatientPaymentDetails.push({\r\n              payment_type_id: this.patientPayment.paymentTypeCash,\r\n\r\n              paid_amount: this.patientPayment.cash_paid_amount,\r\n            });\r\n\r\n            this.isCash = true;\r\n          }\r\n          this.patientPayment.paid_amount =\r\n            parseInt(this.patientPayment.cash_paid_amount) +\r\n            parseInt(this.patientPayment.total_amount_inf);\r\n\r\n          let result = await this.patientPaymentService.add(\r\n            this.patientPayment, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Sucess\",\r\n              detail: \"Saved Sucessfully\",\r\n              life: 10000,\r\n            });\r\n            this.printAppointmentPayment(result.data);\r\n            this.reset();\r\n            var inv_request_id = localStorage.getItem('inv_request_id');\r\n            if (inv_request_id) {\r\n              localStorage.removeItem('inv_request_id');\r\n              this.$router.push(\"/patient-investigation-request\");\r\n            }\r\n            var inv_request_no = localStorage.getItem('inv_request_no');\r\n            if (inv_request_no) {\r\n              localStorage.removeItem('inv_request_no');\r\n              this.$router.push(\"/investigation-result-dispatch\");\r\n            }\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Faild\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n            this.reset();\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Faild\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n        this.reset();\r\n      }\r\n    },\r\n  },\r\n};"]}]}