{"remainingRequest":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationRequest.js","dependencies":[{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationRequest.js","mtime":1636369892616},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9EaWFnbm9zdGljQ2VudGVyTWFuYWdlbWVudF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0IFBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L1BhdGllbnRSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IERlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvRGVzaWduYXRpb25TZXR1cFNlcnZpY2UiOwppbXBvcnQgQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IERvY3RvclNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0RvY3RvclNldHVwU2VydmljZSI7CmltcG9ydCBFbXBsb3llZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0VtcGxveWVlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IEJ1aWxkaW5nU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvQnVpbGRpbmdTZXR1cFNlcnZpY2UiOwppbXBvcnQgUm9vbVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1Jvb21TZXR1cFNlcnZpY2UiOwppbXBvcnQgUmVmZXJyZWRCeVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1JlZmVycmVkQnlTZXR1cFNlcnZpY2UiOwppbXBvcnQgSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0ludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UiOwppbXBvcnQgUHJvZHVjdFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1Byb2R1Y3RTZXR1cFNlcnZpY2UiOyAvL2ltcG9ydCBDb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSI7CgppbXBvcnQgVmFsaWRhdGlvbiBmcm9tICIuLi8uLi9zY3JpcHRzL3ZhbGlkYXRpb24iOwppbXBvcnQgQXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZG9jdG9yLXBhbmVsL0FwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgRmlsdGVyTWF0Y2hNb2RlLCBGaWx0ZXJPcGVyYXRvciB9IGZyb20gInByaW1ldnVlL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNJbnZlc3RpZ2F0aW9uOiB0cnVlLAogICAgICBpc1ByZXNjcmlwdGlvbjogZmFsc2UsCiAgICAgIGlzQ29udGFjdEV4aXN0OiAiIiwKICAgICAgaXNWYWxpZDogIiIsCiAgICAgIGlzRW1haWxWYWxpZDogIiIsCiAgICAgIGlzUGF0aWVudEV4aXN0OiAiIiwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGNvbGxlY3Rpb25MaXN0OiBbXSwKICAgICAgYmxvb2RHcm91cExpc3Q6IFtdLAogICAgICBnZW5kZXJMaXN0OiBbXSwKICAgICAgZGVzaWduYXRpb250TGlzdDogW10sCiAgICAgIGRlcGFydG1lbnRMaXN0OiBbXSwKICAgICAgZG9jdG9yTGlzdDogW10sCiAgICAgIGJ1aWxkaW5nTGlzdDogW10sCiAgICAgIHJvb21MaXN0OiBbXSwKICAgICAgcmVmZXJyZWRCeUxpc3Q6IFtdLAogICAgICBlbXBsb3llZUxpc3Q6IFtdLAogICAgICAvL2Rpc2NvdW50QnlMaXN0OiBbXSwKICAgICAgaW52ZXN0aWdhdGlvbkxpc3Q6IFtdLAogICAgICByZXBvcnREZWxpdmVyeVR5cGVMaXN0OiBbXSwKICAgICAgcHJvZHVjdExpc3Q6IFtdLAogICAgICBwYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Q6IHsKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6ICJSZWd1bGFyIiwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHM6IFtdLAogICAgICAgIGxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyOiBbXSwKICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAwLAogICAgICAgIGRpc2NvdW50X2Ftb3VudDogMCwKICAgICAgICBjb3N0X3ByaWNlOiAwLAogICAgICAgIHBhcnRpY3VsYXJfY29zdF9wcmljZTogMCwKICAgICAgICB0b3RhbF9hbW91bnQ6IDAKICAgICAgfSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgc3VibWl0dGVkOiBmYWxzZSwKICAgICAgZGlzY291bnRCeUxpc3Q6IFt7CiAgICAgICAgdGV4dDogIkJvdGgiLAogICAgICAgIHZhbHVlOiAiQm90aCIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJDb21wYW55IiwKICAgICAgICB2YWx1ZTogIkNvbXBhbnkiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiUmVmZXJlbmNlIiwKICAgICAgICB2YWx1ZTogIlJlZmVyZW5jZSIKICAgICAgfV0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgPSBuZXcgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSA9IG5ldyBQYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlID0gbmV3IENvbW1vblNlcnZpY2UoKTsKICAgIHRoaXMuZW1wbG95ZWVTZXR1cFNlcnZpY2UgPSBuZXcgRW1wbG95ZWVTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlID0gbmV3IERvY3RvclNldHVwU2VydmljZSgpOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UgPSBuZXcgQ29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmRlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlID0gbmV3IERlc2lnbmF0aW9uU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmJ1aWxkaW5nU2V0dXBTZXJ2aWNlID0gbmV3IEJ1aWxkaW5nU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnJvb21TZXR1cFNlcnZpY2UgPSBuZXcgUm9vbVNldHVwU2VydmljZSgpOwogICAgdGhpcy5yZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlID0gbmV3IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZSA9IG5ldyBJbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnByb2R1Y3RTZXR1cFNlcnZpY2UgPSBuZXcgUHJvZHVjdFNldHVwU2VydmljZSgpOyAvL3RoaXMuY29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSA9IG5ldyBDb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlKCk7CgogICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZSA9IG5ldyBQYXRpZW50UmVwb3J0U2VydmljZSgpOwogICAgdGhpcy52YWxpZGF0aW9uID0gbmV3IFZhbGlkYXRpb24oKTsKICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlID0gbmV3IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEdlbmRlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmdlbmRlckxpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxCbG9vZEdyb3VwKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuYmxvb2RHcm91cExpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuZGVzaWduYXRpb25TZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGVzaWduYXRpb250TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb25zdWx0YW5jeURlcGFydG1lbnRTZXR1cFNlcnZpY2UuZ2V0QWN0aXZlQ29tYm8oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZXBhcnRtZW50TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5idWlsZGluZ1NldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5idWlsZGluZ0xpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMucm9vbVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yb29tTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOyAvLyB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFjdGl2ZUNvbWJvKCkKICAgIC8vICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLnJlZmVycmVkQnlMaXN0ID0gZGF0YS5kYXRhKSk7CiAgICAvLyB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UKICAgIC8vICAgLmdldEFjdGl2ZUNvbWJvKCkKICAgIC8vICAgLnRoZW4oKGRhdGEpID0+IHRoaXMubWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhLmRhdGEpKTsKCiAgICB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZURvY3RvckluZm8oZGF0YS5kYXRhKTsKICAgIH0pOwogICAgdGhpcy5lbXBsb3llZVNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXJnZUVtcGxveWVlSW5mbyhkYXRhLmRhdGEpOwogICAgfSk7IC8vIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWxsKCkKICAgIC8vICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmludmVzdGlnYXRpb25MaXN0ID0gZGF0YS5kYXRhKSk7CgogICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmZvcm1hdEludmVzdGlnYXRpb25MaXN0KGRhdGEuZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxSZXBvcnREZWxpdmVyeVR5cGUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZXBvcnREZWxpdmVyeVR5cGVMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLnByb2R1Y3RTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJvZHVjdExpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHByaW50SW52ZXN0aWdhdGlvblRva2VuOiBmdW5jdGlvbiBwcmludEludmVzdGlnYXRpb25Ub2tlbihpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0SW52ZXN0aWdhdGlvblRva2VuKGlkLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRJbnZlc3RpZ2F0aW9uTGlzdDogZnVuY3Rpb24gZm9ybWF0SW52ZXN0aWdhdGlvbkxpc3QoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXJEYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIG9iaiA9IGVsZW1lbnQ7CiAgICAgICAgb2JqLmludmVzdGluZ2F0aW9uX25hbWUgPSBlbGVtZW50Lm1hbnVhbF9jb2RlICsgIi0iICsgZWxlbWVudC5pbnZlc3RpbmdhdGlvbl9uYW1lOwoKICAgICAgICBfdGhpczMuaW52ZXN0aWdhdGlvbkxpc3QucHVzaChvYmopOwogICAgICB9KTsKICAgIH0sCiAgICBtZXJnZVJlZmVycmVkQnlJbmZvOiBmdW5jdGlvbiBtZXJnZVJlZmVycmVkQnlJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIGZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzNC5yZWZlcnJlZEJ5TGlzdC5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubywKICAgICAgICAgIHRleHQ6IGVsZW1lbnQubWFudWFsX2NvZGUgKyAiLSIgKyBlbGVtZW50LnJlZ2lzdHJhdGlvbl9ubyArICItIiArIGVsZW1lbnQucmVmZmVyZWRfYnlfbmFtZSArICIoUmVmZXJyZWQgQnkpIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBtZXJnZURvY3RvckluZm86IGZ1bmN0aW9uIG1lcmdlRG9jdG9ySW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy90aGlzLmRvY3Rvckxpc3QgPSBkYXRhOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczUucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5kb2Nfbm8sCiAgICAgICAgICB0ZXh0OiBlbGVtZW50LmRvY19ubyArICItIiArIGVsZW1lbnQuZG9jdG9yX25hbWUgKyAiKERvY3RvcikiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczUuZG9jdG9yTGlzdC5wdXNoKHsKICAgICAgICAgIGRlcGFydG1lbnRfaWQ6IGVsZW1lbnQuZGVwYXJ0bWVudF9pZCwKICAgICAgICAgIGRvY3Rvcl9pZDogZWxlbWVudC5kb2N0b3JfaWQsCiAgICAgICAgICBkb2N0b3JfbmFtZTogZWxlbWVudC5kb2Nfbm8gKyAiLSIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG1lcmdlRW1wbG95ZWVJbmZvOiBmdW5jdGlvbiBtZXJnZUVtcGxveWVlSW5mbyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgICBmaWx0ZXJEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczYucmVmZXJyZWRCeUxpc3QucHVzaCh7CiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5lbXBfbm8sCiAgICAgICAgICB0ZXh0OiBlbGVtZW50LmVtcF9ubyArICItIiArIGVsZW1lbnQuZmlyc3RfbmFtZSArICIoRW1wbG95ZWUpIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBtZXJnZURvY3RvckluZm8oZGF0YSkgewogICAgLy8gICB0aGlzLmRvY3Rvckxpc3QgPSBkYXRhOwogICAgLy8gICBkYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgIC8vICAgICB0aGlzLmRpc2NvdW50QnlMaXN0LnB1c2goewogICAgLy8gICAgICAgdmFsdWU6IGVsZW1lbnQuZG9jX25vLAogICAgLy8gICAgICAgdGV4dDogZWxlbWVudC5kb2Nfbm8gKyAiLSIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lICsgIihEb2N0b3IpIiwKICAgIC8vICAgICB9KTsKICAgIC8vICAgfSk7CiAgICAvLyB9LAogICAgLy8gbWVyZ2VFbXBsb3llZUluZm8oZGF0YSkgewogICAgLy8gICBkYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgIC8vICAgICB0aGlzLmRpc2NvdW50QnlMaXN0LnB1c2goewogICAgLy8gICAgICAgdmFsdWU6IGVsZW1lbnQuZW1wX25vLAogICAgLy8gICAgICAgdGV4dDogZWxlbWVudC5lbXBfbm8gKyAiLSIgKyBlbGVtZW50LmZpcnN0X25hbWUgKyAiKEVtcGxveWVlKSIsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgIH0pOwogICAgLy8gfSwKICAgIGludlJlc2V0OiBmdW5jdGlvbiBpbnZSZXNldCgpIHsKICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uID0gIiI7CiAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwogICAgICB0aGlzLmlzUHJlc2NyaXB0aW9uID0gZmFsc2U7CiAgICAgIHRoaXMuYnV0dG9uID0gZmFsc2U7CiAgICAgIHRoaXMuaXNWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRW1haWxWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IHsKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6ICJSZWd1bGFyIiwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHM6IFtdLAogICAgICAgIGxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyOiBbXSwKICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAwLAogICAgICAgIGRpc2NvdW50X2Ftb3VudDogMCwKICAgICAgICBjb3N0X3ByaWNlOiAwLAogICAgICAgIHBhcnRpY3VsYXJfY29zdF9wcmljZTogMCwKICAgICAgICB0b3RhbF9hbW91bnQ6IDAKICAgICAgfTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICBkb2N0b3JSZXNldDogZnVuY3Rpb24gZG9jdG9yUmVzZXQoKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRlcGFydG1lbnRfaWQgPSAiIjsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVmZmVyZWRfZG9jdG9yX2lkID0gIiI7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRlc2lnbmF0aW9uX2lkID0gIiI7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0Lm91dHNpZGVfZG9jdG9yX25hbWUgPSAiIjsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Qub3V0c2lkZV9kb2N0b3JfaG9zcGl0YWxfbmFtZSA9ICIiOwogICAgfSwKICAgIGZpbHRlckRvY3RvcnNEZXBhcnRtZW50V2lzZTogZnVuY3Rpb24gZmlsdGVyRG9jdG9yc0RlcGFydG1lbnRXaXNlKCkgewogICAgICByZXR1cm4gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuZGVwYXJ0bWVudF9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGVwYXJ0bWVudF9pZDsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkOiBmdW5jdGlvbiBnZXRDb25zdWx0YW5jeUZlZUJ5RG9jdG9ySWQoKSB7CiAgICAgIHZhciBhRG9jdG9yID0gdGhpcy5kb2N0b3JMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuZG9jdG9yX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kb2N0b3JfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb25zdWx0YW5jeV9mZWUgPSBhRG9jdG9yWzBdLmNvbnN1bHRhbmN5X2ZlZTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYnVpbGRpbmdfaWQgPSBhRG9jdG9yWzBdLl9idWlsZGluZ19pZDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Qucm9vbV9pZCA9IGFEb2N0b3JbMF0ucm9vbV9pZDsKICAgIH0sCiAgICBmaWx0ZXJSb29tc0J1aWxkaW5nV2lzZTogZnVuY3Rpb24gZmlsdGVyUm9vbXNCdWlsZGluZ1dpc2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvb21MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYnVpbGRpbmdfaWQgPT09IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmJ1aWxkaW5nX2lkOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBmaWx0ZXJJbnZlc3RpZ2F0aW9uOiBmdW5jdGlvbiBmaWx0ZXJJbnZlc3RpZ2F0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZlc3RpZ2F0aW9uTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBmaWx0ZXJQcm9kdWN0OiBmdW5jdGlvbiBmaWx0ZXJQcm9kdWN0KCkgewogICAgICByZXR1cm4gdGhpcy5wcm9kdWN0TGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfY2F0ZWdvcnlfaWQgPT0gMSAmJiBlbC5hY3RpdmUgPT0gdHJ1ZTsKICAgICAgfSwgdGhpcyk7CiAgICB9LAogICAgZ2V0Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWQoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudCA9IGRhdGE7CgogICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LnBhdGllbnRfaWQpIHsKICAgICAgICB0aGlzLmlzUGF0aWVudEV4aXN0ID0gIlBhdGllbnQgbm90IEV4aXN0ISI7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0ID0gewogICAgICAgIC8vICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgLy8gICBhUGF0aWVudDoge30sCiAgICAgICAgLy8gfTsKCiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNQYXRpZW50RXhpc3QgPSAiIjsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXRpZW50X2lkID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQucGF0aWVudF9pZDsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jZGRvYiA9IG1vbWVudChTdHJpbmcodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgIH0KICAgIH0sCiAgICBnZXRGb3JtYXR0ZWRQcmVzY3JpcHRpb25XaXNlSW52ZXN0aWdhdGlvbnM6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFByZXNjcmlwdGlvbldpc2VJbnZlc3RpZ2F0aW9ucyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQgPSBkYXRhWzBdOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXRpZW50X2lkID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQucGF0aWVudF9pZDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGVwYXJ0bWVudF9pZCA9IGRhdGFbMF0uZGVwYXJ0bWVudF9pZDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVmZmVyZWRfZG9jdG9yX2lkID0gZGF0YVswXS5kb2N0b3JfaWQ7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlZmZlcmVkX2J5X2lkID0gZGF0YVswXS5kb2Nfbm87CiAgICAgIHRoaXMuaXNQcmVzY3JpcHRpb24gPSB0cnVlOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgYUludmVzdGlnYXRpb24gPSBfdGhpczcuaW52ZXN0aWdhdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgPT09IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgICB9LCBfdGhpczcpWzBdOwoKICAgICAgICBfdGhpczcucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24gPSBhSW52ZXN0aWdhdGlvbjsKCiAgICAgICAgX3RoaXM3LmFkZEludmVzdGlnYXRpb24oKTsKICAgICAgfSk7CiAgICB9LAogICAgZmluZFBhdGllbnQ6IGZ1bmN0aW9uIGZpbmRQYXRpZW50KCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHZhciBzdHIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb250YWN0T3JSZWdObzsKCiAgICAgIGlmIChzdHIuc3RhcnRzV2l0aCgiUFJFUyIpKSB7CiAgICAgICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UucHJlc2NyaXB0aW9uV2lzZUludmVzdGlnYXRpb25zKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvbnRhY3RPclJlZ05vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LmdldEZvcm1hdHRlZFByZXNjcmlwdGlvbldpc2VJbnZlc3RpZ2F0aW9ucyhkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNQcmVzY3JpcHRpb24gPSBmYWxzZTsKICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29udGFjdE9yUmVnTm8sIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguZ2V0Rm9ybWF0dGVkKGRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpc0V4aXN0Q29udGFjdDogZnVuY3Rpb24gaXNFeGlzdENvbnRhY3QoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmNvbnRhY3Rfbm8ubWF0Y2goL14oMDEpKFswLTldezl9KSQvKSkgewogICAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0QnlDb250YWN0T3JSZWdObyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5jb250YWN0X25vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM5LmdldENvbnRhY3QoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkNvbnRhY3QgbnVtYmVyIG11c3Qgc3RhcnQgd2l0aCAwMSBhbmQgdGhlIHJlcXVpcmVkIGxlbmd0aCBpcyAxMSI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDb250YWN0OiBmdW5jdGlvbiBnZXRDb250YWN0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEuY29udGFjdF9ubykgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiRHVwbGljYXRlIHBob25lIG51bWJlciEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGludmVzdGlnYXRpb25Jc0V4aXN0OiBmdW5jdGlvbiBpbnZlc3RpZ2F0aW9uSXNFeGlzdCgpIHsKICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhSW52ZXN0aWdhdGlvbi5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBJbnZlc3RpZ2F0aW9uIGFscmVhZHkgYWRkZWQiOwogICAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdmFyIGFJbnYgPSB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAvLyAgIHJldHVybiAoCiAgICAgICAgLy8gICAgIGVsLmludmVzdGlnYXRpb25faWQgPT09CiAgICAgICAgLy8gICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZAogICAgICAgIC8vICAgKTsKICAgICAgICAvLyB9LCB0aGlzKTsKICAgICAgICAvLyB0aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UKICAgICAgICAvLyAgIC5nZXRCeUlkKGFJbnZbMF0uY29sbGVjdGlvbl9jZW50ZXJfaWQpCiAgICAgICAgLy8gICAudGhlbigoZGF0YSkgPT4gKHRoaXMuY29sbGVjdGlvbkxpc3QgPSBkYXRhLmRhdGEpKTsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmlzSW52ZXN0aWdhdGlvbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYWRkSW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gYWRkSW52ZXN0aWdhdGlvbigpIHsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICB2YXIgYUludmVzdGlnYXRpb24gPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFJbnZlc3RpZ2F0aW9uLmxlbmd0aCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJUaGlzIEludmVzdGlnYXRpb24gYWxyZWFkeSBhZGRlZCI7IC8vdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwoKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgICAgdmFyIGNvc3QgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSA9PSAiUmVndWxhciIgPyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmNoYXJnZSA6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24udXJnZW50X2NhcmdlOwogICAgICAgICAgdmFyIGRpc2NvdW50QW1vdW50ID0gMSAqIGNvc3QgKiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmRpc2NvdW50X3BlcmNlbnQgLyAxMDA7CiAgICAgICAgICB2YXIgdG90YWxBbW91bnQgPSAxICogY29zdCAtIGRpc2NvdW50QW1vdW50OwogICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgaW52ZXN0aWdhdGlvbl9pZDogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkLAogICAgICAgICAgICBfaW52ZXN0aW5nYXRpb25fbmFtZTogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpbmdhdGlvbl9uYW1lLAogICAgICAgICAgICAvLyBidWlsZGluZ19pZDogdGhpcy5jb2xsZWN0aW9uTGlzdC5fYnVpbGRpbmdfaWQsCiAgICAgICAgICAgIC8vIF9idWlsZGluZ19uYW1lOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9idWlsZGluZ19uYW1lLAogICAgICAgICAgICAvLyByb29tX2lkOiB0aGlzLmNvbGxlY3Rpb25MaXN0LnJvb21faWQsCiAgICAgICAgICAgIC8vIF9yb29tX25hbWU6IHRoaXMuY29sbGVjdGlvbkxpc3QuX3Jvb21fbmFtZSwKICAgICAgICAgICAgYnVpbGRpbmdfaWQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uX2J1aWxkaW5nX2lkLAogICAgICAgICAgICByb29tX2lkOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLl9yb29tX2lkLAogICAgICAgICAgICBleHBlY3RlZF9kZWxpdmVyeTogbW9tZW50KFN0cmluZyh0aGlzLmV4cGVjdGVkSG91cih0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLnJlcG9ydF9kZWxpdmVyeV9kdXJhdGlvbikpKS5mb3JtYXQoIllZWVktTU0tREQgaDptbTpzcyBhIiksCiAgICAgICAgICAgIHJlcG9ydF9kZWxpdmVyeV90eXBlOiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSwKICAgICAgICAgICAgcXVhbnRpdHk6IDEsCiAgICAgICAgICAgIGNvc3RfcHJpY2U6IGNvc3QsCiAgICAgICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uZGlzY291bnRfcGVyY2VudCwKICAgICAgICAgICAgZGlzY291bnRfYW1vdW50OiBkaXNjb3VudEFtb3VudCwKICAgICAgICAgICAgdG90YWxfYW1vdW50OiB0b3RhbEFtb3VudAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5wdXNoKG9iaik7CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSArIHRvdGFsQW1vdW50OyAvLwoKICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0KICAgICAgICAgIC8vICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAtCiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWRkUGFydGljdWxhcih0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQpOwogICAgfSwKICAgIGNhbGN1bGF0ZVRvdGFsQW1vdW50OiBmdW5jdGlvbiBjYWxjdWxhdGVUb3RhbEFtb3VudCgpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgKyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UpOwogICAgfSwKICAgIGFkZFBhcnRpY3VsYXI6IGZ1bmN0aW9uIGFkZFBhcnRpY3VsYXIoaWQpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlLmdldEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMC5nZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRBUGFydGljdWxhcjogZnVuY3Rpb24gYWRkQVBhcnRpY3VsYXIoZGF0YSwgcXR5LCBwbmFtZSkgewogICAgICBpZiAodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIkFkZCBJbnZlc3RpZ2F0aW9uIjsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdmFyIG9iaiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkID09PSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgICAgfSwgdGhpcylbMF07CgogICAgICAgIGlmIChvYmopIHsKICAgICAgICAgIHF0eSA9IHBhcnNlSW50KG9iai5xdHkpICsgcXR5OwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkICE9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIucHVzaCh7CiAgICAgICAgICBwcm9kdWN0X2lkOiBkYXRhLnByb2R1Y3RfaWQsCiAgICAgICAgICBfcHJvZHVjdF9uYW1lOiBwbmFtZSwKICAgICAgICAgIHVvbV9pZDogZGF0YS51b21faWQsCiAgICAgICAgICBfdW9tX25hbWU6IGRhdGEuX3VvbV9uYW1lLAogICAgICAgICAgY29zdF9wcmljZTogZGF0YS5jb3N0X3ByaWNlLAogICAgICAgICAgcXR5OiBxdHkKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNoZWNrUXR5KCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgZGF0YS5kYXRhLl9sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIucHVzaCh7CiAgICAgICAgLy8gICBpbnZlc3RpZ2F0aW9uX2lkOiBlbGVtZW50LmludmVzdGlnYXRpb25faWQsCiAgICAgICAgLy8gICBwcm9kdWN0X2lkOiBlbGVtZW50LnByb2R1Y3RfaWQsCiAgICAgICAgLy8gICBfcHJvZHVjdF9uYW1lOiBlbGVtZW50Ll9wcm9kdWN0X25hbWUsCiAgICAgICAgLy8gICB1b21faWQ6IGVsZW1lbnQudW9tX2lkLAogICAgICAgIC8vICAgX3VvbV9uYW1lOiBlbGVtZW50Ll91b21fbmFtZSwKICAgICAgICAvLyAgIGNvc3RfcHJpY2U6IGVsZW1lbnQuY29zdF9wcmljZSwKICAgICAgICAvLyAgIHF0eTogZWxlbWVudC5xdHksCiAgICAgICAgLy8gfSk7CiAgICAgICAgX3RoaXMxMS5hZGRBUGFydGljdWxhcihlbGVtZW50LCAxLCBlbGVtZW50Ll9wcm9kdWN0X25hbWUpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja1F0eTogZnVuY3Rpb24gY2hlY2tRdHkoKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHZhciB0b3RhbFByaWNlID0gMDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LnF0eSA+IF90aGlzMTIucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICAgIGVsZW1lbnQucXR5ID0gX3RoaXMxMi5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aDsKICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQucXR5IDw9IDApIHsKICAgICAgICAgIGVsZW1lbnQucXR5ID0gMTsKICAgICAgICB9CgogICAgICAgIGVsZW1lbnQudG90YWxQcmljZSA9IGVsZW1lbnQucXR5ICogZWxlbWVudC5jb3N0X3ByaWNlOwogICAgICAgIHRvdGFsUHJpY2UgKz0gZWxlbWVudC50b3RhbFByaWNlOwogICAgICB9KTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gdG90YWxQcmljZTsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgfSwKICAgIGdldERpc2NvdW50UGVyY2VudDogZnVuY3Rpb24gZ2V0RGlzY291bnRQZXJjZW50KCkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9wZXJjZW50ID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfYW1vdW50IC8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSAqIDEwMDsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKAogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudCk7CgogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgZ2V0RGlzY291bnRBbW91bnQ6IGZ1bmN0aW9uIGdldERpc2NvdW50QW1vdW50KCkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlICogdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGlzY291bnRfcGVyY2VudCAvIDEwMDsgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gTWF0aC5jZWlsKAogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRpc2NvdW50X2Ftb3VudCk7CgogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgZXhwZWN0ZWRIb3VyOiBmdW5jdGlvbiBleHBlY3RlZEhvdXIoaCkgewogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICB0b2RheS5zZXRIb3Vycyh0b2RheS5nZXRIb3VycygpICsgaCk7CiAgICAgIHJldHVybiB0b2RheTsKICAgIH0sCiAgICBkZWxldGVGcm9tTGlzdDogZnVuY3Rpb24gZGVsZXRlRnJvbUxpc3QoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkICE9IGRhdGEuaW52ZXN0aWdhdGlvbl9pZDsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlIC0gZGF0YS50b3RhbF9hbW91bnQ7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgICAgdGhpcy5jaGVja1F0eSgpOwoKICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSBbXTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgPSAwOwogICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUZyb21QYXJ0aWN1bGFyTGlzdDogZnVuY3Rpb24gZGVsZXRlRnJvbVBhcnRpY3VsYXJMaXN0KGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnByb2R1Y3RfaWQgIT0gZGF0YS5wcm9kdWN0X2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucGFydGljdWxhcl9jb3N0X3ByaWNlIC0gZGF0YS50b3RhbFByaWNlOwogICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGN1cnJlbnREYXRlLCBkb2IsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuZmlyc3RfbmFtZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMTMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyIDwgMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfbW9udGggPCAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheSA8IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY29udGFjdF9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIGlmICghX3RoaXMxMy5pc0NvbnRhY3RFeGlzdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczEzLmlzRXhpc3QgPSAiUGxlYXNlIGFkZCBhIEludmVzdGlnYXRpb24iOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBfdGhpczEzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZG9iID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIF90aGlzMTMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmFnZV95ZWFyLCBjdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczEzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5KTsKICAgICAgICAgICAgICAgIF90aGlzMTMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmRvYiA9IG1vbWVudChTdHJpbmcoZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7IC8vCgogICAgICAgICAgICAgICAgX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX3llYXIgPSBfdGhpczEzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfeWVhci50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoID0gX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX21vbnRoLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBfdGhpczEzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5hZ2VfZGF5ID0gX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuYWdlX2RheS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZS5hZGQoX3RoaXMxMy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QsIF90aGlzMTMpOwoKICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTYXZlZCBTdWNlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEzLnJlc2V0KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczEzLnByaW50SW52ZXN0aWdhdGlvblRva2VuKHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1MDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQ3OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfY29udGV4dC50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA0N11dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/SVN PROJECTS/DiagnosticCenterManagement_Client/trunk/src/scripts/front-desk/PatientInvestigationRequest.js"],"names":["PatientInvestigationRequestService","PatientRegistrationService","PatientReportService","CommonService","DesignationSetupService","ConsultancyDepartmentSetupService","DoctorSetupService","EmployeeSetupService","BuildingSetupService","RoomSetupService","ReferredBySetupService","InvestigationSetupService","ProductSetupService","Validation","AppointmentPrescriptionService","moment","FilterMatchMode","FilterOperator","data","isInvestigation","isPrescription","isContactExist","isValid","isEmailValid","isPatientExist","isExist","collectionList","bloodGroupList","genderList","designationtList","departmentList","doctorList","buildingList","roomList","referredByList","employeeList","investigationList","reportDeliveryTypeList","productList","patientInvestigationRequest","patient_id","aPatient","cdinvestigation_request_date","String","Date","format","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","discountByList","text","created","patientInvestigationRequestService","patientRegistrationService","commonService","employeeSetupService","doctorSetupService","consultancyDepartmentSetupService","designationSetupService","buildingSetupService","roomSetupService","referredBySetupService","investigationSetupService","productSetupService","patientReportService","validation","appointmentPrescriptionService","GetAllGender","then","GetAllBloodGroup","getAll","getActiveCombo","mergeReferredByInfo","mergeDoctorInfo","mergeEmployeeInfo","formatInvestigationList","GetAllReportDeliveryType","methods","printInvestigationToken","id","GetInvestigationToken","Downloadfile","filterData","filter","el","active","forEach","element","obj","investingation_name","manual_code","push","registration_no","reffered_by_name","doc_no","doctor_name","department_id","doctor_id","emp_no","first_name","invReset","ddlinvestigation","reset","button","doctorReset","reffered_doctor_id","designation_id","outside_doctor_name","outside_doctor_hospital_name","filterDoctorsDepartmentWise","getConsultancyFeeByDoctorId","aDoctor","consultancy_fee","building_id","_building_id","room_id","filterRoomsBuildingWise","filterInvestigation","filterProduct","product_category_id","getFormatted","cddob","dob","getFormattedPrescriptionWiseInvestigations","reffered_by_id","aInvestigation","investigation_id","addInvestigation","findPatient","str","contactOrRegNo","startsWith","prescriptionWiseInvestigations","getByContactOrRegNo","isExistContact","contact_no","match","getContact","investigationIsExist","length","cost","charge","urgent_carge","discountAmount","totalAmount","_investingation_name","_room_id","expected_delivery","expectedHour","report_delivery_duration","quantity","calculateTotalAmount","addParticular","Math","ceil","getById","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","_uom_name","checkQty","_lstInvestigationParticular","totalPrice","getDiscountPercent","getDiscountAmount","h","today","setHours","getHours","deleteFromList","deleteFromParticularList","add","age_year","age_month","age_day","investigation_request_date","currentDate","getFullYear","getMonth","getDate","toString","result","status","$toast","severity","summary","detail","life","res"],"mappings":"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","sourcesContent":["import PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport DesignationSetupService from \"../../service/setup/DesignationSetupService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\nimport EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\n//import CollectionCenterSetupService from \"../../service/setup/CollectionCenterSetupService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isInvestigation: true,\r\n      isPrescription: false,\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      isPatientExist: \"\",\r\n      isExist: \"\",\r\n      collectionList: [],\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      designationtList: [],\r\n      departmentList: [],\r\n      doctorList: [],\r\n      buildingList: [],\r\n      roomList: [],\r\n      referredByList: [],\r\n      employeeList: [],\r\n      //discountByList: [],\r\n      investigationList: [],\r\n      reportDeliveryTypeList: [],\r\n      productList: [],\r\n      patientInvestigationRequest: {\r\n        patient_id: \"\",\r\n        aPatient: {},\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      discountByList: [\r\n        { text: \"Both\", value: \"Both\" },\r\n        { text: \"Company\", value: \"Company\" },\r\n        { text: \"Reference\", value: \"Reference\" },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.patientInvestigationRequestService =\r\n      new PatientInvestigationRequestService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.commonService = new CommonService();\r\n    this.employeeSetupService = new EmployeeSetupService();\r\n    this.doctorSetupService = new DoctorSetupService();\r\n    this.consultancyDepartmentSetupService =\r\n      new ConsultancyDepartmentSetupService();\r\n    this.designationSetupService = new DesignationSetupService();\r\n    this.buildingSetupService = new BuildingSetupService();\r\n    this.roomSetupService = new RoomSetupService();\r\n    this.referredBySetupService = new ReferredBySetupService();\r\n    this.investigationSetupService = new InvestigationSetupService();\r\n    this.productSetupService = new ProductSetupService();\r\n    //this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.validation = new Validation();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n\r\n    this.commonService\r\n      .GetAllGender()\r\n      .then((data) => (this.genderList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.designationSetupService\r\n      .getAll()\r\n      .then((data) => (this.designationtList = data.data));\r\n\r\n    this.consultancyDepartmentSetupService\r\n      .getActiveCombo()\r\n      .then((data) => (this.departmentList = data.data));\r\n\r\n    this.buildingSetupService\r\n      .getAll()\r\n      .then((data) => (this.buildingList = data.data));\r\n\r\n    this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n    // this.referredBySetupService\r\n    //   .getActiveCombo()\r\n    //   .then((data) => (this.referredByList = data.data));\r\n\r\n    // this.referredBySetupService\r\n    //   .getActiveCombo()\r\n    //   .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.referredBySetupService\r\n      .getAll()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.doctorSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n    this.employeeSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeEmployeeInfo(data.data));\r\n\r\n    // this.investigationSetupService\r\n    //   .getAll()\r\n    //   .then((data) => (this.investigationList = data.data));\r\n\r\n    this.investigationSetupService\r\n      .getAll()\r\n      .then((data) => this.formatInvestigationList(data.data));\r\n\r\n    this.commonService\r\n      .GetAllReportDeliveryType()\r\n      .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n    this.productSetupService\r\n      .getAll()\r\n      .then((data) => (this.productList = data.data));\r\n  },\r\n  methods: {\r\n    printInvestigationToken(id) {\r\n      this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    formatInvestigationList(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        var obj = element;\r\n        obj.investingation_name = element.manual_code + \"-\" + element.investingation_name;\r\n        this.investigationList.push(obj);\r\n      });\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.registration_no,\r\n          text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n        });\r\n      });\r\n    },\r\n    mergeDoctorInfo(data) {\r\n      //this.doctorList = data;\r\n      data.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.doc_no,\r\n          text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        });\r\n      });\r\n\r\n      data.forEach((element) => {\r\n        this.doctorList.push({\r\n          department_id: element.department_id,\r\n          doctor_id: element.doctor_id,\r\n          doctor_name: element.doc_no + \"-\" + element.doctor_name,\r\n        });\r\n      });\r\n    },\r\n    mergeEmployeeInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.emp_no,\r\n          text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        });\r\n      });\r\n    },\r\n    // mergeDoctorInfo(data) {\r\n    //   this.doctorList = data;\r\n    //   data.forEach((element) => {\r\n    //     this.discountByList.push({\r\n    //       value: element.doc_no,\r\n    //       text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n    //     });\r\n    //   });\r\n    // },\r\n    // mergeEmployeeInfo(data) {\r\n    //   data.forEach((element) => {\r\n    //     this.discountByList.push({\r\n    //       value: element.emp_no,\r\n    //       text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n    //     });\r\n    //   });\r\n    // },\r\n    invReset() {\r\n      this.isInvestigation = true;\r\n      this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n      this.isExist = \"\";\r\n    },\r\n    reset() {\r\n      this.isInvestigation = true;\r\n      this.isPrescription = false;\r\n      this.button = false;\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.isExist = \"\";\r\n      this.isContactExist = \"\";\r\n      this.patientInvestigationRequest = {\r\n        patient_id: \"\",\r\n        aPatient: {},\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      };\r\n      this.submitted = false;\r\n    },\r\n    doctorReset() {\r\n      this.patientInvestigationRequest.department_id = \"\";\r\n      this.patientInvestigationRequest.reffered_doctor_id = \"\";\r\n      this.patientInvestigationRequest.designation_id = \"\";\r\n      this.patientInvestigationRequest.outside_doctor_name = \"\";\r\n      this.patientInvestigationRequest.outside_doctor_hospital_name = \"\";\r\n    },\r\n    filterDoctorsDepartmentWise() {\r\n      return this.doctorList.filter(function (el) {\r\n        return (\r\n          el.department_id === this.patientInvestigationRequest.department_id\r\n        );\r\n      }, this);\r\n\r\n\r\n    },\r\n    getConsultancyFeeByDoctorId() {\r\n      var aDoctor = this.doctorList.filter(function (el) {\r\n        return el.doctor_id === this.patientInvestigationRequest.doctor_id;\r\n      }, this);\r\n\r\n      this.patientInvestigationRequest.consultancy_fee =\r\n        aDoctor[0].consultancy_fee;\r\n      this.patientInvestigationRequest.building_id = aDoctor[0]._building_id;\r\n      this.patientInvestigationRequest.room_id = aDoctor[0].room_id;\r\n    },\r\n    filterRoomsBuildingWise() {\r\n      return this.roomList.filter(function (el) {\r\n        return el.building_id === this.patientInvestigationRequest.building_id;\r\n      }, this);\r\n    },\r\n    filterInvestigation() {\r\n      return this.investigationList.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n    },\r\n    filterProduct() {\r\n      return this.productList.filter(function (el) {\r\n        return el.product_category_id == 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      this.patientInvestigationRequest.aPatient = data;\r\n      if (!this.patientInvestigationRequest.aPatient.patient_id) {\r\n        this.isPatientExist = \"Patient not Exist!\";\r\n        // this.patientInvestigationRequest = {\r\n        //   patient_id: \"\",\r\n        //   aPatient: {},\r\n        // };\r\n        this.reset();\r\n      } else {\r\n        this.isPatientExist = \"\";\r\n\r\n        this.patientInvestigationRequest.patient_id =\r\n          this.patientInvestigationRequest.aPatient.patient_id;\r\n        this.patientInvestigationRequest.aPatient.cddob = moment(\r\n          String(this.patientInvestigationRequest.aPatient.dob)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    getFormattedPrescriptionWiseInvestigations(data) {\r\n      this.patientInvestigationRequest.aPatient = data[0];\r\n      this.patientInvestigationRequest.patient_id =\r\n        this.patientInvestigationRequest.aPatient.patient_id\r\n      this.patientInvestigationRequest.department_id = data[0].department_id;\r\n      this.patientInvestigationRequest.reffered_doctor_id = data[0].doctor_id;\r\n      this.patientInvestigationRequest.reffered_by_id = data[0].doc_no;\r\n      this.isPrescription = true;\r\n\r\n      data.forEach((element) => {\r\n        var aInvestigation =\r\n          this.investigationList.filter(\r\n            function (el) {\r\n              return (\r\n                el.investigation_id ===\r\n                element.investigation_id\r\n              );\r\n            },\r\n            this\r\n          )[0];\r\n\r\n        this.patientInvestigationRequest.ddlinvestigation = aInvestigation;\r\n        this.addInvestigation();\r\n      });\r\n    },\r\n    findPatient() {\r\n      let str = this.patientInvestigationRequest.contactOrRegNo;\r\n\r\n      if (str.startsWith(\"PRES\")) {\r\n        this.appointmentPrescriptionService\r\n          .prescriptionWiseInvestigations(this.patientInvestigationRequest.contactOrRegNo, this)\r\n          .then((data) => this.getFormattedPrescriptionWiseInvestigations(data.data));\r\n      } else {\r\n        this.isPrescription = false;\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.patientInvestigationRequest.contactOrRegNo, this)\r\n          .then((data) => this.getFormatted(data.data));\r\n      }\r\n    },\r\n    isExistContact() {\r\n      if (\r\n        this.patientInvestigationRequest.aPatient.contact_no.match(\r\n          /^(01)([0-9]{9})$/\r\n        )\r\n      ) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(\r\n            this.patientInvestigationRequest.aPatient.contact_no, this\r\n          )\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    investigationIsExist() {\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        // var aInv = this.investigationList.filter(function (el) {\r\n        //   return (\r\n        //     el.investigation_id ===\r\n        //     this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n        //   );\r\n        // }, this);\r\n        // this.collectionCenterSetupService\r\n        //   .getById(aInv[0].collection_center_id)\r\n        //   .then((data) => (this.collectionList = data.data));\r\n\r\n        this.isExist = \"\";\r\n        this.isInvestigation = false;\r\n      }\r\n    },\r\n    addInvestigation() {\r\n      this.submitted = true;\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        //this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          var cost =\r\n            this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n              ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n              : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n          var discountAmount =\r\n            (1 *\r\n              cost *\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .discount_percent) /\r\n            100;\r\n\r\n          var totalAmount = 1 * cost - discountAmount;\r\n\r\n          var obj = {\r\n            investigation_id:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investigation_id,\r\n            _investingation_name:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investingation_name,\r\n\r\n            // building_id: this.collectionList._building_id,\r\n            // _building_name: this.collectionList._building_name,\r\n            // room_id: this.collectionList.room_id,\r\n            // _room_name: this.collectionList._room_name,\r\n            building_id: this.patientInvestigationRequest.ddlinvestigation._building_id,\r\n            room_id: this.patientInvestigationRequest.ddlinvestigation._room_id,\r\n            expected_delivery: moment(\r\n              String(\r\n                this.expectedHour(\r\n                  this.patientInvestigationRequest.ddlinvestigation\r\n                    .report_delivery_duration\r\n                )\r\n              )\r\n            ).format(\"YYYY-MM-DD h:mm:ss a\"),\r\n\r\n            report_delivery_type:\r\n              this.patientInvestigationRequest.report_delivery_type,\r\n\r\n            quantity: 1,\r\n            cost_price: cost,\r\n\r\n            discount_percent:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .discount_percent,\r\n\r\n            discount_amount: discountAmount,\r\n\r\n            total_amount: totalAmount,\r\n          };\r\n\r\n          this.patientInvestigationRequest.lstInvestigationRequestDetails.push(\r\n            obj\r\n          );\r\n\r\n          this.patientInvestigationRequest.cost_price =\r\n            this.patientInvestigationRequest.cost_price + totalAmount;\r\n          //\r\n          this.calculateTotalAmount();\r\n          // this.patientInvestigationRequest.total_amount =\r\n          //   this.patientInvestigationRequest.cost_price -\r\n          //   this.patientInvestigationRequest.discount_amount;\r\n        }\r\n      }\r\n\r\n      this.addParticular(\r\n        this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n      );\r\n    },\r\n    calculateTotalAmount() {\r\n      this.patientInvestigationRequest.total_amount = Math.ceil(\r\n        this.patientInvestigationRequest.cost_price -\r\n        this.patientInvestigationRequest.discount_amount +\r\n        this.patientInvestigationRequest.particular_cost_price);\r\n    },\r\n    addParticular(id) {\r\n      this.investigationSetupService\r\n        .getById(id)\r\n        .then((data) => this.getParticularFormatted(data));\r\n    },\r\n    addAParticular(data, qty, pname) {\r\n      if (\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n          .length <= 0\r\n      ) {\r\n        this.isExist = \"Add Investigation\";\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        var obj =\r\n          this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n            function (el) {\r\n              return el.product_id === data.product_id;\r\n            },\r\n            this\r\n          )[0];\r\n        if (obj) {\r\n          qty = parseInt(obj.qty) + qty;\r\n\r\n          this.patientInvestigationRequest.lstInvestigationParticular =\r\n            this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n              function (el) {\r\n                return el.product_id != data.product_id;\r\n              },\r\n              this\r\n            );\r\n        }\r\n\r\n        this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n          product_id: data.product_id,\r\n          _product_name: pname,\r\n          uom_id: data.uom_id,\r\n          _uom_name: data._uom_name,\r\n          cost_price: data.cost_price,\r\n          qty: qty,\r\n        });\r\n\r\n        this.checkQty();\r\n      }\r\n    },\r\n    getParticularFormatted(data) {\r\n      data.data._lstInvestigationParticular.forEach((element) => {\r\n        // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n        //   investigation_id: element.investigation_id,\r\n        //   product_id: element.product_id,\r\n        //   _product_name: element._product_name,\r\n        //   uom_id: element.uom_id,\r\n        //   _uom_name: element._uom_name,\r\n        //   cost_price: element.cost_price,\r\n        //   qty: element.qty,\r\n        // });\r\n\r\n        this.addAParticular(element, 1, element._product_name);\r\n      });\r\n    },\r\n    checkQty() {\r\n      var totalPrice = 0;\r\n      this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n        (element) => {\r\n          if (\r\n            element.qty >\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n              .length\r\n          ) {\r\n            element.qty =\r\n              this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n          } else if (element.qty <= 0) {\r\n            element.qty = 1;\r\n          }\r\n\r\n          element.totalPrice = element.qty * element.cost_price;\r\n          totalPrice += element.totalPrice;\r\n        }\r\n      );\r\n      this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    getDiscountPercent() {\r\n      this.patientInvestigationRequest.discount_percent =\r\n        (this.patientInvestigationRequest.discount_amount /\r\n          this.patientInvestigationRequest.cost_price) *\r\n        100;\r\n\r\n      // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n      //   this.patientInvestigationRequest.cost_price -\r\n      //   this.patientInvestigationRequest.discount_amount);\r\n      this.calculateTotalAmount();\r\n    },\r\n    getDiscountAmount() {\r\n      this.patientInvestigationRequest.discount_amount =\r\n        (this.patientInvestigationRequest.cost_price *\r\n          this.patientInvestigationRequest.discount_percent) /\r\n        100;\r\n\r\n      // this.patientInvestigationRequest.total_amount = Math.ceil(\r\n      //   this.patientInvestigationRequest.cost_price -\r\n      //   this.patientInvestigationRequest.discount_amount);\r\n      this.calculateTotalAmount();\r\n    },\r\n    expectedHour(h) {\r\n      var today = new Date();\r\n      today.setHours(today.getHours() + h);\r\n      return today;\r\n    },\r\n    deleteFromList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return el.investigation_id != data.investigation_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.cost_price =\r\n        this.patientInvestigationRequest.cost_price - data.total_amount;\r\n      this.calculateTotalAmount();\r\n      this.checkQty();\r\n\r\n      if (\r\n        !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n      ) {\r\n        this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n        this.patientInvestigationRequest.particular_cost_price = 0;\r\n        this.calculateTotalAmount();\r\n      }\r\n    },\r\n    deleteFromParticularList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationParticular =\r\n        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n          function (el) {\r\n            return el.product_id != data.product_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.particular_cost_price =\r\n        this.patientInvestigationRequest.particular_cost_price -\r\n        data.totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    async add() {\r\n      try {\r\n        if (!this.patientInvestigationRequest.aPatient.first_name) {\r\n          return;\r\n        } else if (this.patientInvestigationRequest.aPatient.age_year < 0) {\r\n          return;\r\n        } else if (this.patientInvestigationRequest.aPatient.age_month < 0) {\r\n          return;\r\n        } else if (this.patientInvestigationRequest.aPatient.age_day < 0) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.aPatient.contact_no) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n            .length\r\n        ) {\r\n          this.isExist = \"Please add a Investigation\";\r\n          return;\r\n        } else {\r\n          this.patientInvestigationRequest.investigation_request_date = moment(\r\n            String(\r\n              this.patientInvestigationRequest.cdinvestigation_request_date\r\n            )\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.patientInvestigationRequest.aPatient.age_year, currentDate.getMonth() - this.patientInvestigationRequest.aPatient.age_month, currentDate.getDate() - this.patientInvestigationRequest.aPatient.age_day);\r\n          this.patientInvestigationRequest.aPatient.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n          //\r\n          this.patientInvestigationRequest.aPatient.age_year = this.patientInvestigationRequest.aPatient.age_year.toString();\r\n          this.patientInvestigationRequest.aPatient.age_month = this.patientInvestigationRequest.aPatient.age_month.toString();\r\n          this.patientInvestigationRequest.aPatient.age_day = this.patientInvestigationRequest.aPatient.age_day.toString();\r\n\r\n          let result = await this.patientInvestigationRequestService.add(\r\n            this.patientInvestigationRequest, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Sucess\",\r\n              detail: \"Saved Sucessfully\",\r\n              life: 10000,\r\n            });\r\n            this.reset();\r\n            this.printInvestigationToken(result.data);\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Faild\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Faild\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};"]}]}