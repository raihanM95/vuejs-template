{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationList.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationList.js","mtime":1658141145655},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IFBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUGF0aWVudFJlcG9ydFNlcnZpY2UiOwppbXBvcnQgQ29tbW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL0NvbW1vblNlcnZpY2UiOwppbXBvcnQgSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0ludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UiOwppbXBvcnQgUHJvZHVjdFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL1Byb2R1Y3RTZXR1cFNlcnZpY2UiOwppbXBvcnQgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzSW52ZXN0aWdhdGlvbjogdHJ1ZSwKICAgICAgaXNFeGlzdDogIiIsCiAgICAgIGludkVkaXQ6IGZhbHNlLAogICAgICBpbnZMaXN0OiB0cnVlLAogICAgICBkYXRhTGlzdDogZmFsc2UsCiAgICAgIGNvbGxlY3Rpb25MaXN0OiBbXSwKICAgICAgcmVwb3J0RGVsaXZlcnlTdGF0dXNMaXN0OiBbXSwKICAgICAgcGF5bWVudFN0YXR1c0xpc3Q6IFtdLAogICAgICBwYXRpZW50SW52ZXN0aWdhdGlvbkxpc3Q6IFtdLAogICAgICBpbnZlc3RpZ2F0aW9uTGlzdDogW10sCiAgICAgIHJlcG9ydERlbGl2ZXJ5VHlwZUxpc3Q6IFtdLAogICAgICBwcm9kdWN0TGlzdDogW10sCiAgICAgIHBhdGllbnRJbnZlc3RpZ2F0aW9uOiB7CiAgICAgICAgY2Rmcm9tZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgY2R0b2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIC8vIGNkdG9kYXRlOiBtb21lbnQoCiAgICAgICAgLy8gICBTdHJpbmcobmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgNykpKQogICAgICAgIC8vICkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgZGVsaXZlcnlfc3RhdHVzOiAiQWxsIiwKICAgICAgICBwYXltZW50X3N0YXR1czogIkFsbCIKICAgICAgfSwKICAgICAgc3VibWl0dGVkOiBmYWxzZSwKICAgICAgcGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0OiB7CiAgICAgICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgYVBhdGllbnQ6IHt9LAogICAgICAgIGNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIHJlcG9ydF9kZWxpdmVyeV90eXBlOiAiUmVndWxhciIsCiAgICAgICAgbHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzOiBbXSwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhcjogW10sCiAgICAgICAgZGlzY291bnRfcGVyY2VudDogMCwKICAgICAgICBkaXNjb3VudF9hbW91bnQ6IDAsCiAgICAgICAgY29zdF9wcmljZTogMCwKICAgICAgICBwYXJ0aWN1bGFyX2Nvc3RfcHJpY2U6IDAsCiAgICAgICAgdG90YWxfYW1vdW50OiAwCiAgICAgIH0sCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICB9LAogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluaXRGaWx0ZXJzOiBmdW5jdGlvbiBpbml0RmlsdGVycygpIHsKICAgICAgICB0aGlzLmZpbHRlcnMgPSB7CiAgICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogewogICAgICAgICAgICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3IuQU5ELAogICAgICAgICAgICBjb25zdHJhaW50czogW3sKICAgICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UgPSBuZXcgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlID0gbmV3IENvbW1vblNlcnZpY2UoKTsKICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZSA9IG5ldyBJbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnByb2R1Y3RTZXR1cFNlcnZpY2UgPSBuZXcgUHJvZHVjdFNldHVwU2VydmljZSgpOwogICAgdGhpcy5jb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlID0gbmV3IENvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UgPSBuZXcgUGF0aWVudFJlcG9ydFNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxJbnZlc3RpZ2F0aW9uRGVsaXZlcnlTdGF0dXMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZXBvcnREZWxpdmVyeVN0YXR1c0xpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxQYXltZW50U3RhdHVzKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucGF5bWVudFN0YXR1c0xpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5pbnZlc3RpZ2F0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbFJlcG9ydERlbGl2ZXJ5VHlwZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlcG9ydERlbGl2ZXJ5VHlwZUxpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMucHJvZHVjdFNldHVwU2VydmljZS5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9kdWN0TGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5zaG93KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBtb25leVJlY2VpcHRQcmludDogZnVuY3Rpb24gbW9uZXlSZWNlaXB0UHJpbnQoaW52b2ljZV9pZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0SW52ZXN0aWdhdGlvblBheW1lbnQoaW52b2ljZV9pZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcHJpbnRJbnZlc3RpZ2F0aW9uVG9rZW46IGZ1bmN0aW9uIHByaW50SW52ZXN0aWdhdGlvblRva2VuKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRJbnZlc3RpZ2F0aW9uVG9rZW4oaWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbHRlckludmVzdGlnYXRpb246IGZ1bmN0aW9uIGZpbHRlckludmVzdGlnYXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGZpbHRlclByb2R1Y3Q6IGZ1bmN0aW9uIGZpbHRlclByb2R1Y3QoKSB7CiAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9jYXRlZ29yeV9pZCA9PSAxICYmIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBpbnZSZXNldDogZnVuY3Rpb24gaW52UmVzZXQoKSB7CiAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbiA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgIH0sCiAgICBpbnZlc3RpZ2F0aW9uSXNFeGlzdDogZnVuY3Rpb24gaW52ZXN0aWdhdGlvbklzRXhpc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhSW52ZXN0aWdhdGlvbi5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBJbnZlc3RpZ2F0aW9uIGFscmVhZHkgYWRkZWQiOwogICAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGFJbnYgPSB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgdGhpcy5jb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlLmdldEJ5SWQoYUludlswXS5jb2xsZWN0aW9uX2NlbnRlcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5jb2xsZWN0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmlzSW52ZXN0aWdhdGlvbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYWRkSW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gYWRkSW52ZXN0aWdhdGlvbigpIHsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICB2YXIgYUludmVzdGlnYXRpb24gPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFJbnZlc3RpZ2F0aW9uLmxlbmd0aCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJUaGlzIEludmVzdGlnYXRpb24gYWxyZWFkeSBhZGRlZCI7IC8vdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwoKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgICAgdmFyIGNvc3QgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSA9PSAiUmVndWxhciIgPyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmNoYXJnZSA6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24udXJnZW50X2NhcmdlOwogICAgICAgICAgdmFyIHRvdGFsQW1vdW50ID0gY29zdDsKICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGludmVzdGlnYXRpb25faWQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZCwKICAgICAgICAgICAgX2ludmVzdGluZ2F0aW9uX25hbWU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aW5nYXRpb25fbmFtZSwKICAgICAgICAgICAgYnVpbGRpbmdfaWQ6IHRoaXMuY29sbGVjdGlvbkxpc3QuX2J1aWxkaW5nX2lkLAogICAgICAgICAgICBfYnVpbGRpbmdfbmFtZTogdGhpcy5jb2xsZWN0aW9uTGlzdC5fYnVpbGRpbmdfbmFtZSwKICAgICAgICAgICAgcm9vbV9pZDogdGhpcy5jb2xsZWN0aW9uTGlzdC5yb29tX2lkLAogICAgICAgICAgICBfcm9vbV9uYW1lOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9yb29tX25hbWUsCiAgICAgICAgICAgIGV4cGVjdGVkX2RlbGl2ZXJ5OiBtb21lbnQoU3RyaW5nKHRoaXMuZXhwZWN0ZWRIb3VyKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24ucmVwb3J0X2RlbGl2ZXJ5X2R1cmF0aW9uKSkpLmZvcm1hdCgiWVlZWS1NTS1ERCBoOm1tOnNzIGEiKSwKICAgICAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24ucmVwb3J0X2RlbGl2ZXJ5X3R5cGUsCiAgICAgICAgICAgIHF1YW50aXR5OiAxLAogICAgICAgICAgICBjb3N0X3ByaWNlOiBjb3N0LAogICAgICAgICAgICBkaXNjb3VudF9wZXJjZW50OiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmRpc2NvdW50X3BlcmNlbnQsCiAgICAgICAgICAgIHRvdGFsX2Ftb3VudDogdG90YWxBbW91bnQKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMucHVzaChvYmopOwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKyB0b3RhbEFtb3VudDsgLy8KCiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9CiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFkZFBhcnRpY3VsYXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkKTsKICAgIH0sCiAgICBjYWxjdWxhdGVUb3RhbEFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxBbW91bnQoKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2U7CiAgICB9LAogICAgYWRkUGFydGljdWxhcjogZnVuY3Rpb24gYWRkUGFydGljdWxhcihpZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZS5nZXRCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5nZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRBUGFydGljdWxhcjogZnVuY3Rpb24gYWRkQVBhcnRpY3VsYXIoZGF0YSwgcXR5LCBwbmFtZSkgewogICAgICBpZiAodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIkFkZCBJbnZlc3RpZ2F0aW9uIjsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdmFyIG9iaiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkID09PSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgICAgfSwgdGhpcylbMF07CgogICAgICAgIGlmIChvYmopIHsKICAgICAgICAgIHF0eSA9IHBhcnNlSW50KG9iai5xdHkpICsgcXR5OwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkICE9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIucHVzaCh7CiAgICAgICAgICBwcm9kdWN0X2lkOiBkYXRhLnByb2R1Y3RfaWQsCiAgICAgICAgICBfcHJvZHVjdF9uYW1lOiBwbmFtZSwKICAgICAgICAgIHVvbV9pZDogZGF0YS51b21faWQsCiAgICAgICAgICBfdW9tX25hbWU6IGRhdGEuX3VvbV9uYW1lLAogICAgICAgICAgY29zdF9wcmljZTogZGF0YS5jb3N0X3ByaWNlLAogICAgICAgICAgcXR5OiBxdHkKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNoZWNrUXR5KCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBkYXRhLmRhdGEuX2xzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5wdXNoKHsKICAgICAgICAvLyAgIGludmVzdGlnYXRpb25faWQ6IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZCwKICAgICAgICAvLyAgIHByb2R1Y3RfaWQ6IGVsZW1lbnQucHJvZHVjdF9pZCwKICAgICAgICAvLyAgIF9wcm9kdWN0X25hbWU6IGVsZW1lbnQuX3Byb2R1Y3RfbmFtZSwKICAgICAgICAvLyAgIHVvbV9pZDogZWxlbWVudC51b21faWQsCiAgICAgICAgLy8gICBfdW9tX25hbWU6IGVsZW1lbnQuX3VvbV9uYW1lLAogICAgICAgIC8vICAgY29zdF9wcmljZTogZWxlbWVudC5jb3N0X3ByaWNlLAogICAgICAgIC8vICAgcXR5OiBlbGVtZW50LnF0eSwKICAgICAgICAvLyB9KTsKICAgICAgICBfdGhpczYuYWRkQVBhcnRpY3VsYXIoZWxlbWVudCwgMSwgZWxlbWVudC5fcHJvZHVjdF9uYW1lKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tRdHk6IGZ1bmN0aW9uIGNoZWNrUXR5KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciB0b3RhbFByaWNlID0gMDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LnF0eSA+IF90aGlzNy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgZWxlbWVudC5xdHkgPSBfdGhpczcucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGg7CiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnF0eSA8PSAwKSB7CiAgICAgICAgICBlbGVtZW50LnF0eSA9IDE7CiAgICAgICAgfQoKICAgICAgICBlbGVtZW50LnRvdGFsUHJpY2UgPSBlbGVtZW50LnF0eSAqIGVsZW1lbnQuY29zdF9wcmljZTsKICAgICAgICB0b3RhbFByaWNlICs9IGVsZW1lbnQudG90YWxQcmljZTsKICAgICAgfSk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IHRvdGFsUHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBleHBlY3RlZEhvdXI6IGZ1bmN0aW9uIGV4cGVjdGVkSG91cihoKSB7CiAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIHRvZGF5LnNldEhvdXJzKHRvZGF5LmdldEhvdXJzKCkgKyBoKTsKICAgICAgcmV0dXJuIHRvZGF5OwogICAgfSwKICAgIGRlbGV0ZUZyb21MaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscyA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgIT0gZGF0YS5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLSBkYXRhLnRvdGFsX2Ftb3VudDsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgICB0aGlzLmNoZWNrUXR5KCk7CgogICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IFtdOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IDA7CiAgICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlRnJvbVBhcnRpY3VsYXJMaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tUGFydGljdWxhckxpc3QoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9pZCAhPSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgLSBkYXRhLnRvdGFsUHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghX3RoaXM4LmlzQ29udGFjdEV4aXN0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzOC5pc0V4aXN0ID0gIlBsZWFzZSBhZGQgYSBJbnZlc3RpZ2F0aW9uIjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UucHV0KF90aGlzOC5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QsIF90aGlzOCk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlVwZGF0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzOC5zaG93KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIxOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfY29udGV4dC50MCwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAyMV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb24uY2Rmcm9tZGF0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5jZHRvZGF0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5kZWxpdmVyeV9zdGF0dXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb24ucGF5bWVudF9zdGF0dXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5mcm9tZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5jZGZyb21kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi50b2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMucGF0aWVudEludmVzdGlnYXRpb24uY2R0b2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UuZ2V0RHluYW1pYyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmZyb21kYXRlLCB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLnRvZGF0ZSwgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5kZWxpdmVyeV9zdGF0dXMsIHRoaXMucGF0aWVudEludmVzdGlnYXRpb24ucGF5bWVudF9zdGF0dXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkucGF0aWVudEludmVzdGlnYXRpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmludkVkaXQgPSBmYWxzZTsKICAgICAgdGhpcy5pbnZMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IHRydWU7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh2YWx1ZSkgewogICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgfSwKICAgIGVkaXQ6IGZ1bmN0aW9uIGVkaXQob2JqKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZS5nZXRCeUlkKG9iai5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxMC5nZXRFZGl0Rm9ybWF0dGVkKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRFZGl0Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRFZGl0Rm9ybWF0dGVkKGRhdGEpIHsKICAgICAgaWYgKGRhdGEuZGF0YS5kaXNjb3VudF9hbW91bnQgPT0gMCAmJiBkYXRhLmRhdGEudG90YWxfYW1vdW50ID09IGRhdGEuZGF0YS5pbnZfZHVlX2Ftb3VudCkgewogICAgICAgIC8vdGhpcy5hZGRQYXJ0aWN1bGFyKGRhdGEuZGF0YS5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHNbMF0uaW52ZXN0aWdhdGlvbl9pZCk7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QgPSBkYXRhLmRhdGE7CiAgICAgICAgdGhpcy5jaGVja1F0eSgpOyAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMgPQogICAgICAgIC8vICAgZGF0YS5kYXRhLmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlsczsKICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9CiAgICAgICAgLy8gICBkYXRhLmRhdGEubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXI7CiAgICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IGRhdGEuZGF0YS5jb3N0X3ByaWNlOwogICAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IGRhdGEuZGF0YS50b3RhbF9hbW91bnQ7CgogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmNkZG9iID0gbW9tZW50KFN0cmluZyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5hUGF0aWVudC5kb2IpKS5mb3JtYXQoIk1NL0REL1lZWVkiKTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnJlcG9ydF9kZWxpdmVyeV90eXBlID0gIlJlZ3VsYXIiOwogICAgICAgIHRoaXMuaW52TGlzdCA9IGZhbHNlOwogICAgICAgIHRoaXMuaW52RWRpdCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdG9hc3QuYWRkKHsKICAgICAgICAgIHNldmVyaXR5OiAid2FybiIsCiAgICAgICAgICBzdW1tYXJ5OiAiV2FybiIsCiAgICAgICAgICBkZXRhaWw6ICJDYW5ub3QgZWRpdCIsCiAgICAgICAgICBsaWZlOiAzMDAwCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5pbnZMaXN0ID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/front-desk/PatientInvestigationList.js"],"names":["PatientInvestigationRequestService","PatientReportService","CommonService","InvestigationSetupService","ProductSetupService","CollectionCenterSetupService","moment","FilterMatchMode","FilterOperator","data","isInvestigation","isExist","invEdit","invList","dataList","collectionList","reportDeliveryStatusList","paymentStatusList","patientInvestigationList","investigationList","reportDeliveryTypeList","productList","patientInvestigation","cdfromdate","String","Date","format","cdtodate","delivery_status","payment_status","submitted","patientInvestigationRequest","patient_id","aPatient","cdinvestigation_request_date","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","created","patientInvestigationRequestService","commonService","investigationSetupService","productSetupService","collectionCenterSetupService","patientReportService","GetAllInvestigationDeliveryStatus","then","GetAllPaymentStatus","getAll","GetAllReportDeliveryType","show","methods","moneyReceiptPrint","invoice_id","GetInvestigationPayment","Downloadfile","printInvestigationToken","id","GetInvestigationToken","filterInvestigation","filter","el","active","filterProduct","product_category_id","invReset","ddlinvestigation","investigationIsExist","aInvestigation","investigation_id","length","aInv","getById","collection_center_id","addInvestigation","cost","charge","urgent_carge","totalAmount","obj","_investingation_name","investingation_name","building_id","_building_id","_building_name","room_id","_room_name","expected_delivery","expectedHour","report_delivery_duration","quantity","push","calculateTotalAmount","addParticular","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","_uom_name","checkQty","_lstInvestigationParticular","forEach","element","totalPrice","h","today","setHours","getHours","deleteFromList","deleteFromParticularList","add","isContactExist","investigation_request_date","put","result","status","$toast","severity","summary","detail","life","res","fromdate","todate","getDynamic","formatDate","edit","investigation_request_id","getEditFormatted","inv_due_amount","cddob","dob"],"mappings":"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","sourcesContent":["import PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\nimport CollectionCenterSetupService from \"../../service/setup/CollectionCenterSetupService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isInvestigation: true,\r\n      isExist: \"\",\r\n      invEdit: false,\r\n      invList: true,\r\n      dataList: false,\r\n      collectionList: [],\r\n      reportDeliveryStatusList: [],\r\n      paymentStatusList: [],\r\n      patientInvestigationList: [],\r\n      investigationList: [],\r\n      reportDeliveryTypeList: [],\r\n      productList: [],\r\n      patientInvestigation: {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        // cdtodate: moment(\r\n        //   String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        // ).format(\"MM/DD/YYYY\"),\r\n        delivery_status: \"All\",\r\n        payment_status: \"All\",\r\n      },\r\n      submitted: false,\r\n      patientInvestigationRequest: {\r\n        patient_id: \"\",\r\n        aPatient: {},\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.patientInvestigationRequestService =\r\n      new PatientInvestigationRequestService();\r\n    this.commonService = new CommonService();\r\n    this.investigationSetupService = new InvestigationSetupService();\r\n    this.productSetupService = new ProductSetupService();\r\n    this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n\r\n    this.commonService\r\n      .GetAllInvestigationDeliveryStatus()\r\n      .then((data) => (this.reportDeliveryStatusList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllPaymentStatus()\r\n      .then((data) => (this.paymentStatusList = data.data));\r\n\r\n    this.investigationSetupService\r\n      .getAll()\r\n      .then((data) => (this.investigationList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllReportDeliveryType()\r\n      .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n    this.productSetupService\r\n      .getAll()\r\n      .then((data) => (this.productList = data.data));\r\n\r\n    this.show();\r\n  },\r\n  methods: {\r\n    moneyReceiptPrint(invoice_id){\r\n      this.patientReportService.GetInvestigationPayment(invoice_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    printInvestigationToken(id){\r\n      this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    filterInvestigation() {\r\n      return this.investigationList.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n    },\r\n    filterProduct() {\r\n      return this.productList.filter(function (el) {\r\n        return el.product_category_id == 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    invReset() {\r\n      this.isInvestigation = true;\r\n      this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n      this.isExist = \"\";\r\n    },\r\n    investigationIsExist() {\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        var aInv = this.investigationList.filter(function (el) {\r\n          return (\r\n            el.investigation_id ===\r\n            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n          );\r\n        }, this);\r\n\r\n        this.collectionCenterSetupService\r\n          .getById(aInv[0].collection_center_id)\r\n          .then((data) => (this.collectionList = data.data));\r\n\r\n        this.isExist = \"\";\r\n        this.isInvestigation = false;\r\n      }\r\n    },\r\n    addInvestigation() {\r\n      this.submitted = true;\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        //this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          var cost =\r\n            this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n              ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n              : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n          var totalAmount = cost;\r\n\r\n          var obj = {\r\n            investigation_id:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investigation_id,\r\n            _investingation_name:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investingation_name,\r\n\r\n            building_id: this.collectionList._building_id,\r\n            _building_name: this.collectionList._building_name,\r\n            room_id: this.collectionList.room_id,\r\n            _room_name: this.collectionList._room_name,\r\n            expected_delivery: moment(\r\n              String(\r\n                this.expectedHour(\r\n                  this.patientInvestigationRequest.ddlinvestigation\r\n                    .report_delivery_duration\r\n                )\r\n              )\r\n            ).format(\"YYYY-MM-DD h:mm:ss a\"),\r\n\r\n            report_delivery_type:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .report_delivery_type,\r\n\r\n            quantity: 1,\r\n            cost_price: cost,\r\n\r\n            discount_percent:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .discount_percent,\r\n\r\n            total_amount: totalAmount,\r\n          };\r\n\r\n          this.patientInvestigationRequest.lstInvestigationRequestDetails.push(\r\n            obj\r\n          );\r\n\r\n          this.patientInvestigationRequest.cost_price =\r\n            this.patientInvestigationRequest.cost_price + totalAmount;\r\n          //\r\n          this.calculateTotalAmount();\r\n          // this.patientInvestigationRequest.total_amount =\r\n          //   this.patientInvestigationRequest.cost_price -\r\n          //   this.patientInvestigationRequest.discount_amount;\r\n        }\r\n      }\r\n\r\n      this.addParticular(\r\n        this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n      );\r\n    },\r\n    calculateTotalAmount() {\r\n      this.patientInvestigationRequest.total_amount =\r\n        this.patientInvestigationRequest.cost_price +\r\n        this.patientInvestigationRequest.particular_cost_price;\r\n    },\r\n    addParticular(id) {\r\n      this.investigationSetupService\r\n        .getById(id)\r\n        .then((data) => this.getParticularFormatted(data));\r\n    },\r\n    addAParticular(data, qty, pname) {\r\n      if (\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n          .length <= 0\r\n      ) {\r\n        this.isExist = \"Add Investigation\";\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        var obj =\r\n          this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n            function (el) {\r\n              return el.product_id === data.product_id;\r\n            },\r\n            this\r\n          )[0];\r\n        if (obj) {\r\n          qty = parseInt(obj.qty) + qty;\r\n\r\n          this.patientInvestigationRequest.lstInvestigationParticular =\r\n            this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n              function (el) {\r\n                return el.product_id != data.product_id;\r\n              },\r\n              this\r\n            );\r\n        }\r\n\r\n        this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n          product_id: data.product_id,\r\n          _product_name: pname,\r\n          uom_id: data.uom_id,\r\n          _uom_name: data._uom_name,\r\n          cost_price: data.cost_price,\r\n          qty: qty,\r\n        });\r\n\r\n        this.checkQty();\r\n      }\r\n    },\r\n    getParticularFormatted(data) {\r\n      data.data._lstInvestigationParticular.forEach((element) => {\r\n        // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n        //   investigation_id: element.investigation_id,\r\n        //   product_id: element.product_id,\r\n        //   _product_name: element._product_name,\r\n        //   uom_id: element.uom_id,\r\n        //   _uom_name: element._uom_name,\r\n        //   cost_price: element.cost_price,\r\n        //   qty: element.qty,\r\n        // });\r\n\r\n        this.addAParticular(element, 1, element._product_name);\r\n      });\r\n    },\r\n    checkQty() {\r\n      var totalPrice = 0;\r\n      this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n        (element) => {\r\n          if (\r\n            element.qty >\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n              .length\r\n          ) {\r\n            element.qty =\r\n              this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n          } else if (element.qty <= 0) {\r\n            element.qty = 1;\r\n          }\r\n\r\n          element.totalPrice = element.qty * element.cost_price;\r\n          totalPrice += element.totalPrice;\r\n        }\r\n      );\r\n      this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    expectedHour(h) {\r\n      var today = new Date();\r\n      today.setHours(today.getHours() + h);\r\n      return today;\r\n    },\r\n    deleteFromList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return el.investigation_id != data.investigation_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.cost_price =\r\n        this.patientInvestigationRequest.cost_price - data.total_amount;\r\n      this.calculateTotalAmount();\r\n      this.checkQty();\r\n      if (\r\n        !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n      ) {\r\n        this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n        this.patientInvestigationRequest.particular_cost_price = 0;\r\n        this.calculateTotalAmount();\r\n      }\r\n    },\r\n    deleteFromParticularList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationParticular =\r\n        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n          function (el) {\r\n            return el.product_id != data.product_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.particular_cost_price =\r\n        this.patientInvestigationRequest.particular_cost_price -\r\n        data.totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    async add() {\r\n      try {\r\n        if (!this.patientInvestigationRequest.cdinvestigation_request_date) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n            .length\r\n        ) {\r\n          this.isExist = \"Please add a Investigation\";\r\n          return;\r\n        } else {\r\n          this.patientInvestigationRequest.investigation_request_date = moment(\r\n            String(\r\n              this.patientInvestigationRequest.cdinvestigation_request_date\r\n            )\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          let result = await this.patientInvestigationRequestService.put(\r\n            this.patientInvestigationRequest, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Updated Successfully\",\r\n              life: 10000,\r\n            });\r\n            this.show();\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    show() {\r\n      this.submitted = true;\r\n      if (!this.patientInvestigation.cdfromdate) {\r\n        return;\r\n      } else if (!this.patientInvestigation.cdtodate) {\r\n        return;\r\n      } else if (!this.patientInvestigation.delivery_status) {\r\n        return;\r\n      } else if (!this.patientInvestigation.payment_status) {\r\n        return;\r\n      } else {\r\n        this.patientInvestigation.fromdate = moment(\r\n          String(this.patientInvestigation.cdfromdate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigation.todate = moment(\r\n          String(this.patientInvestigation.cdtodate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigationRequestService\r\n          .getDynamic(\r\n            this.patientInvestigation.fromdate,\r\n            this.patientInvestigation.todate,\r\n            this.patientInvestigation.delivery_status,\r\n            this.patientInvestigation.payment_status\r\n          )\r\n          .then((data) => (this.patientInvestigationList = data.data));\r\n      }\r\n      this.invEdit = false;\r\n      this.invList = true;\r\n      this.dataList = true;\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n    edit(obj) {\r\n      this.submitted = false;\r\n      this.patientInvestigationRequestService\r\n        .getById(obj.investigation_request_id)\r\n        .then((data) => this.getEditFormatted(data));\r\n    },\r\n    getEditFormatted(data) {\r\n      if (\r\n        data.data.discount_amount == 0 &&\r\n        data.data.total_amount == data.data.inv_due_amount\r\n      ) {\r\n        //this.addParticular(data.data.lstInvestigationRequestDetails[0].investigation_id);\r\n        this.patientInvestigationRequest = data.data;\r\n        this.checkQty();\r\n        // this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        //   data.data.lstInvestigationRequestDetails;\r\n        // this.patientInvestigationRequest.lstInvestigationParticular =\r\n        //   data.data.lstInvestigationParticular;\r\n        // this.patientInvestigationRequest.cost_price = data.data.cost_price;\r\n        // this.patientInvestigationRequest.total_amount = data.data.total_amount;\r\n        this.patientInvestigationRequest.aPatient.cddob = moment(\r\n          String(this.patientInvestigationRequest.aPatient.dob)\r\n        ).format(\"MM/DD/YYYY\");\r\n        this.patientInvestigationRequest.cdinvestigation_request_date = moment(\r\n          String(this.patientInvestigationRequest.investigation_request_date)\r\n        ).format(\"MM/DD/YYYY\");\r\n        this.patientInvestigationRequest.report_delivery_type = \"Regular\";\r\n\r\n        this.invList = false;\r\n        this.invEdit = true;\r\n      } else {\r\n        this.$toast.add({\r\n          severity: \"warn\",\r\n          summary: \"Warn\",\r\n          detail: \"Cannot edit\",\r\n          life: 3000,\r\n        });\r\n        this.invList = true;\r\n        return;\r\n      }\r\n    },\r\n  },\r\n};"]}]}