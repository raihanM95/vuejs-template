{"remainingRequest":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationList.js","dependencies":[{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\src\\scripts\\front-desk\\PatientInvestigationList.js","mtime":1635424192927},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\DiagnosticCenterManagement_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9EaWFnbm9zdGljQ2VudGVyTWFuYWdlbWVudF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSI7CmltcG9ydCBQYXRpZW50UmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QYXRpZW50UmVwb3J0U2VydmljZSI7CmltcG9ydCBDb21tb25TZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvQ29tbW9uU2VydmljZSI7CmltcG9ydCBJbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvSW52ZXN0aWdhdGlvblNldHVwU2VydmljZSI7CmltcG9ydCBQcm9kdWN0U2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUHJvZHVjdFNldHVwU2VydmljZSI7CmltcG9ydCBDb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgRmlsdGVyTWF0Y2hNb2RlLCBGaWx0ZXJPcGVyYXRvciB9IGZyb20gInByaW1ldnVlL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNJbnZlc3RpZ2F0aW9uOiB0cnVlLAogICAgICBpc0V4aXN0OiAiIiwKICAgICAgaW52RWRpdDogZmFsc2UsCiAgICAgIGludkxpc3Q6IHRydWUsCiAgICAgIGRhdGFMaXN0OiBmYWxzZSwKICAgICAgY29sbGVjdGlvbkxpc3Q6IFtdLAogICAgICByZXBvcnREZWxpdmVyeVN0YXR1c0xpc3Q6IFtdLAogICAgICBwYXltZW50U3RhdHVzTGlzdDogW10sCiAgICAgIHBhdGllbnRJbnZlc3RpZ2F0aW9uTGlzdDogW10sCiAgICAgIGludmVzdGlnYXRpb25MaXN0OiBbXSwKICAgICAgcmVwb3J0RGVsaXZlcnlUeXBlTGlzdDogW10sCiAgICAgIHByb2R1Y3RMaXN0OiBbXSwKICAgICAgcGF0aWVudEludmVzdGlnYXRpb246IHsKICAgICAgICBjZGZyb21kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZHRvZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBkZWxpdmVyeV9zdGF0dXM6ICJBbGwiLAogICAgICAgIHBheW1lbnRfc3RhdHVzOiAiQWxsIgogICAgICB9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBwYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3Q6IHsKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDoge30sCiAgICAgICAgY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6ICJSZWd1bGFyIiwKICAgICAgICBsc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHM6IFtdLAogICAgICAgIGxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyOiBbXSwKICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAwLAogICAgICAgIGRpc2NvdW50X2Ftb3VudDogMCwKICAgICAgICBjb3N0X3ByaWNlOiAwLAogICAgICAgIHBhcnRpY3VsYXJfY29zdF9wcmljZTogMCwKICAgICAgICB0b3RhbF9hbW91bnQ6IDAKICAgICAgfSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSA9IG5ldyBQYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlID0gbmV3IEludmVzdGlnYXRpb25TZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucHJvZHVjdFNldHVwU2VydmljZSA9IG5ldyBQcm9kdWN0U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbGxlY3Rpb25DZW50ZXJTZXR1cFNlcnZpY2UgPSBuZXcgQ29sbGVjdGlvbkNlbnRlclNldHVwU2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZSA9IG5ldyBQYXRpZW50UmVwb3J0U2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEludmVzdGlnYXRpb25EZWxpdmVyeVN0YXR1cygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlcG9ydERlbGl2ZXJ5U3RhdHVzTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbFBheW1lbnRTdGF0dXMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYXltZW50U3RhdHVzTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5pbnZlc3RpZ2F0aW9uU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmludmVzdGlnYXRpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsUmVwb3J0RGVsaXZlcnlUeXBlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVwb3J0RGVsaXZlcnlUeXBlTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5wcm9kdWN0U2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByb2R1Y3RMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLnNob3coKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG1vbmV5UmVjZWlwdFByaW50OiBmdW5jdGlvbiBtb25leVJlY2VpcHRQcmludChpbnZvaWNlX2lkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coaW52b2ljZV9pZCk7CiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuR2V0SW52ZXN0aWdhdGlvblBheW1lbnQoaW52b2ljZV9pZCwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIuY29tbW9uU2VydmljZS5Eb3dubG9hZGZpbGUoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcHJpbnRJbnZlc3RpZ2F0aW9uVG9rZW46IGZ1bmN0aW9uIHByaW50SW52ZXN0aWdhdGlvblRva2VuKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRJbnZlc3RpZ2F0aW9uVG9rZW4oaWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbHRlckludmVzdGlnYXRpb246IGZ1bmN0aW9uIGZpbHRlckludmVzdGlnYXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGZpbHRlclByb2R1Y3Q6IGZ1bmN0aW9uIGZpbHRlclByb2R1Y3QoKSB7CiAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9jYXRlZ29yeV9pZCA9PSAxICYmIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBpbnZSZXNldDogZnVuY3Rpb24gaW52UmVzZXQoKSB7CiAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbiA9ICIiOwogICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgIH0sCiAgICBpbnZlc3RpZ2F0aW9uSXNFeGlzdDogZnVuY3Rpb24gaW52ZXN0aWdhdGlvbklzRXhpc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGFJbnZlc3RpZ2F0aW9uID0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuaW52ZXN0aWdhdGlvbl9pZCA9PT0gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChhSW52ZXN0aWdhdGlvbi5sZW5ndGgpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiVGhpcyBJbnZlc3RpZ2F0aW9uIGFscmVhZHkgYWRkZWQiOwogICAgICAgIHRoaXMuaXNJbnZlc3RpZ2F0aW9uID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGFJbnYgPSB0aGlzLmludmVzdGlnYXRpb25MaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgdGhpcy5jb2xsZWN0aW9uQ2VudGVyU2V0dXBTZXJ2aWNlLmdldEJ5SWQoYUludlswXS5jb2xsZWN0aW9uX2NlbnRlcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5jb2xsZWN0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiIjsKICAgICAgICB0aGlzLmlzSW52ZXN0aWdhdGlvbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYWRkSW52ZXN0aWdhdGlvbjogZnVuY3Rpb24gYWRkSW52ZXN0aWdhdGlvbigpIHsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICB2YXIgYUludmVzdGlnYXRpb24gPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pbnZlc3RpZ2F0aW9uX2lkID09PSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmludmVzdGlnYXRpb25faWQ7CiAgICAgIH0sIHRoaXMpOwoKICAgICAgaWYgKGFJbnZlc3RpZ2F0aW9uLmxlbmd0aCkgewogICAgICAgIHRoaXMuaXNFeGlzdCA9ICJUaGlzIEludmVzdGlnYXRpb24gYWxyZWFkeSBhZGRlZCI7IC8vdGhpcy5pc0ludmVzdGlnYXRpb24gPSB0cnVlOwoKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICAgICAgdmFyIGNvc3QgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5yZXBvcnRfZGVsaXZlcnlfdHlwZSA9PSAiUmVndWxhciIgPyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmNoYXJnZSA6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24udXJnZW50X2NhcmdlOwogICAgICAgICAgdmFyIHRvdGFsQW1vdW50ID0gY29zdDsKICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGludmVzdGlnYXRpb25faWQ6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aWdhdGlvbl9pZCwKICAgICAgICAgICAgX2ludmVzdGluZ2F0aW9uX25hbWU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24uaW52ZXN0aW5nYXRpb25fbmFtZSwKICAgICAgICAgICAgYnVpbGRpbmdfaWQ6IHRoaXMuY29sbGVjdGlvbkxpc3QuX2J1aWxkaW5nX2lkLAogICAgICAgICAgICBfYnVpbGRpbmdfbmFtZTogdGhpcy5jb2xsZWN0aW9uTGlzdC5fYnVpbGRpbmdfbmFtZSwKICAgICAgICAgICAgcm9vbV9pZDogdGhpcy5jb2xsZWN0aW9uTGlzdC5yb29tX2lkLAogICAgICAgICAgICBfcm9vbV9uYW1lOiB0aGlzLmNvbGxlY3Rpb25MaXN0Ll9yb29tX25hbWUsCiAgICAgICAgICAgIGV4cGVjdGVkX2RlbGl2ZXJ5OiBtb21lbnQoU3RyaW5nKHRoaXMuZXhwZWN0ZWRIb3VyKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24ucmVwb3J0X2RlbGl2ZXJ5X2R1cmF0aW9uKSkpLmZvcm1hdCgiWVlZWS1NTS1ERCBoOm1tOnNzIGEiKSwKICAgICAgICAgICAgcmVwb3J0X2RlbGl2ZXJ5X3R5cGU6IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmRkbGludmVzdGlnYXRpb24ucmVwb3J0X2RlbGl2ZXJ5X3R5cGUsCiAgICAgICAgICAgIHF1YW50aXR5OiAxLAogICAgICAgICAgICBjb3N0X3ByaWNlOiBjb3N0LAogICAgICAgICAgICBkaXNjb3VudF9wZXJjZW50OiB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kZGxpbnZlc3RpZ2F0aW9uLmRpc2NvdW50X3BlcmNlbnQsCiAgICAgICAgICAgIHRvdGFsX2Ftb3VudDogdG90YWxBbW91bnQKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUmVxdWVzdERldGFpbHMucHVzaChvYmopOwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKyB0b3RhbEFtb3VudDsgLy8KCiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFsQW1vdW50KCk7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9CiAgICAgICAgICAvLyAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLQogICAgICAgICAgLy8gICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5kaXNjb3VudF9hbW91bnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFkZFBhcnRpY3VsYXIodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuZGRsaW52ZXN0aWdhdGlvbi5pbnZlc3RpZ2F0aW9uX2lkKTsKICAgIH0sCiAgICBjYWxjdWxhdGVUb3RhbEFtb3VudDogZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxBbW91bnQoKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnRvdGFsX2Ftb3VudCA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgKyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2U7CiAgICB9LAogICAgYWRkUGFydGljdWxhcjogZnVuY3Rpb24gYWRkUGFydGljdWxhcihpZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuaW52ZXN0aWdhdGlvblNldHVwU2VydmljZS5nZXRCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5nZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRBUGFydGljdWxhcjogZnVuY3Rpb24gYWRkQVBhcnRpY3VsYXIoZGF0YSwgcXR5LCBwbmFtZSkgewogICAgICBpZiAodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIkFkZCBJbnZlc3RpZ2F0aW9uIjsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdmFyIG9iaiA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkID09PSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgICAgfSwgdGhpcylbMF07CgogICAgICAgIGlmIChvYmopIHsKICAgICAgICAgIHF0eSA9IHBhcnNlSW50KG9iai5xdHkpICsgcXR5OwogICAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbC5wcm9kdWN0X2lkICE9IGRhdGEucHJvZHVjdF9pZDsKICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIucHVzaCh7CiAgICAgICAgICBwcm9kdWN0X2lkOiBkYXRhLnByb2R1Y3RfaWQsCiAgICAgICAgICBfcHJvZHVjdF9uYW1lOiBwbmFtZSwKICAgICAgICAgIHVvbV9pZDogZGF0YS51b21faWQsCiAgICAgICAgICBfdW9tX25hbWU6IGRhdGEuX3VvbV9uYW1lLAogICAgICAgICAgY29zdF9wcmljZTogZGF0YS5jb3N0X3ByaWNlLAogICAgICAgICAgcXR5OiBxdHkKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNoZWNrUXR5KCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRQYXJ0aWN1bGFyRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBkYXRhLmRhdGEuX2xzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhci5wdXNoKHsKICAgICAgICAvLyAgIGludmVzdGlnYXRpb25faWQ6IGVsZW1lbnQuaW52ZXN0aWdhdGlvbl9pZCwKICAgICAgICAvLyAgIHByb2R1Y3RfaWQ6IGVsZW1lbnQucHJvZHVjdF9pZCwKICAgICAgICAvLyAgIF9wcm9kdWN0X25hbWU6IGVsZW1lbnQuX3Byb2R1Y3RfbmFtZSwKICAgICAgICAvLyAgIHVvbV9pZDogZWxlbWVudC51b21faWQsCiAgICAgICAgLy8gICBfdW9tX25hbWU6IGVsZW1lbnQuX3VvbV9uYW1lLAogICAgICAgIC8vICAgY29zdF9wcmljZTogZWxlbWVudC5jb3N0X3ByaWNlLAogICAgICAgIC8vICAgcXR5OiBlbGVtZW50LnF0eSwKICAgICAgICAvLyB9KTsKICAgICAgICBfdGhpczYuYWRkQVBhcnRpY3VsYXIoZWxlbWVudCwgMSwgZWxlbWVudC5fcHJvZHVjdF9uYW1lKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tRdHk6IGZ1bmN0aW9uIGNoZWNrUXR5KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciB0b3RhbFByaWNlID0gMDsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblBhcnRpY3VsYXIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGlmIChlbGVtZW50LnF0eSA+IF90aGlzNy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgZWxlbWVudC5xdHkgPSBfdGhpczcucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGg7CiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnF0eSA8PSAwKSB7CiAgICAgICAgICBlbGVtZW50LnF0eSA9IDE7CiAgICAgICAgfQoKICAgICAgICBlbGVtZW50LnRvdGFsUHJpY2UgPSBlbGVtZW50LnF0eSAqIGVsZW1lbnQuY29zdF9wcmljZTsKICAgICAgICB0b3RhbFByaWNlICs9IGVsZW1lbnQudG90YWxQcmljZTsKICAgICAgfSk7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IHRvdGFsUHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBleHBlY3RlZEhvdXI6IGZ1bmN0aW9uIGV4cGVjdGVkSG91cihoKSB7CiAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIHRvZGF5LnNldEhvdXJzKHRvZGF5LmdldEhvdXJzKCkgKyBoKTsKICAgICAgcmV0dXJuIHRvZGF5OwogICAgfSwKICAgIGRlbGV0ZUZyb21MaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tTGlzdChkYXRhKSB7CiAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscyA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmludmVzdGlnYXRpb25faWQgIT0gZGF0YS5pbnZlc3RpZ2F0aW9uX2lkOwogICAgICB9LCB0aGlzKTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY29zdF9wcmljZSA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNvc3RfcHJpY2UgLSBkYXRhLnRvdGFsX2Ftb3VudDsKICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgICB0aGlzLmNoZWNrUXR5KCk7CgogICAgICBpZiAoIXRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IFtdOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LnBhcnRpY3VsYXJfY29zdF9wcmljZSA9IDA7CiAgICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbEFtb3VudCgpOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlRnJvbVBhcnRpY3VsYXJMaXN0OiBmdW5jdGlvbiBkZWxldGVGcm9tUGFydGljdWxhckxpc3QoZGF0YSkgewogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhciA9IHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwucHJvZHVjdF9pZCAhPSBkYXRhLnByb2R1Y3RfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgPSB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5wYXJ0aWN1bGFyX2Nvc3RfcHJpY2UgLSBkYXRhLnRvdGFsUHJpY2U7CiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxBbW91bnQoKTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuY2RpbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghX3RoaXM4LmlzQ29udGFjdEV4aXN0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzOC5pc0V4aXN0ID0gIlBsZWFzZSBhZGQgYSBJbnZlc3RpZ2F0aW9uIjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5pbnZlc3RpZ2F0aW9uX3JlcXVlc3RfZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jZGludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UucHV0KF90aGlzOC5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QsIF90aGlzOCk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiVXBkYXRlZCBTdWNlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczguc2hvdygpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogcmVzdWx0LnJlcywKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIxOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDIxXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsKCiAgICAgIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5jZGZyb21kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmNkdG9kYXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmRlbGl2ZXJ5X3N0YXR1cykgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5wYXltZW50X3N0YXR1cykgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmZyb21kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmNkZnJvbWRhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLnRvZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5jZHRvZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZS5nZXREeW5hbWljKHRoaXMucGF0aWVudEludmVzdGlnYXRpb24uZnJvbWRhdGUsIHRoaXMucGF0aWVudEludmVzdGlnYXRpb24udG9kYXRlLCB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uLmRlbGl2ZXJ5X3N0YXR1cywgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvbi5wYXltZW50X3N0YXR1cykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzOS5wYXRpZW50SW52ZXN0aWdhdGlvbkxpc3QgPSBkYXRhLmRhdGE7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW52RWRpdCA9IGZhbHNlOwogICAgICB0aGlzLmludkxpc3QgPSB0cnVlOwogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdChvYmopIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlLmdldEJ5SWQob2JqLmludmVzdGlnYXRpb25fcmVxdWVzdF9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczEwLmdldEVkaXRGb3JtYXR0ZWQoZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldEVkaXRGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldEVkaXRGb3JtYXR0ZWQoZGF0YSkgewogICAgICBpZiAoZGF0YS5kYXRhLmRpc2NvdW50X2Ftb3VudCA9PSAwICYmIGRhdGEuZGF0YS50b3RhbF9hbW91bnQgPT0gZGF0YS5kYXRhLmludl9kdWVfYW1vdW50KSB7CiAgICAgICAgLy90aGlzLmFkZFBhcnRpY3VsYXIoZGF0YS5kYXRhLmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlsc1swXS5pbnZlc3RpZ2F0aW9uX2lkKTsKICAgICAgICB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdCA9IGRhdGEuZGF0YTsKICAgICAgICB0aGlzLmNoZWNrUXR5KCk7IC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25SZXF1ZXN0RGV0YWlscyA9CiAgICAgICAgLy8gICBkYXRhLmRhdGEubHN0SW52ZXN0aWdhdGlvblJlcXVlc3REZXRhaWxzOwogICAgICAgIC8vIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmxzdEludmVzdGlnYXRpb25QYXJ0aWN1bGFyID0KICAgICAgICAvLyAgIGRhdGEuZGF0YS5sc3RJbnZlc3RpZ2F0aW9uUGFydGljdWxhcjsKICAgICAgICAvLyB0aGlzLnBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdC5jb3N0X3ByaWNlID0gZGF0YS5kYXRhLmNvc3RfcHJpY2U7CiAgICAgICAgLy8gdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QudG90YWxfYW1vdW50ID0gZGF0YS5kYXRhLnRvdGFsX2Ftb3VudDsKCiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QuYVBhdGllbnQuY2Rkb2IgPSBtb21lbnQoU3RyaW5nKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmFQYXRpZW50LmRvYikpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICAgIHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmNkaW52ZXN0aWdhdGlvbl9yZXF1ZXN0X2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMucGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0LmludmVzdGlnYXRpb25fcmVxdWVzdF9kYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICAgICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3QucmVwb3J0X2RlbGl2ZXJ5X3R5cGUgPSAiUmVndWxhciI7CiAgICAgICAgdGhpcy5pbnZMaXN0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5pbnZFZGl0ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0b2FzdC5hZGQoewogICAgICAgICAgc2V2ZXJpdHk6ICJ3YXJuIiwKICAgICAgICAgIHN1bW1hcnk6ICJXYXJuIiwKICAgICAgICAgIGRldGFpbDogIkNhbm5vdCBlZGl0IiwKICAgICAgICAgIGxpZmU6IDMwMDAKICAgICAgICB9KTsKICAgICAgICB0aGlzLmludkxpc3QgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["F:/SVN PROJECTS/DiagnosticCenterManagement_Client/trunk/src/scripts/front-desk/PatientInvestigationList.js"],"names":["PatientInvestigationRequestService","PatientReportService","CommonService","InvestigationSetupService","ProductSetupService","CollectionCenterSetupService","moment","FilterMatchMode","FilterOperator","data","isInvestigation","isExist","invEdit","invList","dataList","collectionList","reportDeliveryStatusList","paymentStatusList","patientInvestigationList","investigationList","reportDeliveryTypeList","productList","patientInvestigation","cdfromdate","String","Date","format","cdtodate","setDate","getDate","delivery_status","payment_status","submitted","patientInvestigationRequest","patient_id","aPatient","cdinvestigation_request_date","report_delivery_type","lstInvestigationRequestDetails","lstInvestigationParticular","discount_percent","discount_amount","cost_price","particular_cost_price","total_amount","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","created","patientInvestigationRequestService","commonService","investigationSetupService","productSetupService","collectionCenterSetupService","patientReportService","GetAllInvestigationDeliveryStatus","then","GetAllPaymentStatus","getAll","GetAllReportDeliveryType","show","methods","moneyReceiptPrint","invoice_id","console","log","GetInvestigationPayment","Downloadfile","printInvestigationToken","id","GetInvestigationToken","filterInvestigation","filter","el","active","filterProduct","product_category_id","invReset","ddlinvestigation","investigationIsExist","aInvestigation","investigation_id","length","aInv","getById","collection_center_id","addInvestigation","cost","charge","urgent_carge","totalAmount","obj","_investingation_name","investingation_name","building_id","_building_id","_building_name","room_id","_room_name","expected_delivery","expectedHour","report_delivery_duration","quantity","push","calculateTotalAmount","addParticular","getParticularFormatted","addAParticular","qty","pname","product_id","parseInt","_product_name","uom_id","_uom_name","checkQty","_lstInvestigationParticular","forEach","element","totalPrice","h","today","setHours","getHours","deleteFromList","deleteFromParticularList","add","isContactExist","investigation_request_date","put","result","status","$toast","severity","summary","detail","life","res","fromdate","todate","getDynamic","formatDate","edit","investigation_request_id","getEditFormatted","inv_due_amount","cddob","dob"],"mappings":"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","sourcesContent":["import PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport InvestigationSetupService from \"../../service/setup/InvestigationSetupService\";\r\nimport ProductSetupService from \"../../service/setup/ProductSetupService\";\r\nimport CollectionCenterSetupService from \"../../service/setup/CollectionCenterSetupService\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isInvestigation: true,\r\n      isExist: \"\",\r\n      invEdit: false,\r\n      invList: true,\r\n      dataList: false,\r\n      collectionList: [],\r\n      reportDeliveryStatusList: [],\r\n      paymentStatusList: [],\r\n      patientInvestigationList: [],\r\n      investigationList: [],\r\n      reportDeliveryTypeList: [],\r\n      productList: [],\r\n      patientInvestigation: {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n        delivery_status: \"All\",\r\n        payment_status: \"All\",\r\n      },\r\n      submitted: false,\r\n      patientInvestigationRequest: {\r\n        patient_id: \"\",\r\n        aPatient: {},\r\n        cdinvestigation_request_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        report_delivery_type: \"Regular\",\r\n        lstInvestigationRequestDetails: [],\r\n        lstInvestigationParticular: [],\r\n        discount_percent: 0,\r\n        discount_amount: 0,\r\n        cost_price: 0,\r\n        particular_cost_price: 0,\r\n        total_amount: 0,\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.patientInvestigationRequestService =\r\n      new PatientInvestigationRequestService();\r\n    this.commonService = new CommonService();\r\n    this.investigationSetupService = new InvestigationSetupService();\r\n    this.productSetupService = new ProductSetupService();\r\n    this.collectionCenterSetupService = new CollectionCenterSetupService();\r\n    this.patientReportService = new PatientReportService();\r\n\r\n    this.commonService\r\n      .GetAllInvestigationDeliveryStatus()\r\n      .then((data) => (this.reportDeliveryStatusList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllPaymentStatus()\r\n      .then((data) => (this.paymentStatusList = data.data));\r\n\r\n    this.investigationSetupService\r\n      .getAll()\r\n      .then((data) => (this.investigationList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllReportDeliveryType()\r\n      .then((data) => (this.reportDeliveryTypeList = data.data));\r\n\r\n    this.productSetupService\r\n      .getAll()\r\n      .then((data) => (this.productList = data.data));\r\n\r\n    this.show();\r\n  },\r\n  methods: {\r\n    moneyReceiptPrint(invoice_id){\r\n      console.log(invoice_id);\r\n      this.patientReportService.GetInvestigationPayment(invoice_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    printInvestigationToken(id){\r\n      this.patientReportService.GetInvestigationToken(id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    filterInvestigation() {\r\n      return this.investigationList.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n    },\r\n    filterProduct() {\r\n      return this.productList.filter(function (el) {\r\n        return el.product_category_id == 1 && el.active == true;\r\n      }, this);\r\n    },\r\n    invReset() {\r\n      this.isInvestigation = true;\r\n      this.patientInvestigationRequest.ddlinvestigation = \"\";\r\n      this.isExist = \"\";\r\n    },\r\n    investigationIsExist() {\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        var aInv = this.investigationList.filter(function (el) {\r\n          return (\r\n            el.investigation_id ===\r\n            this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n          );\r\n        }, this);\r\n\r\n        this.collectionCenterSetupService\r\n          .getById(aInv[0].collection_center_id)\r\n          .then((data) => (this.collectionList = data.data));\r\n\r\n        this.isExist = \"\";\r\n        this.isInvestigation = false;\r\n      }\r\n    },\r\n    addInvestigation() {\r\n      this.submitted = true;\r\n      var aInvestigation =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return (\r\n              el.investigation_id ===\r\n              this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n            );\r\n          },\r\n          this\r\n        );\r\n\r\n      if (aInvestigation.length) {\r\n        this.isExist = \"This Investigation already added\";\r\n        //this.isInvestigation = true;\r\n        return;\r\n      } else {\r\n        if (!this.patientInvestigationRequest.ddlinvestigation) {\r\n          return;\r\n        } else if (!this.patientInvestigationRequest.report_delivery_type) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.cdinvestigation_request_date\r\n        ) {\r\n          return;\r\n        } else {\r\n          this.isExist = \"\";\r\n          var cost =\r\n            this.patientInvestigationRequest.report_delivery_type == \"Regular\"\r\n              ? this.patientInvestigationRequest.ddlinvestigation.charge\r\n              : this.patientInvestigationRequest.ddlinvestigation.urgent_carge;\r\n\r\n          var totalAmount = cost;\r\n\r\n          var obj = {\r\n            investigation_id:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investigation_id,\r\n            _investingation_name:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .investingation_name,\r\n\r\n            building_id: this.collectionList._building_id,\r\n            _building_name: this.collectionList._building_name,\r\n            room_id: this.collectionList.room_id,\r\n            _room_name: this.collectionList._room_name,\r\n            expected_delivery: moment(\r\n              String(\r\n                this.expectedHour(\r\n                  this.patientInvestigationRequest.ddlinvestigation\r\n                    .report_delivery_duration\r\n                )\r\n              )\r\n            ).format(\"YYYY-MM-DD h:mm:ss a\"),\r\n\r\n            report_delivery_type:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .report_delivery_type,\r\n\r\n            quantity: 1,\r\n            cost_price: cost,\r\n\r\n            discount_percent:\r\n              this.patientInvestigationRequest.ddlinvestigation\r\n                .discount_percent,\r\n\r\n            total_amount: totalAmount,\r\n          };\r\n\r\n          this.patientInvestigationRequest.lstInvestigationRequestDetails.push(\r\n            obj\r\n          );\r\n\r\n          this.patientInvestigationRequest.cost_price =\r\n            this.patientInvestigationRequest.cost_price + totalAmount;\r\n          //\r\n          this.calculateTotalAmount();\r\n          // this.patientInvestigationRequest.total_amount =\r\n          //   this.patientInvestigationRequest.cost_price -\r\n          //   this.patientInvestigationRequest.discount_amount;\r\n        }\r\n      }\r\n\r\n      this.addParticular(\r\n        this.patientInvestigationRequest.ddlinvestigation.investigation_id\r\n      );\r\n    },\r\n    calculateTotalAmount() {\r\n      this.patientInvestigationRequest.total_amount =\r\n        this.patientInvestigationRequest.cost_price +\r\n        this.patientInvestigationRequest.particular_cost_price;\r\n    },\r\n    addParticular(id) {\r\n      this.investigationSetupService\r\n        .getById(id)\r\n        .then((data) => this.getParticularFormatted(data));\r\n    },\r\n    addAParticular(data, qty, pname) {\r\n      if (\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n          .length <= 0\r\n      ) {\r\n        this.isExist = \"Add Investigation\";\r\n        return;\r\n      } else {\r\n        this.isExist = \"\";\r\n        var obj =\r\n          this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n            function (el) {\r\n              return el.product_id === data.product_id;\r\n            },\r\n            this\r\n          )[0];\r\n        if (obj) {\r\n          qty = parseInt(obj.qty) + qty;\r\n\r\n          this.patientInvestigationRequest.lstInvestigationParticular =\r\n            this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n              function (el) {\r\n                return el.product_id != data.product_id;\r\n              },\r\n              this\r\n            );\r\n        }\r\n\r\n        this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n          product_id: data.product_id,\r\n          _product_name: pname,\r\n          uom_id: data.uom_id,\r\n          _uom_name: data._uom_name,\r\n          cost_price: data.cost_price,\r\n          qty: qty,\r\n        });\r\n\r\n        this.checkQty();\r\n      }\r\n    },\r\n    getParticularFormatted(data) {\r\n      data.data._lstInvestigationParticular.forEach((element) => {\r\n        // this.patientInvestigationRequest.lstInvestigationParticular.push({\r\n        //   investigation_id: element.investigation_id,\r\n        //   product_id: element.product_id,\r\n        //   _product_name: element._product_name,\r\n        //   uom_id: element.uom_id,\r\n        //   _uom_name: element._uom_name,\r\n        //   cost_price: element.cost_price,\r\n        //   qty: element.qty,\r\n        // });\r\n\r\n        this.addAParticular(element, 1, element._product_name);\r\n      });\r\n    },\r\n    checkQty() {\r\n      var totalPrice = 0;\r\n      this.patientInvestigationRequest.lstInvestigationParticular.forEach(\r\n        (element) => {\r\n          if (\r\n            element.qty >\r\n            this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n              .length\r\n          ) {\r\n            element.qty =\r\n              this.patientInvestigationRequest.lstInvestigationRequestDetails.length;\r\n          } else if (element.qty <= 0) {\r\n            element.qty = 1;\r\n          }\r\n\r\n          element.totalPrice = element.qty * element.cost_price;\r\n          totalPrice += element.totalPrice;\r\n        }\r\n      );\r\n      this.patientInvestigationRequest.particular_cost_price = totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    expectedHour(h) {\r\n      var today = new Date();\r\n      today.setHours(today.getHours() + h);\r\n      return today;\r\n    },\r\n    deleteFromList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        this.patientInvestigationRequest.lstInvestigationRequestDetails.filter(\r\n          function (el) {\r\n            return el.investigation_id != data.investigation_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.cost_price =\r\n        this.patientInvestigationRequest.cost_price - data.total_amount;\r\n      this.calculateTotalAmount();\r\n      this.checkQty();\r\n      if (\r\n        !this.patientInvestigationRequest.lstInvestigationRequestDetails.length\r\n      ) {\r\n        this.patientInvestigationRequest.lstInvestigationParticular = [];\r\n        this.patientInvestigationRequest.particular_cost_price = 0;\r\n        this.calculateTotalAmount();\r\n      }\r\n    },\r\n    deleteFromParticularList(data) {\r\n      this.patientInvestigationRequest.lstInvestigationParticular =\r\n        this.patientInvestigationRequest.lstInvestigationParticular.filter(\r\n          function (el) {\r\n            return el.product_id != data.product_id;\r\n          },\r\n          this\r\n        );\r\n      this.patientInvestigationRequest.particular_cost_price =\r\n        this.patientInvestigationRequest.particular_cost_price -\r\n        data.totalPrice;\r\n      this.calculateTotalAmount();\r\n    },\r\n    async add() {\r\n      try {\r\n        if (!this.patientInvestigationRequest.cdinvestigation_request_date) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else if (\r\n          !this.patientInvestigationRequest.lstInvestigationRequestDetails\r\n            .length\r\n        ) {\r\n          this.isExist = \"Please add a Investigation\";\r\n          return;\r\n        } else {\r\n          this.patientInvestigationRequest.investigation_request_date = moment(\r\n            String(\r\n              this.patientInvestigationRequest.cdinvestigation_request_date\r\n            )\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          let result = await this.patientInvestigationRequestService.put(\r\n            this.patientInvestigationRequest, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Sucess\",\r\n              detail: \"Updated Sucessfully\",\r\n              life: 10000,\r\n            });\r\n            this.show();\r\n          } else if (result.status === 401) {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Error\",\r\n              detail: result.data,\r\n              life: 10000,\r\n            });\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Faild\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Faild\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    show() {\r\n      this.submitted = true;\r\n      if (!this.patientInvestigation.cdfromdate) {\r\n        return;\r\n      } else if (!this.patientInvestigation.cdtodate) {\r\n        return;\r\n      } else if (!this.patientInvestigation.delivery_status) {\r\n        return;\r\n      } else if (!this.patientInvestigation.payment_status) {\r\n        return;\r\n      } else {\r\n        this.patientInvestigation.fromdate = moment(\r\n          String(this.patientInvestigation.cdfromdate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigation.todate = moment(\r\n          String(this.patientInvestigation.cdtodate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.patientInvestigationRequestService\r\n          .getDynamic(\r\n            this.patientInvestigation.fromdate,\r\n            this.patientInvestigation.todate,\r\n            this.patientInvestigation.delivery_status,\r\n            this.patientInvestigation.payment_status\r\n          )\r\n          .then((data) => (this.patientInvestigationList = data.data));\r\n      }\r\n      this.invEdit = false;\r\n      this.invList = true;\r\n      this.dataList = true;\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n    edit(obj) {\r\n      this.submitted = false;\r\n      this.patientInvestigationRequestService\r\n        .getById(obj.investigation_request_id)\r\n        .then((data) => this.getEditFormatted(data));\r\n    },\r\n    getEditFormatted(data) {\r\n      if (\r\n        data.data.discount_amount == 0 &&\r\n        data.data.total_amount == data.data.inv_due_amount\r\n      ) {\r\n        //this.addParticular(data.data.lstInvestigationRequestDetails[0].investigation_id);\r\n        this.patientInvestigationRequest = data.data;\r\n        this.checkQty();\r\n        // this.patientInvestigationRequest.lstInvestigationRequestDetails =\r\n        //   data.data.lstInvestigationRequestDetails;\r\n        // this.patientInvestigationRequest.lstInvestigationParticular =\r\n        //   data.data.lstInvestigationParticular;\r\n        // this.patientInvestigationRequest.cost_price = data.data.cost_price;\r\n        // this.patientInvestigationRequest.total_amount = data.data.total_amount;\r\n        this.patientInvestigationRequest.aPatient.cddob = moment(\r\n          String(this.patientInvestigationRequest.aPatient.dob)\r\n        ).format(\"MM/DD/YYYY\");\r\n        this.patientInvestigationRequest.cdinvestigation_request_date = moment(\r\n          String(this.patientInvestigationRequest.investigation_request_date)\r\n        ).format(\"MM/DD/YYYY\");\r\n        this.patientInvestigationRequest.report_delivery_type = \"Regular\";\r\n\r\n        this.invList = false;\r\n        this.invEdit = true;\r\n      } else {\r\n        this.$toast.add({\r\n          severity: \"warn\",\r\n          summary: \"Warn\",\r\n          detail: \"Cannot edit\",\r\n          life: 3000,\r\n        });\r\n        this.invList = true;\r\n        return;\r\n      }\r\n    },\r\n  },\r\n};"]}]}