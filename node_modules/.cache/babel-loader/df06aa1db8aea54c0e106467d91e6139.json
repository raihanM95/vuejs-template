{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\emergency\\PatientRegTreatment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\emergency\\PatientRegTreatment.js","mtime":1672815128125},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L1BhdGllbnRSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAiLi4vLi4vc2NyaXB0cy92YWxpZGF0aW9uIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yIH0gZnJvbSAicHJpbWV2dWUvYXBpIjsgLy8gU2VydmljZQoKaW1wb3J0IFNlcnZpY2VTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9TZXJ2aWNlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IEVtZXJnZW5jeVNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9lbWVyZ2VuY3kvRW1lcmdlbmN5U2VydmljZSI7IC8vIFByZXNjcmlwdGlvbgoKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgQWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3ByZXNjcmlwdGlvbi9BZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlIjsKaW1wb3J0IFByZXNjcmlwdGlvblJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSI7CmltcG9ydCBQcmVzY3JpcHRpb24gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9QcmVzY3JpcHRpb24iOyAvLyBIaXN0b3J5CgppbXBvcnQgUGF0aWVudEhpc3RvcnkgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9QYXRpZW50SGlzdG9yeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBQcmVzY3JpcHRpb246IFByZXNjcmlwdGlvbiwKICAgIFBhdGllbnRIaXN0b3J5OiBQYXRpZW50SGlzdG9yeQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2U6IDEwMCwKICAgICAgaXNDb250YWN0RXhpc3Q6ICIiLAogICAgICBpc1ZhbGlkOiAiIiwKICAgICAgaXNFbWFpbFZhbGlkOiAiIiwKICAgICAgbmV3SW5mbzogZmFsc2UsCiAgICAgIGRhdGFMaXN0OiB0cnVlLAogICAgICByZWxhdGlvbkxpc3Q6IFtdLAogICAgICBibG9vZEdyb3VwTGlzdDogW10sCiAgICAgIGdlbmRlckxpc3Q6IFtdLAogICAgICBwYXRpZW50UmVnaXN0cmF0aW9uTGlzdDogW10sCiAgICAgIHBhdGllbnRSZWdpc3RyYXRpb246IHsKICAgICAgICBhZ2VfeWVhcjogIjAiLAogICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgIGFnZV9kYXk6ICIwIgogICAgICB9LAogICAgICBmaWx0ZXJzOiB7CiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgfSwKICAgICAgICBuYW1lOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgfQogICAgICB9LAogICAgICBpbml0RmlsdGVyczogZnVuY3Rpb24gaW5pdEZpbHRlcnMoKSB7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gewogICAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgICAgfSwKICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCwKICAgICAgICAgICAgY29uc3RyYWludHM6IFt7CiAgICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICAgICAgfV0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICAvLyBTZXJ2aWNlCiAgICAgIHNlcnZpY2VUYWtlbkxpc3REaWFsb2c6IGZhbHNlLAogICAgICBsc3RUYWtlblNlcnZpY2U6IFtdLAogICAgICBzZXJ2aWNlRGlhbG9nOiBmYWxzZSwKICAgICAgZW1lcmdlbmN5U2VydmljZU9iajogewogICAgICAgIGxzdFNlcnZpY2U6IFtdCiAgICAgIH0sCiAgICAgIC8vIFByZXNjcmlwdGlvbgogICAgICBpc0RvY3RvcjogZmFsc2UsCiAgICAgIGFkbWl0dGVkUGF0aWVudEluZm86IHt9LAogICAgICBhZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvOiB7CiAgICAgICAgY2RwcmVzY3JpcHRpb25fZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgY2Rmb2xvd3VwX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgNykpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIikKICAgICAgfSwKICAgICAgLy8gSGlzdG9yeQogICAgICBpc0hpc3Rvcnk6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gcGFzdCBkYXRlLXllYXIgZGlzYWJsZWQKICAgIC8vIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAvLyBsZXQgbW9udGggPSB0b2RheS5nZXRNb250aCgpOwogICAgLy8gbGV0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOwogICAgLy8gbGV0IHByZXZNb250aCA9IChtb250aCA9PT0gMCkgPyAxMSA6IG1vbnRoIC0gMDsKICAgIC8vIGxldCBwcmV2WWVhciA9IChwcmV2TW9udGggPT09IDExKSA/IHllYXIgLSAwIDogeWVhcjsKICAgIC8vIHRoaXMubWluRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAvLyB0aGlzLm1pbkRhdGUuc2V0TW9udGgocHJldk1vbnRoKTsKICAgIC8vIHRoaXMubWluRGF0ZS5zZXRGdWxsWWVhcihwcmV2WWVhcik7CiAgICB0aGlzLm1pbkRhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyAxKSk7CiAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlID0gbmV3IFBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlKCk7CiAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlID0gbmV3IFBhdGllbnRSZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UgPSBuZXcgQ29tbW9uU2VydmljZSgpOwogICAgdGhpcy52YWxpZGF0aW9uID0gbmV3IFZhbGlkYXRpb24oKTsgLy8gU2VydmljZQoKICAgIHRoaXMuc2VydmljZVNldHVwU2VydmljZSA9IG5ldyBTZXJ2aWNlU2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLmVtZXJnZW5jeVNlcnZpY2UgPSBuZXcgRW1lcmdlbmN5U2VydmljZSgpOyAvLyBQcmVzY3JpcHRpb24KCiAgICB0aGlzLmFkbWlzc2lvblByZXNjcmlwdGlvblNlcnZpY2UgPSBuZXcgQWRtaXNzaW9uUHJlc2NyaXB0aW9uU2VydmljZSgpOwogICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UgPSBuZXcgQXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlKCk7CiAgICB0aGlzLnByZXNjcmlwdGlvblJlcG9ydFNlcnZpY2UgPSBuZXcgUHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSgpOwogICAgdGhpcy5jb21tb25TZXJ2aWNlLkdldEFsbEdlbmRlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmdlbmRlckxpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxCbG9vZEdyb3VwKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuYmxvb2RHcm91cExpc3QgPSBkYXRhLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxQYXRpZW50c1JlbGF0aXZlcygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbGF0aW9uTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOyAvLyBzZXJ2ZXIgc2lkZSBwYWdpbmF0aW9uCgogICAgdmFyIGZpbHRlciA9IHRoaXMuZmlsdGVyc1snZ2xvYmFsJ10udmFsdWUgPyB0aGlzLmZpbHRlcnNbJ2dsb2JhbCddLnZhbHVlIDogIiI7CiAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldFBhdGllbnRXaXRoUGFnaW5hdGlvbigiMCIsICIxMCIsIGZpbHRlciwgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucGF0aWVudEZvcm1hdHRlZChkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLnVzZXJJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlckluZm8iKSk7CgogICAgaWYgKHRoaXMudXNlckluZm8uZG9jdG9yX2lkKSB7CiAgICAgIHRoaXMuaXNEb2N0b3IgPSB0cnVlOwogICAgfSBlbHNlIGlmICghdGhpcy51c2VySW5mby5kb2N0b3JfaWQpIHsKICAgICAgdGhpcy5pc0RvY3RvciA9IGZhbHNlOwogICAgfSAvLyBTZXJ2aWNlCgoKICAgIHRoaXMuZ2V0U2VydmljZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0U2VydmljZTogZnVuY3Rpb24gZ2V0U2VydmljZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNlcnZpY2VTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIuc2VydmljZUZvcm1hdHRlZChkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBzZXJ2aWNlRm9ybWF0dGVkOiBmdW5jdGlvbiBzZXJ2aWNlRm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5zZXJ2aWNlX2hlYWRfaWQgPT0gJzInIHx8IGVsLnNlcnZpY2VfaGVhZF9pZCA9PSAnMycgJiYgZWwuYWN0aXZlID09IHRydWU7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLmVtZXJnZW5jeVNlcnZpY2VPYmoubHN0U2VydmljZSA9IFtdOwogICAgICBmaWx0ZXJEYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBfdGhpczMuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlLnB1c2goewogICAgICAgICAgc2VydmljZV9pZDogZWxlbWVudC5zZXJ2aWNlX2lkLAogICAgICAgICAgc2VydmljZV9uYW1lOiBlbGVtZW50LnNlcnZpY2VfbmFtZSwKICAgICAgICAgIC8vc2VydmljZV9oZWFkX2lkOiBlbGVtZW50LnNlcnZpY2VfaGVhZF9pZCwKICAgICAgICAgIC8vX3NlcnZpY2VfaGVhZF9uYW1lOiBlbGVtZW50Ll9zZXJ2aWNlX2hlYWRfbmFtZSwKICAgICAgICAgIC8vc2VydmljZV90eXBlX2lkOiBlbGVtZW50LnNlcnZpY2VfdHlwZV9pZCwKICAgICAgICAgIC8vX3NlcnZpY2VfdHlwZV9uYW1lOiBlbGVtZW50Ll9zZXJ2aWNlX3R5cGVfbmFtZSwKICAgICAgICAgIGNoYXJnZTogZWxlbWVudC5zZXJ2aWNlX2NoYXJnZSwKICAgICAgICAgIGRpc2NvdW50X2Ftb3VudDogZWxlbWVudC5kaXNjb3VudCwKICAgICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IGVsZW1lbnQuZGlzY291bnQgLyBlbGVtZW50LnNlcnZpY2VfY2hhcmdlICogMTAwLAogICAgICAgICAgdG90YWxfYW1vdW50OiBlbGVtZW50LnNlcnZpY2VfY2hhcmdlIC0gZWxlbWVudC5kaXNjb3VudCwKICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHByaW50QWxsUGF0aWVudDogZnVuY3Rpb24gcHJpbnRBbGxQYXRpZW50KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMucGF0aWVudFJlcG9ydFNlcnZpY2UuZ2V0QWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM0LmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHByaW50SUQ6IGZ1bmN0aW9uIHByaW50SUQocmVnTm8pIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlLkdldFBhdGllbnRJZENhcmRCeVJlZ05vKHJlZ05vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBwYXRpZW50Rm9ybWF0dGVkOiBmdW5jdGlvbiBwYXRpZW50Rm9ybWF0dGVkKGRhdGEpIHsKICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uTGlzdCA9IGRhdGE7CiAgICAgIHRoaXMucGFnZSA9IGRhdGEubGVuZ3RoID8gZGF0YVswXS5fdG90YWxfcmVjb3JkcyA6IDEwMDsKICAgIH0sCiAgICAvLyBzZXJ2ZXIgc2lkZSBwYWdpbmF0aW9uCiAgICBvblBhZ2U6IGZ1bmN0aW9uIG9uUGFnZShldmVudCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXIgPSB0aGlzLmZpbHRlcnNbJ2dsb2JhbCddLnZhbHVlID8gdGhpcy5maWx0ZXJzWydnbG9iYWwnXS52YWx1ZSA6ICIiOwogICAgICB2YXIgcGFnZSA9IGV2ZW50ID09IDAgPyAwIDogZXZlbnQucGFnZTsKICAgICAgdmFyIHJvd3MgPSBldmVudCA9PSAwID8gMTAgOiBldmVudC5yb3dzOwogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldFBhdGllbnRXaXRoUGFnaW5hdGlvbihwYWdlLCByb3dzLCBmaWx0ZXIsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LnBhdGllbnRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgb3Blbk5ldzogZnVuY3Rpb24gb3Blbk5ldygpIHsKICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICIiOwogICAgICB0aGlzLmlzVmFsaWQgPSAiIjsKICAgICAgdGhpcy5pc0VtYWlsVmFsaWQgPSAiIjsKICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uID0gewogICAgICAgIGFnZV95ZWFyOiAiMCIsCiAgICAgICAgYWdlX21vbnRoOiAiMCIsCiAgICAgICAgYWdlX2RheTogIjAiCiAgICAgIH07CiAgICAgIHRoaXMubmV3SW5mbyA9IHRydWU7CiAgICAgIHRoaXMuZGF0YUxpc3QgPSBmYWxzZTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICBoaWRlTmV3OiBmdW5jdGlvbiBoaWRlTmV3KCkgewogICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAgIHRoaXMuaXNWYWxpZCA9ICIiOwogICAgICB0aGlzLmlzRW1haWxWYWxpZCA9ICIiOwogICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24gPSB7CiAgICAgICAgYWdlX3llYXI6ICIwIiwKICAgICAgICBhZ2VfbW9udGg6ICIwIiwKICAgICAgICBhZ2VfZGF5OiAiMCIKICAgICAgfTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IHRydWU7CiAgICAgIHRoaXMuaXNIaXN0b3J5ID0gZmFsc2U7CiAgICAgIHRoaXMubmV3SW5mbyA9IGZhbHNlOwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIGlzRXhpc3RDb250YWN0OiBmdW5jdGlvbiBpc0V4aXN0Q29udGFjdCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uLmNvbnRhY3Rfbm8ubWF0Y2goL14oMDEpKFswLTldezl9KSQvKSkgewogICAgICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UuZ2V0QnlDb250YWN0T3JSZWdObyh0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24uY29udGFjdF9ubywgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNy5nZXRDb250YWN0KGRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0NvbnRhY3RFeGlzdCA9ICJDb250YWN0IG51bWJlciBtdXN0IHN0YXJ0IHdpdGggMDEgYW5kIHRoZSByZXF1aXJlZCBsZW5ndGggaXMgMTEiOwogICAgICB9CiAgICB9LAogICAgZ2V0Q29udGFjdDogZnVuY3Rpb24gZ2V0Q29udGFjdChkYXRhKSB7CiAgICAgIGlmIChkYXRhLmNvbnRhY3Rfbm8pIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkR1cGxpY2F0ZSBwaG9uZSBudW1iZXIhIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjdXJyZW50RGF0ZSwgZG9iLCByZXN1bHQsIF9yZXN1bHQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzOC5zdWJtaXR0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLmZpcnN0X25hbWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb24uYWdlX3llYXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5hZ2VfbW9udGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5hZ2VfZGF5KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb24uY29udGFjdF9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczguaXNDb250YWN0RXhpc3QpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIGRvYiA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgLSBfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5hZ2VfeWVhciwgY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uLmFnZV9tb250aCwgY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb24uYWdlX2RheSk7CiAgICAgICAgICAgICAgICBfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5kb2IgPSBtb21lbnQoU3RyaW5nKGRvYikpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbi5wYXRpZW50X2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZS5hZGQoX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb24sIF90aGlzOCk7CgogICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5pc0RvY3RvcikgewogICAgICAgICAgICAgICAgICAgIF90aGlzOC5nZXRQYXRpZW50SWQocmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzOC5oaWRlTmV3KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczgub25QYWdlKDApOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiByZXN1bHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLnB1dChfdGhpczgucGF0aWVudFJlZ2lzdHJhdGlvbiwgX3RoaXM4KTsKCiAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgIF9yZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChfcmVzdWx0LnN0YXR1cyA9PT0gMjAyKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJVcGRhdGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczguaGlkZU5ldygpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM4Lm9uUGFnZSgwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IF9yZXN1bHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IF9yZXN1bHQucmVzLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDI7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwoKICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDQyXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRQYXRpZW50SWQ6IGZ1bmN0aW9uIGdldFBhdGllbnRJZChwYXRpZW50X2lkKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZS5nZXRCeUlkKHBhdGllbnRfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM5LnByZXNjcmlwdGlvbihkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBBZGQgU2VydmljZQogICAgdGFrZVNlcnZpY2U6IGZ1bmN0aW9uIHRha2VTZXJ2aWNlKCkgewogICAgICB0aGlzLnNlcnZpY2VEaWFsb2cgPSB0cnVlOwogICAgICB0aGlzLnNlcnZpY2VUYWtlbkxpc3REaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICAvLyBsaW5lIGRpc2NvdW50CiAgICBjYWxjdWxhdGVQZXJTZXJ2aWNlRGlzY291bnRBbW91bnQ6IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlclNlcnZpY2VEaXNjb3VudEFtb3VudChkYXRhKSB7CiAgICAgIHRoaXMuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5zZXJ2aWNlX2lkID09IGRhdGEuc2VydmljZV9pZCkgewogICAgICAgICAgZWxlbWVudC5kaXNjb3VudF9hbW91bnQgPSBlbGVtZW50LmNoYXJnZSAqIGVsZW1lbnQuZGlzY291bnRfcGVyY2VudCAvIDEwMDsKICAgICAgICAgIGVsZW1lbnQudG90YWxfYW1vdW50ID0gZWxlbWVudC5jaGFyZ2UgLSBlbGVtZW50LmRpc2NvdW50X2Ftb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhbGN1bGF0ZVBlclNlcnZpY2VEaXNjb3VudFBlcmNlbnQ6IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlclNlcnZpY2VEaXNjb3VudFBlcmNlbnQoZGF0YSkgewogICAgICB0aGlzLmVtZXJnZW5jeVNlcnZpY2VPYmoubHN0U2VydmljZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQuc2VydmljZV9pZCA9PSBkYXRhLnNlcnZpY2VfaWQpIHsKICAgICAgICAgIGVsZW1lbnQuZGlzY291bnRfcGVyY2VudCA9IGVsZW1lbnQuZGlzY291bnRfYW1vdW50IC8gZWxlbWVudC5jaGFyZ2UgKiAxMDA7CiAgICAgICAgICBlbGVtZW50LnRvdGFsX2Ftb3VudCA9IGVsZW1lbnQuY2hhcmdlIC0gZWxlbWVudC5kaXNjb3VudF9hbW91bnQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyBUYWtlbiBTZXJ2aWNlCiAgICB0YWtlbkxpc3Q6IGZ1bmN0aW9uIHRha2VuTGlzdChkYXRhKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50SW5mby5wYXRpZW50X2lkID0gZGF0YS5wYXRpZW50X2lkOwogICAgICB0aGlzLmVtZXJnZW5jeVNlcnZpY2UuZ2V0VGFrZW5TZXJ2aWNlKGRhdGEucGF0aWVudF9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczEwLmZvcm1hdHRlZFRha2VuTGlzdChkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXR0ZWRUYWtlbkxpc3Q6IGZ1bmN0aW9uIGZvcm1hdHRlZFRha2VuTGlzdChkYXRhKSB7CiAgICAgIHRoaXMubHN0VGFrZW5TZXJ2aWNlID0gZGF0YTsKICAgICAgdGhpcy5zZXJ2aWNlVGFrZW5MaXN0RGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBhZGRTZXJ2aWNlOiBmdW5jdGlvbiBhZGRTZXJ2aWNlKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczExLmVtZXJnZW5jeVNlcnZpY2VPYmoubHN0U2VydmljZSA9IF90aGlzMTEuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlzQ2hlY2sgPT0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0sIF90aGlzMTEpOwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMTEuZW1lcmdlbmN5U2VydmljZU9iai5sc3RTZXJ2aWNlLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMxMS5lbWVyZ2VuY3lTZXJ2aWNlT2JqLnBhdGllbnRfaWQgPSBfdGhpczExLmFkbWl0dGVkUGF0aWVudEluZm8ucGF0aWVudF9pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczExLmVtZXJnZW5jeVNlcnZpY2UuYWRkKF90aGlzMTEuZW1lcmdlbmN5U2VydmljZU9iaiwgX3RoaXMxMSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJTYXZlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMS5oaWRlRGlhbG9nKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczExLmdldFNlcnZpY2UoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTEuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpczExLmdldFNlcnZpY2UoKTsKCiAgICAgICAgICAgICAgICBfdGhpczExLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogIlNlbGVjdCBTZXJ2aWNlIiwKICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdHJhbnNmZXJJUEQ6IGZ1bmN0aW9uIHRyYW5zZmVySVBEKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybS5yZXF1aXJlKHsKICAgICAgICBtZXNzYWdlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHRyYW5zZmVyIElQRD8nLAogICAgICAgIGhlYWRlcjogJ0NvbmZpcm1hdGlvbicsCiAgICAgICAgaWNvbjogJ3BpIHBpLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlJywKICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdCgpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0cmFuc2ZlclBhdGllbnRSZWdObycsIGRhdGEucmVnaXN0cmF0aW9uX25vKTsKCiAgICAgICAgICBfdGhpczEyLiRyb3V0ZXIucHVzaCgiL3BhdGllbnQtYWRtaXNzaW9uLWZvcm0iKTsKICAgICAgICB9LAogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KCkgewogICAgICAgICAgcmV0dXJuOyAvL3RoaXMub25QYWdlKDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdChvYmopIHsKICAgICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTsgLy8gdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uLmNkZG9iID0gbW9tZW50KAogICAgICAvLyAgIFN0cmluZyh0aGlzLnBhdGllbnRSZWdpc3RyYXRpb24uZG9iKQogICAgICAvLyApLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgdGhpcy5kYXRhTGlzdCA9IGZhbHNlOwogICAgICB0aGlzLm5ld0luZm8gPSB0cnVlOwogICAgfSwKICAgIGhpZGVEaWFsb2c6IGZ1bmN0aW9uIGhpZGVEaWFsb2coKSB7CiAgICAgIHRoaXMuc2VydmljZVRha2VuTGlzdERpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnNlcnZpY2VEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICAvLyBwcmVzY3JpcHRpb24KICAgIHByZXNjcmlwdGlvbjogZnVuY3Rpb24gcHJlc2NyaXB0aW9uKGRhdGEpIHsKICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnRJbmZvLnBhdGllbnRfaWQgPSBkYXRhLnBhdGllbnRfaWQ7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXRpZW50SWRGb3JUcmVhdG1lbnQnLCBkYXRhLnBhdGllbnRfaWQpOwogICAgICB0aGlzLmFkbWl0dGVkUGF0aWVudEluZm8ucmVnaXN0cmF0aW9uX25vID0gZGF0YS5yZWdpc3RyYXRpb25fbm87CiAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50SW5mby5wYXRpZW50X25hbWUgPSBkYXRhLmZpcnN0X25hbWU7CiAgICAgIHRoaXMuYWRtaXR0ZWRQYXRpZW50SW5mby5nZW5kZXIgPSBkYXRhLmdlbmRlcjsKICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnRJbmZvLmFnZV95ZWFyID0gZGF0YS5hZ2VfeWVhcjsKICAgICAgdGhpcy5hZG1pdHRlZFBhdGllbnRJbmZvLmFnZV9tb250aCA9IGRhdGEuYWdlX21vbnRoOwogICAgICB0aGlzLmFkbWl0dGVkUGF0aWVudEluZm8uYWdlX2RheSA9IGRhdGEuYWdlX2RheTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IGZhbHNlOyAvLyBwYXNzIGRhdGEgaW50byBjb21wb25lbnQgCgogICAgICB0aGlzLiRyZWZzLnByZXNjcmlwdGlvbkNvbXBvbmVudC5wcmVzY3JpcHRpb24oZGF0YSk7CiAgICB9LAogICAgYWRkUng6IGZ1bmN0aW9uIGFkZFJ4KCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBnZXQgZGF0YSBmcm9tIGNvbXBvbmVudCAKICAgICAgICAgICAgICAgIF90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mbyA9IF90aGlzMTMuJHJlZnMucHJlc2NyaXB0aW9uQ29tcG9uZW50LiRkYXRhLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm87CiAgICAgICAgICAgICAgICBfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm8uY2Rmb2xvd3VwX2RhdGUgPSBfdGhpczEzLmFkbWl0dGVkUGF0aWVudEluZm8uY2Rmb2xvd3VwX2RhdGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDI7CgogICAgICAgICAgICAgICAgaWYgKCEoIV90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5sc3RBZG1pc3Npb25QcmVzY3JpcHRpb25BZHZpY2UubGVuZ3RoICYmICFfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm8ubHN0QWRtaXNzaW9uUHJlc2NyaXB0aW9uSW52ZXN0aWdhdGlvbi5sZW5ndGggJiYgIV90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5sc3RBZG1pc3Npb25QcmVzY3JpcHRpb25UcmVhdG1lbnQubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMTMuaGlkZU5ldygpOyAvLyB0aGlzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgLy8gICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgIC8vICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgIC8vICAgZGV0YWlsOiAiUGxlYXNlIGFkZCBQYXRpZW50IEFkdmljZSIsCiAgICAgICAgICAgICAgICAvLyAgIGxpZmU6IDEwMDAwLAogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvLyByZXR1cm47CgoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLnBhdGllbnRfaWQgPSBfdGhpczEzLmFkbWl0dGVkUGF0aWVudEluZm8ucGF0aWVudF9pZDsKICAgICAgICAgICAgICAgIF90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5wcmVzY3JpcHRpb25fZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLmNkcHJlc2NyaXB0aW9uX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25JbmZvLmNkZm9sb3d1cF9kYXRlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5mb2xvd3VwX2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzMTMuYWRtaXNzaW9uUHJlc2NyaXB0aW9uSW5mby5jZGZvbG93dXBfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMy5hZG1pc3Npb25QcmVzY3JpcHRpb25TZXJ2aWNlLmFkZChfdGhpczEzLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm8pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczEzLmRvd25sb2FkUHJlc2NyaXB0aW9uKHJlc3VsdC5kYXRhKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiUHJlc2NyaWJlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMy5uZXdQcmVzY3JpcHRpb24oKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTMuaGlkZU5ldygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE2OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfY29udGV4dDMudDAsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1syLCAxNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZG93bmxvYWRQcmVzY3JpcHRpb246IGZ1bmN0aW9uIGRvd25sb2FkUHJlc2NyaXB0aW9uKGFkbWlzc2lvbl9wcmVzY3JpcHRpb25faWQpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVzY3JpcHRpb25SZXBvcnRTZXJ2aWNlLkdldEVtZXJnZW5jeVBlc2NyaXB0aW9uKGFkbWlzc2lvbl9wcmVzY3JpcHRpb25faWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMxNC5jb21tb25TZXJ2aWNlLkRvd25sb2FkZmlsZShkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBuZXdQcmVzY3JpcHRpb246IGZ1bmN0aW9uIG5ld1ByZXNjcmlwdGlvbigpIHsKICAgICAgLy8gcmVzZXQgY29tcG9uZW50IG9iagogICAgICB0aGlzLiRyZWZzLnByZXNjcmlwdGlvbkNvbXBvbmVudC5uZXdQcmVzY3JpcHRpb24oKTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICB9LAogICAgZm9ybWF0RGF0ZVRpbWU6IGZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIGg6bW06c3MgYSIpOwogICAgfSwKICAgIC8vIGhpc3Rvcnkgc3RhcnQKICAgIGhpc3RvcnlDb2xsZWN0aW9uOiBmdW5jdGlvbiBoaXN0b3J5Q29sbGVjdGlvbigpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLmFkbWl0dGVkUGF0aWVudEluZm87IC8vIHBhc3MgZGF0YSBpbnRvIGNvbXBvbmVudCAKCiAgICAgIHRoaXMuJHJlZnMucGF0aWVudEhpc3RvcnlDb21wb25lbnQuaGlzdG9yeUNvbGxlY3Rpb24oZGF0YSk7CiAgICAgIHRoaXMuaXNIaXN0b3J5ID0gdHJ1ZTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IGZhbHNlOyAvLyBjb2xsZWN0IGhpc3RvcnkgcGF0aWVudCB3aXNlIC8vCiAgICB9LAogICAgaGlkZUhpc3Rvcnk6IGZ1bmN0aW9uIGhpZGVIaXN0b3J5KCkgewogICAgICB0aGlzLmlzSGlzdG9yeSA9IGZhbHNlOwogICAgICB0aGlzLmRhdGFMaXN0ID0gdHJ1ZTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BhdGllbnRJZEZvclRyZWF0bWVudCcpOwogICAgfSAvLyBoaXN0b3J5IGVuZAoKICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/emergency/PatientRegTreatment.js"],"names":["PatientRegistrationService","PatientReportService","CommonService","Validation","moment","FilterMatchMode","FilterOperator","ServiceSetupService","EmergencyService","AppointmentPrescriptionService","AdmissionPrescriptionService","PrescriptionReportService","Prescription","PatientHistory","components","data","page","isContactExist","isValid","isEmailValid","newInfo","dataList","relationList","bloodGroupList","genderList","patientRegistrationList","patientRegistration","age_year","age_month","age_day","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","serviceTakenListDialog","lstTakenService","serviceDialog","emergencyServiceObj","lstService","isDoctor","admittedPatientInfo","admissionPrescriptionInfo","cdprescription_date","String","Date","format","cdfolowup_date","setDate","getDate","isHistory","created","minDate","patientRegistrationService","patientReportService","commonService","validation","serviceSetupService","emergencyService","admissionPrescriptionService","appointmentPrescriptionService","prescriptionReportService","GetAllGender","then","GetAllBloodGroup","GetAllPatientsRelatives","filter","getPatientWithPagination","patientFormatted","userInfo","JSON","parse","localStorage","getItem","doctor_id","getService","methods","getAll","serviceFormatted","filterData","el","service_head_id","active","forEach","element","push","service_id","service_name","charge","service_charge","discount_amount","discount","discount_percent","total_amount","isCheck","printAllPatient","Downloadfile","printID","regNo","GetPatientIdCardByRegNo","length","_total_records","onPage","event","rows","openNew","hideNew","isExistContact","contact_no","match","getByContactOrRegNo","getContact","add","first_name","currentDate","dob","getFullYear","getMonth","patient_id","result","status","getPatientId","$toast","severity","summary","detail","life","res","put","getById","prescription","takeService","calculatePerServiceDiscountAmount","calculatePerServiceDiscountPercent","takenList","getTakenService","formattedTakenList","addService","hideDialog","transferIPD","$confirm","require","message","header","icon","accept","setItem","registration_no","$router","reject","edit","obj","Object","assign","patient_name","gender","$refs","prescriptionComponent","addRx","$data","lstAdmissionPrescriptionAdvice","lstAdmissionPrescriptionInvestigation","lstAdmissionPrescriptionTreatment","prescription_date","folowup_date","downloadPrescription","newPrescription","admission_prescription_id","GetEmergencyPescription","formatDate","formatDateTime","historyCollection","patientHistoryComponent","hideHistory","removeItem"],"mappings":"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","sourcesContent":["import PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\n// Service\r\nimport ServiceSetupService from \"../../service/setup/ServiceSetupService\";\r\nimport EmergencyService from \"../../service/emergency/EmergencyService\";\r\n// Prescription\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport AdmissionPrescriptionService from \"../../service/prescription/AdmissionPrescriptionService\";\r\nimport PrescriptionReportService from \"../../service/report/PrescriptionReportService\";\r\nimport Prescription from \"../../components/Prescription\";\r\n// History\r\nimport PatientHistory from \"../../components/PatientHistory\";\r\n\r\nexport default {\r\n  components: {\r\n    Prescription,\r\n    PatientHistory\r\n  },\r\n  data() {\r\n    return {\r\n      page: 100,\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      newInfo: false,\r\n      dataList: true,\r\n      relationList: [],\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      patientRegistrationList: [],\r\n      patientRegistration: {\r\n        age_year: \"0\",\r\n        age_month: \"0\",\r\n        age_day: \"0\",\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      // Service\r\n      serviceTakenListDialog: false,\r\n      lstTakenService: [],\r\n      serviceDialog: false,\r\n      emergencyServiceObj: {\r\n        lstService: [],\r\n      },\r\n      // Prescription\r\n      isDoctor: false,\r\n      admittedPatientInfo: {},\r\n      admissionPrescriptionInfo: {\r\n        cdprescription_date: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdfolowup_date: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n      },\r\n\r\n      // History\r\n      isHistory: false,\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    // let today = new Date();\r\n    // let month = today.getMonth();\r\n    // let year = today.getFullYear();\r\n    // let prevMonth = (month === 0) ? 11 : month - 0;\r\n    // let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    // this.minDate = new Date();\r\n    // this.minDate.setMonth(prevMonth);\r\n    // this.minDate.setFullYear(prevYear);\r\n    this.minDate = new Date(new Date().setDate(new Date().getDate() + 1));\r\n\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.commonService = new CommonService();\r\n    this.validation = new Validation();\r\n    // Service\r\n    this.serviceSetupService = new ServiceSetupService();\r\n    this.emergencyService = new EmergencyService();\r\n    // Prescription\r\n    this.admissionPrescriptionService = new AdmissionPrescriptionService();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    this.prescriptionReportService = new PrescriptionReportService();\r\n\r\n    this.commonService.GetAllGender().then(\r\n      (data) =>\r\n        (this.genderList = data.data)\r\n    );\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllPatientsRelatives()\r\n      .then((data) => (this.relationList = data.data));\r\n\r\n    // server side pagination\r\n    var filter = this.filters['global'].value ? this.filters['global'].value : \"\";\r\n    this.patientRegistrationService\r\n      .getPatientWithPagination(\"0\", \"10\", filter, this)\r\n      .then((data) => this.patientFormatted(data.data));\r\n\r\n    this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n    if (this.userInfo.doctor_id) {\r\n      this.isDoctor = true;\r\n    } else if (!this.userInfo.doctor_id) {\r\n      this.isDoctor = false;\r\n    }\r\n\r\n    // Service\r\n    this.getService();\r\n  },\r\n  methods: {\r\n    getService() {\r\n      this.serviceSetupService\r\n        .getAll()\r\n        .then((data) => this.serviceFormatted(data.data));\r\n    },\r\n    serviceFormatted(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.service_head_id == '2' || el.service_head_id == '3' && el.active == true;\r\n      }, this);\r\n      this.emergencyServiceObj.lstService = [];\r\n      filterData.forEach((element) => {\r\n        this.emergencyServiceObj.lstService.push({\r\n          service_id: element.service_id,\r\n          service_name: element.service_name,\r\n          //service_head_id: element.service_head_id,\r\n          //_service_head_name: element._service_head_name,\r\n          //service_type_id: element.service_type_id,\r\n          //_service_type_name: element._service_type_name,\r\n          charge: element.service_charge,\r\n          discount_amount: element.discount,\r\n          discount_percent:  (element.discount / element.service_charge) * 100,\r\n          total_amount:  element.service_charge - element.discount,\r\n          isCheck: false\r\n        });\r\n      });\r\n    },\r\n    printAllPatient() {\r\n      this.patientReportService.getAll(this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    printID(regNo) {\r\n      this.patientReportService.GetPatientIdCardByRegNo(regNo, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    patientFormatted(data) {\r\n      this.patientRegistrationList = data;\r\n      this.page = data.length ? data[0]._total_records : 100;\r\n    },\r\n    // server side pagination\r\n    onPage(event) {\r\n      var filter = this.filters['global'].value ? this.filters['global'].value : \"\";\r\n      var page = event == 0 ? 0 : event.page;\r\n      var rows = event == 0 ? 10 : event.rows;\r\n\r\n      this.patientRegistrationService\r\n        .getPatientWithPagination(page, rows, filter, this)\r\n        .then((data) => this.patientFormatted(data.data));\r\n    },\r\n    openNew() {\r\n      this.isContactExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.patientRegistration = {\r\n        age_year: \"0\",\r\n        age_month: \"0\",\r\n        age_day: \"0\",\r\n      };\r\n      this.newInfo = true;\r\n      this.dataList = false;\r\n      this.submitted = false;\r\n    },\r\n    hideNew() {\r\n      this.isContactExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.patientRegistration = {\r\n        age_year: \"0\",\r\n        age_month: \"0\",\r\n        age_day: \"0\",\r\n      };\r\n      this.dataList = true;\r\n      this.isHistory = false;\r\n      this.newInfo = false;\r\n      this.submitted = false;\r\n    },\r\n    isExistContact() {\r\n      if (this.patientRegistration.contact_no.match(/^(01)([0-9]{9})$/)) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.patientRegistration.contact_no, this)\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    async add() {\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.patientRegistration.first_name) {\r\n          return;\r\n        } else if (!this.patientRegistration.age_year) {\r\n          return;\r\n        } else if (!this.patientRegistration.age_month) {\r\n          return;\r\n        } else if (!this.patientRegistration.age_day) {\r\n          return;\r\n        } else if (!this.patientRegistration.contact_no) {\r\n          return;\r\n        } else if (this.isContactExist) {\r\n          return;\r\n        } else {\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.patientRegistration.age_year, currentDate.getMonth() - this.patientRegistration.age_month, currentDate.getDate() - this.patientRegistration.age_day);\r\n          this.patientRegistration.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (!this.patientRegistration.patient_id) {\r\n            let result = await this.patientRegistrationService.add(\r\n              this.patientRegistration, this\r\n            );\r\n            if (result.status === 200) {\r\n              if (this.isDoctor) {\r\n                this.getPatientId(result.data);\r\n              }\r\n\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Saved Successfully\",\r\n                life: 10000,\r\n              });\r\n              this.hideNew();\r\n              this.onPage(0);\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          } else {\r\n            let result = await this.patientRegistrationService.put(\r\n              this.patientRegistration,\r\n              this\r\n            );\r\n            if (result.status === 202) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Updated Successfully\",\r\n                life: 10000,\r\n              });\r\n              this.hideNew();\r\n              this.onPage(0);\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    getPatientId(patient_id) {\r\n      this.patientRegistrationService\r\n        .getById(patient_id)\r\n        .then((data) => this.prescription(data.data));\r\n    },\r\n    // Add Service\r\n    takeService() {\r\n      this.serviceDialog = true;\r\n      this.serviceTakenListDialog = false;\r\n    },\r\n    // line discount\r\n    calculatePerServiceDiscountAmount(data) {\r\n      this.emergencyServiceObj.lstService.forEach(\r\n        (element) => {\r\n          if (element.service_id == data.service_id) {\r\n            element.discount_amount = (element.charge * element.discount_percent) / 100;\r\n            element.total_amount = element.charge - element.discount_amount;\r\n          }\r\n        }\r\n      );\r\n    },\r\n    calculatePerServiceDiscountPercent(data) {\r\n      this.emergencyServiceObj.lstService.forEach(\r\n        (element) => {\r\n          if (element.service_id == data.service_id) {\r\n            element.discount_percent = (element.discount_amount / element.charge) * 100;\r\n            element.total_amount = element.charge - element.discount_amount;\r\n          }\r\n        }\r\n      );\r\n    },\r\n    // Taken Service\r\n    takenList(data) {\r\n      this.admittedPatientInfo.patient_id = data.patient_id;\r\n      this.emergencyService\r\n        .getTakenService(data.patient_id)\r\n        .then((data) => this.formattedTakenList(data.data));\r\n    },\r\n    formattedTakenList(data) {\r\n      this.lstTakenService = data;\r\n      this.serviceTakenListDialog = true;\r\n    },\r\n\r\n    async addService() {\r\n      this.emergencyServiceObj.lstService = this.emergencyServiceObj.lstService.filter(function (el) {\r\n        return el.isCheck == true;\r\n      }, this);\r\n\r\n      if (this.emergencyServiceObj.lstService.length > 0) {\r\n        this.emergencyServiceObj.patient_id = this.admittedPatientInfo.patient_id;\r\n        let result = await this.emergencyService.add(this.emergencyServiceObj, this);\r\n        if (result.status === 200) {\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Success\",\r\n            detail: \"Saved Successfully\",\r\n            life: 10000,\r\n          });\r\n          this.hideDialog();\r\n          this.getService();\r\n        } else if (result.status === 401) {\r\n          this.$toast.add({\r\n            severity: \"error\",\r\n            summary: \"Error\",\r\n            detail: result.data,\r\n            life: 10000,\r\n          });\r\n        } else {\r\n          this.$toast.add({\r\n            severity: \"error\",\r\n            summary: \"Failed\",\r\n            detail: result.res,\r\n            life: 10000,\r\n          });\r\n        }\r\n      } else{\r\n        this.getService();\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: \"Select Service\",\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    transferIPD(data) {\r\n      this.$confirm.require({\r\n        message: 'Are you sure you want to transfer IPD?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n          localStorage.setItem('transferPatientRegNo', data.registration_no);\r\n          this.$router.push(\"/patient-admission-form\");\r\n        },\r\n        reject: () => {\r\n          return;\r\n          //this.onPage(0);\r\n        },\r\n\r\n      });\r\n    },\r\n    edit(obj) {\r\n      this.patientRegistration = Object.assign({}, obj);\r\n      // this.patientRegistration.cddob = moment(\r\n      //   String(this.patientRegistration.dob)\r\n      // ).format(\"YYYY-MM-DD\");\r\n      this.dataList = false;\r\n      this.newInfo = true;\r\n    },\r\n    hideDialog() {\r\n      this.serviceTakenListDialog = false;\r\n      this.serviceDialog = false;\r\n      this.submitted = false;\r\n    },\r\n    // prescription\r\n    prescription(data) {\r\n      this.admittedPatientInfo.patient_id = data.patient_id;\r\n      localStorage.setItem('patientIdForTreatment', data.patient_id);\r\n      this.admittedPatientInfo.registration_no = data.registration_no;\r\n      this.admittedPatientInfo.patient_name = data.first_name;\r\n      this.admittedPatientInfo.gender = data.gender;\r\n      this.admittedPatientInfo.age_year = data.age_year;\r\n      this.admittedPatientInfo.age_month = data.age_month;\r\n      this.admittedPatientInfo.age_day = data.age_day;\r\n\r\n      this.dataList = false;\r\n      // pass data into component \r\n      this.$refs.prescriptionComponent.prescription(data);\r\n    },\r\n    async addRx() {\r\n      // get data from component \r\n      this.admissionPrescriptionInfo = this.$refs.prescriptionComponent.$data.admissionPrescriptionInfo;\r\n      this.admissionPrescriptionInfo.cdfolowup_date = this.admittedPatientInfo.cdfolowup_date;\r\n      try {\r\n        if (!this.admissionPrescriptionInfo.lstAdmissionPrescriptionAdvice.length && !this.admissionPrescriptionInfo.lstAdmissionPrescriptionInvestigation.length && !this.admissionPrescriptionInfo.lstAdmissionPrescriptionTreatment.length) {\r\n          this.hideNew();\r\n          // this.$toast.add({\r\n          //   severity: \"error\",\r\n          //   summary: \"Error\",\r\n          //   detail: \"Please add Patient Advice\",\r\n          //   life: 10000,\r\n          // });\r\n          // return;\r\n        } else {\r\n          this.admissionPrescriptionInfo.patient_id =\r\n            this.admittedPatientInfo.patient_id;\r\n\r\n          this.admissionPrescriptionInfo.prescription_date = moment(\r\n            String(this.admissionPrescriptionInfo.cdprescription_date)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (this.admissionPrescriptionInfo.cdfolowup_date) {\r\n            this.admissionPrescriptionInfo.folowup_date = moment(\r\n              String(this.admissionPrescriptionInfo.cdfolowup_date)\r\n            ).format(\"YYYY-MM-DD\");\r\n          }\r\n\r\n          let result = await this.admissionPrescriptionService.add(\r\n            this.admissionPrescriptionInfo\r\n          );\r\n          if (result.status === 200) {\r\n            this.downloadPrescription(result.data);\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Prescribed Successfully\",\r\n              life: 10000,\r\n            });\r\n            this.newPrescription();\r\n            this.hideNew();\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    downloadPrescription(admission_prescription_id) {\r\n      this.prescriptionReportService.GetEmergencyPescription(admission_prescription_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    newPrescription() {\r\n      // reset component obj\r\n      this.$refs.prescriptionComponent.newPrescription();\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n    formatDateTime(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY h:mm:ss a\");\r\n    },\r\n    // history start\r\n    historyCollection() {\r\n      var data = this.admittedPatientInfo;\r\n      // pass data into component \r\n      this.$refs.patientHistoryComponent.historyCollection(data);\r\n\r\n      this.isHistory = true;\r\n      this.dataList = false;\r\n      // collect history patient wise //\r\n    },\r\n    hideHistory() {\r\n      this.isHistory = false;\r\n      this.dataList = true;\r\n      localStorage.removeItem('patientIdForTreatment');\r\n    },\r\n    // history end\r\n  },\r\n};"]}]}