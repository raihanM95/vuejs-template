{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\DoctorAppointment.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\front-desk\\DoctorAppointment.js","mtime":1687670045158},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\babel.config.js","mtime":1624271518206},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOi9TVk4gUFJPSkVDVFMvRVJQX0hvc3BpdGFsX0NsaWVudC90cnVuay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjovU1ZOIFBST0pFQ1RTL0VSUF9Ib3NwaXRhbF9DbGllbnQvdHJ1bmsvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9Eb2N0b3JBcHBvaW50bWVudFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9mcm9udC1kZXNrL1BhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlIjsKaW1wb3J0IFBhdGllbnRSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L1BhdGllbnRSZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsKaW1wb3J0IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0NvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSI7CmltcG9ydCBEb2N0b3JTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9Eb2N0b3JTZXR1cFNlcnZpY2UiOwppbXBvcnQgQnVpbGRpbmdTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9CdWlsZGluZ1NldHVwU2VydmljZSI7CmltcG9ydCBSb29tU2V0dXBTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2V0dXAvUm9vbVNldHVwU2VydmljZSI7CmltcG9ydCBFbXBsb3llZVNldHVwU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3NldHVwL0VtcGxveWVlU2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFJlZmVycmVkQnlTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9SZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlIjsKaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAiLi4vLi4vc2NyaXB0cy92YWxpZGF0aW9uIjsKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IEZpbHRlclNlcnZpY2UsIEZpbHRlck1hdGNoTW9kZSwgRmlsdGVyT3BlcmF0b3IgfSBmcm9tICJwcmltZXZ1ZS9hcGkiOwppbXBvcnQgR2xvYmFsU2V0dGluZ3NTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2Uvc2VjdXJpdHkvR2xvYmFsU2V0dGluZ3NTZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWx0ZXJlZEl0ZW1zOiBudWxsLAogICAgICBwYXRpZW50c1N1Z2dlc3Rpb25zOiBbXSwKICAgICAgZHJTY2hlZHVsZURpYWxvZzogZmFsc2UsCiAgICAgIGlzU2NoZWR1bGVFeGlzdDogIiIsCiAgICAgIGlzQ29udGFjdEV4aXN0OiAiIiwKICAgICAgaXNWYWxpZDogIiIsCiAgICAgIGlzRW1haWxWYWxpZDogIiIsCiAgICAgIGlzRXhpc3Q6ICIiLAogICAgICBibG9vZEdyb3VwTGlzdDogW10sCiAgICAgIGdlbmRlckxpc3Q6IFtdLAogICAgICBkZXBhcnRtZW50TGlzdDogW10sCiAgICAgIGRvY3Rvckxpc3Q6IFtdLAogICAgICBzY2hlZHVsZUxpc3Q6IFtdLAogICAgICBnZXRTY2hlZHVsZUxpc3Q6IFtdLAogICAgICAvL2dldFNjaGVkdWxlTGlzdDI6IFtdLAogICAgICBidWlsZGluZ0xpc3Q6IFtdLAogICAgICByb29tTGlzdDogW10sCiAgICAgIHJlZmVycmVkQnlMaXN0OiBbXSwKICAgICAgZG9jdG9yQXBwb2ludG1lbnRMaXN0OiBbXSwKICAgICAgZG9jdG9yQXBwb2ludG1lbnQ6IHsKICAgICAgICBzY2hlZHVsZV9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICBhUGF0aWVudDogewogICAgICAgICAgYWdlX3llYXI6ICIwIiwKICAgICAgICAgIGFnZV9tb250aDogIjAiLAogICAgICAgICAgYWdlX2RheTogIjAiCiAgICAgICAgfQogICAgICB9LAogICAgICBmaWx0ZXJzOiB7CiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TCiAgICAgICAgfSwKICAgICAgICBuYW1lOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgfQogICAgICB9LAogICAgICBpbml0RmlsdGVyczogZnVuY3Rpb24gaW5pdEZpbHRlcnMoKSB7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gewogICAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgICAgfSwKICAgICAgICAgIG5hbWU6IHsKICAgICAgICAgICAgb3BlcmF0b3I6IEZpbHRlck9wZXJhdG9yLkFORCwKICAgICAgICAgICAgY29uc3RyYWludHM6IFt7CiAgICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuU1RBUlRTX1dJVEgKICAgICAgICAgICAgfV0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICB0eXBlTGlzdDogW3sKICAgICAgICB0ZXh0OiAiQ29uc3VsdGFuY3kiLAogICAgICAgIHZhbHVlOiAiQ29uc3VsdGFuY3kiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiUmVwb3J0IiwKICAgICAgICB2YWx1ZTogIlJlcG9ydCIKICAgICAgfV0sCiAgICAgIGdsb2JhbFNldHRpbmc6IHt9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gcGFzdCBkYXRlLXllYXIgZGlzYWJsZWQKICAgIC8vIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAvLyBsZXQgbW9udGggPSB0b2RheS5nZXRNb250aCgpOwogICAgLy8gbGV0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOwogICAgLy8gbGV0IHByZXZNb250aCA9IChtb250aCA9PT0gMCkgPyAxMSA6IG1vbnRoIC0gMDsKICAgIC8vIGxldCBwcmV2WWVhciA9IChwcmV2TW9udGggPT09IDExKSA/IHllYXIgLSAwIDogeWVhcjsKICAgIC8vIHRoaXMubWluRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAvLyB0aGlzLm1pbkRhdGUuc2V0TW9udGgocHJldk1vbnRoKTsKICAgIC8vIHRoaXMubWluRGF0ZS5zZXRGdWxsWWVhcihwcmV2WWVhcik7CiAgICB0aGlzLm1pbkRhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyAwKSk7CiAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZSA9IG5ldyBEb2N0b3JBcHBvaW50bWVudFNlcnZpY2UoKTsKICAgIHRoaXMucGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UgPSBuZXcgUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZSA9IG5ldyBEb2N0b3JTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuY29uc3VsdGFuY3lEZXBhcnRtZW50U2V0dXBTZXJ2aWNlID0gbmV3IENvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZSgpOwogICAgdGhpcy5idWlsZGluZ1NldHVwU2VydmljZSA9IG5ldyBCdWlsZGluZ1NldHVwU2VydmljZSgpOwogICAgdGhpcy5yb29tU2V0dXBTZXJ2aWNlID0gbmV3IFJvb21TZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMuZW1wbG95ZWVTZXR1cFNlcnZpY2UgPSBuZXcgRW1wbG95ZWVTZXR1cFNlcnZpY2UoKTsKICAgIHRoaXMucmVmZXJyZWRCeVNldHVwU2VydmljZSA9IG5ldyBSZWZlcnJlZEJ5U2V0dXBTZXJ2aWNlKCk7CiAgICB0aGlzLnBhdGllbnRSZXBvcnRTZXJ2aWNlID0gbmV3IFBhdGllbnRSZXBvcnRTZXJ2aWNlKCk7CiAgICB0aGlzLnZhbGlkYXRpb24gPSBuZXcgVmFsaWRhdGlvbigpOwogICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UgPSBuZXcgQXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlKCk7CiAgICB0aGlzLmdsb2JhbFNldHRpbmdzU2VydmljZSA9IG5ldyBHbG9iYWxTZXR0aW5nc1NlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZS5HZXRBbGxHZW5kZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5nZW5kZXJMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsQmxvb2RHcm91cCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmJsb29kR3JvdXBMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmNvbnN1bHRhbmN5RGVwYXJ0bWVudFNldHVwU2VydmljZS5nZXRBY3RpdmVDb21ibygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmRlcGFydG1lbnRMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmJ1aWxkaW5nU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmJ1aWxkaW5nTGlzdCA9IGRhdGEuZGF0YTsKICAgIH0pOwogICAgdGhpcy5yb29tU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnJvb21MaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLnJlZmVycmVkQnlTZXR1cFNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWVyZ2VSZWZlcnJlZEJ5SW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmVtcGxveWVlU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1lcmdlRW1wbG95ZWVJbmZvKGRhdGEuZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuZG9jdG9yU2V0dXBTZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1lcmdlRG9jdG9ySW5mbyhkYXRhLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmdsb2JhbFNldHRpbmdzU2VydmljZS5nZXRCeVNldHRpbmdOYW1lKCJBcHBvaW50bWVudCBQYXltZW50IEV4cHJlc3MiKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5nbG9iYWxTZXR0aW5nID0gZGF0YS5kYXRhOwogICAgfSk7CiAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldFBhdGllbnRMaXN0Rm9yU3VnZ2VzdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYXRpZW50c1N1Z2dlc3Rpb25zID0gZGF0YS5kYXRhOwogICAgfSk7CiAgfSwKICB3YXRjaDogewogICAgJ2RvY3RvckFwcG9pbnRtZW50LnNjaGVkdWxlX2RhdGUnOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB0aGlzLmdldEFwcG9pbnRtZW50KCk7IC8vdGhpcy52aWV3RHJTY2hlZHVsZSgpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBzdWJtaXQoKSB7CiAgICAvLyAgIGxldCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coewogICAgLy8gICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnMKICAgIC8vICAgICBjb250YWluZXI6IHRoaXMuZnVsbFBhZ2UgPyBudWxsIDogdGhpcy4kcmVmcy5mb3JtQ29udGFpbmVyLAogICAgLy8gICAgIGNvbG9yOiAnIzgwMDA4MCcsCiAgICAvLyAgICAgbG9hZGVyOiAnYmFycycsCiAgICAvLyAgICAgd2lkdGg6IDY0LAogICAgLy8gICAgIGhlaWdodDogNjQsCiAgICAvLyAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsCiAgICAvLyAgIH0pOwogICAgLy8gICAvLyBzaW11bGF0ZSBBSkFYCiAgICAvLyAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgLy8gICAgIGxvYWRlci5oaWRlKCkKICAgIC8vICAgfSwgMTAwMCkKICAgIC8vIH0sCiAgICBwcmludEFwcG9pbnRtZW50VG9rZW46IGZ1bmN0aW9uIHByaW50QXBwb2ludG1lbnRUb2tlbihhcHBvaW50bWVudElkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZS5HZXRBcHBvaW50bWVudFRva2VuQnlBcHBvaW50bWVudElkKGFwcG9pbnRtZW50SWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhpZGVEaWFsb2c6IGZ1bmN0aW9uIGhpZGVEaWFsb2coKSB7CiAgICAgIHRoaXMuZHJTY2hlZHVsZURpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5pc1NjaGVkdWxlRXhpc3QgPSAiIjsKICAgICAgdGhpcy5pc1ZhbGlkID0gIiI7CiAgICAgIHRoaXMuaXNFbWFpbFZhbGlkID0gIiI7CiAgICAgIHRoaXMuaXNFeGlzdCA9ICIiOwogICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIiI7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQgPSB7CiAgICAgICAgc2NoZWR1bGVfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgcGF0aWVudF9pZDogIiIsCiAgICAgICAgYVBhdGllbnQ6IHsKICAgICAgICAgIGFnZV95ZWFyOiAiMCIsCiAgICAgICAgICBhZ2VfbW9udGg6ICIwIiwKICAgICAgICAgIGFnZV9kYXk6ICIwIgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsgLy90aGlzLmdldEFwcG9pbnRtZW50KCk7CgogICAgICB0aGlzLnNjaGVkdWxlTGlzdCA9IFtdOwogICAgICB0aGlzLmdldFNjaGVkdWxlTGlzdCA9IFtdOwogICAgfSwKICAgIG1lcmdlUmVmZXJyZWRCeUluZm86IGZ1bmN0aW9uIG1lcmdlUmVmZXJyZWRCeUluZm8oZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXJEYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXMzLnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgICAgICAgdmFsdWU6IGVsZW1lbnQucmVnaXN0cmF0aW9uX25vLAogICAgICAgICAgdGV4dDogZWxlbWVudC5tYW51YWxfY29kZSArICItIiArIGVsZW1lbnQucmVnaXN0cmF0aW9uX25vICsgIi0iICsgZWxlbWVudC5yZWZmZXJlZF9ieV9uYW1lICsgIihSZWZlcnJlZCBCeSkiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG1lcmdlRG9jdG9ySW5mbzogZnVuY3Rpb24gbWVyZ2VEb2N0b3JJbmZvKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvL3RoaXMuZG9jdG9yTGlzdCA9IGRhdGE7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIF90aGlzNC5yZWZlcnJlZEJ5TGlzdC5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmRvY19ubywKICAgICAgICAgIHRleHQ6IGVsZW1lbnQuZG9jX25vICsgIi0iICsgZWxlbWVudC5kb2N0b3JfbmFtZSArICIoRG9jdG9yKSIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBvYmogPSBlbGVtZW50OwogICAgICAgIG9iai5kb2N0b3JfZGVncmVlID0gIiI7CiAgICAgICAgb2JqLmxzdENvbnN1bHRhbnREZWdyZWUuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIG9iai5kb2N0b3JfZGVncmVlICs9IGVsLmNvbnN1bHRhbnRfZGVncmVlX25hbWUgKyAiLiAiOwogICAgICAgIH0pOwogICAgICAgIG9iai5kb2N0b3JfbmFtZSA9IGVsZW1lbnQuZG9jX25vICsgIiAtICgiICsgb2JqLmRvY3Rvcl9kZWdyZWUgKyAiKSAtICIgKyBlbGVtZW50LmRvY3Rvcl9uYW1lOwoKICAgICAgICBfdGhpczQuZG9jdG9yTGlzdC5wdXNoKG9iaik7CiAgICAgIH0pOwogICAgICB2YXIgYXBwb2ludG1lbnRJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXBwb2ludG1lbnRJbmZvIikpOwoKICAgICAgaWYgKGFwcG9pbnRtZW50SW5mbykgewogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQgPSBhcHBvaW50bWVudEluZm87CiAgICAgICAgdGhpcy5nZXRDb25zdWx0YW5jeUZlZUJ5RG9jdG9ySWQoKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYXBwb2ludG1lbnRJbmZvJyk7CiAgICAgIH0KICAgIH0sCiAgICBtZXJnZUVtcGxveWVlSW5mbzogZnVuY3Rpb24gbWVyZ2VFbXBsb3llZUluZm8oZGF0YSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXJEYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmFjdGl2ZSA9PSB0cnVlOwogICAgICB9LCB0aGlzKTsKICAgICAgZmlsdGVyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgX3RoaXM1LnJlZmVycmVkQnlMaXN0LnB1c2goewogICAgICAgICAgdmFsdWU6IGVsZW1lbnQuZW1wX25vLAogICAgICAgICAgdGV4dDogZWxlbWVudC5lbXBfbm8gKyAiLSIgKyBlbGVtZW50LmZpcnN0X25hbWUgKyAiKEVtcGxveWVlKSIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsdGVyRG9jdG9yc0RlcGFydG1lbnRXaXNlOiBmdW5jdGlvbiBmaWx0ZXJEb2N0b3JzRGVwYXJ0bWVudFdpc2UoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvY3Rvckxpc3QuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5kZXBhcnRtZW50X2lkID09PSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRlcGFydG1lbnRfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgfSwKICAgIGdldENvbnN1bHRhbmN5RmVlQnlEb2N0b3JJZDogZnVuY3Rpb24gZ2V0Q29uc3VsdGFuY3lGZWVCeURvY3RvcklkKCkgewogICAgICB2YXIgYURvY3RvciA9IHRoaXMuZG9jdG9yTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmRvY3Rvcl9pZCA9PT0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQ7CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWUgPSBhRG9jdG9yWzBdLmNvbnN1bHRhbmN5X2ZlZTsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZSA9IGFEb2N0b3JbMF0uc2Vjb25kX2Nvbl9mZWU7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2Vjb25kX2Nvbl9mZWVfZHVyYXRpb24gPSBhRG9jdG9yWzBdLnNlY29uZF9jb25fZmVlX2R1cmF0aW9uOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRoaXJkX2Nvbl9mZWUgPSBhRG9jdG9yWzBdLnRoaXJkX2Nvbl9mZWU7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZV9kdXJhdGlvbiA9IGFEb2N0b3JbMF0udGhpcmRfY29uX2ZlZV9kdXJhdGlvbjsKICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5yZXBvcnRfdmlzaXRfZmVlID0gYURvY3RvclswXS5yZXBvcnRfdmlzaXRfZmVlOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkID0gYURvY3RvclswXS5fYnVpbGRpbmdfaWQ7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucm9vbV9pZCA9IGFEb2N0b3JbMF0ucm9vbV9pZDsKICAgICAgdGhpcy5nZXREclNjaGVkdWxlKCk7CiAgICB9LAogICAgZ2V0Q29uc3VsdGFuY3lGZWVCeVR5cGU6IGZ1bmN0aW9uIGdldENvbnN1bHRhbmN5RmVlQnlUeXBlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFwcG9pbnRtZW50X3R5cGUgPT0gIlJlcG9ydCIpIHsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQucmVwb3J0X3Zpc2l0X2ZlZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFwcG9pbnRtZW50X3R5cGUgPT0gIkNvbnN1bHRhbmN5IikgewogICAgICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlLnByZXNjcmlwdGlvbkRvY3RvckFuZFBhdGllbnRXaXNlKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnBhdGllbnRfaWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczYuZm9ybWF0UHJldmlvdXNBcHBvaW50bWVudChkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZm9ybWF0UHJldmlvdXNBcHBvaW50bWVudDogZnVuY3Rpb24gZm9ybWF0UHJldmlvdXNBcHBvaW50bWVudChkYXRhKSB7CiAgICAgIGlmIChkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWU7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGggPT0gMSkgewogICAgICAgIHZhciBwcmV2aW91c0FwcG9pbnRtZW50RGF0ZSA9IG1vbWVudChTdHJpbmcoZGF0YVswXS5wcmVzY3JpcHRpb25fZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBjdXJyZW50QXBwb2ludG1lbnREYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNkYXBwb2ludF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIHByZXZpb3VzID0gbW9tZW50KHByZXZpb3VzQXBwb2ludG1lbnREYXRlLCAiWVlZWS1NTS1ERCIpOwogICAgICAgIHZhciBjdXJyZW50ID0gbW9tZW50KGN1cnJlbnRBcHBvaW50bWVudERhdGUsICJZWVlZLU1NLUREIik7IC8vRGlmZmVyZW5jZSBpbiBudW1iZXIgb2YgZGF5cwoKICAgICAgICB2YXIgZGF5ID0gbW9tZW50LmR1cmF0aW9uKGN1cnJlbnQuZGlmZihwcmV2aW91cykpLmFzRGF5cygpOwoKICAgICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZV9kdXJhdGlvbiA+PSBkYXkpIHsKICAgICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29uc3VsdGFuY3lfZmVlID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zZWNvbmRfY29uX2ZlZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoID09IDIpIHsKICAgICAgICB2YXIgcHJldmlvdXNBcHBvaW50bWVudERhdGUyID0gbW9tZW50KFN0cmluZyhkYXRhWzBdLnByZXNjcmlwdGlvbl9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIGN1cnJlbnRBcHBvaW50bWVudERhdGUyID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNkYXBwb2ludF9kYXRlKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIHByZXZpb3VzMiA9IG1vbWVudChwcmV2aW91c0FwcG9pbnRtZW50RGF0ZTIsICJZWVlZLU1NLUREIik7CiAgICAgICAgdmFyIGN1cnJlbnQyID0gbW9tZW50KGN1cnJlbnRBcHBvaW50bWVudERhdGUyLCAiWVlZWS1NTS1ERCIpOyAvL0RpZmZlcmVuY2UgaW4gbnVtYmVyIG9mIGRheXMKCiAgICAgICAgdmFyIGRheTIgPSBtb21lbnQuZHVyYXRpb24oY3VycmVudDIuZGlmZihwcmV2aW91czIpKS5hc0RheXMoKTsKCiAgICAgICAgaWYgKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZV9kdXJhdGlvbiA+PSBkYXkyKSB7CiAgICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNvbnN1bHRhbmN5X2ZlZSA9IHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudGhpcmRfY29uX2ZlZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZpcnN0X2Nvbl9mZWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZmlsdGVyUm9vbXNCdWlsZGluZ1dpc2U6IGZ1bmN0aW9uIGZpbHRlclJvb21zQnVpbGRpbmdXaXNlKCkgewogICAgICByZXR1cm4gdGhpcy5yb29tTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmJ1aWxkaW5nX2lkID09PSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkOwogICAgICB9LCB0aGlzKTsKICAgIH0sCiAgICBnZXRGb3JtYXR0ZWQ6IGZ1bmN0aW9uIGdldEZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQgPSBkYXRhOwoKICAgICAgaWYgKCF0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LnBhdGllbnRfaWQpIHsKICAgICAgICB0aGlzLmlzRXhpc3QgPSAiU2VsZWN0IFBhdGllbnQiOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQgPSB7CiAgICAgICAgICBwYXRpZW50X2lkOiAiIiwKICAgICAgICAgIGFQYXRpZW50OiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIiI7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5wYXRpZW50X2lkID0gdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5wYXRpZW50X2lkOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuY2Rkb2IgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuZG9iKSkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kUGF0aWVudDogZnVuY3Rpb24gZmluZFBhdGllbnQoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIHNlYXJjaERhdGEgPSB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNlYXJjaERhdGE7CgogICAgICB0cnkgewogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY29udGFjdE9yUmVnTm8gPSBzZWFyY2hEYXRhLnJlZ2lzdHJhdGlvbl9ubzsKICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5kb2N0b3JBcHBvaW50bWVudC5jb250YWN0T3JSZWdObywgdGhpcykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNy5nZXRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy5pc0V4aXN0ID0gIlBhdGllbnQgbm90IEV4aXN0ISI7CiAgICAgICAgdGhpcy5kb2N0b3JBcHBvaW50bWVudCA9IHsKICAgICAgICAgIHBhdGllbnRfaWQ6ICIiLAogICAgICAgICAgYVBhdGllbnQ6IHt9CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGlzRXhpc3RDb250YWN0OiBmdW5jdGlvbiBpc0V4aXN0Q29udGFjdCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jb250YWN0X25vLm1hdGNoKC9eKDAxKShbMC05XXs5fSkkLykpIHsKICAgICAgICB0aGlzLnBhdGllbnRSZWdpc3RyYXRpb25TZXJ2aWNlLmdldEJ5Q29udGFjdE9yUmVnTm8odGhpcy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5jb250YWN0X25vLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LmdldENvbnRhY3QoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzQ29udGFjdEV4aXN0ID0gIkNvbnRhY3QgbnVtYmVyIG11c3Qgc3RhcnQgd2l0aCAwMSBhbmQgdGhlIHJlcXVpcmVkIGxlbmd0aCBpcyAxMSI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDb250YWN0OiBmdW5jdGlvbiBnZXRDb250YWN0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEuY29udGFjdF9ubykgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiRHVwbGljYXRlIHBob25lIG51bWJlciEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNDb250YWN0RXhpc3QgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGdldEZvcm1hdHRlZFNjaGVkdWxlOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRTY2hlZHVsZShkYXRhKSB7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQuc3RhcnRfdGltZTEgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUxKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5lbmRfdGltZTEgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMSkpKS5mb3JtYXQoImg6bW0gYSIpOwogICAgICAgIGVsZW1lbnQuc3RhcnRfdGltZTIgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUyKSkpLmZvcm1hdCgiaDptbSBhIik7CiAgICAgICAgZWxlbWVudC5lbmRfdGltZTIgPSBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LmVuZF90aW1lMikpKS5mb3JtYXQoImg6bW0gYSIpOwogICAgICB9KTsKICAgICAgdGhpcy5zY2hlZHVsZUxpc3QgPSBkYXRhOyAvL3RoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CgogICAgICB0aGlzLnNob3dEclNjaGVkdWxlRGlhbG9nKCk7CiAgICB9LAogICAgZ2V0RHJTY2hlZHVsZTogZnVuY3Rpb24gZ2V0RHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLmRvY3RvclNldHVwU2VydmljZS5nZXREb2N0b3JTY2hlZHVsZUJ5SWQodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM5LmdldEZvcm1hdHRlZFNjaGVkdWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dEclNjaGVkdWxlRGlhbG9nOiBmdW5jdGlvbiBzaG93RHJTY2hlZHVsZURpYWxvZygpIHsKICAgICAgdGhpcy5nZXRBcHBvaW50bWVudCgpOwogICAgICB0aGlzLmRyU2NoZWR1bGVEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIHZpZXdEclNjaGVkdWxlOiBmdW5jdGlvbiB2aWV3RHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIGRheXMgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107CiAgICAgIHZhciBkID0gbmV3IERhdGUobW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LnNjaGVkdWxlX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKSk7CiAgICAgIHZhciBkYXlOYW1lID0gZGF5c1tkLmdldERheSgpXTsKICAgICAgdGhpcy5nZXRTY2hlZHVsZUxpc3QgPSBbXTsgLy90aGlzLmdldFNjaGVkdWxlTGlzdDIgPSBbXTsKCiAgICAgIHRoaXMuc2NoZWR1bGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5fZGF5X25hbWUgPT0gZGF5TmFtZSAmJiBlbGVtZW50LmlzX2F2YWlsYWJsZSkgewogICAgICAgICAgdmFyIHN0YXJ0X3RpbWUxID0gbW9tZW50KGVsZW1lbnQuc3RhcnRfdGltZTEsICJoaDptbSBhIik7CiAgICAgICAgICB2YXIgZW5kX3RpbWUxID0gbW9tZW50KGVsZW1lbnQuZW5kX3RpbWUxLCAiaGg6bW0gYSIpOwogICAgICAgICAgdmFyIHJlc3VsdDEgPSBlbmRfdGltZTEuZGlmZihzdGFydF90aW1lMSwgJ21pbnV0ZXMnKTsKICAgICAgICAgIHZhciB0aW1lMVBlclBhdGllbnQgPSBwYXJzZUludChyZXN1bHQxIC8gZWxlbWVudC50aW1lMV9wYXRpZW50X25vKTsKICAgICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgICB2YXIgdGltZTFyYW5nZSA9IHN0YXJ0X3RpbWUxOwoKICAgICAgICAgIHdoaWxlIChpbmRleCA8IGVsZW1lbnQudGltZTFfcGF0aWVudF9ubykgewogICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyk7CiAgICAgICAgICAgIHZhciBhU2NoZWR1bGUgPSB7CiAgICAgICAgICAgICAgdGltZTFSYW5nZVN0YXJ0OiBtb21lbnQodGltZTFyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpLAogICAgICAgICAgICAgIHRpbWUxUmFuZ2VFbmQ6IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMVBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgICB0aW1lMUlzQm9va2VkOiBfdGhpczEwLmlzQXBwb2ludG1lbnRFeGlzdCh0aW1lKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXMxMC5nZXRTY2hlZHVsZUxpc3QucHVzaChhU2NoZWR1bGUpOwoKICAgICAgICAgICAgdGltZTFyYW5nZSA9IG1vbWVudCh0aW1lMXJhbmdlLCAiaGg6bW0gYSIpLmFkZCh0aW1lMVBlclBhdGllbnQsICdtaW51dGVzJykuZm9ybWF0KCdMVFMnKTsKICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgc3RhcnRfdGltZTIgPSBtb21lbnQoZWxlbWVudC5zdGFydF90aW1lMiwgImhoOm1tIGEiKTsKICAgICAgICAgIHZhciBlbmRfdGltZTIgPSBtb21lbnQoZWxlbWVudC5lbmRfdGltZTIsICJoaDptbSBhIik7CiAgICAgICAgICB2YXIgcmVzdWx0MiA9IGVuZF90aW1lMi5kaWZmKHN0YXJ0X3RpbWUyLCAnbWludXRlcycpOwogICAgICAgICAgdmFyIHRpbWUyUGVyUGF0aWVudCA9IHJlc3VsdDIgLyBlbGVtZW50LnRpbWUyX3BhdGllbnRfbm87CiAgICAgICAgICB2YXIgaW5kZXgyID0gMDsKICAgICAgICAgIHZhciB0aW1lMnJhbmdlID0gc3RhcnRfdGltZTI7CgogICAgICAgICAgd2hpbGUgKGluZGV4MiA8IGVsZW1lbnQudGltZTJfcGF0aWVudF9ubykgewogICAgICAgICAgICB2YXIgdGltZTIgPSBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5mb3JtYXQoJ0xUUycpOwoKICAgICAgICAgICAgaWYgKF90aGlzMTAuZ2V0U2NoZWR1bGVMaXN0Lmxlbmd0aCA+IGluZGV4MikgewogICAgICAgICAgICAgIHZhciBhU2NoZWR1bGUyID0gX3RoaXMxMC5nZXRTY2hlZHVsZUxpc3RbaW5kZXgyXTsKICAgICAgICAgICAgICBhU2NoZWR1bGUyLnRpbWUyUmFuZ2VTdGFydCA9IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyk7CiAgICAgICAgICAgICAgYVNjaGVkdWxlMi50aW1lMlJhbmdlRW5kID0gbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICAgIGFTY2hlZHVsZTIudGltZTJJc0Jvb2tlZCA9IF90aGlzMTAuaXNBcHBvaW50bWVudEV4aXN0KHRpbWUyKTsKICAgICAgICAgICAgICBfdGhpczEwLmdldFNjaGVkdWxlTGlzdFtpbmRleDJdID0gYVNjaGVkdWxlMjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgYVNjaGVkdWxlMyA9IHsKICAgICAgICAgICAgICAgIHRpbWUxUmFuZ2VTdGFydDogJycsCiAgICAgICAgICAgICAgICB0aW1lMVJhbmdlRW5kOiAnJywKICAgICAgICAgICAgICAgIHRpbWUxSXNCb29rZWQ6IHRydWUsCiAgICAgICAgICAgICAgICB0aW1lMlJhbmdlU3RhcnQ6IG1vbWVudCh0aW1lMnJhbmdlLCAiaGg6bW0gYSIpLmZvcm1hdCgnTFRTJyksCiAgICAgICAgICAgICAgICB0aW1lMlJhbmdlRW5kOiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTJQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJyksCiAgICAgICAgICAgICAgICB0aW1lMklzQm9va2VkOiBfdGhpczEwLmlzQXBwb2ludG1lbnRFeGlzdCh0aW1lMikKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpczEwLmdldFNjaGVkdWxlTGlzdC5wdXNoKGFTY2hlZHVsZTMpOwogICAgICAgICAgICB9IC8vIHZhciBhU2NoZWR1bGUyID0gewogICAgICAgICAgICAvLyAgIHRpbWUyUmFuZ2VTdGFydDogbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuZm9ybWF0KCdMVFMnKSwKICAgICAgICAgICAgLy8gICB0aW1lMlJhbmdlRW5kOiBtb21lbnQodGltZTJyYW5nZSwgImhoOm1tIGEiKS5hZGQodGltZTJQZXJQYXRpZW50LCAnbWludXRlcycpLmZvcm1hdCgnTFRTJykKICAgICAgICAgICAgLy8gfTsKICAgICAgICAgICAgLy8gdGhpcy5nZXRTY2hlZHVsZUxpc3QucHVzaChhU2NoZWR1bGUyKTsKCgogICAgICAgICAgICB0aW1lMnJhbmdlID0gbW9tZW50KHRpbWUycmFuZ2UsICJoaDptbSBhIikuYWRkKHRpbWUyUGVyUGF0aWVudCwgJ21pbnV0ZXMnKS5mb3JtYXQoJ0xUUycpOwogICAgICAgICAgICBpbmRleDIrKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOyAvL3RoaXMuZHJTY2hlZHVsZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZ2V0QXBwb2ludG1lbnQ6IGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50KCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N0b3JBcHBvaW50bWVudC5kb2N0b3JfaWQgJiYgdGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSB7CiAgICAgICAgdmFyIGRhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlLmdldER5bmFtaWNEb2N0b3JXaXNlKGRhdGUsIGRhdGUsICJBbGwiLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmRvY3Rvcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTEuZ2V0QXBwb2ludG1lbnRGb3JtYXR0ZWQoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldEFwcG9pbnRtZW50Rm9ybWF0dGVkOiBmdW5jdGlvbiBnZXRBcHBvaW50bWVudEZvcm1hdHRlZChkYXRhKSB7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRMaXN0ID0gZGF0YTsKICAgICAgdGhpcy52aWV3RHJTY2hlZHVsZSgpOwogICAgfSwKICAgIGlzQXBwb2ludG1lbnRFeGlzdDogZnVuY3Rpb24gaXNBcHBvaW50bWVudEV4aXN0KHRpbWUpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlOwogICAgICB2YXIgc2NoZWR1bGVfZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5zY2hlZHVsZV9kYXRlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICAgIHZhciBkYXRlVGltZSA9IG1vbWVudChzY2hlZHVsZV9kYXRlICsgJyAnICsgdGltZSwgJ01NL0REL1lZWVkgaDptbTpzcyBBJyk7CiAgICAgIHZhciBkYXRlID0gZGF0ZVRpbWUuZm9ybWF0KCdNTS9ERC9ZWVlZIGg6bW06c3MgQScpOwogICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGFwcG9pbnRfZGF0ZSA9IG1vbWVudChTdHJpbmcoZWxlbWVudC5hcHBvaW50X2RhdGUpKS5mb3JtYXQoIk1NL0REL1lZWVkgaDptbTpzcyBBIik7CgogICAgICAgIGlmIChhcHBvaW50X2RhdGUgPT0gZGF0ZSkgewogICAgICAgICAgcmVzdWx0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHNldEFwcG9pbnRtZW50OiBmdW5jdGlvbiBzZXRBcHBvaW50bWVudChhcHBvaW50bWVudFRpbWUpIHsKICAgICAgdmFyIHNjaGVkdWxlX2RhdGUgPSBtb21lbnQoU3RyaW5nKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuc2NoZWR1bGVfZGF0ZSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICB2YXIgZGF0ZVRpbWUgPSBtb21lbnQoc2NoZWR1bGVfZGF0ZSArICcgJyArIGFwcG9pbnRtZW50VGltZSwgJ01NL0REL1lZWVkgaDptbTpzcyBhJyk7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUgPSBkYXRlVGltZS5mb3JtYXQoJ01NL0REL1lZWVkgaDptbTpzcyBhJyk7CiAgICAgIHRoaXMuZHJTY2hlZHVsZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmdldENvbnN1bHRhbmN5RmVlQnlUeXBlKCk7IC8vdGhpcy5jaGVja0RyU2NoZWR1bGUoKTsKICAgIH0sCiAgICBjaGVja0RyU2NoZWR1bGU6IGZ1bmN0aW9uIGNoZWNrRHJTY2hlZHVsZSgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdGhpcy5pc1NjaGVkdWxlID0gZmFsc2U7CiAgICAgIHZhciBkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddOwogICAgICB2YXIgZCA9IG5ldyBEYXRlKG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpKTsKICAgICAgdmFyIGRheU5hbWUgPSBkYXlzW2QuZ2V0RGF5KCldOwogICAgICB0aGlzLnNjaGVkdWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIHN0YXJ0X3RpbWUxID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuc3RhcnRfdGltZTEpOwogICAgICAgIHZhciBlbmRfdGltZTEgPSBuZXcgRGF0ZSgiMjAwMC0wMS0wMSAiICsgZWxlbWVudC5lbmRfdGltZTEpOwogICAgICAgIHZhciBzdGFydF90aW1lMiA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBlbGVtZW50LnN0YXJ0X3RpbWUyKTsKICAgICAgICB2YXIgZW5kX3RpbWUyID0gbmV3IERhdGUoIjIwMDAtMDEtMDEgIiArIGVsZW1lbnQuZW5kX3RpbWUyKTsKICAgICAgICB2YXIgdGltZU5vdyA9IG5ldyBEYXRlKCIyMDAwLTAxLTAxICIgKyBtb21lbnQoU3RyaW5nKF90aGlzMTIuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoImg6bW0gYSIpKTsKCiAgICAgICAgaWYgKGVsZW1lbnQuX2RheV9uYW1lID09IGRheU5hbWUgJiYgZWxlbWVudC5pc19hdmFpbGFibGUpIHsKICAgICAgICAgIGlmIChzdGFydF90aW1lMSA8PSB0aW1lTm93ICYmIHRpbWVOb3cgPD0gZW5kX3RpbWUxIHx8IHN0YXJ0X3RpbWUyIDw9IHRpbWVOb3cgJiYgdGltZU5vdyA8PSBlbmRfdGltZTIpIHsKICAgICAgICAgICAgX3RoaXMxMi5pc1NjaGVkdWxlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKCF0aGlzLmlzU2NoZWR1bGUpIHsKICAgICAgICB0aGlzLmlzU2NoZWR1bGVFeGlzdCA9ICJTY2hlZHVsZSBub3QgZXhpc3QiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTY2hlZHVsZUV4aXN0ID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY3VycmVudERhdGUsIGRvYiwgcmVzdWx0LCBfcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL3RoaXMuY2hlY2tEclNjaGVkdWxlKCk7CiAgICAgICAgICAgICAgICBfdGhpczEzLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5maXJzdF9uYW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX3llYXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9tb250aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX2RheSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuY29udGFjdF9ubykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuZGVwYXJ0bWVudF9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuZG9jdG9yX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50bWVudF90eXBlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5jb25zdWx0YW5jeV9mZWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50LmJ1aWxkaW5nX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5yb29tX2lkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5jZGFwcG9pbnRfZGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQucmVhc29uKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1NDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczEzLmlzQ29udGFjdEV4aXN0IHx8IF90aGlzMTMuaXNTY2hlZHVsZUV4aXN0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgICAgX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW50X2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuY2RhcHBvaW50X2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQgaDptbTpzcyBhIik7CiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBkb2IgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5hZ2VfeWVhciwgY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuYVBhdGllbnQuYWdlX21vbnRoLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSBfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50LmFQYXRpZW50LmFnZV9kYXkpOwogICAgICAgICAgICAgICAgX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudC5hUGF0aWVudC5kb2IgPSBtb21lbnQoU3RyaW5nKGRvYikpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50Lmludm9pY2VfaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudFNlcnZpY2UuYWRkKF90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQsIF90aGlzMTMpOwoKICAgICAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAiU2F2ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLmdsb2JhbFNldHRpbmcuc2V0dGluZ192YWx1ZSA9PSAiWWVzIikgewogICAgICAgICAgICAgICAgICAgIF90aGlzMTMuY29uZmlybVBheShyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczEzLnByaW50QXBwb2ludG1lbnRUb2tlbihyZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTMuJHRvYXN0LmFkZCh7CiAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5kYXRhLAogICAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMTMuZG9jdG9yQXBwb2ludG1lbnQuaW52b2ljZV9pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3MjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZS5wdXQoX3RoaXMxMy5kb2N0b3JBcHBvaW50bWVudCwgX3RoaXMxMyk7CgogICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICBfcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogIlN1Y2Nlc3NmdWxseSBVcGRhdGVkIiwKICAgICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTMucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTMucHJpbnRBcHBvaW50bWVudFRva2VuKF9yZXN1bHQuZGF0YSk7CgogICAgICAgICAgICAgICAgICBfdGhpczEzLiRyb3V0ZXIucHVzaCgiL3BhdGllbnQtZG9jdG9yLWFwcG9pbnRtZW50LWxpc3QiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3Jlc3VsdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfcmVzdWx0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICAgIGRldGFpbDogX3Jlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3NjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJGYWlsZWQiLAogICAgICAgICAgICAgICAgICBkZXRhaWw6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICBsaWZlOiAxMDAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDc2XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjb25maXJtUGF5OiBmdW5jdGlvbiBjb25maXJtUGF5KGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybS5yZXF1aXJlKHsKICAgICAgICBtZXNzYWdlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHBheSBub3c/JywKICAgICAgICBoZWFkZXI6ICdDb25maXJtYXRpb24nLAogICAgICAgIGljb246ICdwaSBwaS1leGNsYW1hdGlvbi10cmlhbmdsZScsCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQoKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXBwb2ludG1lbnRfaWRfZm9yX3BheW1lbnQnLCBkYXRhKTsKCiAgICAgICAgICBfdGhpczE0LiRyb3V0ZXIucHVzaCgiL2FwcG9pbnRtZW50LXBheW1lbnQtY29sbGVjdGlvbiIpOwogICAgICAgIH0sCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QoKSB7CiAgICAgICAgICBfdGhpczE0LnByaW50QXBwb2ludG1lbnRUb2tlbihkYXRhKTsKCiAgICAgICAgICBfdGhpczE0LnJlc2V0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hQYXRpZW50OiBmdW5jdGlvbiBzZWFyY2hQYXRpZW50KGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghZXZlbnQucXVlcnkudHJpbSgpLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMxNS5maWx0ZXJlZEl0ZW1zID0gX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMTUucGF0aWVudHNTdWdnZXN0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHN0YXJ0IHdpdGgKICAgICAgICAgIC8vIHRoaXMuZmlsdGVyZWRJdGVtcyA9IHRoaXMubWVkaWNpbmVMaXN0LmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgICAgLy8gICAgIHJldHVybiBpdGVtLnRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGV2ZW50LnF1ZXJ5LnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgLy8gfSk7CiAgICAgICAgICAvLyBjb250YWlucwogICAgICAgICAgX3RoaXMxNS5maWx0ZXJlZEl0ZW1zID0gRmlsdGVyU2VydmljZS5maWx0ZXIoX3RoaXMxNS5wYXRpZW50c1N1Z2dlc3Rpb25zLCBbJ3BhdGllbnQnXSwgZXZlbnQucXVlcnkudG9Mb3dlckNhc2UoKSwgRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TKS5zbGljZSgwLCA1MDApOwogICAgICAgIH0KICAgICAgfSwgMjUwKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/front-desk/DoctorAppointment.js"],"names":["DoctorAppointmentService","PatientRegistrationService","PatientReportService","CommonService","ConsultancyDepartmentSetupService","DoctorSetupService","BuildingSetupService","RoomSetupService","EmployeeSetupService","ReferredBySetupService","Validation","AppointmentPrescriptionService","moment","FilterService","FilterMatchMode","FilterOperator","GlobalSettingsService","data","filteredItems","patientsSuggestions","drScheduleDialog","isScheduleExist","isContactExist","isValid","isEmailValid","isExist","bloodGroupList","genderList","departmentList","doctorList","scheduleList","getScheduleList","buildingList","roomList","referredByList","doctorAppointmentList","doctorAppointment","schedule_date","String","Date","format","patient_id","aPatient","age_year","age_month","age_day","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","submitted","typeList","text","globalSetting","created","minDate","setDate","getDate","doctorAppointmentService","patientRegistrationService","commonService","doctorSetupService","consultancyDepartmentSetupService","buildingSetupService","roomSetupService","employeeSetupService","referredBySetupService","patientReportService","validation","appointmentPrescriptionService","globalSettingsService","GetAllGender","then","GetAllBloodGroup","getActiveCombo","getAll","mergeReferredByInfo","mergeEmployeeInfo","mergeDoctorInfo","getBySettingName","getPatientListForSuggestions","watch","immediate","handler","getAppointment","methods","printAppointmentToken","appointmentId","GetAppointmentTokenByAppointmentId","Downloadfile","hideDialog","reset","filterData","filter","el","active","forEach","element","push","registration_no","manual_code","reffered_by_name","doc_no","doctor_name","obj","doctor_degree","lstConsultantDegree","consultant_degree_name","appointmentInfo","JSON","parse","localStorage","getItem","getConsultancyFeeByDoctorId","removeItem","emp_no","first_name","filterDoctorsDepartmentWise","department_id","aDoctor","doctor_id","first_con_fee","consultancy_fee","second_con_fee","second_con_fee_duration","third_con_fee","third_con_fee_duration","report_visit_fee","building_id","_building_id","room_id","getDrSchedule","getConsultancyFeeByType","appointment_type","prescriptionDoctorAndPatientWise","formatPreviousAppointment","length","previousAppointmentDate","prescription_date","currentAppointmentDate","cdappoint_date","previous","current","day","duration","diff","asDays","previousAppointmentDate2","currentAppointmentDate2","previous2","current2","day2","filterRoomsBuildingWise","getFormatted","cddob","dob","findPatient","searchData","contactOrRegNo","getByContactOrRegNo","err","isExistContact","contact_no","match","getContact","getFormattedSchedule","start_time1","end_time1","start_time2","end_time2","showDrScheduleDialog","getDoctorScheduleById","viewDrSchedule","days","d","dayName","getDay","_day_name","is_available","result1","time1PerPatient","parseInt","time1_patient_no","index","time1range","time","aSchedule","time1RangeStart","time1RangeEnd","add","time1IsBooked","isAppointmentExist","result2","time2PerPatient","time2_patient_no","index2","time2range","time2","aSchedule2","time2RangeStart","time2RangeEnd","time2IsBooked","aSchedule3","date","getDynamicDoctorWise","getAppointmentFormatted","result","dateTime","appoint_date","setAppointment","appointmentTime","checkDrSchedule","isSchedule","timeNow","reason","currentDate","getFullYear","getMonth","invoice_id","status","$toast","severity","summary","detail","life","setting_value","confirmPay","res","put","$router","$confirm","require","message","header","icon","accept","setItem","reject","searchPatient","event","setTimeout","query","trim","toLowerCase","slice"],"mappings":"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","sourcesContent":["import DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport CommonService from \"../../service/CommonService\";\r\nimport ConsultancyDepartmentSetupService from \"../../service/setup/ConsultancyDepartmentSetupService\";\r\nimport DoctorSetupService from \"../../service/setup/DoctorSetupService\";\r\nimport BuildingSetupService from \"../../service/setup/BuildingSetupService\";\r\nimport RoomSetupService from \"../../service/setup/RoomSetupService\";\r\nimport EmployeeSetupService from \"../../service/setup/EmployeeSetupService\";\r\nimport ReferredBySetupService from \"../../service/setup/ReferredBySetupService\";\r\nimport Validation from \"../../scripts/validation\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport moment from \"moment\";\r\nimport { FilterService, FilterMatchMode, FilterOperator } from \"primevue/api\";\r\nimport GlobalSettingsService from \"../../service/security/GlobalSettingsService\";\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      filteredItems: null,\r\n      patientsSuggestions: [],\r\n      drScheduleDialog: false,\r\n      isScheduleExist: \"\",\r\n      isContactExist: \"\",\r\n      isValid: \"\",\r\n      isEmailValid: \"\",\r\n      isExist: \"\",\r\n      bloodGroupList: [],\r\n      genderList: [],\r\n      departmentList: [],\r\n      doctorList: [],\r\n      scheduleList: [],\r\n      getScheduleList: [],\r\n      //getScheduleList2: [],\r\n      buildingList: [],\r\n      roomList: [],\r\n      referredByList: [],\r\n      doctorAppointmentList: [],\r\n      doctorAppointment: {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      },\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n      submitted: false,\r\n      typeList: [\r\n        { text: \"Consultancy\", value: \"Consultancy\" },\r\n        { text: \"Report\", value: \"Report\" },\r\n      ],\r\n      globalSetting: {},\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    // let today = new Date();\r\n    // let month = today.getMonth();\r\n    // let year = today.getFullYear();\r\n    // let prevMonth = (month === 0) ? 11 : month - 0;\r\n    // let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    // this.minDate = new Date();\r\n    // this.minDate.setMonth(prevMonth);\r\n    // this.minDate.setFullYear(prevYear);\r\n    this.minDate = new Date(new Date().setDate(new Date().getDate() + 0));\r\n\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.commonService = new CommonService();\r\n    this.doctorSetupService = new DoctorSetupService();\r\n    this.consultancyDepartmentSetupService = new ConsultancyDepartmentSetupService();\r\n    this.buildingSetupService = new BuildingSetupService();\r\n    this.roomSetupService = new RoomSetupService();\r\n    this.employeeSetupService = new EmployeeSetupService();\r\n    this.referredBySetupService = new ReferredBySetupService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.validation = new Validation();\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    this.globalSettingsService = new GlobalSettingsService();\r\n\r\n    this.commonService\r\n      .GetAllGender()\r\n      .then((data) => (this.genderList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllBloodGroup()\r\n      .then((data) => (this.bloodGroupList = data.data));\r\n\r\n    this.consultancyDepartmentSetupService\r\n      .getActiveCombo()\r\n      .then((data) => (this.departmentList = data.data));\r\n\r\n    this.buildingSetupService\r\n      .getAll()\r\n      .then((data) => (this.buildingList = data.data));\r\n\r\n    this.roomSetupService.getAll().then((data) => (this.roomList = data.data));\r\n\r\n    this.referredBySetupService\r\n      .getAll()\r\n      .then((data) => this.mergeReferredByInfo(data.data));\r\n\r\n    this.employeeSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeEmployeeInfo(data.data));\r\n\r\n    this.doctorSetupService\r\n      .getAll()\r\n      .then((data) => this.mergeDoctorInfo(data.data));\r\n\r\n    this.globalSettingsService\r\n      .getBySettingName(\"Appointment Payment Express\")\r\n      .then((data) => (this.globalSetting = data.data));\r\n\r\n    this.patientRegistrationService\r\n      .getPatientListForSuggestions()\r\n      .then((data) => (this.patientsSuggestions = data.data));\r\n  },\r\n  watch: {\r\n    'doctorAppointment.schedule_date': {\r\n      immediate: true,\r\n      handler() {\r\n        this.getAppointment();\r\n        //this.viewDrSchedule();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    // submit() {\r\n    //   let loader = this.$loading.show({\r\n    //     // Optional parameters\r\n    //     container: this.fullPage ? null : this.$refs.formContainer,\r\n    //     color: '#800080',\r\n    //     loader: 'bars',\r\n    //     width: 64,\r\n    //     height: 64,\r\n    //     backgroundColor: '#ffffff',\r\n    //   });\r\n    //   // simulate AJAX\r\n    //   setTimeout(() => {\r\n    //     loader.hide()\r\n    //   }, 1000)\r\n    // },\r\n    printAppointmentToken(appointmentId) {\r\n      this.patientReportService.GetAppointmentTokenByAppointmentId(appointmentId, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    hideDialog() {\r\n      this.drScheduleDialog = false;\r\n    },\r\n    reset() {\r\n      this.isScheduleExist = \"\";\r\n      this.isValid = \"\";\r\n      this.isEmailValid = \"\";\r\n      this.isExist = \"\";\r\n      this.isContactExist = \"\";\r\n      this.doctorAppointment = {\r\n        schedule_date: moment(String(new Date())).format(\r\n          \"MM/DD/YYYY\"\r\n        ),\r\n        patient_id: \"\",\r\n        aPatient: {\r\n          age_year: \"0\",\r\n          age_month: \"0\",\r\n          age_day: \"0\",\r\n        },\r\n      };\r\n      this.submitted = false;\r\n      //this.getAppointment();\r\n      this.scheduleList = [];\r\n      this.getScheduleList = [];\r\n    },\r\n    mergeReferredByInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.registration_no,\r\n          text: element.manual_code + \"-\" + element.registration_no + \"-\" + element.reffered_by_name + \"(Referred By)\",\r\n        });\r\n      });\r\n    },\r\n    mergeDoctorInfo(data) {\r\n      //this.doctorList = data;\r\n      data.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.doc_no,\r\n          text: element.doc_no + \"-\" + element.doctor_name + \"(Doctor)\",\r\n        });\r\n      });\r\n\r\n      data.forEach((element) => {\r\n        var obj = element;\r\n        obj.doctor_degree = \"\";\r\n        obj.lstConsultantDegree.forEach((el) => {\r\n          obj.doctor_degree += el.consultant_degree_name + \". \";\r\n        });\r\n\r\n        obj.doctor_name = element.doc_no + \" - (\" + obj.doctor_degree + \") - \" + element.doctor_name;\r\n        this.doctorList.push(obj);\r\n      });\r\n\r\n      var appointmentInfo = JSON.parse(localStorage.getItem(\"appointmentInfo\"));\r\n      if (appointmentInfo) {\r\n        this.doctorAppointment = appointmentInfo;\r\n        this.getConsultancyFeeByDoctorId();\r\n        localStorage.removeItem('appointmentInfo');\r\n      }\r\n    },\r\n    mergeEmployeeInfo(data) {\r\n      let filterData = data.filter(function (el) {\r\n        return el.active == true;\r\n      }, this);\r\n      filterData.forEach((element) => {\r\n        this.referredByList.push({\r\n          value: element.emp_no,\r\n          text: element.emp_no + \"-\" + element.first_name + \"(Employee)\",\r\n        });\r\n      });\r\n    },\r\n    filterDoctorsDepartmentWise() {\r\n      return this.doctorList.filter(function (el) {\r\n        return el.department_id === this.doctorAppointment.department_id;\r\n      }, this);\r\n    },\r\n    getConsultancyFeeByDoctorId() {\r\n      var aDoctor = this.doctorList.filter(function (el) {\r\n        return el.doctor_id === this.doctorAppointment.doctor_id;\r\n      }, this);\r\n\r\n      this.doctorAppointment.first_con_fee = aDoctor[0].consultancy_fee;\r\n      this.doctorAppointment.second_con_fee = aDoctor[0].second_con_fee;\r\n      this.doctorAppointment.second_con_fee_duration = aDoctor[0].second_con_fee_duration;\r\n      this.doctorAppointment.third_con_fee = aDoctor[0].third_con_fee;\r\n      this.doctorAppointment.third_con_fee_duration = aDoctor[0].third_con_fee_duration;\r\n      this.doctorAppointment.report_visit_fee = aDoctor[0].report_visit_fee;\r\n      this.doctorAppointment.building_id = aDoctor[0]._building_id;\r\n      this.doctorAppointment.room_id = aDoctor[0].room_id;\r\n\r\n      this.getDrSchedule();\r\n    },\r\n    getConsultancyFeeByType() {\r\n      if (this.doctorAppointment.appointment_type == \"Report\") {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.report_visit_fee;\r\n      } else if (this.doctorAppointment.appointment_type == \"Consultancy\") {\r\n        this.appointmentPrescriptionService.prescriptionDoctorAndPatientWise(this.doctorAppointment.doctor_id, this.doctorAppointment.patient_id, this).then((data) => this.formatPreviousAppointment(data.data));\r\n      }\r\n    },\r\n    formatPreviousAppointment(data) {\r\n      if (data.length == 0) {\r\n        this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n      } else if (data.length == 1) {\r\n        var previousAppointmentDate = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous = moment(previousAppointmentDate, \"YYYY-MM-DD\");\r\n        var current = moment(currentAppointmentDate, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day = moment.duration(current.diff(previous)).asDays();\r\n        if (this.doctorAppointment.second_con_fee_duration >= day) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.second_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      } else if (data.length == 2) {\r\n        var previousAppointmentDate2 = moment(String(data[0].prescription_date)).format(\"YYYY-MM-DD\");\r\n        var currentAppointmentDate2 = moment(String(this.doctorAppointment.cdappoint_date)).format(\"YYYY-MM-DD\");\r\n        var previous2 = moment(previousAppointmentDate2, \"YYYY-MM-DD\");\r\n        var current2 = moment(currentAppointmentDate2, \"YYYY-MM-DD\");\r\n        //Difference in number of days\r\n        var day2 = moment.duration(current2.diff(previous2)).asDays();\r\n        if (this.doctorAppointment.third_con_fee_duration >= day2) {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.third_con_fee;\r\n        } else {\r\n          this.doctorAppointment.consultancy_fee = this.doctorAppointment.first_con_fee;\r\n        }\r\n      }\r\n    },\r\n    filterRoomsBuildingWise() {\r\n      return this.roomList.filter(function (el) {\r\n        return el.building_id === this.doctorAppointment.building_id;\r\n      }, this);\r\n    },\r\n    getFormatted(data) {\r\n      this.doctorAppointment.aPatient = data;\r\n      if (!this.doctorAppointment.aPatient.patient_id) {\r\n        this.isExist = \"Select Patient\";\r\n        this.doctorAppointment = {\r\n          patient_id: \"\",\r\n          aPatient: {},\r\n        };\r\n      } else {\r\n        this.isExist = \"\";\r\n\r\n        this.doctorAppointment.patient_id =\r\n          this.doctorAppointment.aPatient.patient_id;\r\n        this.doctorAppointment.aPatient.cddob = moment(\r\n          String(this.doctorAppointment.aPatient.dob)\r\n        ).format(\"YYYY-MM-DD\");\r\n      }\r\n    },\r\n    findPatient() {\r\n      var searchData = this.doctorAppointment.searchData;\r\n      try {\r\n        this.doctorAppointment.contactOrRegNo = searchData.registration_no;\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.doctorAppointment.contactOrRegNo, this)\r\n          .then((data) => this.getFormatted(data.data));\r\n      } catch (err) {\r\n        this.isExist = \"Patient not Exist!\";\r\n        this.doctorAppointment = {\r\n          patient_id: \"\",\r\n          aPatient: {},\r\n        };\r\n      }\r\n    },\r\n    isExistContact() {\r\n      if (\r\n        this.doctorAppointment.aPatient.contact_no.match(/^(01)([0-9]{9})$/)\r\n      ) {\r\n        this.patientRegistrationService\r\n          .getByContactOrRegNo(this.doctorAppointment.aPatient.contact_no, this)\r\n          .then((data) => this.getContact(data.data));\r\n      } else {\r\n        this.isContactExist =\r\n          \"Contact number must start with 01 and the required length is 11\";\r\n      }\r\n    },\r\n    getContact(data) {\r\n      if (data.contact_no) {\r\n        this.isContactExist = \"Duplicate phone number!\";\r\n      } else {\r\n        this.isContactExist = \"\";\r\n      }\r\n    },\r\n    getFormattedSchedule(data) {\r\n      data.forEach((element) => {\r\n        element.start_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time1))\r\n        ).format(\"h:mm a\");\r\n        element.end_time1 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time1))\r\n        ).format(\"h:mm a\");\r\n        element.start_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.start_time2))\r\n        ).format(\"h:mm a\");\r\n        element.end_time2 = moment(\r\n          String(new Date(\"2000-01-01 \" + element.end_time2))\r\n        ).format(\"h:mm a\");\r\n      });\r\n\r\n      this.scheduleList = data;\r\n      //this.drScheduleDialog = true;\r\n      this.showDrScheduleDialog();\r\n    },\r\n    getDrSchedule() {\r\n      this.doctorSetupService\r\n        .getDoctorScheduleById(this.doctorAppointment.doctor_id)\r\n        .then((data) => this.getFormattedSchedule(data.data));\r\n    },\r\n    showDrScheduleDialog() {\r\n      this.getAppointment();\r\n      this.drScheduleDialog = true;\r\n    },\r\n    viewDrSchedule() {\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.getScheduleList = [];\r\n      //this.getScheduleList2 = [];\r\n      this.scheduleList.forEach((element) => {\r\n        if (element._day_name == dayName && element.is_available) {\r\n          var start_time1 = moment(element.start_time1, \"hh:mm a\");\r\n          var end_time1 = moment(element.end_time1, \"hh:mm a\");\r\n          var result1 = end_time1.diff(start_time1, 'minutes');\r\n          var time1PerPatient = parseInt(result1 / element.time1_patient_no);\r\n\r\n          var index = 0;\r\n          var time1range = start_time1;\r\n          while (index < element.time1_patient_no) {\r\n            var time = moment(time1range, \"hh:mm a\").format('LTS');\r\n\r\n            var aSchedule = {\r\n              time1RangeStart: moment(time1range, \"hh:mm a\").format('LTS'),\r\n              time1RangeEnd: moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS'),\r\n              time1IsBooked: this.isAppointmentExist(time)\r\n            };\r\n\r\n            this.getScheduleList.push(aSchedule);\r\n            time1range = moment(time1range, \"hh:mm a\").add(time1PerPatient, 'minutes').format('LTS');\r\n            index++;\r\n          }\r\n\r\n          var start_time2 = moment(element.start_time2, \"hh:mm a\");\r\n          var end_time2 = moment(element.end_time2, \"hh:mm a\");\r\n          var result2 = end_time2.diff(start_time2, 'minutes');\r\n          var time2PerPatient = result2 / element.time2_patient_no;\r\n\r\n          var index2 = 0;\r\n          var time2range = start_time2;\r\n          while (index2 < element.time2_patient_no) {\r\n            var time2 = moment(time2range, \"hh:mm a\").format('LTS');\r\n            if (this.getScheduleList.length > index2) {\r\n              var aSchedule2 = this.getScheduleList[index2];\r\n              aSchedule2.time2RangeStart = moment(time2range, \"hh:mm a\").format('LTS');\r\n              aSchedule2.time2RangeEnd = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n              aSchedule2.time2IsBooked = this.isAppointmentExist(time2);\r\n              this.getScheduleList[index2] = aSchedule2;\r\n            } else {\r\n              var aSchedule3 = {\r\n                time1RangeStart: '',\r\n                time1RangeEnd: '',\r\n                time1IsBooked: true,\r\n                time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n                time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS'),\r\n                time2IsBooked: this.isAppointmentExist(time2),\r\n              };\r\n              this.getScheduleList.push(aSchedule3);\r\n            }\r\n\r\n            // var aSchedule2 = {\r\n            //   time2RangeStart: moment(time2range, \"hh:mm a\").format('LTS'),\r\n            //   time2RangeEnd: moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS')\r\n            // };\r\n            // this.getScheduleList.push(aSchedule2);\r\n            time2range = moment(time2range, \"hh:mm a\").add(time2PerPatient, 'minutes').format('LTS');\r\n            index2++;\r\n          }\r\n        }\r\n      });\r\n\r\n      //this.drScheduleDialog = true;\r\n    },\r\n    getAppointment() {\r\n      if (this.doctorAppointment.doctor_id && this.doctorAppointment.schedule_date) {\r\n        var date = moment(String(this.doctorAppointment.schedule_date)).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointmentService.getDynamicDoctorWise(date, date, \"All\", this.doctorAppointment.doctor_id).then((data) => this.getAppointmentFormatted(data.data));\r\n      }\r\n    },\r\n    getAppointmentFormatted(data) {\r\n      this.doctorAppointmentList = data;\r\n      this.viewDrSchedule();\r\n    },\r\n    isAppointmentExist(time) {\r\n      var result = false\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + time, 'MM/DD/YYYY h:mm:ss A');\r\n      var date = dateTime.format('MM/DD/YYYY h:mm:ss A');\r\n      this.doctorAppointmentList.forEach(element => {\r\n        var appoint_date = moment(String(element.appoint_date)).format(\"MM/DD/YYYY h:mm:ss A\");\r\n        if (appoint_date == date) {\r\n          result = true;\r\n        }\r\n      });\r\n\r\n      return result;\r\n    },\r\n    setAppointment(appointmentTime) {\r\n      var schedule_date = moment(\r\n        String(this.doctorAppointment.schedule_date)\r\n      ).format(\"MM/DD/YYYY\");\r\n      var dateTime = moment(schedule_date + ' ' + appointmentTime, 'MM/DD/YYYY h:mm:ss a');\r\n      this.doctorAppointment.cdappoint_date = dateTime.format('MM/DD/YYYY h:mm:ss a');\r\n      this.drScheduleDialog = false;\r\n      this.getConsultancyFeeByType();\r\n      //this.checkDrSchedule();\r\n    },\r\n    checkDrSchedule() {\r\n      this.isSchedule = false;\r\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      var d = new Date(moment(\r\n        String(this.doctorAppointment.cdappoint_date)\r\n      ).format(\"YYYY-MM-DD\"));\r\n      var dayName = days[d.getDay()];\r\n\r\n      this.scheduleList.forEach((element) => {\r\n        var start_time1 = new Date(\"2000-01-01 \" + element.start_time1);\r\n        var end_time1 = new Date(\"2000-01-01 \" + element.end_time1);\r\n        var start_time2 = new Date(\"2000-01-01 \" + element.start_time2);\r\n        var end_time2 = new Date(\"2000-01-01 \" + element.end_time2);\r\n        var timeNow = new Date(\"2000-01-01 \" + moment(String(this.doctorAppointment.cdappoint_date)).format(\"h:mm a\"));\r\n        if (element._day_name == dayName && element.is_available) {\r\n          if ((start_time1 <= timeNow && timeNow <= end_time1) || (start_time2 <= timeNow && timeNow <= end_time2)) {\r\n            this.isSchedule = true;\r\n          }\r\n        }\r\n      });\r\n\r\n      if (!this.isSchedule) {\r\n        this.isScheduleExist = \"Schedule not exist\";\r\n      } else {\r\n        this.isScheduleExist = \"\";\r\n      }\r\n    },\r\n    async add() {\r\n      //this.checkDrSchedule();\r\n      this.submitted = true;\r\n      try {\r\n        if (!this.doctorAppointment.aPatient.first_name) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_year) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_month) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.age_day) {\r\n          return;\r\n        } else if (!this.doctorAppointment.aPatient.contact_no) {\r\n          return;\r\n        } else if (!this.doctorAppointment.department_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.doctor_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.appointment_type) {\r\n          return;\r\n        } else if (!this.doctorAppointment.consultancy_fee) {\r\n          return;\r\n        } else if (!this.doctorAppointment.building_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.room_id) {\r\n          return;\r\n        } else if (!this.doctorAppointment.cdappoint_date) {\r\n          return;\r\n        } else if (!this.doctorAppointment.reason) {\r\n          return;\r\n        } else if (this.isContactExist || this.isScheduleExist) {\r\n          return;\r\n        } else {\r\n          this.doctorAppointment.appoint_date = moment(\r\n            String(this.doctorAppointment.cdappoint_date)\r\n          ).format(\"YYYY-MM-DD h:mm:ss a\");\r\n\r\n          var currentDate = new Date();\r\n          var dob = new Date(currentDate.getFullYear() - this.doctorAppointment.aPatient.age_year, currentDate.getMonth() - this.doctorAppointment.aPatient.age_month, currentDate.getDate() - this.doctorAppointment.aPatient.age_day);\r\n          this.doctorAppointment.aPatient.dob = moment(\r\n            String(dob)\r\n          ).format(\"YYYY-MM-DD\");\r\n          if (!this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.add(\r\n              this.doctorAppointment, this\r\n            );\r\n\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Saved Successfully\",\r\n                life: 10000,\r\n              });\r\n\r\n              if (this.globalSetting.setting_value == \"Yes\") {\r\n                this.confirmPay(result.data);\r\n              } else {\r\n                this.reset();\r\n                this.printAppointmentToken(result.data);\r\n              }\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          } else if (this.doctorAppointment.invoice_id) {\r\n            let result = await this.doctorAppointmentService.put(\r\n              this.doctorAppointment, this\r\n            );\r\n            if (result.status === 200) {\r\n              this.$toast.add({\r\n                severity: \"success\",\r\n                summary: \"Success\",\r\n                detail: \"Successfully Updated\",\r\n                life: 10000,\r\n              });\r\n              this.reset();\r\n              this.printAppointmentToken(result.data);\r\n              this.$router.push(\"/patient-doctor-appointment-list\");\r\n            } else if (result.status === 401) {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Error\",\r\n                detail: result.data,\r\n                life: 10000,\r\n              });\r\n            } else {\r\n              this.$toast.add({\r\n                severity: \"error\",\r\n                summary: \"Failed\",\r\n                detail: result.res,\r\n                life: 10000,\r\n              });\r\n            }\r\n          }\r\n\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    confirmPay(data) {\r\n      this.$confirm.require({\r\n        message: 'Are you sure you want to pay now?',\r\n        header: 'Confirmation',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        accept: () => {\r\n          localStorage.setItem('appointment_id_for_payment', data);\r\n          this.$router.push(\"/appointment-payment-collection\");\r\n        },\r\n        reject: () => {\r\n          this.printAppointmentToken(data);\r\n          this.reset();\r\n        },\r\n\r\n      });\r\n    },\r\n    searchPatient(event) {\r\n      setTimeout(() => {\r\n        if (!event.query.trim().length) {\r\n          this.filteredItems = [...this.patientsSuggestions];\r\n        }\r\n        else {\r\n          // start with\r\n          // this.filteredItems = this.medicineList.filter((item) => {\r\n          //     return item.text.toLowerCase().startsWith(event.query.toLowerCase());\r\n          // });\r\n\r\n          // contains\r\n          this.filteredItems = FilterService.filter(this.patientsSuggestions, ['patient'], event.query.toLowerCase(), FilterMatchMode.CONTAINS).slice(0, 500);\r\n        }\r\n      }, 250);\r\n    },\r\n  },\r\n};"]}]}