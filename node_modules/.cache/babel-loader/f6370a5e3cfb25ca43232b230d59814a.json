{"remainingRequest":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\opd\\AppointmentPrescription.js","dependencies":[{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\src\\scripts\\opd\\AppointmentPrescription.js","mtime":1668680594645},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\SVN PROJECTS\\ERP_Hospital_Client\\trunk\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1NWTiBQUk9KRUNUUy9FUlBfSG9zcGl0YWxfQ2xpZW50L3RydW5rL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IENvbW1vblNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9Db21tb25TZXJ2aWNlIjsgLy8gUHJlc2NyaXB0aW9uCgppbXBvcnQgRG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvZnJvbnQtZGVzay9Eb2N0b3JBcHBvaW50bWVudFNlcnZpY2UiOyAvL2ltcG9ydCBGaWd1cmVTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9GaWd1cmVTZXR1cFNlcnZpY2UiOwoKaW1wb3J0IEFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2RvY3Rvci1wYW5lbC9BcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UiOwppbXBvcnQgUHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL3JlcG9ydC9QcmVzY3JpcHRpb25SZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IFByZXNjcmlwdGlvbiBmcm9tICIuLi8uLi9jb21wb25lbnRzL1ByZXNjcmlwdGlvbiI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgRmlsdGVyTWF0Y2hNb2RlLCBGaWx0ZXJPcGVyYXRvciB9IGZyb20gInByaW1ldnVlL2FwaSI7CmltcG9ydCBQYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svUGF0aWVudFJlZ2lzdHJhdGlvblNlcnZpY2UiOwppbXBvcnQgUGF0aWVudFJlcG9ydFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9yZXBvcnQvUGF0aWVudFJlcG9ydFNlcnZpY2UiOwppbXBvcnQgUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSBmcm9tICIuLi8uLi9zZXJ2aWNlL2Zyb250LWRlc2svUGF0aWVudEludmVzdGlnYXRpb25SZXF1ZXN0U2VydmljZSI7CmltcG9ydCBEaWFnbm9zaXNSZXBvcnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NlcnZpY2UvcmVwb3J0L0RpYWdub3Npc1JlcG9ydFNlcnZpY2UiOyAvL2ltcG9ydCBEaWFnbm9zaXNTZXR1cFNlcnZpY2UgZnJvbSAiLi4vLi4vc2VydmljZS9zZXR1cC9EaWFnbm9zaXNTZXR1cFNlcnZpY2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFByZXNjcmlwdGlvbjogUHJlc2NyaXB0aW9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNEb2N0b3I6IGZhbHNlLAogICAgICBkYXRhTGlzdDogdHJ1ZSwKICAgICAgaXNIaXN0b3J5OiBmYWxzZSwKICAgICAgLy9maWd1cmVEaWFsb2c6IGZhbHNlLAogICAgICAvL2RpYWdub3Npc0xpc3Q6IFtdLAogICAgICBhcHBvaW5tZW50U3RhdHVzTGlzdDogW10sCiAgICAgIGRvY3RvckFwcG9pbnRtZW50TGlzdDogW10sCiAgICAgIHByZXZQcmVzY3JpcHRpb25EaWFsb2c6IGZhbHNlLAogICAgICBwcmV2UHJlc2NyaXB0aW9uTGlzdDogW10sCiAgICAgIGFwcG9pbnRtZW50SW5mbzoge30sCiAgICAgIC8vZmlndXJlOiB7fSwKICAgICAgZG9jdG9yX2lkOiAiIiwKICAgICAgZG9jdG9yQXBwb2ludG1lbnQ6IHsKICAgICAgICBjZGZyb21kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZHRvZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgLy8gY2R0b2RhdGU6IG1vbWVudCgKICAgICAgICAvLyAgIFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpCiAgICAgICAgLy8gKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBhcHBvaW5tZW50X3N0YXR1czogIkFjdGl2ZSIKICAgICAgfSwKICAgICAgYXBwb2ludG1lbnRQcmVzY3JpcHRpb246IHsKICAgICAgICBjZHByZXNjcmlwdGlvbl9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKCkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBjZGZvbG93dXBfZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyA3KSkpKS5mb3JtYXQoIk1NL0REL1lZWVkiKSwKICAgICAgICBmaWd1cmVfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIGZhbWlseUhpc3Rvcnlfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIHBhc3RIaXN0b3J5X3Nob3dfaW5fcHJlc2NyaXB0aW9uOiBmYWxzZSwKICAgICAgICBhbGxBZHZpY2U6IGZhbHNlLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25Db21wbGlhbnRzOiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uT25FeGFtaW5hdGlvbjogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkZpZ3VyZTogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkludmVzdGlnYXRpb246IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25EaWFnbm9zaXM6IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25GYW1pbHlIaXN0b3J5OiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uUGFzdEhpc3Rvcnk6IFtdLAogICAgICAgIGxzdE51dHJpdGlvbjogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvblRyZWF0bWVudDogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkFkdmljZTogW10KICAgICAgfSwKICAgICAgLy8gY2FudmFzIHN0YXJ0CiAgICAgIGNhbnZhczogbnVsbCwKICAgICAgY29udGV4dDogbnVsbCwKICAgICAgaXNEcmF3aW5nOiBmYWxzZSwKICAgICAgc3RhcnRYOiAwLAogICAgICBzdGFydFk6IDAsCiAgICAgIHBvaW50czogW10sCiAgICAgIC8vIGNhbnZhcyBlbmQKICAgICAgc3VibWl0dGVkOiBmYWxzZSwKICAgICAgZmlsdGVyczogewogICAgICAgIGdsb2JhbDogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5DT05UQUlOUwogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICBtYXRjaE1vZGU6IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW5pdEZpbHRlcnM6IGZ1bmN0aW9uIGluaXRGaWx0ZXJzKCkgewogICAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICAgIGdsb2JhbDogewogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICAgIH0sCiAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvci5BTkQsCiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiBbewogICAgICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgICAgIG1hdGNoTW9kZTogRmlsdGVyTWF0Y2hNb2RlLlNUQVJUU19XSVRICiAgICAgICAgICAgIH1dCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIHBhc3QgZGF0ZS15ZWFyIGRpc2FibGVkCiAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgdmFyIG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKTsKICAgIHZhciB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsKICAgIHZhciBwcmV2TW9udGggPSBtb250aCA9PT0gMCA/IDExIDogbW9udGggLSAwOwogICAgdmFyIHByZXZZZWFyID0gcHJldk1vbnRoID09PSAxMSA/IHllYXIgLSAwIDogeWVhcjsKICAgIHRoaXMubWluRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB0aGlzLm1pbkRhdGUuc2V0TW9udGgocHJldk1vbnRoKTsKICAgIHRoaXMubWluRGF0ZS5zZXRGdWxsWWVhcihwcmV2WWVhcik7CiAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uU2VydmljZSA9IG5ldyBBcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UoKTsgLy90aGlzLmZpZ3VyZVNldHVwU2VydmljZSA9IG5ldyBGaWd1cmVTZXR1cFNlcnZpY2UoKTsKCiAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50U2VydmljZSA9IG5ldyBEb2N0b3JBcHBvaW50bWVudFNlcnZpY2UoKTsKICAgIHRoaXMuY29tbW9uU2VydmljZSA9IG5ldyBDb21tb25TZXJ2aWNlKCk7CiAgICB0aGlzLnByZXNjcmlwdGlvblJlcG9ydFNlcnZpY2UgPSBuZXcgUHJlc2NyaXB0aW9uUmVwb3J0U2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSA9IG5ldyBQYXRpZW50UmVnaXN0cmF0aW9uU2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50UmVwb3J0U2VydmljZSA9IG5ldyBQYXRpZW50UmVwb3J0U2VydmljZSgpOwogICAgdGhpcy5wYXRpZW50SW52ZXN0aWdhdGlvblJlcXVlc3RTZXJ2aWNlID0gbmV3IFBhdGllbnRJbnZlc3RpZ2F0aW9uUmVxdWVzdFNlcnZpY2UoKTsKICAgIHRoaXMuZGlhZ25vc2lzUmVwb3J0U2VydmljZSA9IG5ldyBEaWFnbm9zaXNSZXBvcnRTZXJ2aWNlKCk7IC8vdGhpcy5kaWFnbm9zaXNTZXR1cFNlcnZpY2UgPSBuZXcgRGlhZ25vc2lzU2V0dXBTZXJ2aWNlKCk7CgogICAgdGhpcy51c2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIikpOyAvLyB0aGlzLmRpYWdub3Npc1NldHVwU2VydmljZQogICAgLy8gICAuZ2V0QWxsKCkKICAgIC8vICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLmRpYWdub3Npc0xpc3QgPSBkYXRhLmRhdGEpKTsKCiAgICB0aGlzLmNvbW1vblNlcnZpY2UuR2V0QWxsQXBwb2lubWVudFN0YXR1cygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmFwcG9pbm1lbnRTdGF0dXNMaXN0ID0gZGF0YS5kYXRhOwogICAgfSk7CgogICAgaWYgKHRoaXMudXNlckluZm8uZG9jdG9yX2lkKSB7CiAgICAgIHRoaXMuaXNEb2N0b3IgPSB0cnVlOwogICAgICB0aGlzLmRvY3Rvcl9pZCA9IHRoaXMudXNlckluZm8uZG9jdG9yX2lkOwogICAgfSBlbHNlIGlmICghdGhpcy51c2VySW5mby5kb2N0b3JfaWQpIHsKICAgICAgdGhpcy5pc0RvY3RvciA9IGZhbHNlOwogICAgfQoKICAgIHRoaXMuc2hvdygpOyAvLyBzaG9ydGN1dCBrZXkgc3RhcnQKICAgIC8vIGxldCB0aGF0ID0gdGhpczsKICAgIC8vIGRvY3VtZW50Lm9ua2V5dXAgPSBmdW5jdGlvbiAoZSkgewogICAgLy8gICBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUud2hpY2ggPT0gNjcpIHsKICAgIC8vICAgICB0aGF0LmdldFBhdGllbnRDb21wbGFpbnRzKCk7CiAgICAvLyAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUud2hpY2ggPT0gNjkpIHsKICAgIC8vICAgICB0aGF0LmdldE9uRXhhbWluYXRpb25zUG9wdXAoKTsKICAgIC8vICAgICB0aGF0LmdldE9uRXhhbWluYXRpb25zKCk7CiAgICAvLyAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUud2hpY2ggPT0gNzApIHsKICAgIC8vICAgICB0aGF0LmdldEZpZ3VyZSgpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDczKSB7CiAgICAvLyAgICAgdGhhdC5nZXRJbnZlc3RpZ2F0aW9uKCk7CiAgICAvLyAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUud2hpY2ggPT0gNjgpIHsKICAgIC8vICAgICB0aGF0LmdldERpYWdub3NpcygpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDcyKSB7CiAgICAvLyAgICAgdGhhdC5nZXRGYW1pbHlIaXN0b3J5KCk7CiAgICAvLyAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUud2hpY2ggPT0gODApIHsKICAgIC8vICAgICB0aGF0LmdldFBhc3RIaXN0b3J5KCk7CiAgICAvLyAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUuYWx0S2V5ICYmIGUud2hpY2ggPT0gODQpIHsKICAgIC8vICAgICB0aGF0LmdldFRyZWF0bWVudCgpOwogICAgLy8gICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmFsdEtleSAmJiBlLndoaWNoID09IDY1KSB7CiAgICAvLyAgICAgdGhhdC5nZXRBZHZpY2UoKTsKICAgIC8vICAgfQogICAgLy8gICAvLyBlbHNlIGlmIChlLmN0cmxLZXkgJiYgZS5hbHRLZXkgJiYgZS5zaGlmdEtleSkgewogICAgLy8gICAvLyB9CiAgICAvLyB9OwogICAgLy8gc2hvcnRjdXQga2V5IGVuZAogICAgLy8gdmFyIHByZXNjcmlwdGlvbkRhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcmVzY3JpcHRpb25EYXRhJykpOwogICAgLy8gaWYgKHByZXNjcmlwdGlvbkRhdGEpIHsKICAgIC8vICAgdGhpcy5wcmVzY3JpcHRpb24ocHJlc2NyaXB0aW9uRGF0YSk7CiAgICAvLyAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwcmVzY3JpcHRpb25EYXRhJyk7CiAgICAvLyB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQgPSB7CiAgICAgICAgY2Rmcm9tZGF0ZTogbW9tZW50KFN0cmluZyhuZXcgRGF0ZSgpKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgY2R0b2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIC8vIGNkdG9kYXRlOiBtb21lbnQoCiAgICAgICAgLy8gICBTdHJpbmcobmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgNykpKQogICAgICAgIC8vICkuZm9ybWF0KCJNTS9ERC9ZWVlZIiksCiAgICAgICAgYXBwb2lubWVudF9zdGF0dXM6ICJBY3RpdmUiCiAgICAgIH07IC8vIHRoaXMuZGF0YUxpc3QgPSB0cnVlOwogICAgICAvLyB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwoKICAgICAgdGhpcy5zaG93KCk7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMuZG9jdG9yQXBwb2ludG1lbnQuY2Rmcm9tZGF0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZHRvZGF0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5kb2N0b3JBcHBvaW50bWVudC5hcHBvaW5tZW50X3N0YXR1cykgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmZyb21kYXRlID0gbW9tZW50KFN0cmluZyh0aGlzLmRvY3RvckFwcG9pbnRtZW50LmNkZnJvbWRhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICB0aGlzLmRvY3RvckFwcG9pbnRtZW50LnRvZGF0ZSA9IG1vbWVudChTdHJpbmcodGhpcy5kb2N0b3JBcHBvaW50bWVudC5jZHRvZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgIHRoaXMuZG9jdG9yQXBwb2ludG1lbnRTZXJ2aWNlLmdldER5bmFtaWNEb2N0b3JXaXNlKHRoaXMuZG9jdG9yQXBwb2ludG1lbnQuZnJvbWRhdGUsIHRoaXMuZG9jdG9yQXBwb2ludG1lbnQudG9kYXRlLCB0aGlzLmRvY3RvckFwcG9pbnRtZW50LmFwcG9pbm1lbnRfc3RhdHVzLCB0aGlzLmRvY3Rvcl9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5kb2N0b3JBcHBvaW50bWVudExpc3QgPSBkYXRhLmRhdGE7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YUxpc3QgPSB0cnVlOwogICAgICB0aGlzLmlzSGlzdG9yeSA9IGZhbHNlOwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIGhpZGVIaXN0b3J5OiBmdW5jdGlvbiBoaWRlSGlzdG9yeSgpIHsKICAgICAgdGhpcy5pc0hpc3RvcnkgPSBmYWxzZTsKICAgIH0sCiAgICByZXBvcnRQcmludDogZnVuY3Rpb24gcmVwb3J0UHJpbnQoYmFyY29kZV9vcl9sZXZlbCwgdGVtcGxhdGVfbmFtZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuZGlhZ25vc2lzUmVwb3J0U2VydmljZS5HZXRJbnZlc3RpZ2F0aW9uUmVwb3J0VGVtcGxhdGVXaXNlKGJhcmNvZGVfb3JfbGV2ZWwsIHRlbXBsYXRlX25hbWUsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHZpZXdQYXRpZW50UHJvZmlsZTogZnVuY3Rpb24gdmlld1BhdGllbnRQcm9maWxlKHBhdGllbnRfaWQpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhdGllbnRJZF9mb3JfcHJvZmlsZScsIHBhdGllbnRfaWQpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3BhdGllbnQtcHJvZmlsZSIpOwogICAgfSwKICAgIHByZXZpb3VzUHJlc2NyaXB0aW9uOiBmdW5jdGlvbiBwcmV2aW91c1ByZXNjcmlwdGlvbihwYXRpZW50X2lkKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvblNlcnZpY2UuZ2V0UGF0aWVudFdpc2VQcmVzY3JpcHRpb25MaXN0KHBhdGllbnRfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM0LnByZXZQcmVzY3JpcHRpb25MaXN0ID0gZGF0YS5kYXRhOwogICAgICB9KTsKICAgICAgdGhpcy5wcmV2UHJlc2NyaXB0aW9uRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBjaGVja0RhdGU6IGZ1bmN0aW9uIGNoZWNrRGF0ZShkYXRlKSB7CiAgICAgIHZhciB0b2RheSA9IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpOwogICAgICB2YXIgYXBwdERhdGUgPSBtb21lbnQoU3RyaW5nKGRhdGUpKS5mb3JtYXQoIk1NL0REL1lZWVkiKTsKCiAgICAgIGlmICh0b2RheSA9PSBhcHB0RGF0ZSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGhpZGVEaWFsb2c6IGZ1bmN0aW9uIGhpZGVEaWFsb2coKSB7CiAgICAgIC8vdGhpcy5maWd1cmVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5wcmV2UHJlc2NyaXB0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7CiAgICB9LAogICAgLy8gRmlndXJlIFN0YXJ0IAogICAgLy8gZ2V0RGlhZ25vc2lzKCkgewogICAgLy8gICB0aGlzLmhlYWRlck5hbWUgPSAiRGlhZ25vc2lzIjsKICAgIC8vICAgdGhpcy5maWx0ZXJzWydnbG9iYWwnXS52YWx1ZSA9ICIiOwogICAgLy8gICB0aGlzLmlzQWR2aWNlID0gZmFsc2U7CiAgICAvLyAgIHRoaXMudGVtcERhdGEgPSBbXTsKICAgIC8vICAgdGhpcy5wcmVzY3JpcHRpb25EYXRhTGlzdC5sc3REaWFnbm9zaXMuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgLy8gICAgIHRoaXMudGVtcERhdGEucHVzaCh7CiAgICAvLyAgICAgICBuYW1lOiBlbGVtZW50LmRpYWdub3Npc19uYW1lLAogICAgLy8gICAgICAgaWQ6IGVsZW1lbnQuZGlhZ25vc2lzX2lkLAogICAgLy8gICAgIH0pOwogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICAvLyBnZXRGaWd1cmUoKSB7CiAgICAvLyAgIHRoaXMuaGVhZGVyTmFtZSA9ICJGaWd1cmUiOwogICAgLy8gICB0aGlzLmZpbHRlcnNbJ2dsb2JhbCddLnZhbHVlID0gIiI7CiAgICAvLyAgIHRoaXMuaXNBZHZpY2UgPSBmYWxzZTsKICAgIC8vICAgdGhpcy50ZW1wRGF0YSA9IFtdOwogICAgLy8gICB0aGlzLnByZXNjcmlwdGlvbkRhdGFMaXN0LmxzdEZpZ3VyZVNldHVwLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgIC8vICAgICB0aGlzLnRlbXBEYXRhLnB1c2goewogICAgLy8gICAgICAgbmFtZTogZWxlbWVudC5maWd1cmVfbmFtZSwKICAgIC8vICAgICAgIGlkOiBlbGVtZW50LmZpZ3VyZV9pZCwKICAgIC8vICAgICB9KTsKICAgIC8vICAgfSk7CiAgICAvLyB9LAogICAgLy8gZ2V0RmlndXJlRm9ybWF0dGVkKGRhdGEpIHsKICAgIC8vICAgdGhpcy5maWd1cmUuZmlndXJlX2ltYWdlID0gImRhdGE6aW1hZ2UvanBnO2Jhc2U2NCwiICsgZGF0YS5maWd1cmVfaW1hZ2U7CiAgICAvLyAgIC8vIGNhbnZhcwogICAgLy8gICB2YXIgdm0gPSB0aGlzOwogICAgLy8gICB2bS5jYW52YXMgPSB2bS4kcmVmcy5jYW52YXM7CiAgICAvLyAgIHZtLmNvbnRleHQgPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgIC8vICAgdm0uY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIHZtLm1vdXNlZG93bik7CiAgICAvLyAgIHZtLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCB2bS5tb3VzZW1vdmUpOwogICAgLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgdm0ubW91c2V1cCk7CiAgICAvLyAgIHZtLmltZyA9IG5ldyBJbWFnZSgpOwogICAgLy8gICB2bS5pbWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgLy8gICAgIHZtLmNvbnRleHQuZHJhd0ltYWdlKHZtLmltZywgMCwgMCwgMzAwLCAyMDApOyAvLyBPciBhdCB3aGF0ZXZlciBvZmZzZXQgeW91IGxpa2UgYW5kIHNldCBoZWlnaHQsIHdpZHRoCiAgICAvLyAgIH07CiAgICAvLyAgIHZtLmltZy5zcmMgPSB0aGlzLmZpZ3VyZS5maWd1cmVfaW1hZ2U7CiAgICAvLyB9LAogICAgLy8gLy8gY2FudmFzCiAgICAvLyBtb3VzZWRvd24oZSkgewogICAgLy8gICB2YXIgdm0gPSB0aGlzOwogICAgLy8gICB2YXIgcmVjdCA9IHZtLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIC8vICAgdmFyIHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAvLyAgIHZhciB5ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAvLyAgIHZtLmlzRHJhd2luZyA9IHRydWU7CiAgICAvLyAgIHZtLnN0YXJ0WCA9IHg7CiAgICAvLyAgIHZtLnN0YXJ0WSA9IHk7CiAgICAvLyAgIHZtLnBvaW50cy5wdXNoKHsKICAgIC8vICAgICB4OiB4LAogICAgLy8gICAgIHk6IHksCiAgICAvLyAgIH0pOwogICAgLy8gfSwKICAgIC8vIG1vdXNlbW92ZShlKSB7CiAgICAvLyAgIHZhciB2bSA9IHRoaXM7CiAgICAvLyAgIHZhciByZWN0ID0gdm0uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgLy8gICB2YXIgeCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgIC8vICAgdmFyIHkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDsKICAgIC8vICAgaWYgKHZtLmlzRHJhd2luZykgewogICAgLy8gICAgIHZtLmNvbnRleHQuYmVnaW5QYXRoKCk7CiAgICAvLyAgICAgdm0uY29udGV4dC5tb3ZlVG8odm0uc3RhcnRYLCB2bS5zdGFydFkpOwogICAgLy8gICAgIHZtLmNvbnRleHQubGluZVRvKHgsIHkpOwogICAgLy8gICAgIHZtLmNvbnRleHQubGluZVdpZHRoID0gMTsKICAgIC8vICAgICB2bS5jb250ZXh0LmxpbmVDYXAgPSAicm91bmQiOwogICAgLy8gICAgIHZtLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSAicmdiYSgwLDAsMCwxKSI7CiAgICAvLyAgICAgdm0uY29udGV4dC5zdHJva2UoKTsKICAgIC8vICAgICB2bS5zdGFydFggPSB4OwogICAgLy8gICAgIHZtLnN0YXJ0WSA9IHk7CiAgICAvLyAgICAgdm0ucG9pbnRzLnB1c2goewogICAgLy8gICAgICAgeDogeCwKICAgIC8vICAgICAgIHk6IHksCiAgICAvLyAgICAgfSk7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyBtb3VzZXVwKCkgewogICAgLy8gICB2YXIgdm0gPSB0aGlzOwogICAgLy8gICB2bS5pc0RyYXdpbmcgPSBmYWxzZTsKICAgIC8vICAgaWYgKHZtLnBvaW50cy5sZW5ndGggPiAwKSB7CiAgICAvLyAgICAgbG9jYWxTdG9yYWdlWyJwb2ludHMiXSA9IEpTT04uc3RyaW5naWZ5KHZtLnBvaW50cyk7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyByZXNldENhbnZhcygpIHsKICAgIC8vICAgLy8gdmFyIHZtID0gdGhpczsKICAgIC8vICAgLy8gdm0uY2FudmFzLndpZHRoID0gdm0uY2FudmFzLndpZHRoOwogICAgLy8gICAvLyB2bS5wb2ludHMubGVuZ3RoID0gMDsgLy8gcmVzZXQgcG9pbnRzIGFycmF5CiAgICAvLyAgIHZhciB2bSA9IHRoaXM7CiAgICAvLyAgIHZtLmNhbnZhcyA9IHZtLiRyZWZzLmNhbnZhczsKICAgIC8vICAgdm0uY29udGV4dCA9IHZtLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgLy8gICB2bS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgdm0ubW91c2Vkb3duKTsKICAgIC8vICAgdm0uY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIHZtLm1vdXNlbW92ZSk7CiAgICAvLyAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCB2bS5tb3VzZXVwKTsKICAgIC8vICAgdm0uaW1nID0gbmV3IEltYWdlKCk7CiAgICAvLyAgIHZtLmltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAvLyAgICAgdm0uY29udGV4dC5kcmF3SW1hZ2Uodm0uaW1nLCAwLCAwLCAzMDAsIDIwMCk7IC8vIE9yIGF0IHdoYXRldmVyIG9mZnNldCB5b3UgbGlrZSBhbmQgc2V0IGhlaWdodCwgd2lkdGgKICAgIC8vICAgfTsKICAgIC8vICAgdm0uaW1nLnNyYyA9IHRoaXMuZmlndXJlLmZpZ3VyZV9pbWFnZTsKICAgIC8vICAgdm0uY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7CiAgICAvLyAgIHZtLnBvaW50cy5sZW5ndGggPSAwOyAvLyByZXNldCBwb2ludHMgYXJyYXkKICAgIC8vIH0sCiAgICAvLyAvLyBzYXZlSW1hZ2UoKSB7CiAgICAvLyAvLyAgIHZhciB2bSA9IHRoaXM7CiAgICAvLyAvLyAgIHZhciBkYXRhVVJMID0gdm0uY2FudmFzLnRvRGF0YVVSTCgpOwogICAgLy8gLy8gICB2YXIgaW1nID0gdm0uJHJlZnMuaW1nOwogICAgLy8gLy8gICBpbWcuc3JjID0gZGF0YVVSTDsKICAgIC8vIC8vIH0sCiAgICAvLyAvLwogICAgLy8gYWRkRmlndXJlKCkgewogICAgLy8gICB2YXIgZGF0YVVSTCA9IHRoaXMuY2FudmFzLnRvRGF0YVVSTCgpOwogICAgLy8gICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25GaWd1cmUucHVzaCh7CiAgICAvLyAgICAgbmFtZTogdGhpcy5maWd1cmUubmFtZSwKICAgIC8vICAgICBmaWd1cmVfaWQ6IHRoaXMuZmlndXJlLmZpZ3VyZV9pZCwKICAgIC8vICAgICBmaWd1cmVfaW1hZ2U6IGRhdGFVUkwuc3BsaXQoIiwiKVsxXSwKICAgIC8vICAgfSk7CiAgICAvLyAgIHRoaXMuZmlndXJlRGlhbG9nID0gZmFsc2U7CiAgICAvLyAgIHRoaXMuc2hvd0luUHJlc2NyaXB0aW9uKAogICAgLy8gICAgIHRoaXMuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24ubHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkZpZ3VyZSwKICAgIC8vICAgICAhdGhpcy5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5maWd1cmVfc2hvd19pbl9wcmVzY3JpcHRpb24KICAgIC8vICAgKTsKICAgIC8vIH0sCiAgICAvLyBGaWd1cmUgRW5kIAogICAgc2hvd0luUHJlc2NyaXB0aW9uOiBmdW5jdGlvbiBzaG93SW5QcmVzY3JpcHRpb24obHN0LCB2YWwpIHsKICAgICAgbHN0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBlbGVtZW50LnNob3dfaW5fcHJlc2NyaXB0aW9uID0gIXZhbDsKICAgICAgfSk7CiAgICB9LAogICAgcHJlc2NyaXB0aW9uOiBmdW5jdGlvbiBwcmVzY3JpcHRpb24oZGF0YSkgewogICAgICB0aGlzLmFwcG9pbnRtZW50SW5mby5hcHBvaW5tZW50X2lkID0gZGF0YS5hcHBvaW5tZW50X2lkOwogICAgICB0aGlzLmFwcG9pbnRtZW50SW5mby5wYXRpZW50UmVnID0gZGF0YS5hUGF0aWVudC5yZWdpc3RyYXRpb25fbm87CiAgICAgIHRoaXMuYXBwb2ludG1lbnRJbmZvLnBhdGllbnROYW1lID0gZGF0YS5hUGF0aWVudC5maXJzdF9uYW1lICsgIiAiICsgZGF0YS5hUGF0aWVudC5sYXN0X25hbWU7CiAgICAgIHRoaXMuYXBwb2ludG1lbnRJbmZvLnBhdGllbnRHZW5kZXIgPSBkYXRhLmFQYXRpZW50LmdlbmRlcjsKICAgICAgdGhpcy5hcHBvaW50bWVudEluZm8ucGF0aWVudEFnZVllYXIgPSBkYXRhLmFQYXRpZW50LmFnZV95ZWFyOwogICAgICB0aGlzLmFwcG9pbnRtZW50SW5mby5wYXRpZW50QWdlTW9udGggPSBkYXRhLmFQYXRpZW50LmFnZV9tb250aDsKICAgICAgdGhpcy5hcHBvaW50bWVudEluZm8ucGF0aWVudEFnZURheSA9IGRhdGEuYVBhdGllbnQuYWdlX2RheTsKICAgICAgdGhpcy5kYXRhTGlzdCA9IGZhbHNlOyAvLyBwYXNzIGRhdGEgaW50byBjb21wb25lbnQgCgogICAgICB0aGlzLiRyZWZzLnByZXNjcmlwdGlvbkNvbXBvbmVudC5wcmVzY3JpcHRpb24oZGF0YSk7CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcHJlc2NyaXB0aW9uSW5mbywgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIGdldCBkYXRhIGZyb20gY29tcG9uZW50IGFuZCBtYXBwZWQKICAgICAgICAgICAgICAgIHByZXNjcmlwdGlvbkluZm8gPSBfdGhpczUuJHJlZnMucHJlc2NyaXB0aW9uQ29tcG9uZW50LiRkYXRhLmFkbWlzc2lvblByZXNjcmlwdGlvbkluZm87CiAgICAgICAgICAgICAgICBfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24ubHN0QXBwb2lubWVudFByZXNjcmlwdGlvblRyZWF0bWVudCA9IHByZXNjcmlwdGlvbkluZm8ubHN0QWRtaXNzaW9uUHJlc2NyaXB0aW9uVHJlYXRtZW50OwogICAgICAgICAgICAgICAgX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uID0gcHJlc2NyaXB0aW9uSW5mby5sc3RBZG1pc3Npb25QcmVzY3JpcHRpb25JbnZlc3RpZ2F0aW9uOwogICAgICAgICAgICAgICAgX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25BZHZpY2UgPSBwcmVzY3JpcHRpb25JbmZvLmxzdEFkbWlzc2lvblByZXNjcmlwdGlvbkFkdmljZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwoKICAgICAgICAgICAgICAgIGlmICghKCFfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24ubHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkFkdmljZS5sZW5ndGggJiYgIV90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uSW52ZXN0aWdhdGlvbi5sZW5ndGggJiYgIV90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5sc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uVHJlYXRtZW50Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzNS5yZXNldCgpOyAvLyB0aGlzLiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgLy8gICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgIC8vICAgc3VtbWFyeTogIkVycm9yIiwKICAgICAgICAgICAgICAgIC8vICAgZGV0YWlsOiAiUGxlYXNlIGFkZCBQYXRpZW50IEFkdmljZSIsCiAgICAgICAgICAgICAgICAvLyAgIGxpZmU6IDEwMDAwLAogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvLyByZXR1cm47CgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24uYXBwb2lubWVudF9pZCA9IF90aGlzNS5hcHBvaW50bWVudEluZm8uYXBwb2lubWVudF9pZDsKICAgICAgICAgICAgICAgIF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5wcmVzY3JpcHRpb25fZGF0ZSA9IG1vbWVudChTdHJpbmcoX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmNkcHJlc2NyaXB0aW9uX2RhdGUpKS5mb3JtYXQoIllZWVktTU0tREQiKTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXM1LmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uLmNkZm9sb3d1cF9kYXRlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5mb2xvd3VwX2RhdGUgPSBtb21lbnQoU3RyaW5nKF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5jZGZvbG93dXBfZGF0ZSkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb25TZXJ2aWNlLmFkZChfdGhpczUuYXBwb2ludG1lbnRQcmVzY3JpcHRpb24sIF90aGlzNSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmRvd25sb2FkUHJlc2NyaXB0aW9uKF90aGlzNS5hcHBvaW50bWVudFByZXNjcmlwdGlvbi5hcHBvaW5tZW50X2lkKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6ICJQcmVzY3JpYmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczUubmV3UHJlc2NyaXB0aW9uKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczUucmVzZXQoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiAiRmFpbGVkIiwKICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHJlc3VsdC5yZXMsCiAgICAgICAgICAgICAgICAgICAgbGlmZTogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxODsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNCk7CgogICAgICAgICAgICAgICAgX3RoaXM1LiR0b2FzdC5hZGQoewogICAgICAgICAgICAgICAgICBzZXZlcml0eTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc3VtbWFyeTogIkZhaWxlZCIsCiAgICAgICAgICAgICAgICAgIGRldGFpbDogX2NvbnRleHQudDAsCiAgICAgICAgICAgICAgICAgIGxpZmU6IDEwMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNCwgMThdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGRvd25sb2FkUHJlc2NyaXB0aW9uOiBmdW5jdGlvbiBkb3dubG9hZFByZXNjcmlwdGlvbihhcHBvaW5tZW50X2lkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVzY3JpcHRpb25SZXBvcnRTZXJ2aWNlLkdldFBlc2NyaXB0aW9uKGFwcG9pbm1lbnRfaWQsIHRoaXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LmNvbW1vblNlcnZpY2UuRG93bmxvYWRmaWxlKGRhdGEuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIG5ld1ByZXNjcmlwdGlvbjogZnVuY3Rpb24gbmV3UHJlc2NyaXB0aW9uKCkgewogICAgICB0aGlzLmFwcG9pbnRtZW50UHJlc2NyaXB0aW9uID0gewogICAgICAgIGNkcHJlc2NyaXB0aW9uX2RhdGU6IG1vbWVudChTdHJpbmcobmV3IERhdGUoKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIGNkZm9sb3d1cF9kYXRlOiBtb21lbnQoU3RyaW5nKG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIDcpKSkpLmZvcm1hdCgiTU0vREQvWVlZWSIpLAogICAgICAgIGZpZ3VyZV9zaG93X2luX3ByZXNjcmlwdGlvbjogZmFsc2UsCiAgICAgICAgZmFtaWx5SGlzdG9yeV9zaG93X2luX3ByZXNjcmlwdGlvbjogZmFsc2UsCiAgICAgICAgcGFzdEhpc3Rvcnlfc2hvd19pbl9wcmVzY3JpcHRpb246IGZhbHNlLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25Db21wbGlhbnRzOiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uT25FeGFtaW5hdGlvbjogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkZpZ3VyZTogW10sCiAgICAgICAgbHN0QXBwb2lubWVudFByZXNjcmlwdGlvbkludmVzdGlnYXRpb246IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25EaWFnbm9zaXM6IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25GYW1pbHlIaXN0b3J5OiBbXSwKICAgICAgICBsc3RBcHBvaW5tZW50UHJlc2NyaXB0aW9uUGFzdEhpc3Rvcnk6IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25UcmVhdG1lbnQ6IFtdLAogICAgICAgIGxzdEFwcG9pbm1lbnRQcmVzY3JpcHRpb25BZHZpY2U6IFtdCiAgICAgIH07CiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2U7IC8vIHJlc2V0IGNvbXBvbmVudCBvYmoKCiAgICAgIHRoaXMuJHJlZnMucHJlc2NyaXB0aW9uQ29tcG9uZW50Lm5ld1ByZXNjcmlwdGlvbigpOwogICAgfSwKICAgIGZvcm1hdERhdGU6IGZ1bmN0aW9uIGZvcm1hdERhdGUodmFsdWUpIHsKICAgICAgcmV0dXJuIG1vbWVudChTdHJpbmcodmFsdWUpKS5mb3JtYXQoIk1NL0REL1lZWVkgaDptbTpzcyBhIik7CiAgICB9LAogICAgZm9ybWF0RGF0ZTI6IGZ1bmN0aW9uIGZvcm1hdERhdGUyKHZhbHVlKSB7CiAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCJNTS9ERC9ZWVlZIik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/SVN PROJECTS/ERP_Hospital_Client/trunk/src/scripts/opd/AppointmentPrescription.js"],"names":["CommonService","DoctorAppointmentService","AppointmentPrescriptionService","PrescriptionReportService","Prescription","moment","FilterMatchMode","FilterOperator","PatientRegistrationService","PatientReportService","PatientInvestigationRequestService","DiagnosisReportService","components","data","isDoctor","dataList","isHistory","appoinmentStatusList","doctorAppointmentList","prevPrescriptionDialog","prevPrescriptionList","appointmentInfo","doctor_id","doctorAppointment","cdfromdate","String","Date","format","cdtodate","appoinment_status","appointmentPrescription","cdprescription_date","cdfolowup_date","setDate","getDate","figure_show_in_prescription","familyHistory_show_in_prescription","pastHistory_show_in_prescription","allAdvice","lstAppoinmentPrescriptionCompliants","lstAppoinmentPrescriptionOnExamination","lstAppoinmentPrescriptionFigure","lstAppoinmentPrescriptionInvestigation","lstAppoinmentPrescriptionDiagnosis","lstAppoinmentPrescriptionFamilyHistory","lstAppoinmentPrescriptionPastHistory","lstNutrition","lstAppoinmentPrescriptionTreatment","lstAppoinmentPrescriptionAdvice","canvas","context","isDrawing","startX","startY","points","submitted","filters","global","value","matchMode","CONTAINS","name","STARTS_WITH","initFilters","operator","AND","constraints","created","today","month","getMonth","year","getFullYear","prevMonth","prevYear","minDate","setMonth","setFullYear","appointmentPrescriptionService","doctorAppointmentService","commonService","prescriptionReportService","patientRegistrationService","patientReportService","patientInvestigationRequestService","diagnosisReportService","userInfo","JSON","parse","localStorage","getItem","GetAllAppoinmentStatus","then","show","methods","reset","fromdate","todate","getDynamicDoctorWise","hideHistory","reportPrint","barcode_or_level","template_name","GetInvestigationReportTemplateWise","Downloadfile","viewPatientProfile","patient_id","setItem","$router","push","previousPrescription","getPatientWisePrescriptionList","checkDate","date","apptDate","hideDialog","showInPrescription","lst","val","forEach","element","show_in_prescription","prescription","appoinment_id","patientReg","aPatient","registration_no","patientName","first_name","last_name","patientGender","gender","patientAgeYear","age_year","patientAgeMonth","age_month","patientAgeDay","age_day","$refs","prescriptionComponent","add","prescriptionInfo","$data","admissionPrescriptionInfo","lstAdmissionPrescriptionTreatment","lstAdmissionPrescriptionInvestigation","lstAdmissionPrescriptionAdvice","length","prescription_date","folowup_date","result","status","downloadPrescription","$toast","severity","summary","detail","life","newPrescription","res","GetPescription","formatDate","formatDate2"],"mappings":"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YAAlC,CAAZ;AACA,UAAIuF,QAAQ,GAAG7G,MAAM,CAACoB,MAAM,CAACwF,IAAD,CAAP,CAAN,CAAqBtF,MAArB,CAA4B,YAA5B,CAAf;;AACA,UAAIyC,KAAK,IAAI8C,QAAb,EAAuB;AACrB,eAAO,IAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAP;AACD;AACF,KArEM;AAuEPC,IAAAA,UAvEO,wBAuEM;AACX;AACA,WAAKhG,sBAAL,GAA8B,KAA9B;AACA,WAAKoC,SAAL,GAAiB,KAAjB;AACD,KA3EM;AA6EP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA6D,IAAAA,kBAnNO,8BAmNYC,GAnNZ,EAmNiBC,GAnNjB,EAmNsB;AAC3BD,MAAAA,GAAG,CAACE,OAAJ,CAAY,UAACC,OAAD,EAAa;AACvBA,QAAAA,OAAO,CAACC,oBAAR,GAA+B,CAACH,GAAhC;AACD,OAFD;AAGD,KAvNM;AAwNPI,IAAAA,YAxNO,wBAwNM7G,IAxNN,EAwNY;AACjB,WAAKQ,eAAL,CAAqBsG,aAArB,GAAqC9G,IAAI,CAAC8G,aAA1C;AACA,WAAKtG,eAAL,C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","sourcesContent":["import CommonService from \"../../service/CommonService\";\r\n// Prescription\r\nimport DoctorAppointmentService from \"../../service/front-desk/DoctorAppointmentService\";\r\n//import FigureSetupService from \"../../service/setup/FigureSetupService\";\r\nimport AppointmentPrescriptionService from \"../../service/doctor-panel/AppointmentPrescriptionService\";\r\nimport PrescriptionReportService from \"../../service/report/PrescriptionReportService\";\r\nimport Prescription from \"../../components/Prescription\";\r\nimport moment from \"moment\";\r\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\r\nimport PatientRegistrationService from \"../../service/front-desk/PatientRegistrationService\";\r\nimport PatientReportService from \"../../service/report/PatientReportService\";\r\nimport PatientInvestigationRequestService from \"../../service/front-desk/PatientInvestigationRequestService\";\r\nimport DiagnosisReportService from \"../../service/report/DiagnosisReportService\";\r\n//import DiagnosisSetupService from \"../../service/setup/DiagnosisSetupService\";\r\n\r\nexport default {\r\n  components: {\r\n    Prescription\r\n  },\r\n  data() {\r\n    return {\r\n      isDoctor: false,\r\n      dataList: true,\r\n      isHistory: false,\r\n      //figureDialog: false,\r\n      //diagnosisList: [],\r\n      appoinmentStatusList: [],\r\n      doctorAppointmentList: [],\r\n      prevPrescriptionDialog: false,\r\n      prevPrescriptionList: [],\r\n      appointmentInfo: {},\r\n      //figure: {},\r\n      doctor_id: \"\",\r\n      doctorAppointment: {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        // cdtodate: moment(\r\n        //   String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        // ).format(\"MM/DD/YYYY\"),\r\n        appoinment_status: \"Active\",\r\n      },\r\n      appointmentPrescription: {\r\n        cdprescription_date: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdfolowup_date: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n\r\n        figure_show_in_prescription: false,\r\n        familyHistory_show_in_prescription: false,\r\n        pastHistory_show_in_prescription: false,\r\n        allAdvice: false,\r\n\r\n        lstAppoinmentPrescriptionCompliants: [],\r\n        lstAppoinmentPrescriptionOnExamination: [],\r\n        lstAppoinmentPrescriptionFigure: [],\r\n        lstAppoinmentPrescriptionInvestigation: [],\r\n        lstAppoinmentPrescriptionDiagnosis: [],\r\n        lstAppoinmentPrescriptionFamilyHistory: [],\r\n        lstAppoinmentPrescriptionPastHistory: [],\r\n        lstNutrition: [],\r\n        lstAppoinmentPrescriptionTreatment: [],\r\n        lstAppoinmentPrescriptionAdvice: [],\r\n      },\r\n\r\n      // canvas start\r\n      canvas: null,\r\n      context: null,\r\n      isDrawing: false,\r\n      startX: 0,\r\n      startY: 0,\r\n      points: [],\r\n      // canvas end\r\n\r\n      submitted: false,\r\n      filters: {\r\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n        name: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      initFilters() {\r\n        this.filters = {\r\n          global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n          name: {\r\n            operator: FilterOperator.AND,\r\n            constraints: [\r\n              { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n            ],\r\n          },\r\n        };\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    // past date-year disabled\r\n    let today = new Date();\r\n    let month = today.getMonth();\r\n    let year = today.getFullYear();\r\n    let prevMonth = (month === 0) ? 11 : month - 0;\r\n    let prevYear = (prevMonth === 11) ? year - 0 : year;\r\n    this.minDate = new Date();\r\n    this.minDate.setMonth(prevMonth);\r\n    this.minDate.setFullYear(prevYear);\r\n\r\n    this.appointmentPrescriptionService = new AppointmentPrescriptionService();\r\n    //this.figureSetupService = new FigureSetupService();\r\n    this.doctorAppointmentService = new DoctorAppointmentService();\r\n    this.commonService = new CommonService();\r\n    this.prescriptionReportService = new PrescriptionReportService();\r\n    this.patientRegistrationService = new PatientRegistrationService();\r\n    this.patientReportService = new PatientReportService();\r\n    this.patientInvestigationRequestService = new PatientInvestigationRequestService();\r\n    this.diagnosisReportService = new DiagnosisReportService();\r\n    //this.diagnosisSetupService = new DiagnosisSetupService();\r\n\r\n    this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n\r\n    // this.diagnosisSetupService\r\n    //   .getAll()\r\n    //   .then((data) => (this.diagnosisList = data.data));\r\n\r\n    this.commonService\r\n      .GetAllAppoinmentStatus()\r\n      .then((data) => (this.appoinmentStatusList = data.data));\r\n\r\n    if (this.userInfo.doctor_id) {\r\n      this.isDoctor = true;\r\n      this.doctor_id = this.userInfo.doctor_id;\r\n    } else if (!this.userInfo.doctor_id) {\r\n      this.isDoctor = false;\r\n    }\r\n    this.show();\r\n\r\n    // shortcut key start\r\n    // let that = this;\r\n    // document.onkeyup = function (e) {\r\n    //   if (e.ctrlKey && e.altKey && e.which == 67) {\r\n    //     that.getPatientComplaints();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 69) {\r\n    //     that.getOnExaminationsPopup();\r\n    //     that.getOnExaminations();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 70) {\r\n    //     that.getFigure();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 73) {\r\n    //     that.getInvestigation();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 68) {\r\n    //     that.getDiagnosis();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 72) {\r\n    //     that.getFamilyHistory();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 80) {\r\n    //     that.getPastHistory();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 84) {\r\n    //     that.getTreatment();\r\n    //   } else if (e.ctrlKey && e.altKey && e.which == 65) {\r\n    //     that.getAdvice();\r\n    //   }\r\n    //   // else if (e.ctrlKey && e.altKey && e.shiftKey) {\r\n\r\n    //   // }\r\n    // };\r\n    // shortcut key end\r\n\r\n    // var prescriptionData = JSON.parse(localStorage.getItem('prescriptionData'));\r\n    // if (prescriptionData) {\r\n    //   this.prescription(prescriptionData);\r\n    //   localStorage.removeItem('prescriptionData');\r\n    // }\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.doctorAppointment = {\r\n        cdfromdate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdtodate: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        // cdtodate: moment(\r\n        //   String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        // ).format(\"MM/DD/YYYY\"),\r\n        appoinment_status: \"Active\",\r\n      };\r\n\r\n      // this.dataList = true;\r\n      // this.submitted = false;\r\n      this.show();\r\n    },\r\n    show() {\r\n      this.submitted = true;\r\n      if (!this.doctorAppointment.cdfromdate) {\r\n        return;\r\n      } else if (!this.doctorAppointment.cdtodate) {\r\n        return;\r\n      } else if (!this.doctorAppointment.appoinment_status) {\r\n        return;\r\n      } else {\r\n        this.doctorAppointment.fromdate = moment(\r\n          String(this.doctorAppointment.cdfromdate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointment.todate = moment(\r\n          String(this.doctorAppointment.cdtodate)\r\n        ).format(\"YYYY-MM-DD\");\r\n        this.doctorAppointmentService\r\n          .getDynamicDoctorWise(\r\n            this.doctorAppointment.fromdate,\r\n            this.doctorAppointment.todate,\r\n            this.doctorAppointment.appoinment_status,\r\n            this.doctor_id\r\n          )\r\n          .then((data) => (this.doctorAppointmentList = data.data));\r\n      }\r\n      this.dataList = true;\r\n      this.isHistory = false;\r\n      this.submitted = false;\r\n    },\r\n    hideHistory() {\r\n      this.isHistory = false;\r\n    },\r\n    reportPrint(barcode_or_level, template_name) {\r\n      this.diagnosisReportService.GetInvestigationReportTemplateWise(barcode_or_level, template_name, this).then((data) => this.commonService.Downloadfile(data.data));\r\n    },\r\n    viewPatientProfile(patient_id) {\r\n      localStorage.setItem('patientId_for_profile', patient_id);\r\n      this.$router.push(\"/patient-profile\");\r\n    },\r\n    previousPrescription(patient_id) {\r\n      this.appointmentPrescriptionService\r\n        .getPatientWisePrescriptionList(patient_id)\r\n        .then((data) => (this.prevPrescriptionList = data.data));\r\n\r\n      this.prevPrescriptionDialog = true;\r\n    },\r\n\r\n    checkDate(date) {\r\n      var today = moment(String(new Date())).format(\"MM/DD/YYYY\");\r\n      var apptDate = moment(String(date)).format(\"MM/DD/YYYY\");\r\n      if (today == apptDate) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    hideDialog() {\r\n      //this.figureDialog = false;\r\n      this.prevPrescriptionDialog = false;\r\n      this.submitted = false;\r\n    },\r\n\r\n    // Figure Start \r\n    // getDiagnosis() {\r\n    //   this.headerName = \"Diagnosis\";\r\n    //   this.filters['global'].value = \"\";\r\n    //   this.isAdvice = false;\r\n    //   this.tempData = [];\r\n    //   this.prescriptionDataList.lstDiagnosis.forEach((element) => {\r\n    //     this.tempData.push({\r\n    //       name: element.diagnosis_name,\r\n    //       id: element.diagnosis_id,\r\n    //     });\r\n    //   });\r\n    // },\r\n\r\n    // getFigure() {\r\n    //   this.headerName = \"Figure\";\r\n    //   this.filters['global'].value = \"\";\r\n    //   this.isAdvice = false;\r\n    //   this.tempData = [];\r\n    //   this.prescriptionDataList.lstFigureSetup.forEach((element) => {\r\n    //     this.tempData.push({\r\n    //       name: element.figure_name,\r\n    //       id: element.figure_id,\r\n    //     });\r\n    //   });\r\n    // },\r\n\r\n    // getFigureFormatted(data) {\r\n    //   this.figure.figure_image = \"data:image/jpg;base64,\" + data.figure_image;\r\n    //   // canvas\r\n    //   var vm = this;\r\n    //   vm.canvas = vm.$refs.canvas;\r\n    //   vm.context = vm.canvas.getContext(\"2d\");\r\n    //   vm.canvas.addEventListener(\"mousedown\", vm.mousedown);\r\n    //   vm.canvas.addEventListener(\"mousemove\", vm.mousemove);\r\n    //   document.addEventListener(\"mouseup\", vm.mouseup);\r\n\r\n    //   vm.img = new Image();\r\n    //   vm.img.onload = function () {\r\n    //     vm.context.drawImage(vm.img, 0, 0, 300, 200); // Or at whatever offset you like and set height, width\r\n    //   };\r\n\r\n    //   vm.img.src = this.figure.figure_image;\r\n    // },\r\n    // // canvas\r\n    // mousedown(e) {\r\n    //   var vm = this;\r\n    //   var rect = vm.canvas.getBoundingClientRect();\r\n    //   var x = e.clientX - rect.left;\r\n    //   var y = e.clientY - rect.top;\r\n\r\n    //   vm.isDrawing = true;\r\n    //   vm.startX = x;\r\n    //   vm.startY = y;\r\n    //   vm.points.push({\r\n    //     x: x,\r\n    //     y: y,\r\n    //   });\r\n    // },\r\n    // mousemove(e) {\r\n    //   var vm = this;\r\n    //   var rect = vm.canvas.getBoundingClientRect();\r\n    //   var x = e.clientX - rect.left;\r\n    //   var y = e.clientY - rect.top;\r\n\r\n    //   if (vm.isDrawing) {\r\n    //     vm.context.beginPath();\r\n    //     vm.context.moveTo(vm.startX, vm.startY);\r\n    //     vm.context.lineTo(x, y);\r\n    //     vm.context.lineWidth = 1;\r\n    //     vm.context.lineCap = \"round\";\r\n    //     vm.context.strokeStyle = \"rgba(0,0,0,1)\";\r\n    //     vm.context.stroke();\r\n\r\n    //     vm.startX = x;\r\n    //     vm.startY = y;\r\n\r\n    //     vm.points.push({\r\n    //       x: x,\r\n    //       y: y,\r\n    //     });\r\n    //   }\r\n    // },\r\n    // mouseup() {\r\n    //   var vm = this;\r\n    //   vm.isDrawing = false;\r\n    //   if (vm.points.length > 0) {\r\n    //     localStorage[\"points\"] = JSON.stringify(vm.points);\r\n    //   }\r\n    // },\r\n    // resetCanvas() {\r\n    //   // var vm = this;\r\n    //   // vm.canvas.width = vm.canvas.width;\r\n    //   // vm.points.length = 0; // reset points array\r\n\r\n    //   var vm = this;\r\n    //   vm.canvas = vm.$refs.canvas;\r\n    //   vm.context = vm.canvas.getContext(\"2d\");\r\n    //   vm.canvas.addEventListener(\"mousedown\", vm.mousedown);\r\n    //   vm.canvas.addEventListener(\"mousemove\", vm.mousemove);\r\n    //   document.addEventListener(\"mouseup\", vm.mouseup);\r\n\r\n    //   vm.img = new Image();\r\n    //   vm.img.onload = function () {\r\n    //     vm.context.drawImage(vm.img, 0, 0, 300, 200); // Or at whatever offset you like and set height, width\r\n    //   };\r\n\r\n    //   vm.img.src = this.figure.figure_image;\r\n\r\n    //   vm.canvas.width = this.canvas.width;\r\n    //   vm.points.length = 0; // reset points array\r\n    // },\r\n    // // saveImage() {\r\n    // //   var vm = this;\r\n    // //   var dataURL = vm.canvas.toDataURL();\r\n    // //   var img = vm.$refs.img;\r\n    // //   img.src = dataURL;\r\n    // // },\r\n    // //\r\n    // addFigure() {\r\n    //   var dataURL = this.canvas.toDataURL();\r\n    //   this.appointmentPrescription.lstAppoinmentPrescriptionFigure.push({\r\n    //     name: this.figure.name,\r\n    //     figure_id: this.figure.figure_id,\r\n    //     figure_image: dataURL.split(\",\")[1],\r\n    //   });\r\n    //   this.figureDialog = false;\r\n    //   this.showInPrescription(\r\n    //     this.appointmentPrescription.lstAppoinmentPrescriptionFigure,\r\n    //     !this.appointmentPrescription.figure_show_in_prescription\r\n    //   );\r\n    // },\r\n    // Figure End \r\n\r\n    showInPrescription(lst, val) {\r\n      lst.forEach((element) => {\r\n        element.show_in_prescription = !val;\r\n      });\r\n    },\r\n    prescription(data) {\r\n      this.appointmentInfo.appoinment_id = data.appoinment_id;\r\n      this.appointmentInfo.patientReg = data.aPatient.registration_no;\r\n      this.appointmentInfo.patientName =\r\n        data.aPatient.first_name + \" \" + data.aPatient.last_name;\r\n      this.appointmentInfo.patientGender = data.aPatient.gender;\r\n      this.appointmentInfo.patientAgeYear = data.aPatient.age_year;\r\n      this.appointmentInfo.patientAgeMonth = data.aPatient.age_month;\r\n      this.appointmentInfo.patientAgeDay = data.aPatient.age_day;\r\n\r\n      this.dataList = false;\r\n      // pass data into component \r\n      this.$refs.prescriptionComponent.prescription(data);\r\n    },\r\n    async add() {\r\n      // get data from component and mapped\r\n      var prescriptionInfo = this.$refs.prescriptionComponent.$data.admissionPrescriptionInfo;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionTreatment = prescriptionInfo.lstAdmissionPrescriptionTreatment;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionInvestigation = prescriptionInfo.lstAdmissionPrescriptionInvestigation;\r\n      this.appointmentPrescription.lstAppoinmentPrescriptionAdvice = prescriptionInfo.lstAdmissionPrescriptionAdvice;\r\n      try {\r\n        if (!this.appointmentPrescription.lstAppoinmentPrescriptionAdvice.length && !this.appointmentPrescription.lstAppoinmentPrescriptionInvestigation.length &&  !this.appointmentPrescription.lstAppoinmentPrescriptionTreatment.length) {\r\n          this.reset();\r\n          // this.$toast.add({\r\n          //   severity: \"error\",\r\n          //   summary: \"Error\",\r\n          //   detail: \"Please add Patient Advice\",\r\n          //   life: 10000,\r\n          // });\r\n          // return;\r\n        } else {\r\n          this.appointmentPrescription.appoinment_id =\r\n            this.appointmentInfo.appoinment_id;\r\n\r\n          this.appointmentPrescription.prescription_date = moment(\r\n            String(this.appointmentPrescription.cdprescription_date)\r\n          ).format(\"YYYY-MM-DD\");\r\n\r\n          if (this.appointmentPrescription.cdfolowup_date) {\r\n            this.appointmentPrescription.folowup_date = moment(\r\n              String(this.appointmentPrescription.cdfolowup_date)\r\n            ).format(\"YYYY-MM-DD\");\r\n          }\r\n\r\n          let result = await this.appointmentPrescriptionService.add(\r\n            this.appointmentPrescription, this\r\n          );\r\n          if (result.status === 200) {\r\n            this.downloadPrescription(this.appointmentPrescription.appoinment_id);\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Success\",\r\n              detail: \"Prescribed Successfully\",\r\n              life: 10000,\r\n            });\r\n            this.newPrescription();\r\n            this.reset();\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"error\",\r\n              summary: \"Failed\",\r\n              detail: result.res,\r\n              life: 10000,\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Failed\",\r\n          detail: error,\r\n          life: 10000,\r\n        });\r\n      }\r\n    },\r\n    downloadPrescription(appoinment_id) {\r\n      this.prescriptionReportService.GetPescription(appoinment_id, this).then((data) => (this.commonService.Downloadfile(data.data)));\r\n    },\r\n    newPrescription() {\r\n      this.appointmentPrescription = {\r\n        cdprescription_date: moment(String(new Date())).format(\"MM/DD/YYYY\"),\r\n        cdfolowup_date: moment(\r\n          String(new Date(new Date().setDate(new Date().getDate() + 7)))\r\n        ).format(\"MM/DD/YYYY\"),\r\n\r\n        figure_show_in_prescription: false,\r\n        familyHistory_show_in_prescription: false,\r\n        pastHistory_show_in_prescription: false,\r\n\r\n        lstAppoinmentPrescriptionCompliants: [],\r\n        lstAppoinmentPrescriptionOnExamination: [],\r\n        lstAppoinmentPrescriptionFigure: [],\r\n        lstAppoinmentPrescriptionInvestigation: [],\r\n        lstAppoinmentPrescriptionDiagnosis: [],\r\n        lstAppoinmentPrescriptionFamilyHistory: [],\r\n        lstAppoinmentPrescriptionPastHistory: [],\r\n        lstAppoinmentPrescriptionTreatment: [],\r\n        lstAppoinmentPrescriptionAdvice: [],\r\n      };\r\n\r\n      this.submitted = false;\r\n      // reset component obj\r\n      this.$refs.prescriptionComponent.newPrescription();\r\n    },\r\n    formatDate(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY h:mm:ss a\");\r\n    },\r\n    formatDate2(value) {\r\n      return moment(String(value)).format(\"MM/DD/YYYY\");\r\n    },\r\n  },\r\n};"]}]}