import{DomHandler as e}from"primevue/utils";import t from"primevue/ripple";import{resolveComponent as n,resolveDirective as i,openBlock as s,createBlock as o,Transition as l,withCtx as r,Fragment as a,renderList as c,withDirectives as u,createVNode as d,toDisplayString as m,createCommentVNode as p,Teleport as h,mergeProps as f}from"vue";var b={emits:["leaf-click"],name:"sub-menu",props:{model:{type:Array,default:null},root:{type:Boolean,default:!1},parentActive:{type:Boolean,default:!1}},watch:{parentActive(e){e||(this.activeItem=null)}},data:()=>({activeItem:null}),methods:{onItemMouseEnter(e,t){t.disabled?e.preventDefault():this.activeItem=t},onItemClick(e,t,n){t.disabled?e.preventDefault():(t.command&&t.command({originalEvent:e,item:t}),t.items&&(this.activeItem&&t===this.activeItem?this.activeItem=null:this.activeItem=t),t.items||this.onLeafClick(),t.to&&n&&n(e))},onLeafClick(){this.activeItem=null,this.$emit("leaf-click")},onEnter(){this.position()},position(){const t=this.$refs.container.parentElement,n=e.getOffset(this.$refs.container.parentElement),i=e.getViewport(),s=this.$refs.container.offsetParent?this.$refs.container.offsetWidth:e.getHiddenElementOuterWidth(this.$refs.container),o=e.getOuterWidth(t.children[0]);this.$refs.container.style.top="0px",parseInt(n.left,10)+o+s>i.width-e.calculateScrollbarWidth()?this.$refs.container.style.left=-1*s+"px":this.$refs.container.style.left=o+"px"},getItemClass(e){return["p-menuitem",e.class,{"p-menuitem-active":this.activeItem===e}]},getLinkClass:e=>["p-menuitem-link",{"p-disabled":e.disabled}],visible:e=>"function"==typeof e.visible?e.visible():!1!==e.visible},computed:{containerClass(){return{"p-submenu-list":!this.root}}},directives:{ripple:t}};const v={class:"p-menuitem-text"},L={class:"p-menuitem-text"},x={key:0,class:"p-submenu-icon pi pi-angle-right"};b.render=function(e,t,h,f,b,C){const g=n("router-link"),k=n("sub-menu"),y=i("ripple");return s(),o(l,{name:"p-contextmenusub",onEnter:C.onEnter},{default:r((()=>[h.root||h.parentActive?(s(),o("ul",{key:0,ref:"container",class:C.containerClass,role:"menu"},[(s(!0),o(a,null,c(h.model,((e,t)=>(s(),o(a,{key:e.label+t.toString()},[C.visible(e)&&!e.separator?(s(),o("li",{key:0,role:"none",class:C.getItemClass(e),style:e.style,onMouseenter:t=>C.onItemMouseEnter(t,e)},[e.to&&!e.disabled?(s(),o(g,{key:0,to:e.to,custom:""},{default:r((({navigate:t,href:n})=>[u(d("a",{href:n,onClick:n=>C.onItemClick(n,e,t),class:C.getLinkClass(e),role:"menuitem"},[d("span",{class:["p-menuitem-icon",e.icon]},null,2),d("span",v,m(e.label),1)],10,["href","onClick"]),[[y]])])),_:2},1032,["to"])):u((s(),o("a",{key:1,href:e.url,class:C.getLinkClass(e),target:e.target,onClick:t=>C.onItemClick(t,e),"aria-haspopup":null!=e.items,"aria-expanded":e===b.activeItem,role:"menuitem",tabindex:e.disabled?null:"0"},[d("span",{class:["p-menuitem-icon",e.icon]},null,2),d("span",L,m(e.label),1),e.items?(s(),o("span",x)):p("",!0)],10,["href","target","onClick","aria-haspopup","aria-expanded","tabindex"])),[[y]]),C.visible(e)&&e.items?(s(),o(k,{model:e.items,key:e.label+"_sub_",onLeafClick:C.onLeafClick,parentActive:e===b.activeItem},null,8,["model","onLeafClick","parentActive"])):p("",!0)],46,["onMouseenter"])):p("",!0),C.visible(e)&&e.separator?(s(),o("li",{class:["p-menu-separator",e.class],style:e.style,key:"separator"+t.toString(),role:"separator"},null,6)):p("",!0)],64)))),128))],2)):p("",!0)])),_:1},8,["onEnter"])};var C={inheritAttrs:!1,props:{model:{type:Array,default:null},appendTo:{type:String,default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},global:{type:Boolean,default:!1}},target:null,outsideClickListener:null,resizeListener:null,documentContextMenuListener:null,pageX:null,pageY:null,container:null,data:()=>({visible:!1}),beforeUnmount(){this.unbindResizeListener(),this.unbindOutsideClickListener(),this.unbindDocumentContextMenuListener(),this.container=null},mounted(){this.global&&this.bindDocumentContextMenuListener()},methods:{itemClick(e){const t=e.item;t.command&&(t.command(e),e.originalEvent.preventDefault()),this.hide()},toggle(e){this.visible?this.hide():this.show(e)},onLeafClick(){this.hide()},show(e){this.pageX=e.pageX,this.pageY=e.pageY,this.visible?this.position():this.visible=!0,e.stopPropagation(),e.preventDefault()},hide(){this.visible=!1},onEnter(){this.position(),this.bindOutsideClickListener(),this.bindResizeListener(),this.autoZIndex&&(this.container.style.zIndex=String(this.baseZIndex+e.generateZIndex()))},onLeave(){this.unbindOutsideClickListener(),this.unbindResizeListener()},position(){let t=this.pageX+1,n=this.pageY+1,i=this.container.offsetParent?this.container.offsetWidth:e.getHiddenElementOuterWidth(this.container),s=this.container.offsetParent?this.container.offsetHeight:e.getHiddenElementOuterHeight(this.container),o=e.getViewport();t+i-document.body.scrollLeft>o.width&&(t-=i),n+s-document.body.scrollTop>o.height&&(n-=s),t<document.body.scrollLeft&&(t=document.body.scrollLeft),n<document.body.scrollTop&&(n=document.body.scrollTop),this.container.style.left=t+"px",this.container.style.top=n+"px"},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.visible&&this.container&&!this.container.contains(e.target)&&!e.ctrlKey&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.visible&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindDocumentContextMenuListener(){this.documentContextMenuListener||(this.documentContextMenuListener=e=>{this.show(e)},document.addEventListener("contextmenu",this.documentContextMenuListener))},unbindDocumentContextMenuListener(){this.documentContextMenuListener&&(document.removeEventListener("contextmenu",this.documentContextMenuListener),this.documentContextMenuListener=null)},containerRef(e){this.container=e}},components:{ContextMenuSub:b}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}("\n.p-contextmenu {\n    position: absolute;\n}\n.p-contextmenu ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n}\n.p-contextmenu .p-submenu-list {\n    position: absolute;\n    min-width: 100%;\n    z-index: 1;\n}\n.p-contextmenu .p-menuitem-link {\n    cursor: pointer;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    text-decoration: none;\n    overflow: hidden;\n    position: relative;\n}\n.p-contextmenu .p-menuitem-text {\n    line-height: 1;\n}\n.p-contextmenu .p-menuitem {\n    position: relative;\n}\n.p-contextmenu .p-menuitem-link .p-submenu-icon {\n    margin-left: auto;\n}\n.p-contextmenu-enter-from {\n    opacity: 0;\n}\n.p-contextmenu-enter-active {\n    -webkit-transition: opacity 250ms;\n    transition: opacity 250ms;\n}\n"),C.render=function(e,t,i,a,c,u){const m=n("ContextMenuSub");return s(),o(h,{to:i.appendTo},[d(l,{name:"p-contextmenu",onEnter:u.onEnter,onLeave:u.onLeave},{default:r((()=>[c.visible?(s(),o("div",f({key:0,ref:u.containerRef,class:"p-contextmenu p-component"},e.$attrs),[d(m,{model:i.model,root:!0,onLeafClick:u.onLeafClick},null,8,["model","onLeafClick"])],16)):p("",!0)])),_:1},8,["onEnter","onLeave"])],8,["to"])};export default C;
